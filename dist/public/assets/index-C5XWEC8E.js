function pI(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(r,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var yj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mI(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var s=t.default;if(typeof s=="function"){var n=function r(){var o=!1;try{o=this instanceof r}catch{}return o?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};n.prototype=s.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var Nx={exports:{}},up={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xj;function gI(){if(xj)return up;xj=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(r,o,c){var p=null;if(c!==void 0&&(p=""+c),o.key!==void 0&&(p=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:t,type:r,key:p,ref:o!==void 0?o:null,props:c}}return up.Fragment=s,up.jsx=n,up.jsxs=n,up}var vj;function yI(){return vj||(vj=1,Nx.exports=gI()),Nx.exports}var e=yI(),Cx={exports:{}},hp={},Ex={exports:{}},Tx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bj;function xI(){return bj||(bj=1,(function(t){function s(ne,re){var se=ne.length;ne.push(re);e:for(;0<se;){var je=se-1>>>1,De=ne[je];if(0<o(De,re))ne[je]=re,ne[se]=De,se=je;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var re=ne[0],se=ne.pop();if(se!==re){ne[0]=se;e:for(var je=0,De=ne.length,ge=De>>>1;je<ge;){var Z=2*(je+1)-1,fe=ne[Z],ue=Z+1,pe=ne[ue];if(0>o(fe,se))ue<De&&0>o(pe,fe)?(ne[je]=pe,ne[ue]=se,je=ue):(ne[je]=fe,ne[Z]=se,je=Z);else if(ue<De&&0>o(pe,se))ne[je]=pe,ne[ue]=se,je=ue;else break e}}return re}function o(ne,re){var se=ne.sortIndex-re.sortIndex;return se!==0?se:ne.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var p=Date,f=p.now();t.unstable_now=function(){return p.now()-f}}var A=[],h=[],l=1,g=null,v=3,m=!1,N=!1,w=!1,E=!1,F=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function K(ne){for(var re=n(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=ne)r(h),re.sortIndex=re.expirationTime,s(A,re);else break;re=n(h)}}function G(ne){if(w=!1,K(ne),!N)if(n(A)!==null)N=!0,ee||(ee=!0,ie());else{var re=n(h);re!==null&&oe(G,re.startTime-ne)}}var ee=!1,V=-1,X=5,J=-1;function he(){return E?!0:!(t.unstable_now()-J<X)}function q(){if(E=!1,ee){var ne=t.unstable_now();J=ne;var re=!0;try{e:{N=!1,w&&(w=!1,M(V),V=-1),m=!0;var se=v;try{t:{for(K(ne),g=n(A);g!==null&&!(g.expirationTime>ne&&he());){var je=g.callback;if(typeof je=="function"){g.callback=null,v=g.priorityLevel;var De=je(g.expirationTime<=ne);if(ne=t.unstable_now(),typeof De=="function"){g.callback=De,K(ne),re=!0;break t}g===n(A)&&r(A),K(ne)}else r(A);g=n(A)}if(g!==null)re=!0;else{var ge=n(h);ge!==null&&oe(G,ge.startTime-ne),re=!1}}break e}finally{g=null,v=se,m=!1}re=void 0}}finally{re?ie():ee=!1}}}var ie;if(typeof k=="function")ie=function(){k(q)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,ce=Ae.port2;Ae.port1.onmessage=q,ie=function(){ce.postMessage(null)}}else ie=function(){F(q,0)};function oe(ne,re){V=F(function(){ne(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(ne){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var se=v;v=re;try{return ne()}finally{v=se}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(ne,re){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var se=v;v=ne;try{return re()}finally{v=se}},t.unstable_scheduleCallback=function(ne,re,se){var je=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?je+se:je):se=je,ne){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=se+De,ne={id:l++,callback:re,priorityLevel:ne,startTime:se,expirationTime:De,sortIndex:-1},se>je?(ne.sortIndex=se,s(h,ne),n(A)===null&&ne===n(h)&&(w?(M(V),V=-1):w=!0,oe(G,se-je))):(ne.sortIndex=De,s(A,ne),N||m||(N=!0,ee||(ee=!0,ie()))),ne},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(ne){var re=v;return function(){var se=v;v=re;try{return ne.apply(this,arguments)}finally{v=se}}}})(Tx)),Tx}var jj;function vI(){return jj||(jj=1,Ex.exports=xI()),Ex.exports}var Fx={exports:{}},Hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wj;function bI(){if(wj)return Hn;wj=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),p=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function m(ge){return ge===null||typeof ge!="object"?null:(ge=v&&ge[v]||ge["@@iterator"],typeof ge=="function"?ge:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function F(ge,Z,fe){this.props=ge,this.context=Z,this.refs=E,this.updater=fe||N}F.prototype.isReactComponent={},F.prototype.setState=function(ge,Z){if(typeof ge!="object"&&typeof ge!="function"&&ge!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ge,Z,"setState")},F.prototype.forceUpdate=function(ge){this.updater.enqueueForceUpdate(this,ge,"forceUpdate")};function M(){}M.prototype=F.prototype;function k(ge,Z,fe){this.props=ge,this.context=Z,this.refs=E,this.updater=fe||N}var K=k.prototype=new M;K.constructor=k,w(K,F.prototype),K.isPureReactComponent=!0;var G=Array.isArray;function ee(){}var V={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function J(ge,Z,fe){var ue=fe.ref;return{$$typeof:t,type:ge,key:Z,ref:ue!==void 0?ue:null,props:fe}}function he(ge,Z){return J(ge.type,Z,ge.props)}function q(ge){return typeof ge=="object"&&ge!==null&&ge.$$typeof===t}function ie(ge){var Z={"=":"=0",":":"=2"};return"$"+ge.replace(/[=:]/g,function(fe){return Z[fe]})}var Ae=/\/+/g;function ce(ge,Z){return typeof ge=="object"&&ge!==null&&ge.key!=null?ie(""+ge.key):Z.toString(36)}function oe(ge){switch(ge.status){case"fulfilled":return ge.value;case"rejected":throw ge.reason;default:switch(typeof ge.status=="string"?ge.then(ee,ee):(ge.status="pending",ge.then(function(Z){ge.status==="pending"&&(ge.status="fulfilled",ge.value=Z)},function(Z){ge.status==="pending"&&(ge.status="rejected",ge.reason=Z)})),ge.status){case"fulfilled":return ge.value;case"rejected":throw ge.reason}}throw ge}function ne(ge,Z,fe,ue,pe){var Ce=typeof ge;(Ce==="undefined"||Ce==="boolean")&&(ge=null);var Ne=!1;if(ge===null)Ne=!0;else switch(Ce){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(ge.$$typeof){case t:case s:Ne=!0;break;case l:return Ne=ge._init,ne(Ne(ge._payload),Z,fe,ue,pe)}}if(Ne)return pe=pe(ge),Ne=ue===""?"."+ce(ge,0):ue,G(pe)?(fe="",Ne!=null&&(fe=Ne.replace(Ae,"$&/")+"/"),ne(pe,Z,fe,"",function(Te){return Te})):pe!=null&&(q(pe)&&(pe=he(pe,fe+(pe.key==null||ge&&ge.key===pe.key?"":(""+pe.key).replace(Ae,"$&/")+"/")+Ne)),Z.push(pe)),1;Ne=0;var ye=ue===""?".":ue+":";if(G(ge))for(var we=0;we<ge.length;we++)ue=ge[we],Ce=ye+ce(ue,we),Ne+=ne(ue,Z,fe,Ce,pe);else if(we=m(ge),typeof we=="function")for(ge=we.call(ge),we=0;!(ue=ge.next()).done;)ue=ue.value,Ce=ye+ce(ue,we++),Ne+=ne(ue,Z,fe,Ce,pe);else if(Ce==="object"){if(typeof ge.then=="function")return ne(oe(ge),Z,fe,ue,pe);throw Z=String(ge),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(ge).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function re(ge,Z,fe){if(ge==null)return ge;var ue=[],pe=0;return ne(ge,ue,"","",function(Ce){return Z.call(fe,Ce,pe++)}),ue}function se(ge){if(ge._status===-1){var Z=ge._result;Z=Z(),Z.then(function(fe){(ge._status===0||ge._status===-1)&&(ge._status=1,ge._result=fe)},function(fe){(ge._status===0||ge._status===-1)&&(ge._status=2,ge._result=fe)}),ge._status===-1&&(ge._status=0,ge._result=Z)}if(ge._status===1)return ge._result.default;throw ge._result}var je=typeof reportError=="function"?reportError:function(ge){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ge=="object"&&ge!==null&&typeof ge.message=="string"?String(ge.message):String(ge),error:ge});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ge);return}console.error(ge)},De={map:re,forEach:function(ge,Z,fe){re(ge,function(){Z.apply(this,arguments)},fe)},count:function(ge){var Z=0;return re(ge,function(){Z++}),Z},toArray:function(ge){return re(ge,function(Z){return Z})||[]},only:function(ge){if(!q(ge))throw Error("React.Children.only expected to receive a single React element child.");return ge}};return Hn.Activity=g,Hn.Children=De,Hn.Component=F,Hn.Fragment=n,Hn.Profiler=o,Hn.PureComponent=k,Hn.StrictMode=r,Hn.Suspense=A,Hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Hn.__COMPILER_RUNTIME={__proto__:null,c:function(ge){return V.H.useMemoCache(ge)}},Hn.cache=function(ge){return function(){return ge.apply(null,arguments)}},Hn.cacheSignal=function(){return null},Hn.cloneElement=function(ge,Z,fe){if(ge==null)throw Error("The argument must be a React element, but you passed "+ge+".");var ue=w({},ge.props),pe=ge.key;if(Z!=null)for(Ce in Z.key!==void 0&&(pe=""+Z.key),Z)!X.call(Z,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&Z.ref===void 0||(ue[Ce]=Z[Ce]);var Ce=arguments.length-2;if(Ce===1)ue.children=fe;else if(1<Ce){for(var Ne=Array(Ce),ye=0;ye<Ce;ye++)Ne[ye]=arguments[ye+2];ue.children=Ne}return J(ge.type,pe,ue)},Hn.createContext=function(ge){return ge={$$typeof:p,_currentValue:ge,_currentValue2:ge,_threadCount:0,Provider:null,Consumer:null},ge.Provider=ge,ge.Consumer={$$typeof:c,_context:ge},ge},Hn.createElement=function(ge,Z,fe){var ue,pe={},Ce=null;if(Z!=null)for(ue in Z.key!==void 0&&(Ce=""+Z.key),Z)X.call(Z,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(pe[ue]=Z[ue]);var Ne=arguments.length-2;if(Ne===1)pe.children=fe;else if(1<Ne){for(var ye=Array(Ne),we=0;we<Ne;we++)ye[we]=arguments[we+2];pe.children=ye}if(ge&&ge.defaultProps)for(ue in Ne=ge.defaultProps,Ne)pe[ue]===void 0&&(pe[ue]=Ne[ue]);return J(ge,Ce,pe)},Hn.createRef=function(){return{current:null}},Hn.forwardRef=function(ge){return{$$typeof:f,render:ge}},Hn.isValidElement=q,Hn.lazy=function(ge){return{$$typeof:l,_payload:{_status:-1,_result:ge},_init:se}},Hn.memo=function(ge,Z){return{$$typeof:h,type:ge,compare:Z===void 0?null:Z}},Hn.startTransition=function(ge){var Z=V.T,fe={};V.T=fe;try{var ue=ge(),pe=V.S;pe!==null&&pe(fe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ee,je)}catch(Ce){je(Ce)}finally{Z!==null&&fe.types!==null&&(Z.types=fe.types),V.T=Z}},Hn.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Hn.use=function(ge){return V.H.use(ge)},Hn.useActionState=function(ge,Z,fe){return V.H.useActionState(ge,Z,fe)},Hn.useCallback=function(ge,Z){return V.H.useCallback(ge,Z)},Hn.useContext=function(ge){return V.H.useContext(ge)},Hn.useDebugValue=function(){},Hn.useDeferredValue=function(ge,Z){return V.H.useDeferredValue(ge,Z)},Hn.useEffect=function(ge,Z){return V.H.useEffect(ge,Z)},Hn.useEffectEvent=function(ge){return V.H.useEffectEvent(ge)},Hn.useId=function(){return V.H.useId()},Hn.useImperativeHandle=function(ge,Z,fe){return V.H.useImperativeHandle(ge,Z,fe)},Hn.useInsertionEffect=function(ge,Z){return V.H.useInsertionEffect(ge,Z)},Hn.useLayoutEffect=function(ge,Z){return V.H.useLayoutEffect(ge,Z)},Hn.useMemo=function(ge,Z){return V.H.useMemo(ge,Z)},Hn.useOptimistic=function(ge,Z){return V.H.useOptimistic(ge,Z)},Hn.useReducer=function(ge,Z,fe){return V.H.useReducer(ge,Z,fe)},Hn.useRef=function(ge){return V.H.useRef(ge)},Hn.useState=function(ge){return V.H.useState(ge)},Hn.useSyncExternalStore=function(ge,Z,fe){return V.H.useSyncExternalStore(ge,Z,fe)},Hn.useTransition=function(){return V.H.useTransition()},Hn.version="19.2.0",Hn}var Sj;function hy(){return Sj||(Sj=1,Fx.exports=bI()),Fx.exports}var Ix={exports:{}},Oo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bj;function jI(){if(Bj)return Oo;Bj=1;var t=hy();function s(A){var h="https://react.dev/errors/"+A;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)h+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+A+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(A,h,l){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:g==null?null:""+g,children:A,containerInfo:h,implementation:l}}var p=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(A,h){if(A==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Oo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Oo.createPortal=function(A,h){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(s(299));return c(A,h,null,l)},Oo.flushSync=function(A){var h=p.T,l=r.p;try{if(p.T=null,r.p=2,A)return A()}finally{p.T=h,r.p=l,r.d.f()}},Oo.preconnect=function(A,h){typeof A=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(A,h))},Oo.prefetchDNS=function(A){typeof A=="string"&&r.d.D(A)},Oo.preinit=function(A,h){if(typeof A=="string"&&h&&typeof h.as=="string"){var l=h.as,g=f(l,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,m=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;l==="style"?r.d.S(A,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:m}):l==="script"&&r.d.X(A,{crossOrigin:g,integrity:v,fetchPriority:m,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Oo.preinitModule=function(A,h){if(typeof A=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var l=f(h.as,h.crossOrigin);r.d.M(A,{crossOrigin:l,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(A)},Oo.preload=function(A,h){if(typeof A=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var l=h.as,g=f(l,h.crossOrigin);r.d.L(A,l,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Oo.preloadModule=function(A,h){if(typeof A=="string")if(h){var l=f(h.as,h.crossOrigin);r.d.m(A,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:l,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(A)},Oo.requestFormReset=function(A){r.d.r(A)},Oo.unstable_batchedUpdates=function(A,h){return A(h)},Oo.useFormState=function(A,h,l){return p.H.useFormState(A,h,l)},Oo.useFormStatus=function(){return p.H.useHostTransitionStatus()},Oo.version="19.2.0",Oo}var Nj;function vB(){if(Nj)return Ix.exports;Nj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Ix.exports=jI(),Ix.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cj;function wI(){if(Cj)return hp;Cj=1;var t=vI(),s=hy(),n=vB();function r(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)i+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var i=a,d=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(d=i.return),a=i.return;while(a)}return i.tag===3?d:null}function p(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function f(a){if(a.tag===31){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function A(a){if(c(a)!==a)throw Error(r(188))}function h(a){var i=a.alternate;if(!i){if(i=c(a),i===null)throw Error(r(188));return i!==a?null:a}for(var d=a,y=i;;){var _=d.return;if(_===null)break;var H=_.alternate;if(H===null){if(y=_.return,y!==null){d=y;continue}break}if(_.child===H.child){for(H=_.child;H;){if(H===d)return A(_),a;if(H===y)return A(_),i;H=H.sibling}throw Error(r(188))}if(d.return!==y.return)d=_,y=H;else{for(var le=!1,Oe=_.child;Oe;){if(Oe===d){le=!0,d=_,y=H;break}if(Oe===y){le=!0,y=_,d=H;break}Oe=Oe.sibling}if(!le){for(Oe=H.child;Oe;){if(Oe===d){le=!0,d=H,y=_;break}if(Oe===y){le=!0,y=H,d=_;break}Oe=Oe.sibling}if(!le)throw Error(r(189))}}if(d.alternate!==y)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:i}function l(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=l(a),i!==null)return i;a=a.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),k=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function ie(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var Ae=Symbol.for("react.client.reference");function ce(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Ae?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case F:return"Profiler";case E:return"StrictMode";case G:return"Suspense";case ee:return"SuspenseList";case J:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case N:return"Portal";case k:return a.displayName||"Context";case M:return(a._context.displayName||"Context")+".Consumer";case K:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return i=a.displayName||null,i!==null?i:ce(a.type)||"Memo";case X:i=a._payload,a=a._init;try{return ce(a(i))}catch{}}return null}var oe=Array.isArray,ne=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},je=[],De=-1;function ge(a){return{current:a}}function Z(a){0>De||(a.current=je[De],je[De]=null,De--)}function fe(a,i){De++,je[De]=a.current,a.current=i}var ue=ge(null),pe=ge(null),Ce=ge(null),Ne=ge(null);function ye(a,i){switch(fe(Ce,i),fe(pe,a),fe(ue,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?k1(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=k1(i),a=H1(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Z(ue),fe(ue,a)}function we(){Z(ue),Z(pe),Z(Ce)}function Te(a){a.memoizedState!==null&&fe(Ne,a);var i=ue.current,d=H1(i,a.type);i!==d&&(fe(pe,a),fe(ue,d))}function qe(a){pe.current===a&&(Z(ue),Z(pe)),Ne.current===a&&(Z(Ne),lp._currentValue=se)}var ve,Ge;function at(a){if(ve===void 0)try{throw Error()}catch(d){var i=d.stack.trim().match(/\n( *(at )?)/);ve=i&&i[1]||"",Ge=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+a+Ge}var Se=!1;function vt(a,i){if(!a||Se)return"";Se=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(i){var Zt=function(){throw Error()};if(Object.defineProperty(Zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Zt,[])}catch(Ut){var Ft=Ut}Reflect.construct(a,[],Zt)}else{try{Zt.call()}catch(Ut){Ft=Ut}a.call(Zt.prototype)}}else{try{throw Error()}catch(Ut){Ft=Ut}(Zt=a())&&typeof Zt.catch=="function"&&Zt.catch(function(){})}}catch(Ut){if(Ut&&Ft&&typeof Ut.stack=="string")return[Ut.stack,Ft.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=y.DetermineComponentFrameRoot(),le=H[0],Oe=H[1];if(le&&Oe){var et=le.split(`
`),Tt=Oe.split(`
`);for(_=y=0;y<et.length&&!et[y].includes("DetermineComponentFrameRoot");)y++;for(;_<Tt.length&&!Tt[_].includes("DetermineComponentFrameRoot");)_++;if(y===et.length||_===Tt.length)for(y=et.length-1,_=Tt.length-1;1<=y&&0<=_&&et[y]!==Tt[_];)_--;for(;1<=y&&0<=_;y--,_--)if(et[y]!==Tt[_]){if(y!==1||_!==1)do if(y--,_--,0>_||et[y]!==Tt[_]){var Kt=`
`+et[y].replace(" at new "," at ");return a.displayName&&Kt.includes("<anonymous>")&&(Kt=Kt.replace("<anonymous>",a.displayName)),Kt}while(1<=y&&0<=_);break}}}finally{Se=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?at(d):""}function ht(a,i){switch(a.tag){case 26:case 27:case 5:return at(a.type);case 16:return at("Lazy");case 13:return a.child!==i&&i!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return vt(a.type,!1);case 11:return vt(a.type.render,!1);case 1:return vt(a.type,!0);case 31:return at("Activity");default:return""}}function pt(a){try{var i="",d=null;do i+=ht(a,d),d=a,a=a.return;while(a);return i}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Ze=Object.prototype.hasOwnProperty,Ht=t.unstable_scheduleCallback,At=t.unstable_cancelCallback,Ct=t.unstable_shouldYield,It=t.unstable_requestPaint,Wt=t.unstable_now,Es=t.unstable_getCurrentPriorityLevel,Ss=t.unstable_ImmediatePriority,_s=t.unstable_UserBlockingPriority,$e=t.unstable_NormalPriority,ke=t.unstable_LowPriority,it=t.unstable_IdlePriority,tt=t.log,Jt=t.unstable_setDisableYieldValue,Qt=null,ss=null;function dt(a){if(typeof tt=="function"&&Jt(a),ss&&typeof ss.setStrictMode=="function")try{ss.setStrictMode(Qt,a)}catch{}}var qt=Math.clz32?Math.clz32:ns,Vt=Math.log,vs=Math.LN2;function ns(a){return a>>>=0,a===0?32:31-(Vt(a)/vs|0)|0}var js=256,ln=262144,ys=4194304;function gt(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Dt(a,i,d){var y=a.pendingLanes;if(y===0)return 0;var _=0,H=a.suspendedLanes,le=a.pingedLanes;a=a.warmLanes;var Oe=y&134217727;return Oe!==0?(y=Oe&~H,y!==0?_=gt(y):(le&=Oe,le!==0?_=gt(le):d||(d=Oe&~a,d!==0&&(_=gt(d))))):(Oe=y&~H,Oe!==0?_=gt(Oe):le!==0?_=gt(le):d||(d=y&~a,d!==0&&(_=gt(d)))),_===0?0:i!==0&&i!==_&&(i&H)===0&&(H=_&-_,d=i&-i,H>=d||H===32&&(d&4194048)!==0)?i:_}function xt(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function rs(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ps(){var a=ys;return ys<<=1,(ys&62914560)===0&&(ys=4194304),a}function yn(a){for(var i=[],d=0;31>d;d++)i.push(a);return i}function is(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Fs(a,i,d,y,_,H){var le=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var Oe=a.entanglements,et=a.expirationTimes,Tt=a.hiddenUpdates;for(d=le&~d;0<d;){var Kt=31-qt(d),Zt=1<<Kt;Oe[Kt]=0,et[Kt]=-1;var Ft=Tt[Kt];if(Ft!==null)for(Tt[Kt]=null,Kt=0;Kt<Ft.length;Kt++){var Ut=Ft[Kt];Ut!==null&&(Ut.lane&=-536870913)}d&=~Zt}y!==0&&Ns(a,y,0),H!==0&&_===0&&a.tag!==0&&(a.suspendedLanes|=H&~(le&~i))}function Ns(a,i,d){a.pendingLanes|=i,a.suspendedLanes&=~i;var y=31-qt(i);a.entangledLanes|=i,a.entanglements[y]=a.entanglements[y]|1073741824|d&261930}function Nn(a,i){var d=a.entangledLanes|=i;for(a=a.entanglements;d;){var y=31-qt(d),_=1<<y;_&i|a[y]&i&&(a[y]|=i),d&=~_}}function Cs(a,i){var d=i&-i;return d=(d&42)!==0?1:zt(d),(d&(a.suspendedLanes|i))!==0?0:d}function zt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function os(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ps(){var a=re.p;return a!==0?a:(a=window.event,a===void 0?32:dj(a.type))}function Ye(a,i){var d=re.p;try{return re.p=a,i()}finally{re.p=d}}var St=Math.random().toString(36).slice(2),Rt="__reactFiber$"+St,us="__reactProps$"+St,As="__reactContainer$"+St,as="__reactEvents$"+St,bs="__reactListeners$"+St,cs="__reactHandles$"+St,Us="__reactResources$"+St,an="__reactMarker$"+St;function Mr(a){delete a[Rt],delete a[us],delete a[as],delete a[bs],delete a[cs]}function Un(a){var i=a[Rt];if(i)return i;for(var d=a.parentNode;d;){if(i=d[As]||d[Rt]){if(d=i.alternate,i.child!==null||d!==null&&d.child!==null)for(a=W1(a);a!==null;){if(d=a[Rt])return d;a=W1(a)}return i}a=d,d=a.parentNode}return null}function Ks(a){if(a=a[Rt]||a[As]){var i=a.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return a}return null}function Pn(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(r(33))}function nr(a){var i=a[Us];return i||(i=a[Us]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Yn(a){a[an]=!0}var dn=new Set,vn={};function jn(a,i){Jn(a,i),Jn(a+"Capture",i)}function Jn(a,i){for(vn[a]=i,a=0;a<i.length;a++)dn.add(i[a])}var Zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ir={},Vn={};function Ts(a){return Ze.call(Vn,a)?!0:Ze.call(Ir,a)?!1:Zr.test(a)?Vn[a]=!0:(Ir[a]=!0,!1)}function Ls(a,i,d){if(Ts(i))if(d===null)a.removeAttribute(i);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var y=i.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+d)}}function ts(a,i,d){if(d===null)a.removeAttribute(i);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+d)}}function Qs(a,i,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(i,d,""+y)}}function ls(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function be(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function xe(a,i,d){var y=Object.getOwnPropertyDescriptor(a.constructor.prototype,i);if(!a.hasOwnProperty(i)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var _=y.get,H=y.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return _.call(this)},set:function(le){d=""+le,H.call(this,le)}}),Object.defineProperty(a,i,{enumerable:y.enumerable}),{getValue:function(){return d},setValue:function(le){d=""+le},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function lt(a){if(!a._valueTracker){var i=be(a)?"checked":"value";a._valueTracker=xe(a,i,""+a[i])}}function Je(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var d=i.getValue(),y="";return a&&(y=be(a)?a.checked?"true":"false":a.value),a=y,a!==d?(i.setValue(a),!0):!1}function fs(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var wn=/[\n"\\]/g;function zn(a){return a.replace(wn,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function di(a,i,d,y,_,H,le,Oe){a.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?a.type=le:a.removeAttribute("type"),i!=null?le==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+ls(i)):a.value!==""+ls(i)&&(a.value=""+ls(i)):le!=="submit"&&le!=="reset"||a.removeAttribute("value"),i!=null?ka(a,le,ls(i)):d!=null?ka(a,le,ls(d)):y!=null&&a.removeAttribute("value"),_==null&&H!=null&&(a.defaultChecked=!!H),_!=null&&(a.checked=_&&typeof _!="function"&&typeof _!="symbol"),Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"?a.name=""+ls(Oe):a.removeAttribute("name")}function Oi(a,i,d,y,_,H,le,Oe){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(a.type=H),i!=null||d!=null){if(!(H!=="submit"&&H!=="reset"||i!=null)){lt(a);return}d=d!=null?""+ls(d):"",i=i!=null?""+ls(i):d,Oe||i===a.value||(a.value=i),a.defaultValue=i}y=y??_,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=Oe?a.checked:!!y,a.defaultChecked=!!y,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(a.name=le),lt(a)}function ka(a,i,d){i==="number"&&fs(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function Rr(a,i,d,y){if(a=a.options,i){i={};for(var _=0;_<d.length;_++)i["$"+d[_]]=!0;for(d=0;d<a.length;d++)_=i.hasOwnProperty("$"+a[d].value),a[d].selected!==_&&(a[d].selected=_),_&&y&&(a[d].defaultSelected=!0)}else{for(d=""+ls(d),i=null,_=0;_<a.length;_++){if(a[_].value===d){a[_].selected=!0,y&&(a[_].defaultSelected=!0);return}i!==null||a[_].disabled||(i=a[_])}i!==null&&(i.selected=!0)}}function Ha(a,i,d){if(i!=null&&(i=""+ls(i),i!==a.value&&(a.value=i),d==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=d!=null?""+ls(d):""}function Na(a,i,d,y){if(i==null){if(y!=null){if(d!=null)throw Error(r(92));if(oe(y)){if(1<y.length)throw Error(r(93));y=y[0]}d=y}d==null&&(d=""),i=d}d=ls(i),a.defaultValue=d,y=a.textContent,y===d&&y!==""&&y!==null&&(a.value=y),lt(a)}function $r(a,i){if(i){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=i;return}}a.textContent=i}var Oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vi(a,i,d){var y=i.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?y?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":y?a.setProperty(i,d):typeof d!="number"||d===0||Oa.has(i)?i==="float"?a.cssFloat=d:a[i]=(""+d).trim():a[i]=d+"px"}function Ui(a,i,d){if(i!=null&&typeof i!="object")throw Error(r(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||i!=null&&i.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var _ in i)y=i[_],i.hasOwnProperty(_)&&d[_]!==y&&vi(a,_,y)}else for(var H in i)i.hasOwnProperty(H)&&vi(a,H,i[H])}function bi(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tn(a){return hi.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function sn(){}var ks=null;function qs(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Js=null,ms=null;function $n(a){var i=Ks(a);if(i&&(a=i.stateNode)){var d=a[us]||null;e:switch(a=i.stateNode,i.type){case"input":if(di(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),i=d.name,d.type==="radio"&&i!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+zn(""+i)+'"][type="radio"]'),i=0;i<d.length;i++){var y=d[i];if(y!==a&&y.form===a.form){var _=y[us]||null;if(!_)throw Error(r(90));di(y,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(i=0;i<d.length;i++)y=d[i],y.form===a.form&&Je(y)}break e;case"textarea":Ha(a,d.value,d.defaultValue);break e;case"select":i=d.value,i!=null&&Rr(a,!!d.multiple,i,!1)}}}var qr=!1;function Ka(a,i,d){if(qr)return a(i,d);qr=!0;try{var y=a(i);return y}finally{if(qr=!1,(Js!==null||ms!==null)&&(Xi(),Js&&(i=Js,a=ms,ms=Js=null,$n(i),a)))for(i=0;i<a.length;i++)$n(a[i])}}function Ca(a,i){var d=a.stateNode;if(d===null)return null;var y=d[us]||null;if(y===null)return null;d=y[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,i,typeof d));return d}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bn=!1;if(on)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Bn=!1}var Zn=null,pa=null,ma=null;function x(){if(ma)return ma;var a,i=pa,d=i.length,y,_="value"in Zn?Zn.value:Zn.textContent,H=_.length;for(a=0;a<d&&i[a]===_[a];a++);var le=d-a;for(y=1;y<=le&&i[d-y]===_[H-y];y++);return ma=_.slice(a,1<y?1-y:void 0)}function j(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function u(){return!0}function b(){return!1}function S(a){function i(d,y,_,H,le){this._reactName=d,this._targetInst=_,this.type=y,this.nativeEvent=H,this.target=le,this.currentTarget=null;for(var Oe in a)a.hasOwnProperty(Oe)&&(d=a[Oe],this[Oe]=d?d(H):H[Oe]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?u:b,this.isPropagationStopped=b,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=u)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=u)},persist:function(){},isPersistent:u}),i}var R={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B=S(R),D=g({},R,{view:0,detail:0}),Q=S(D),$,te,Ue,He=g({},D,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ue&&(Ue&&a.type==="mousemove"?($=a.screenX-Ue.screenX,te=a.screenY-Ue.screenY):te=$=0,Ue=a),$)},movementY:function(a){return"movementY"in a?a.movementY:te}}),st=S(He),Bt=g({},He,{dataTransfer:0}),Lt=S(Bt),$t=g({},D,{relatedTarget:0}),gs=S($t),nn=g({},R,{animationName:0,elapsedTime:0,pseudoElement:0}),z=S(nn),me=g({},R,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Qe=S(me),We=g({},R,{data:0}),ut=S(We),_t={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},es={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rn(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=Gs[a])?!!i[a]:!1}function Cn(){return rn}var _n=g({},D,{key:function(a){if(a.key){var i=_t[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=j(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?es[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(a){return a.type==="keypress"?j(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?j(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),yr=S(_n),ga=g({},He,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ua=S(ga),_r=g({},D,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn}),ri=S(_r),za=g({},R,{propertyName:0,elapsedTime:0,pseudoElement:0}),ji=S(za),xl=g({},He,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ko=S(xl),vl=g({},R,{newState:0,oldState:0}),SA=S(vl),kc=[9,13,27,32],mo=on&&"CompositionEvent"in window,go=null;on&&"documentMode"in document&&(go=document.documentMode);var Pl=on&&"TextEvent"in window&&!go,ro=on&&(!mo||go&&8<go&&11>=go),ya=" ",rr=!1;function kl(a,i){switch(a){case"keyup":return kc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ho=!1;function Ga(a,i){switch(a){case"compositionend":return Hl(i);case"keypress":return i.which!==32?null:(rr=!0,ya);case"textInput":return a=i.data,a===ya&&rr?null:a;default:return null}}function fi(a,i){if(Ho)return a==="compositionend"||!mo&&kl(a,i)?(a=x(),ma=pa=Zn=null,Ho=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ro&&i.locale!=="ko"?null:i.data;default:return null}}var Hc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yo(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!Hc[a.type]:i==="textarea"}function Sr(a,i,d,y){Js?ms?ms.push(y):ms=[y]:Js=y,i=Pm(i,"onChange"),0<i.length&&(d=new B("onChange","change",null,d,y),a.push({event:d,listeners:i}))}var xo=null,na=null;function hc(a){L1(a,0)}function pi(a){var i=Pn(a);if(Je(i))return a}function vo(a,i){if(a==="change")return i}var Gn=!1;if(on){var Li;if(on){var Ko="oninput"in document;if(!Ko){var zo=document.createElement("div");zo.setAttribute("oninput","return;"),Ko=typeof zo.oninput=="function"}Li=Ko}else Li=!1;Gn=Li&&(!document.documentMode||9<document.documentMode)}function tl(){xo&&(xo.detachEvent("onpropertychange",bl),na=xo=null)}function bl(a){if(a.propertyName==="value"&&pi(na)){var i=[];Sr(i,na,a,qs(a)),Ka(hc,i)}}function fc(a,i,d){a==="focusin"?(tl(),xo=i,na=d,xo.attachEvent("onpropertychange",bl)):a==="focusout"&&tl()}function Ea(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return pi(na)}function Gi(a,i){if(a==="click")return pi(i)}function wi(a,i){if(a==="input"||a==="change")return pi(i)}function Si(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var lr=typeof Object.is=="function"?Object.is:Si;function Di(a,i){if(lr(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var d=Object.keys(a),y=Object.keys(i);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var _=d[y];if(!Ze.call(i,_)||!lr(a[_],i[_]))return!1}return!0}function pc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function mc(a,i){var d=pc(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a<=i&&y>=i)return{node:d,offset:i-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=pc(d)}}function Go(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?Go(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function sl(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=fs(a.document);i instanceof a.HTMLIFrameElement;){try{var d=typeof i.contentWindow.location.href=="string"}catch{d=!1}if(d)a=i.contentWindow;else break;i=fs(a.document)}return i}function nl(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var Vo=on&&"documentMode"in document&&11>=document.documentMode,La=null,jl=null,Qi=null,Vi=!1;function Br(a,i,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Vi||La==null||La!==fs(y)||(y=La,"selectionStart"in y&&nl(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Qi&&Di(Qi,y)||(Qi=y,y=Pm(jl,"onSelect"),0<y.length&&(i=new B("onSelect","select",null,i,d),a.push({event:i,listeners:y}),i.target=La)))}function xr(a,i){var d={};return d[a.toLowerCase()]=i.toLowerCase(),d["Webkit"+a]="webkit"+i,d["Moz"+a]="moz"+i,d}var ea={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},Or={},$o={};on&&($o=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function qo(a){if(Or[a])return Or[a];if(!ea[a])return a;var i=ea[a],d;for(d in i)if(i.hasOwnProperty(d)&&d in $o)return Or[a]=i[d];return a}var gc=qo("animationend"),Kl=qo("animationiteration"),au=qo("animationstart"),iu=qo("transitionrun"),ou=qo("transitionstart"),lu=qo("transitioncancel"),nd=qo("transitionend"),rd=new Map,zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zl.push("scrollEnd");function ao(a,i){rd.set(a,i),jn(i,[a])}var Kc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},io=[],rl=0,ad=0;function BA(){for(var a=rl,i=ad=rl=0;i<a;){var d=io[i];io[i++]=null;var y=io[i];io[i++]=null;var _=io[i];io[i++]=null;var H=io[i];if(io[i++]=null,y!==null&&_!==null){var le=y.pending;le===null?_.next=_:(_.next=le.next,le.next=_),y.pending=_}H!==0&&NA(d,_,H)}}function yc(a,i,d,y){io[rl++]=a,io[rl++]=i,io[rl++]=d,io[rl++]=y,ad|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function id(a,i,d,y){return yc(a,i,d,y),Mi(a)}function al(a,i){return yc(a,null,null,i),Mi(a)}function NA(a,i,d){a.lanes|=d;var y=a.alternate;y!==null&&(y.lanes|=d);for(var _=!1,H=a.return;H!==null;)H.childLanes|=d,y=H.alternate,y!==null&&(y.childLanes|=d),H.tag===22&&(a=H.stateNode,a===null||a._visibility&1||(_=!0)),a=H,H=H.return;return a.tag===3?(H=a.stateNode,_&&i!==null&&(_=31-qt(d),a=H.hiddenUpdates,y=a[_],y===null?a[_]=[i]:y.push(i),i.lane=d|536870912),H):null}function Mi(a){if(50<tr)throw tr=0,ur=null,Error(r(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Bi={};function od(a,i,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(a,i,d,y){return new od(a,i,d,y)}function wl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function bo(a,i){var d=a.alternate;return d===null?(d=_i(a.tag,i,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=i,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,i=a.dependencies,d.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function CA(a,i){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,i=d.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function Sl(a,i,d,y,_,H){var le=0;if(y=a,typeof a=="function")wl(a)&&(le=1);else if(typeof a=="string")le=nI(a,d,ue.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case J:return a=_i(31,d,i,_),a.elementType=J,a.lanes=H,a;case w:return Gl(d.children,_,H,i);case E:le=8,_|=24;break;case F:return a=_i(12,d,i,_|2),a.elementType=F,a.lanes=H,a;case G:return a=_i(13,d,i,_),a.elementType=G,a.lanes=H,a;case ee:return a=_i(19,d,i,_),a.elementType=ee,a.lanes=H,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case k:le=10;break e;case M:le=9;break e;case K:le=11;break e;case V:le=14;break e;case X:le=16,y=null;break e}le=29,d=Error(r(130,a===null?"null":typeof a,"")),y=null}return i=_i(le,d,i,_),i.elementType=a,i.type=y,i.lanes=H,i}function Gl(a,i,d,y){return a=_i(7,a,y,i),a.lanes=d,a}function EA(a,i,d){return a=_i(6,a,null,i),a.lanes=d,a}function ld(a){var i=_i(18,null,null,0);return i.stateNode=a,i}function zc(a,i,d){return i=_i(4,a.children!==null?a.children:[],a.key,i),i.lanes=d,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var xc=new WeakMap;function jo(a,i){if(typeof a=="object"&&a!==null){var d=xc.get(a);return d!==void 0?d:(i={value:a,source:i,stack:pt(i)},xc.set(a,i),i)}return{value:a,source:i,stack:pt(i)}}var Gc=[],vc=0,cd=null,Vl=0,wo=[],So=0,$l=null,Bo=1,$i="";function oo(a,i){Gc[vc++]=Vl,Gc[vc++]=cd,cd=a,Vl=i}function lh(a,i,d){wo[So++]=Bo,wo[So++]=$i,wo[So++]=$l,$l=a;var y=Bo;a=$i;var _=32-qt(y)-1;y&=~(1<<_),d+=1;var H=32-qt(i)+_;if(30<H){var le=_-_%5;H=(y&(1<<le)-1).toString(32),y>>=le,_-=le,Bo=1<<32-qt(i)+_|d<<_|y,$i=H+a}else Bo=1<<H|d<<_|y,$i=a}function cu(a){a.return!==null&&(oo(a,1),lh(a,1,0))}function Ad(a){for(;a===cd;)cd=Gc[--vc],Gc[vc]=null,Vl=Gc[--vc],Gc[vc]=null;for(;a===$l;)$l=wo[--So],wo[So]=null,$i=wo[--So],wo[So]=null,Bo=wo[--So],wo[So]=null}function ch(a,i){wo[So++]=Bo,wo[So++]=$i,wo[So++]=$l,Bo=i.id,$i=i.overflow,$l=a}var Ni=null,ra=null,ar=!1,qi=null,Ta=!1,eo=Error(r(519));function ql(a){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bl(jo(i,a)),eo}function Au(a){var i=a.stateNode,d=a.type,y=a.memoizedProps;switch(i[Rt]=a,i[us]=y,d){case"dialog":br("cancel",i),br("close",i);break;case"iframe":case"object":case"embed":br("load",i);break;case"video":case"audio":for(d=0;d<np.length;d++)br(np[d],i);break;case"source":br("error",i);break;case"img":case"image":case"link":br("error",i),br("load",i);break;case"details":br("toggle",i);break;case"input":br("invalid",i),Oi(i,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":br("invalid",i);break;case"textarea":br("invalid",i),Na(i,y.value,y.defaultValue,y.children)}d=y.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||i.textContent===""+d||y.suppressHydrationWarning===!0||_1(i.textContent,d)?(y.popover!=null&&(br("beforetoggle",i),br("toggle",i)),y.onScroll!=null&&br("scroll",i),y.onScrollEnd!=null&&br("scrollend",i),y.onClick!=null&&(i.onclick=sn),i=!0):i=!1,i||ql(a,!0)}function il(a){for(Ni=a.return;Ni;)switch(Ni.tag){case 5:case 31:case 13:Ta=!1;return;case 27:case 3:Ta=!0;return;default:Ni=Ni.return}}function Ci(a){if(a!==Ni)return!1;if(!ar)return il(a),ar=!0,!1;var i=a.tag,d;if((d=i!==3&&i!==27)&&((d=i===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||dx(a.type,a.memoizedProps)),d=!d),d&&ra&&ql(a),il(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));ra=q1(a)}else if(i===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));ra=q1(a)}else i===27?(i=ra,Rd(a.type)?(a=mx,mx=null,ra=a):ra=i):ra=Ni?rc(a.stateNode.nextSibling):null;return!0}function bc(){ra=Ni=null,ar=!1}function TA(){var a=qi;return a!==null&&(rt===null?rt=a:rt.push.apply(rt,a),qi=null),a}function Bl(a){qi===null?qi=[a]:qi.push(a)}var dd=ge(null),Wl=null,ol=null;function Yl(a,i,d){fe(dd,i._currentValue),i._currentValue=d}function No(a){a._currentValue=dd.current,Z(dd)}function Vc(a,i,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,y!==null&&(y.childLanes|=i)):y!==null&&(y.childLanes&i)!==i&&(y.childLanes|=i),a===d)break;a=a.return}}function ll(a,i,d,y){var _=a.child;for(_!==null&&(_.return=a);_!==null;){var H=_.dependencies;if(H!==null){var le=_.child;H=H.firstContext;e:for(;H!==null;){var Oe=H;H=_;for(var et=0;et<i.length;et++)if(Oe.context===i[et]){H.lanes|=d,Oe=H.alternate,Oe!==null&&(Oe.lanes|=d),Vc(H.return,d,a),y||(le=null);break e}H=Oe.next}}else if(_.tag===18){if(le=_.return,le===null)throw Error(r(341));le.lanes|=d,H=le.alternate,H!==null&&(H.lanes|=d),Vc(le,d,a),le=null}else le=_.child;if(le!==null)le.return=_;else for(le=_;le!==null;){if(le===a){le=null;break}if(_=le.sibling,_!==null){_.return=le.return,le=_;break}le=le.return}_=le}}function Xl(a,i,d,y){a=null;for(var _=i,H=!1;_!==null;){if(!H){if((_.flags&524288)!==0)H=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var le=_.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var Oe=_.type;lr(_.pendingProps.value,le.value)||(a!==null?a.push(Oe):a=[Oe])}}else if(_===Ne.current){if(le=_.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(a!==null?a.push(lp):a=[lp])}_=_.return}a!==null&&ll(i,a,d,y),i.flags|=262144}function ud(a){for(a=a.firstContext;a!==null;){if(!lr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Jl(a){Wl=a,ol=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Ei(a){return Ah(Wl,a)}function hd(a,i){return Wl===null&&Jl(a),Ah(a,i)}function Ah(a,i){var d=i._currentValue;if(i={context:i,memoizedValue:d,next:null},ol===null){if(a===null)throw Error(r(308));ol=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else ol=ol.next=i;return d}var Sf=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){i.aborted=!0,a.forEach(function(d){return d()})}},Bf=t.unstable_scheduleCallback,Nf=t.unstable_NormalPriority,Da={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $c(){return{controller:new Sf,data:new Map,refCount:0}}function FA(a){a.refCount--,a.refCount===0&&Bf(Nf,function(){a.controller.abort()})}var qc=null,fd=0,I=0,P=null;function W(a,i){if(qc===null){var d=qc=[];fd=0,I=sx(),P={status:"pending",value:void 0,then:function(y){d.push(y)}}}return fd++,i.then(ae,ae),i}function ae(){if(--fd===0&&qc!==null){P!==null&&(P.status="fulfilled");var a=qc;qc=null,I=0,P=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function Be(a,i){var d=[],y={status:"pending",value:null,reason:null,then:function(_){d.push(_)}};return a.then(function(){y.status="fulfilled",y.value=i;for(var _=0;_<d.length;_++)(0,d[_])(i)},function(_){for(y.status="rejected",y.reason=_,_=0;_<d.length;_++)(0,d[_])(void 0)}),y}var Fe=ne.S;ne.S=function(a,i){kt=Wt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&W(a,i),Fe!==null&&Fe(a,i)};var Re=ge(null);function Le(){var a=Re.current;return a!==null?a:oa.pooledCache}function Me(a,i){i===null?fe(Re,Re.current):fe(Re,i.pool)}function ze(){var a=Le();return a===null?null:{parent:Da._currentValue,pool:a}}var ot=Error(r(460)),Nt=Error(r(474)),Ke=Error(r(542)),ft={then:function(){}};function mt(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Pt(a,i,d){switch(d=a[d],d===void 0?a.push(i):d!==i&&(i.then(sn,sn),i=d),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,ds(a),a;default:if(typeof i.status=="string")i.then(sn,sn);else{if(a=oa,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=i,a.status="pending",a.then(function(y){if(i.status==="pending"){var _=i;_.status="fulfilled",_.value=y}},function(y){if(i.status==="pending"){var _=i;_.status="rejected",_.reason=y}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,ds(a),a}throw Mt=i,ot}}function wt(a){try{var i=a._init;return i(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Mt=d,ot):d}}var Mt=null;function Gt(){if(Mt===null)throw Error(r(459));var a=Mt;return Mt=null,a}function ds(a){if(a===ot||a===Ke)throw Error(r(483))}var Xt=null,$s=0;function Ds(a){var i=$s;return $s+=1,Xt===null&&(Xt=[]),Pt(Xt,a,i)}function In(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function zs(a,i){throw i.$$typeof===v?Error(r(525)):(a=Object.prototype.toString.call(i),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function er(a){function i(bt,ct){if(a){var Et=bt.deletions;Et===null?(bt.deletions=[ct],bt.flags|=16):Et.push(ct)}}function d(bt,ct){if(!a)return null;for(;ct!==null;)i(bt,ct),ct=ct.sibling;return null}function y(bt){for(var ct=new Map;bt!==null;)bt.key!==null?ct.set(bt.key,bt):ct.set(bt.index,bt),bt=bt.sibling;return ct}function _(bt,ct){return bt=bo(bt,ct),bt.index=0,bt.sibling=null,bt}function H(bt,ct,Et){return bt.index=Et,a?(Et=bt.alternate,Et!==null?(Et=Et.index,Et<ct?(bt.flags|=67108866,ct):Et):(bt.flags|=67108866,ct)):(bt.flags|=1048576,ct)}function le(bt){return a&&bt.alternate===null&&(bt.flags|=67108866),bt}function Oe(bt,ct,Et,Yt){return ct===null||ct.tag!==6?(ct=EA(Et,bt.mode,Yt),ct.return=bt,ct):(ct=_(ct,Et),ct.return=bt,ct)}function et(bt,ct,Et,Yt){var bn=Et.type;return bn===w?Kt(bt,ct,Et.props.children,Yt,Et.key):ct!==null&&(ct.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===X&&wt(bn)===ct.type)?(ct=_(ct,Et.props),In(ct,Et),ct.return=bt,ct):(ct=Sl(Et.type,Et.key,Et.props,null,bt.mode,Yt),In(ct,Et),ct.return=bt,ct)}function Tt(bt,ct,Et,Yt){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==Et.containerInfo||ct.stateNode.implementation!==Et.implementation?(ct=zc(Et,bt.mode,Yt),ct.return=bt,ct):(ct=_(ct,Et.children||[]),ct.return=bt,ct)}function Kt(bt,ct,Et,Yt,bn){return ct===null||ct.tag!==7?(ct=Gl(Et,bt.mode,Yt,bn),ct.return=bt,ct):(ct=_(ct,Et),ct.return=bt,ct)}function Zt(bt,ct,Et){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return ct=EA(""+ct,bt.mode,Et),ct.return=bt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return Et=Sl(ct.type,ct.key,ct.props,null,bt.mode,Et),In(Et,ct),Et.return=bt,Et;case N:return ct=zc(ct,bt.mode,Et),ct.return=bt,ct;case X:return ct=wt(ct),Zt(bt,ct,Et)}if(oe(ct)||ie(ct))return ct=Gl(ct,bt.mode,Et,null),ct.return=bt,ct;if(typeof ct.then=="function")return Zt(bt,Ds(ct),Et);if(ct.$$typeof===k)return Zt(bt,hd(bt,ct),Et);zs(bt,ct)}return null}function Ft(bt,ct,Et,Yt){var bn=ct!==null?ct.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return bn!==null?null:Oe(bt,ct,""+Et,Yt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case m:return Et.key===bn?et(bt,ct,Et,Yt):null;case N:return Et.key===bn?Tt(bt,ct,Et,Yt):null;case X:return Et=wt(Et),Ft(bt,ct,Et,Yt)}if(oe(Et)||ie(Et))return bn!==null?null:Kt(bt,ct,Et,Yt,null);if(typeof Et.then=="function")return Ft(bt,ct,Ds(Et),Yt);if(Et.$$typeof===k)return Ft(bt,ct,hd(bt,Et),Yt);zs(bt,Et)}return null}function Ut(bt,ct,Et,Yt,bn){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint")return bt=bt.get(Et)||null,Oe(ct,bt,""+Yt,bn);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case m:return bt=bt.get(Yt.key===null?Et:Yt.key)||null,et(ct,bt,Yt,bn);case N:return bt=bt.get(Yt.key===null?Et:Yt.key)||null,Tt(ct,bt,Yt,bn);case X:return Yt=wt(Yt),Ut(bt,ct,Et,Yt,bn)}if(oe(Yt)||ie(Yt))return bt=bt.get(Et)||null,Kt(ct,bt,Yt,bn,null);if(typeof Yt.then=="function")return Ut(bt,ct,Et,Ds(Yt),bn);if(Yt.$$typeof===k)return Ut(bt,ct,Et,hd(ct,Yt),bn);zs(ct,Yt)}return null}function Ws(bt,ct,Et,Yt){for(var bn=null,Gr=null,An=ct,Xn=ct=0,Cr=null;An!==null&&Xn<Et.length;Xn++){An.index>Xn?(Cr=An,An=null):Cr=An.sibling;var Vr=Ft(bt,An,Et[Xn],Yt);if(Vr===null){An===null&&(An=Cr);break}a&&An&&Vr.alternate===null&&i(bt,An),ct=H(Vr,ct,Xn),Gr===null?bn=Vr:Gr.sibling=Vr,Gr=Vr,An=Cr}if(Xn===Et.length)return d(bt,An),ar&&oo(bt,Xn),bn;if(An===null){for(;Xn<Et.length;Xn++)An=Zt(bt,Et[Xn],Yt),An!==null&&(ct=H(An,ct,Xn),Gr===null?bn=An:Gr.sibling=An,Gr=An);return ar&&oo(bt,Xn),bn}for(An=y(An);Xn<Et.length;Xn++)Cr=Ut(An,bt,Xn,Et[Xn],Yt),Cr!==null&&(a&&Cr.alternate!==null&&An.delete(Cr.key===null?Xn:Cr.key),ct=H(Cr,ct,Xn),Gr===null?bn=Cr:Gr.sibling=Cr,Gr=Cr);return a&&An.forEach(function(Qd){return i(bt,Qd)}),ar&&oo(bt,Xn),bn}function Tn(bt,ct,Et,Yt){if(Et==null)throw Error(r(151));for(var bn=null,Gr=null,An=ct,Xn=ct=0,Cr=null,Vr=Et.next();An!==null&&!Vr.done;Xn++,Vr=Et.next()){An.index>Xn?(Cr=An,An=null):Cr=An.sibling;var Qd=Ft(bt,An,Vr.value,Yt);if(Qd===null){An===null&&(An=Cr);break}a&&An&&Qd.alternate===null&&i(bt,An),ct=H(Qd,ct,Xn),Gr===null?bn=Qd:Gr.sibling=Qd,Gr=Qd,An=Cr}if(Vr.done)return d(bt,An),ar&&oo(bt,Xn),bn;if(An===null){for(;!Vr.done;Xn++,Vr=Et.next())Vr=Zt(bt,Vr.value,Yt),Vr!==null&&(ct=H(Vr,ct,Xn),Gr===null?bn=Vr:Gr.sibling=Vr,Gr=Vr);return ar&&oo(bt,Xn),bn}for(An=y(An);!Vr.done;Xn++,Vr=Et.next())Vr=Ut(An,bt,Xn,Vr.value,Yt),Vr!==null&&(a&&Vr.alternate!==null&&An.delete(Vr.key===null?Xn:Vr.key),ct=H(Vr,ct,Xn),Gr===null?bn=Vr:Gr.sibling=Vr,Gr=Vr);return a&&An.forEach(function(fI){return i(bt,fI)}),ar&&oo(bt,Xn),bn}function fa(bt,ct,Et,Yt){if(typeof Et=="object"&&Et!==null&&Et.type===w&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case m:e:{for(var bn=Et.key;ct!==null;){if(ct.key===bn){if(bn=Et.type,bn===w){if(ct.tag===7){d(bt,ct.sibling),Yt=_(ct,Et.props.children),Yt.return=bt,bt=Yt;break e}}else if(ct.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===X&&wt(bn)===ct.type){d(bt,ct.sibling),Yt=_(ct,Et.props),In(Yt,Et),Yt.return=bt,bt=Yt;break e}d(bt,ct);break}else i(bt,ct);ct=ct.sibling}Et.type===w?(Yt=Gl(Et.props.children,bt.mode,Yt,Et.key),Yt.return=bt,bt=Yt):(Yt=Sl(Et.type,Et.key,Et.props,null,bt.mode,Yt),In(Yt,Et),Yt.return=bt,bt=Yt)}return le(bt);case N:e:{for(bn=Et.key;ct!==null;){if(ct.key===bn)if(ct.tag===4&&ct.stateNode.containerInfo===Et.containerInfo&&ct.stateNode.implementation===Et.implementation){d(bt,ct.sibling),Yt=_(ct,Et.children||[]),Yt.return=bt,bt=Yt;break e}else{d(bt,ct);break}else i(bt,ct);ct=ct.sibling}Yt=zc(Et,bt.mode,Yt),Yt.return=bt,bt=Yt}return le(bt);case X:return Et=wt(Et),fa(bt,ct,Et,Yt)}if(oe(Et))return Ws(bt,ct,Et,Yt);if(ie(Et)){if(bn=ie(Et),typeof bn!="function")throw Error(r(150));return Et=bn.call(Et),Tn(bt,ct,Et,Yt)}if(typeof Et.then=="function")return fa(bt,ct,Ds(Et),Yt);if(Et.$$typeof===k)return fa(bt,ct,hd(bt,Et),Yt);zs(bt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint"?(Et=""+Et,ct!==null&&ct.tag===6?(d(bt,ct.sibling),Yt=_(ct,Et),Yt.return=bt,bt=Yt):(d(bt,ct),Yt=EA(Et,bt.mode,Yt),Yt.return=bt,bt=Yt),le(bt)):d(bt,ct)}return function(bt,ct,Et,Yt){try{$s=0;var bn=fa(bt,ct,Et,Yt);return Xt=null,bn}catch(An){if(An===ot||An===Ke)throw An;var Gr=_i(29,An,null,bt.mode);return Gr.lanes=Yt,Gr.return=bt,Gr}finally{}}}var aa=er(!0),Ln=er(!1),Ot=!1;function ws(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xa(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function xn(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Sn(a,i,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Kr&2)!==0){var _=y.pending;return _===null?i.next=i:(i.next=_.next,_.next=i),y.pending=i,i=Mi(a),NA(a,null,d),i}return yc(a,y,i,d),Mi(a)}function Pr(a,i,d){if(i=i.updateQueue,i!==null&&(i=i.shared,(d&4194048)!==0)){var y=i.lanes;y&=a.pendingLanes,d|=y,i.lanes=d,Nn(a,d)}}function Va(a,i){var d=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var _=null,H=null;if(d=d.firstBaseUpdate,d!==null){do{var le={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};H===null?_=H=le:H=H.next=le,d=d.next}while(d!==null);H===null?_=H=i:H=H.next=i}else _=H=i;d={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:H,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=i:a.next=i,d.lastBaseUpdate=i}var Qa=!1;function kr(){if(Qa){var a=P;if(a!==null)throw a}}function $a(a,i,d,y){Qa=!1;var _=a.updateQueue;Ot=!1;var H=_.firstBaseUpdate,le=_.lastBaseUpdate,Oe=_.shared.pending;if(Oe!==null){_.shared.pending=null;var et=Oe,Tt=et.next;et.next=null,le===null?H=Tt:le.next=Tt,le=et;var Kt=a.alternate;Kt!==null&&(Kt=Kt.updateQueue,Oe=Kt.lastBaseUpdate,Oe!==le&&(Oe===null?Kt.firstBaseUpdate=Tt:Oe.next=Tt,Kt.lastBaseUpdate=et))}if(H!==null){var Zt=_.baseState;le=0,Kt=Tt=et=null,Oe=H;do{var Ft=Oe.lane&-536870913,Ut=Ft!==Oe.lane;if(Ut?(dr&Ft)===Ft:(y&Ft)===Ft){Ft!==0&&Ft===I&&(Qa=!0),Kt!==null&&(Kt=Kt.next={lane:0,tag:Oe.tag,payload:Oe.payload,callback:null,next:null});e:{var Ws=a,Tn=Oe;Ft=i;var fa=d;switch(Tn.tag){case 1:if(Ws=Tn.payload,typeof Ws=="function"){Zt=Ws.call(fa,Zt,Ft);break e}Zt=Ws;break e;case 3:Ws.flags=Ws.flags&-65537|128;case 0:if(Ws=Tn.payload,Ft=typeof Ws=="function"?Ws.call(fa,Zt,Ft):Ws,Ft==null)break e;Zt=g({},Zt,Ft);break e;case 2:Ot=!0}}Ft=Oe.callback,Ft!==null&&(a.flags|=64,Ut&&(a.flags|=8192),Ut=_.callbacks,Ut===null?_.callbacks=[Ft]:Ut.push(Ft))}else Ut={lane:Ft,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Kt===null?(Tt=Kt=Ut,et=Zt):Kt=Kt.next=Ut,le|=Ft;if(Oe=Oe.next,Oe===null){if(Oe=_.shared.pending,Oe===null)break;Ut=Oe,Oe=Ut.next,Ut.next=null,_.lastBaseUpdate=Ut,_.shared.pending=null}}while(!0);Kt===null&&(et=Zt),_.baseState=et,_.firstBaseUpdate=Tt,_.lastBaseUpdate=Kt,H===null&&(_.shared.lanes=0),U|=le,a.lanes=le,a.memoizedState=Zt}}function Pi(a,i){if(typeof a!="function")throw Error(r(191,a));a.call(i)}function qa(a,i){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Pi(d[a],i)}var Rn=ge(null),cr=ge(0);function ia(a,i){a=T,fe(cr,a),fe(Rn,i),T=a|i.baseLanes}function Ur(){fe(cr,T),fe(Rn,Rn.current)}function Wa(){T=cr.current,Z(Rn),Z(cr)}var va=ge(null),Ar=null;function Ma(a){var i=a.alternate;fe(vr,vr.current&1),fe(va,a),Ar===null&&(i===null||Rn.current!==null||i.memoizedState!==null)&&(Ar=a)}function Hr(a){fe(vr,vr.current),fe(va,a),Ar===null&&(Ar=a)}function Ya(a){a.tag===22?(fe(vr,vr.current),fe(va,a),Ar===null&&(Ar=a)):Xa()}function Xa(){fe(vr,vr.current),fe(va,va.current)}function Wr(a){Z(va),Ar===a&&(Ar=null),Z(vr)}var vr=ge(0);function ki(a){for(var i=a;i!==null;){if(i.tag===13){var d=i.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||fx(d)||px(d)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Fa=0,pn=null,mn=null,Nr=null,to=!1,lo=!1,Wi=!1,ba=0,Zl=0,cl=null,Wc=0;function Yr(){throw Error(r(321))}function pd(a,i){if(i===null)return!1;for(var d=0;d<i.length&&d<a.length;d++)if(!lr(a[d],i[d]))return!1;return!0}function du(a,i,d,y,_,H){return Fa=H,pn=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ne.H=a===null||a.memoizedState===null?pm:yh,Wi=!1,H=d(y,_),Wi=!1,lo&&(H=Wo(i,d,y,_)),IA(a),H}function IA(a){ne.H=vu;var i=mn!==null&&mn.next!==null;if(Fa=0,Nr=mn=pn=null,to=!1,Zl=0,cl=null,i)throw Error(r(300));a===null||ja||(a=a.dependencies,a!==null&&ud(a)&&(ja=!0))}function Wo(a,i,d,y){pn=a;var _=0;do{if(lo&&(cl=null),Zl=0,lo=!1,25<=_)throw Error(r(301));if(_+=1,Nr=mn=null,a.updateQueue!=null){var H=a.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}ne.H=xh,H=i(d,y)}while(lo);return H}function uu(){var a=ne.H,i=a.useState()[0];return i=typeof i.then=="function"?ec(i):i,a=a.useState()[0],(mn!==null?mn.memoizedState:null)!==a&&(pn.flags|=1024),i}function md(){var a=ba!==0;return ba=0,a}function gd(a,i,d){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~d}function RA(a){if(to){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}to=!1}Fa=0,Nr=mn=pn=null,lo=!1,Zl=ba=0,cl=null}function ai(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?pn.memoizedState=Nr=a:Nr=Nr.next=a,Nr}function da(){if(mn===null){var a=pn.alternate;a=a!==null?a.memoizedState:null}else a=mn.next;var i=Nr===null?pn.memoizedState:Nr.next;if(i!==null)Nr=i,mn=a;else{if(a===null)throw pn.alternate===null?Error(r(467)):Error(r(310));mn=a,a={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Nr===null?pn.memoizedState=Nr=a:Nr=Nr.next=a}return Nr}function OA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(a){var i=Zl;return Zl+=1,cl===null&&(cl=[]),a=Pt(cl,a,i),i=pn,(Nr===null?i.memoizedState:Nr.next)===null&&(i=i.alternate,ne.H=i===null||i.memoizedState===null?pm:yh),a}function Yc(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ec(a);if(a.$$typeof===k)return Ei(a)}throw Error(r(438,String(a)))}function mi(a){var i=null,d=pn.updateQueue;if(d!==null&&(i=d.memoCache),i==null){var y=pn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(i={data:y.data.map(function(_){return _.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),d===null&&(d=OA(),pn.updateQueue=d),d.memoCache=i,d=i.data[i.index],d===void 0)for(d=i.data[i.index]=Array(a),y=0;y<a;y++)d[y]=he;return i.index++,d}function Co(a,i){return typeof i=="function"?i(a):i}function yd(a){var i=da();return Xc(i,mn,a)}function Xc(a,i,d){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var _=a.baseQueue,H=y.pending;if(H!==null){if(_!==null){var le=_.next;_.next=H.next,H.next=le}i.baseQueue=_=H,y.pending=null}if(H=a.baseState,_===null)a.memoizedState=H;else{i=_.next;var Oe=le=null,et=null,Tt=i,Kt=!1;do{var Zt=Tt.lane&-536870913;if(Zt!==Tt.lane?(dr&Zt)===Zt:(Fa&Zt)===Zt){var Ft=Tt.revertLane;if(Ft===0)et!==null&&(et=et.next={lane:0,revertLane:0,gesture:null,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),Zt===I&&(Kt=!0);else if((Fa&Ft)===Ft){Tt=Tt.next,Ft===I&&(Kt=!0);continue}else Zt={lane:0,revertLane:Tt.revertLane,gesture:null,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},et===null?(Oe=et=Zt,le=H):et=et.next=Zt,pn.lanes|=Ft,U|=Ft;Zt=Tt.action,Wi&&d(H,Zt),H=Tt.hasEagerState?Tt.eagerState:d(H,Zt)}else Ft={lane:Zt,revertLane:Tt.revertLane,gesture:Tt.gesture,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},et===null?(Oe=et=Ft,le=H):et=et.next=Ft,pn.lanes|=Zt,U|=Zt;Tt=Tt.next}while(Tt!==null&&Tt!==i);if(et===null?le=H:et.next=Oe,!lr(H,a.memoizedState)&&(ja=!0,Kt&&(d=P,d!==null)))throw d;a.memoizedState=H,a.baseState=le,a.baseQueue=et,y.lastRenderedState=H}return _===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function xd(a){var i=da(),d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var y=d.dispatch,_=d.pending,H=i.memoizedState;if(_!==null){d.pending=null;var le=_=_.next;do H=a(H,le.action),le=le.next;while(le!==_);lr(H,i.memoizedState)||(ja=!0),i.memoizedState=H,i.baseQueue===null&&(i.baseState=H),d.lastRenderedState=H}return[H,y]}function vd(a,i,d){var y=pn,_=da(),H=ar;if(H){if(d===void 0)throw Error(r(407));d=d()}else d=i();var le=!lr((mn||_).memoizedState,d);if(le&&(_.memoizedState=d,ja=!0),_=_.queue,fh(fu.bind(null,y,_,a),[a]),_.getSnapshot!==i||le||Nr!==null&&Nr.memoizedState.tag&1){if(y.flags|=2048,wc(9,{destroy:void 0},hu.bind(null,y,_,d,i),null),oa===null)throw Error(r(349));H||(Fa&127)!==0||Nl(y,i,d)}return d}function Nl(a,i,d){a.flags|=16384,a={getSnapshot:i,value:d},i=pn.updateQueue,i===null?(i=OA(),pn.updateQueue=i,i.stores=[a]):(d=i.stores,d===null?i.stores=[a]:d.push(a))}function hu(a,i,d,y){i.value=d,i.getSnapshot=y,dh(i)&&pu(a)}function fu(a,i,d){return d(function(){dh(i)&&pu(a)})}function dh(a){var i=a.getSnapshot;a=a.value;try{var d=i();return!lr(a,d)}catch{return!0}}function pu(a){var i=al(a,2);i!==null&&la(i,a,2)}function Cl(a){var i=ai();if(typeof a=="function"){var d=a;if(a=d(),Wi){dt(!0);try{d()}finally{dt(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:a},i}function uh(a,i,d,y){return a.baseState=d,Xc(a,mn,typeof y=="function"?y:Co)}function bd(a,i,d,y,_){if(UA(a))throw Error(r(485));if(a=i.action,a!==null){var H={payload:_,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){H.listeners.push(le)}};ne.T!==null?d(!0):H.isTransition=!1,y(H),d=i.pending,d===null?(H.next=i.pending=H,mu(i,H)):(H.next=d.next,i.pending=d.next=H)}}function mu(a,i){var d=i.action,y=i.payload,_=a.state;if(i.isTransition){var H=ne.T,le={};ne.T=le;try{var Oe=d(_,y),et=ne.S;et!==null&&et(le,Oe),ii(a,i,Oe)}catch(Tt){jc(a,i,Tt)}finally{H!==null&&le.types!==null&&(H.types=le.types),ne.T=H}}else try{H=d(_,y),ii(a,i,H)}catch(Tt){jc(a,i,Tt)}}function ii(a,i,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(y){Jc(a,i,y)},function(y){return jc(a,i,y)}):Jc(a,i,d)}function Jc(a,i,d){i.status="fulfilled",i.value=d,jd(i),a.state=d,i=a.pending,i!==null&&(d=i.next,d===i?a.pending=null:(d=d.next,i.next=d,mu(a,d)))}function jc(a,i,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do i.status="rejected",i.reason=d,jd(i),i=i.next;while(i!==y)}a.action=null}function jd(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function Zc(a,i){return i}function Eo(a,i){if(ar){var d=oa.formState;if(d!==null){e:{var y=pn;if(ar){if(ra){t:{for(var _=ra,H=Ta;_.nodeType!==8;){if(!H){_=null;break t}if(_=rc(_.nextSibling),_===null){_=null;break t}}H=_.data,_=H==="F!"||H==="F"?_:null}if(_){ra=rc(_.nextSibling),y=_.data==="F!";break e}}ql(y)}y=!1}y&&(i=d[0])}}return d=ai(),d.memoizedState=d.baseState=i,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:i},d.queue=y,d=Lf.bind(null,pn,y),y.dispatch=d,y=Cl(!1),H=xu.bind(null,pn,!1,y.queue),y=ai(),_={state:i,dispatch:null,action:a,pending:null},y.queue=_,d=bd.bind(null,pn,_,H,d),_.dispatch=d,y.memoizedState=a,[i,d,!1]}function El(a){var i=da();return Tl(i,mn,a)}function Tl(a,i,d){if(i=Xc(a,i,Zc)[0],a=yd(Co)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var y=ec(i)}catch(le){throw le===ot?Ke:le}else y=i;i=da();var _=i.queue,H=_.dispatch;return d!==i.memoizedState&&(pn.flags|=2048,wc(9,{destroy:void 0},wd.bind(null,_,d),null)),[y,H,a]}function wd(a,i){a.action=i}function Sd(a){var i=da(),d=mn;if(d!==null)return Tl(i,d,a);da(),i=i.memoizedState,d=da();var y=d.queue.dispatch;return d.memoizedState=a,[i,y,!1]}function wc(a,i,d,y){return a={tag:a,create:d,deps:y,inst:i,next:null},i=pn.updateQueue,i===null&&(i=OA(),pn.updateQueue=i),d=i.lastEffect,d===null?i.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,i.lastEffect=a),a}function hh(){return da().memoizedState}function eA(a,i,d,y){var _=ai();pn.flags|=a,_.memoizedState=wc(1|i,{destroy:void 0},d,y===void 0?null:y)}function tA(a,i,d,y){var _=da();y=y===void 0?null:y;var H=_.memoizedState.inst;mn!==null&&y!==null&&pd(y,mn.memoizedState.deps)?_.memoizedState=wc(i,H,d,y):(pn.flags|=a,_.memoizedState=wc(1|i,H,d,y))}function Cf(a,i){eA(8390656,8,a,i)}function fh(a,i){tA(2048,8,a,i)}function om(a){pn.flags|=4;var i=pn.updateQueue;if(i===null)i=OA(),pn.updateQueue=i,i.events=[a];else{var d=i.events;d===null?i.events=[a]:d.push(a)}}function Ef(a){var i=da().memoizedState;return om({ref:i,nextImpl:a}),function(){if((Kr&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function ph(a,i){return tA(4,2,a,i)}function lm(a,i){return tA(4,4,a,i)}function cm(a,i){if(typeof i=="function"){a=a();var d=i(a);return function(){typeof d=="function"?d():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function Am(a,i,d){d=d!=null?d.concat([a]):null,tA(4,4,cm.bind(null,i,a),d)}function Tf(){}function gu(a,i){var d=da();i=i===void 0?null:i;var y=d.memoizedState;return i!==null&&pd(i,y[1])?y[0]:(d.memoizedState=[a,i],a)}function yu(a,i){var d=da();i=i===void 0?null:i;var y=d.memoizedState;if(i!==null&&pd(i,y[1]))return y[0];if(y=a(),Wi){dt(!0);try{a()}finally{dt(!1)}}return d.memoizedState=[y,i],y}function Ff(a,i,d){return d===void 0||(Fa&1073741824)!==0&&(dr&261930)===0?a.memoizedState=i:(a.memoizedState=d,a=oi(),pn.lanes|=a,U|=a,d)}function If(a,i,d,y){return lr(d,i)?d:Rn.current!==null?(a=Ff(a,d,y),lr(a,i)||(ja=!0),a):(Fa&42)===0||(Fa&1073741824)!==0&&(dr&261930)===0?(ja=!0,a.memoizedState=d):(a=oi(),pn.lanes|=a,U|=a,i)}function mh(a,i,d,y,_){var H=re.p;re.p=H!==0&&8>H?H:8;var le=ne.T,Oe={};ne.T=Oe,xu(a,!1,i,d);try{var et=_(),Tt=ne.S;if(Tt!==null&&Tt(Oe,et),et!==null&&typeof et=="object"&&typeof et.then=="function"){var Kt=Be(et,y);tc(a,i,Kt,un(a))}else tc(a,i,y,un(a))}catch(Zt){tc(a,i,{then:function(){},status:"rejected",reason:Zt},un())}finally{re.p=H,le!==null&&Oe.types!==null&&(le.types=Oe.types),ne.T=le}}function dm(){}function gh(a,i,d,y){if(a.tag!==5)throw Error(r(476));var _=Rf(a).queue;mh(a,_,i,se,d===null?dm:function(){return um(a),d(y)})}function Rf(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:se},next:null};var d={};return i.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:d},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function um(a){var i=Rf(a);i.next===null&&(i=a.alternate.memoizedState),tc(a,i.next.queue,{},un())}function Bd(){return Ei(lp)}function Of(){return da().memoizedState}function Uf(){return da().memoizedState}function Vy(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var d=un();a=xn(d);var y=Sn(i,a,d);y!==null&&(la(y,i,d),Pr(y,i,d)),i={cache:$c()},a.payload=i;return}i=i.return}}function $y(a,i,d){var y=un();d={lane:y,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},UA(a)?hm(i,d):(d=id(a,i,d,y),d!==null&&(la(d,a,y),fm(d,i,y)))}function Lf(a,i,d){var y=un();tc(a,i,d,y)}function tc(a,i,d,y){var _={lane:y,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(UA(a))hm(i,_);else{var H=a.alternate;if(a.lanes===0&&(H===null||H.lanes===0)&&(H=i.lastRenderedReducer,H!==null))try{var le=i.lastRenderedState,Oe=H(le,d);if(_.hasEagerState=!0,_.eagerState=Oe,lr(Oe,le))return yc(a,i,_,0),oa===null&&BA(),!1}catch{}finally{}if(d=id(a,i,_,y),d!==null)return la(d,a,y),fm(d,i,y),!0}return!1}function xu(a,i,d,y){if(y={lane:2,revertLane:sx(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},UA(a)){if(i)throw Error(r(479))}else i=id(a,d,y,2),i!==null&&la(i,a,2)}function UA(a){var i=a.alternate;return a===pn||i!==null&&i===pn}function hm(a,i){lo=to=!0;var d=a.pending;d===null?i.next=i:(i.next=d.next,d.next=i),a.pending=i}function fm(a,i,d){if((d&4194048)!==0){var y=i.lanes;y&=a.pendingLanes,d|=y,i.lanes=d,Nn(a,d)}}var vu={readContext:Ei,use:Yc,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useLayoutEffect:Yr,useInsertionEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useSyncExternalStore:Yr,useId:Yr,useHostTransitionStatus:Yr,useFormState:Yr,useActionState:Yr,useOptimistic:Yr,useMemoCache:Yr,useCacheRefresh:Yr};vu.useEffectEvent=Yr;var pm={readContext:Ei,use:Yc,useCallback:function(a,i){return ai().memoizedState=[a,i===void 0?null:i],a},useContext:Ei,useEffect:Cf,useImperativeHandle:function(a,i,d){d=d!=null?d.concat([a]):null,eA(4194308,4,cm.bind(null,i,a),d)},useLayoutEffect:function(a,i){return eA(4194308,4,a,i)},useInsertionEffect:function(a,i){eA(4,2,a,i)},useMemo:function(a,i){var d=ai();i=i===void 0?null:i;var y=a();if(Wi){dt(!0);try{a()}finally{dt(!1)}}return d.memoizedState=[y,i],y},useReducer:function(a,i,d){var y=ai();if(d!==void 0){var _=d(i);if(Wi){dt(!0);try{d(i)}finally{dt(!1)}}}else _=i;return y.memoizedState=y.baseState=_,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:_},y.queue=a,a=a.dispatch=$y.bind(null,pn,a),[y.memoizedState,a]},useRef:function(a){var i=ai();return a={current:a},i.memoizedState=a},useState:function(a){a=Cl(a);var i=a.queue,d=Lf.bind(null,pn,i);return i.dispatch=d,[a.memoizedState,d]},useDebugValue:Tf,useDeferredValue:function(a,i){var d=ai();return Ff(d,a,i)},useTransition:function(){var a=Cl(!1);return a=mh.bind(null,pn,a.queue,!0,!1),ai().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,d){var y=pn,_=ai();if(ar){if(d===void 0)throw Error(r(407));d=d()}else{if(d=i(),oa===null)throw Error(r(349));(dr&127)!==0||Nl(y,i,d)}_.memoizedState=d;var H={value:d,getSnapshot:i};return _.queue=H,Cf(fu.bind(null,y,H,a),[a]),y.flags|=2048,wc(9,{destroy:void 0},hu.bind(null,y,H,d,i),null),d},useId:function(){var a=ai(),i=oa.identifierPrefix;if(ar){var d=$i,y=Bo;d=(y&~(1<<32-qt(y)-1)).toString(32)+d,i="_"+i+"R_"+d,d=ba++,0<d&&(i+="H"+d.toString(32)),i+="_"}else d=Wc++,i="_"+i+"r_"+d.toString(32)+"_";return a.memoizedState=i},useHostTransitionStatus:Bd,useFormState:Eo,useActionState:Eo,useOptimistic:function(a){var i=ai();i.memoizedState=i.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=d,i=xu.bind(null,pn,!0,d),d.dispatch=i,[a,i]},useMemoCache:mi,useCacheRefresh:function(){return ai().memoizedState=Vy.bind(null,pn)},useEffectEvent:function(a){var i=ai(),d={impl:a};return i.memoizedState=d,function(){if((Kr&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},yh={readContext:Ei,use:Yc,useCallback:gu,useContext:Ei,useEffect:fh,useImperativeHandle:Am,useInsertionEffect:ph,useLayoutEffect:lm,useMemo:yu,useReducer:yd,useRef:hh,useState:function(){return yd(Co)},useDebugValue:Tf,useDeferredValue:function(a,i){var d=da();return If(d,mn.memoizedState,a,i)},useTransition:function(){var a=yd(Co)[0],i=da().memoizedState;return[typeof a=="boolean"?a:ec(a),i]},useSyncExternalStore:vd,useId:Of,useHostTransitionStatus:Bd,useFormState:El,useActionState:El,useOptimistic:function(a,i){var d=da();return uh(d,mn,a,i)},useMemoCache:mi,useCacheRefresh:Uf};yh.useEffectEvent=Ef;var xh={readContext:Ei,use:Yc,useCallback:gu,useContext:Ei,useEffect:fh,useImperativeHandle:Am,useInsertionEffect:ph,useLayoutEffect:lm,useMemo:yu,useReducer:xd,useRef:hh,useState:function(){return xd(Co)},useDebugValue:Tf,useDeferredValue:function(a,i){var d=da();return mn===null?Ff(d,a,i):If(d,mn.memoizedState,a,i)},useTransition:function(){var a=xd(Co)[0],i=da().memoizedState;return[typeof a=="boolean"?a:ec(a),i]},useSyncExternalStore:vd,useId:Of,useHostTransitionStatus:Bd,useFormState:Sd,useActionState:Sd,useOptimistic:function(a,i){var d=da();return mn!==null?uh(d,mn,a,i):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:mi,useCacheRefresh:Uf};xh.useEffectEvent=Ef;function vh(a,i,d,y){i=a.memoizedState,d=d(y,i),d=d==null?i:g({},i,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var bh={enqueueSetState:function(a,i,d){a=a._reactInternals;var y=un(),_=xn(y);_.payload=i,d!=null&&(_.callback=d),i=Sn(a,_,y),i!==null&&(la(i,a,y),Pr(i,a,y))},enqueueReplaceState:function(a,i,d){a=a._reactInternals;var y=un(),_=xn(y);_.tag=1,_.payload=i,d!=null&&(_.callback=d),i=Sn(a,_,y),i!==null&&(la(i,a,y),Pr(i,a,y))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var d=un(),y=xn(d);y.tag=2,i!=null&&(y.callback=i),i=Sn(a,y,d),i!==null&&(la(i,a,d),Pr(i,a,d))}};function jh(a,i,d,y,_,H,le){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,H,le):i.prototype&&i.prototype.isPureReactComponent?!Di(d,y)||!Di(_,H):!0}function Df(a,i,d,y){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(d,y),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(d,y),i.state!==a&&bh.enqueueReplaceState(i,i.state,null)}function sA(a,i){var d=i;if("ref"in i){d={};for(var y in i)y!=="ref"&&(d[y]=i[y])}if(a=a.defaultProps){d===i&&(d=g({},d));for(var _ in a)d[_]===void 0&&(d[_]=a[_])}return d}function mm(a){Kc(a)}function bu(a){console.error(a)}function ju(a){Kc(a)}function wu(a,i){try{var d=a.onUncaughtError;d(i.value,{componentStack:i.stack})}catch(y){setTimeout(function(){throw y})}}function Qf(a,i,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Mf(a,i,d){return d=xn(d),d.tag=3,d.payload={element:null},d.callback=function(){wu(a,i)},d}function _f(a){return a=xn(a),a.tag=3,a}function Pf(a,i,d,y){var _=d.type.getDerivedStateFromError;if(typeof _=="function"){var H=y.value;a.payload=function(){return _(H)},a.callback=function(){Qf(i,d,y)}}var le=d.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(a.callback=function(){Qf(i,d,y),typeof _!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var Oe=y.stack;this.componentDidCatch(y.value,{componentStack:Oe!==null?Oe:""})})}function qy(a,i,d,y,_){if(d.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(i=d.alternate,i!==null&&Xl(i,d,_,!0),d=va.current,d!==null){switch(d.tag){case 31:case 13:return Ar===null?pl():d.alternate===null&&L===0&&(L=3),d.flags&=-257,d.flags|=65536,d.lanes=_,y===ft?d.flags|=16384:(i=d.updateQueue,i===null?d.updateQueue=new Set([y]):i.add(y),Zy(a,y,_)),!1;case 22:return d.flags|=65536,y===ft?d.flags|=16384:(i=d.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=i):(d=i.retryQueue,d===null?i.retryQueue=new Set([y]):d.add(y)),Zy(a,y,_)),!1}throw Error(r(435,d.tag))}return Zy(a,y,_),pl(),!1}if(ar)return i=va.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=_,y!==eo&&(a=Error(r(422),{cause:y}),Bl(jo(a,d)))):(y!==eo&&(i=Error(r(423),{cause:y}),Bl(jo(i,d))),a=a.current.alternate,a.flags|=65536,_&=-_,a.lanes|=_,y=jo(y,d),_=Mf(a.stateNode,y,_),Va(a,_),L!==4&&(L=2)),!1;var H=Error(r(520),{cause:y});if(H=jo(H,d),Pe===null?Pe=[H]:Pe.push(H),L!==4&&(L=2),i===null)return!0;y=jo(y,d),d=i;do{switch(d.tag){case 3:return d.flags|=65536,a=_&-_,d.lanes|=a,a=Mf(d.stateNode,y,a),Va(d,a),!1;case 1:if(i=d.type,H=d.stateNode,(d.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Bs===null||!Bs.has(H))))return d.flags|=65536,_&=-_,d.lanes|=_,_=_f(_),Pf(_,a,d,y),Va(d,_),!1}d=d.return}while(d!==null);return!1}var kf=Error(r(461)),ja=!1;function Hi(a,i,d,y){i.child=a===null?Ln(i,null,d,y):aa(i,a.child,d,y)}function Ja(a,i,d,y,_){d=d.render;var H=i.ref;if("ref"in y){var le={};for(var Oe in y)Oe!=="ref"&&(le[Oe]=y[Oe])}else le=y;return Jl(i),y=du(a,i,d,le,H,_),Oe=md(),a!==null&&!ja?(gd(a,i,_),Bc(a,i,_)):(ar&&Oe&&cu(i),i.flags|=1,Hi(a,i,y,_),i.child)}function nA(a,i,d,y,_){if(a===null){var H=d.type;return typeof H=="function"&&!wl(H)&&H.defaultProps===void 0&&d.compare===null?(i.tag=15,i.type=H,LA(a,i,H,y,_)):(a=Sl(d.type,null,y,i,i.mode,_),a.ref=i.ref,a.return=i,i.child=a)}if(H=a.child,!Wf(a,_)){var le=H.memoizedProps;if(d=d.compare,d=d!==null?d:Di,d(le,y)&&a.ref===i.ref)return Bc(a,i,_)}return i.flags|=1,a=bo(H,y),a.ref=i.ref,a.return=i,i.child=a}function LA(a,i,d,y,_){if(a!==null){var H=a.memoizedProps;if(Di(H,y)&&a.ref===i.ref)if(ja=!1,i.pendingProps=y=H,Wf(a,_))(a.flags&131072)!==0&&(ja=!0);else return i.lanes=a.lanes,Bc(a,i,_)}return Bu(a,i,d,y,_)}function Sc(a,i,d,y){var _=y.children,H=a!==null?a.memoizedState:null;if(a===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((i.flags&128)!==0){if(H=H!==null?H.baseLanes|d:d,a!==null){for(y=i.child=a.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;y=_&~H}else y=0,i.child=null;return Nd(a,i,H,d,y)}if((d&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&Me(i,H!==null?H.cachePool:null),H!==null?ia(i,H):Ur(),Ya(i);else return y=i.lanes=536870912,Nd(a,i,H!==null?H.baseLanes|d:d,d,y)}else H!==null?(Me(i,H.cachePool),ia(i,H),Xa(),i.memoizedState=null):(a!==null&&Me(i,null),Ur(),Xa());return Hi(a,i,_,d),i.child}function Al(a,i){return a!==null&&a.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Nd(a,i,d,y,_){var H=Le();return H=H===null?null:{parent:Da._currentValue,pool:H},i.memoizedState={baseLanes:d,cachePool:H},a!==null&&Me(i,null),Ur(),Ya(i),a!==null&&Xl(a,i,y,!0),i.childLanes=_,null}function dl(a,i){return i=wh({mode:i.mode,children:i.children},a.mode),i.ref=a.ref,a.child=i,i.return=a,i}function Hf(a,i,d){return aa(i,a.child,null,d),a=dl(i,i.pendingProps),a.flags|=2,Wr(i),i.memoizedState=null,a}function gm(a,i,d){var y=i.pendingProps,_=(i.flags&128)!==0;if(i.flags&=-129,a===null){if(ar){if(y.mode==="hidden")return a=dl(i,y),i.lanes=536870912,Al(null,a);if(Hr(i),(a=ra)?(a=$1(a,Ta),a=a!==null&&a.data==="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:$l!==null?{id:Bo,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},d=ld(a),d.return=i,i.child=d,Ni=i,ra=null)):a=null,a===null)throw ql(i);return i.lanes=536870912,null}return dl(i,y)}var H=a.memoizedState;if(H!==null){var le=H.dehydrated;if(Hr(i),_)if(i.flags&256)i.flags&=-257,i=Hf(a,i,d);else if(i.memoizedState!==null)i.child=a.child,i.flags|=128,i=null;else throw Error(r(558));else if(ja||Xl(a,i,d,!1),_=(d&a.childLanes)!==0,ja||_){if(y=oa,y!==null&&(le=Cs(y,d),le!==0&&le!==H.retryLane))throw H.retryLane=le,al(a,le),la(y,a,le),kf;pl(),i=Hf(a,i,d)}else a=H.treeContext,ra=rc(le.nextSibling),Ni=i,ar=!0,qi=null,Ta=!1,a!==null&&ch(i,a),i=dl(i,y),i.flags|=4096;return i}return a=bo(a.child,{mode:y.mode,children:y.children}),a.ref=i.ref,i.child=a,a.return=i,a}function Su(a,i){var d=i.ref;if(d===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(i.flags|=4194816)}}function Bu(a,i,d,y,_){return Jl(i),d=du(a,i,d,y,void 0,_),y=md(),a!==null&&!ja?(gd(a,i,_),Bc(a,i,_)):(ar&&y&&cu(i),i.flags|=1,Hi(a,i,d,_),i.child)}function Cd(a,i,d,y,_,H){return Jl(i),i.updateQueue=null,d=Wo(i,y,d,_),IA(a),y=md(),a!==null&&!ja?(gd(a,i,H),Bc(a,i,H)):(ar&&y&&cu(i),i.flags|=1,Hi(a,i,d,H),i.child)}function Kf(a,i,d,y,_){if(Jl(i),i.stateNode===null){var H=Bi,le=d.contextType;typeof le=="object"&&le!==null&&(H=Ei(le)),H=new d(y,H),i.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=bh,i.stateNode=H,H._reactInternals=i,H=i.stateNode,H.props=y,H.state=i.memoizedState,H.refs={},ws(i),le=d.contextType,H.context=typeof le=="object"&&le!==null?Ei(le):Bi,H.state=i.memoizedState,le=d.getDerivedStateFromProps,typeof le=="function"&&(vh(i,d,le,y),H.state=i.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(le=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),le!==H.state&&bh.enqueueReplaceState(H,H.state,null),$a(i,y,H,_),kr(),H.state=i.memoizedState),typeof H.componentDidMount=="function"&&(i.flags|=4194308),y=!0}else if(a===null){H=i.stateNode;var Oe=i.memoizedProps,et=sA(d,Oe);H.props=et;var Tt=H.context,Kt=d.contextType;le=Bi,typeof Kt=="object"&&Kt!==null&&(le=Ei(Kt));var Zt=d.getDerivedStateFromProps;Kt=typeof Zt=="function"||typeof H.getSnapshotBeforeUpdate=="function",Oe=i.pendingProps!==Oe,Kt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Oe||Tt!==le)&&Df(i,H,y,le),Ot=!1;var Ft=i.memoizedState;H.state=Ft,$a(i,y,H,_),kr(),Tt=i.memoizedState,Oe||Ft!==Tt||Ot?(typeof Zt=="function"&&(vh(i,d,Zt,y),Tt=i.memoizedState),(et=Ot||jh(i,d,et,y,Ft,Tt,le))?(Kt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(i.flags|=4194308)):(typeof H.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=y,i.memoizedState=Tt),H.props=y,H.state=Tt,H.context=le,y=et):(typeof H.componentDidMount=="function"&&(i.flags|=4194308),y=!1)}else{H=i.stateNode,xa(a,i),le=i.memoizedProps,Kt=sA(d,le),H.props=Kt,Zt=i.pendingProps,Ft=H.context,Tt=d.contextType,et=Bi,typeof Tt=="object"&&Tt!==null&&(et=Ei(Tt)),Oe=d.getDerivedStateFromProps,(Tt=typeof Oe=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(le!==Zt||Ft!==et)&&Df(i,H,y,et),Ot=!1,Ft=i.memoizedState,H.state=Ft,$a(i,y,H,_),kr();var Ut=i.memoizedState;le!==Zt||Ft!==Ut||Ot||a!==null&&a.dependencies!==null&&ud(a.dependencies)?(typeof Oe=="function"&&(vh(i,d,Oe,y),Ut=i.memoizedState),(Kt=Ot||jh(i,d,Kt,y,Ft,Ut,et)||a!==null&&a.dependencies!==null&&ud(a.dependencies))?(Tt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(y,Ut,et),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(y,Ut,et)),typeof H.componentDidUpdate=="function"&&(i.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof H.componentDidUpdate!="function"||le===a.memoizedProps&&Ft===a.memoizedState||(i.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||le===a.memoizedProps&&Ft===a.memoizedState||(i.flags|=1024),i.memoizedProps=y,i.memoizedState=Ut),H.props=y,H.state=Ut,H.context=et,y=Kt):(typeof H.componentDidUpdate!="function"||le===a.memoizedProps&&Ft===a.memoizedState||(i.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||le===a.memoizedProps&&Ft===a.memoizedState||(i.flags|=1024),y=!1)}return H=y,Su(a,i),y=(i.flags&128)!==0,H||y?(H=i.stateNode,d=y&&typeof d.getDerivedStateFromError!="function"?null:H.render(),i.flags|=1,a!==null&&y?(i.child=aa(i,a.child,null,_),i.child=aa(i,null,d,_)):Hi(a,i,d,_),i.memoizedState=H.state,a=i.child):a=Bc(a,i,_),a}function zf(a,i,d,y){return bc(),i.flags|=256,Hi(a,i,d,y),i.child}var DA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gf(a){return{baseLanes:a,cachePool:ze()}}function Vf(a,i,d){return a=a!==null?a.childLanes&~d:0,i&&(a|=Ee),a}function ym(a,i,d){var y=i.pendingProps,_=!1,H=(i.flags&128)!==0,le;if((le=H)||(le=a!==null&&a.memoizedState===null?!1:(vr.current&2)!==0),le&&(_=!0,i.flags&=-129),le=(i.flags&32)!==0,i.flags&=-33,a===null){if(ar){if(_?Ma(i):Xa(),(a=ra)?(a=$1(a,Ta),a=a!==null&&a.data!=="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:$l!==null?{id:Bo,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},d=ld(a),d.return=i,i.child=d,Ni=i,ra=null)):a=null,a===null)throw ql(i);return px(a)?i.lanes=32:i.lanes=536870912,null}var Oe=y.children;return y=y.fallback,_?(Xa(),_=i.mode,Oe=wh({mode:"hidden",children:Oe},_),y=Gl(y,_,d,null),Oe.return=i,y.return=i,Oe.sibling=y,i.child=Oe,y=i.child,y.memoizedState=Gf(d),y.childLanes=Vf(a,le,d),i.memoizedState=DA,Al(null,y)):(Ma(i),$f(i,Oe))}var et=a.memoizedState;if(et!==null&&(Oe=et.dehydrated,Oe!==null)){if(H)i.flags&256?(Ma(i),i.flags&=-257,i=Nu(a,i,d)):i.memoizedState!==null?(Xa(),i.child=a.child,i.flags|=128,i=null):(Xa(),Oe=y.fallback,_=i.mode,y=wh({mode:"visible",children:y.children},_),Oe=Gl(Oe,_,d,null),Oe.flags|=2,y.return=i,Oe.return=i,y.sibling=Oe,i.child=y,aa(i,a.child,null,d),y=i.child,y.memoizedState=Gf(d),y.childLanes=Vf(a,le,d),i.memoizedState=DA,i=Al(null,y));else if(Ma(i),px(Oe)){if(le=Oe.nextSibling&&Oe.nextSibling.dataset,le)var Tt=le.dgst;le=Tt,y=Error(r(419)),y.stack="",y.digest=le,Bl({value:y,source:null,stack:null}),i=Nu(a,i,d)}else if(ja||Xl(a,i,d,!1),le=(d&a.childLanes)!==0,ja||le){if(le=oa,le!==null&&(y=Cs(le,d),y!==0&&y!==et.retryLane))throw et.retryLane=y,al(a,y),la(le,a,y),kf;fx(Oe)||pl(),i=Nu(a,i,d)}else fx(Oe)?(i.flags|=192,i.child=a.child,i=null):(a=et.treeContext,ra=rc(Oe.nextSibling),Ni=i,ar=!0,qi=null,Ta=!1,a!==null&&ch(i,a),i=$f(i,y.children),i.flags|=4096);return i}return _?(Xa(),Oe=y.fallback,_=i.mode,et=a.child,Tt=et.sibling,y=bo(et,{mode:"hidden",children:y.children}),y.subtreeFlags=et.subtreeFlags&65011712,Tt!==null?Oe=bo(Tt,Oe):(Oe=Gl(Oe,_,d,null),Oe.flags|=2),Oe.return=i,y.return=i,y.sibling=Oe,i.child=y,Al(null,y),y=i.child,Oe=a.child.memoizedState,Oe===null?Oe=Gf(d):(_=Oe.cachePool,_!==null?(et=Da._currentValue,_=_.parent!==et?{parent:et,pool:et}:_):_=ze(),Oe={baseLanes:Oe.baseLanes|d,cachePool:_}),y.memoizedState=Oe,y.childLanes=Vf(a,le,d),i.memoizedState=DA,Al(a.child,y)):(Ma(i),d=a.child,a=d.sibling,d=bo(d,{mode:"visible",children:y.children}),d.return=i,d.sibling=null,a!==null&&(le=i.deletions,le===null?(i.deletions=[a],i.flags|=16):le.push(a)),i.child=d,i.memoizedState=null,d)}function $f(a,i){return i=wh({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function wh(a,i){return a=_i(22,a,null,i),a.lanes=0,a}function Nu(a,i,d){return aa(i,a.child,null,d),a=$f(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function xm(a,i,d){a.lanes|=i;var y=a.alternate;y!==null&&(y.lanes|=i),Vc(a.return,i,d)}function qf(a,i,d,y,_,H){var le=a.memoizedState;le===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:_,treeForkCount:H}:(le.isBackwards=i,le.rendering=null,le.renderingStartTime=0,le.last=y,le.tail=d,le.tailMode=_,le.treeForkCount=H)}function vm(a,i,d){var y=i.pendingProps,_=y.revealOrder,H=y.tail;y=y.children;var le=vr.current,Oe=(le&2)!==0;if(Oe?(le=le&1|2,i.flags|=128):le&=1,fe(vr,le),Hi(a,i,y,d),y=ar?Vl:0,!Oe&&a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&xm(a,d,i);else if(a.tag===19)xm(a,d,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(_){case"forwards":for(d=i.child,_=null;d!==null;)a=d.alternate,a!==null&&ki(a)===null&&(_=d),d=d.sibling;d=_,d===null?(_=i.child,i.child=null):(_=d.sibling,d.sibling=null),qf(i,!1,_,d,H,y);break;case"backwards":case"unstable_legacy-backwards":for(d=null,_=i.child,i.child=null;_!==null;){if(a=_.alternate,a!==null&&ki(a)===null){i.child=_;break}a=_.sibling,_.sibling=d,d=_,_=a}qf(i,!0,d,null,H,y);break;case"together":qf(i,!1,null,null,void 0,y);break;default:i.memoizedState=null}return i.child}function Bc(a,i,d){if(a!==null&&(i.dependencies=a.dependencies),U|=i.lanes,(d&i.childLanes)===0)if(a!==null){if(Xl(a,i,d,!1),(d&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(r(153));if(i.child!==null){for(a=i.child,d=bo(a,a.pendingProps),i.child=d,d.return=i;a.sibling!==null;)a=a.sibling,d=d.sibling=bo(a,a.pendingProps),d.return=i;d.sibling=null}return i.child}function Wf(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&ud(a)))}function Yf(a,i,d){switch(i.tag){case 3:ye(i,i.stateNode.containerInfo),Yl(i,Da,a.memoizedState.cache),bc();break;case 27:case 5:Te(i);break;case 4:ye(i,i.stateNode.containerInfo);break;case 10:Yl(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Hr(i),null;break;case 13:var y=i.memoizedState;if(y!==null)return y.dehydrated!==null?(Ma(i),i.flags|=128,null):(d&i.child.childLanes)!==0?ym(a,i,d):(Ma(i),a=Bc(a,i,d),a!==null?a.sibling:null);Ma(i);break;case 19:var _=(a.flags&128)!==0;if(y=(d&i.childLanes)!==0,y||(Xl(a,i,d,!1),y=(d&i.childLanes)!==0),_){if(y)return vm(a,i,d);i.flags|=128}if(_=i.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),fe(vr,vr.current),y)break;return null;case 22:return i.lanes=0,Sc(a,i,d,i.pendingProps);case 24:Yl(i,Da,a.memoizedState.cache)}return Bc(a,i,d)}function Sh(a,i,d){if(a!==null)if(a.memoizedProps!==i.pendingProps)ja=!0;else{if(!Wf(a,d)&&(i.flags&128)===0)return ja=!1,Yf(a,i,d);ja=(a.flags&131072)!==0}else ja=!1,ar&&(i.flags&1048576)!==0&&lh(i,Vl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var y=i.pendingProps;if(a=wt(i.elementType),i.type=a,typeof a=="function")wl(a)?(y=sA(a,y),i.tag=1,i=Kf(null,i,a,y,d)):(i.tag=0,i=Bu(null,i,a,y,d));else{if(a!=null){var _=a.$$typeof;if(_===K){i.tag=11,i=Ja(null,i,a,y,d);break e}else if(_===V){i.tag=14,i=nA(null,i,a,y,d);break e}}throw i=ce(a)||a,Error(r(306,i,""))}}return i;case 0:return Bu(a,i,i.type,i.pendingProps,d);case 1:return y=i.type,_=sA(y,i.pendingProps),Kf(a,i,y,_,d);case 3:e:{if(ye(i,i.stateNode.containerInfo),a===null)throw Error(r(387));y=i.pendingProps;var H=i.memoizedState;_=H.element,xa(a,i),$a(i,y,null,d);var le=i.memoizedState;if(y=le.cache,Yl(i,Da,y),y!==H.cache&&ll(i,[Da],d,!0),kr(),y=le.element,H.isDehydrated)if(H={element:y,isDehydrated:!1,cache:le.cache},i.updateQueue.baseState=H,i.memoizedState=H,i.flags&256){i=zf(a,i,y,d);break e}else if(y!==_){_=jo(Error(r(424)),i),Bl(_),i=zf(a,i,y,d);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ra=rc(a.firstChild),Ni=i,ar=!0,qi=null,Ta=!0,d=Ln(i,null,y,d),i.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(bc(),y===_){i=Bc(a,i,d);break e}Hi(a,i,y,d)}i=i.child}return i;case 26:return Su(a,i),a===null?(d=Z1(i.type,null,i.pendingProps,null))?i.memoizedState=d:ar||(d=i.type,a=i.pendingProps,y=km(Ce.current).createElement(d),y[Rt]=i,y[us]=a,ho(y,d,a),Yn(y),i.stateNode=y):i.memoizedState=Z1(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return Te(i),a===null&&ar&&(y=i.stateNode=Y1(i.type,i.pendingProps,Ce.current),Ni=i,Ta=!0,_=ra,Rd(i.type)?(mx=_,ra=rc(y.firstChild)):ra=_),Hi(a,i,i.pendingProps.children,d),Su(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&ar&&((_=y=ra)&&(y=zF(y,i.type,i.pendingProps,Ta),y!==null?(i.stateNode=y,Ni=i,ra=rc(y.firstChild),Ta=!1,_=!0):_=!1),_||ql(i)),Te(i),_=i.type,H=i.pendingProps,le=a!==null?a.memoizedProps:null,y=H.children,dx(_,H)?y=null:le!==null&&dx(_,le)&&(i.flags|=32),i.memoizedState!==null&&(_=du(a,i,uu,null,null,d),lp._currentValue=_),Su(a,i),Hi(a,i,y,d),i.child;case 6:return a===null&&ar&&((a=d=ra)&&(d=GF(d,i.pendingProps,Ta),d!==null?(i.stateNode=d,Ni=i,ra=null,a=!0):a=!1),a||ql(i)),null;case 13:return ym(a,i,d);case 4:return ye(i,i.stateNode.containerInfo),y=i.pendingProps,a===null?i.child=aa(i,null,y,d):Hi(a,i,y,d),i.child;case 11:return Ja(a,i,i.type,i.pendingProps,d);case 7:return Hi(a,i,i.pendingProps,d),i.child;case 8:return Hi(a,i,i.pendingProps.children,d),i.child;case 12:return Hi(a,i,i.pendingProps.children,d),i.child;case 10:return y=i.pendingProps,Yl(i,i.type,y.value),Hi(a,i,y.children,d),i.child;case 9:return _=i.type._context,y=i.pendingProps.children,Jl(i),_=Ei(_),y=y(_),i.flags|=1,Hi(a,i,y,d),i.child;case 14:return nA(a,i,i.type,i.pendingProps,d);case 15:return LA(a,i,i.type,i.pendingProps,d);case 19:return vm(a,i,d);case 31:return gm(a,i,d);case 22:return Sc(a,i,d,i.pendingProps);case 24:return Jl(i),y=Ei(Da),a===null?(_=Le(),_===null&&(_=oa,H=$c(),_.pooledCache=H,H.refCount++,H!==null&&(_.pooledCacheLanes|=d),_=H),i.memoizedState={parent:y,cache:_},ws(i),Yl(i,Da,_)):((a.lanes&d)!==0&&(xa(a,i),$a(i,null,null,d),kr()),_=a.memoizedState,H=i.memoizedState,_.parent!==y?(_={parent:y,cache:y},i.memoizedState=_,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=_),Yl(i,Da,y)):(y=H.cache,Yl(i,Da,y),y!==_.cache&&ll(i,[Da],d,!0))),Hi(a,i,i.pendingProps.children,d),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function sc(a){a.flags|=4}function Xf(a,i,d,y,_){if((i=(a.mode&32)!==0)&&(i=!1),i){if(a.flags|=16777216,(_&335544128)===_)if(a.stateNode.complete)a.flags|=8192;else if(Cc())a.flags|=8192;else throw Mt=ft,Nt}else a.flags&=-16777217}function bm(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!rj(i))if(Cc())a.flags|=8192;else throw Mt=ft,Nt}function Cu(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?ps():536870912,a.lanes|=i,_e|=i)}function Eu(a,i){if(!ar)switch(a.tailMode){case"hidden":i=a.tail;for(var d=null;i!==null;)i.alternate!==null&&(d=i),i=i.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function wa(a){var i=a.alternate!==null&&a.alternate.child===a.child,d=0,y=0;if(i)for(var _=a.child;_!==null;)d|=_.lanes|_.childLanes,y|=_.subtreeFlags&65011712,y|=_.flags&65011712,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)d|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=y,a.childLanes=d,i}function Wy(a,i,d){var y=i.pendingProps;switch(Ad(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(i),null;case 1:return wa(i),null;case 3:return d=i.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),i.memoizedState.cache!==y&&(i.flags|=2048),No(Da),we(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Ci(i)?sc(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,TA())),wa(i),null;case 26:var _=i.type,H=i.memoizedState;return a===null?(sc(i),H!==null?(wa(i),bm(i,H)):(wa(i),Xf(i,_,null,y,d))):H?H!==a.memoizedState?(sc(i),wa(i),bm(i,H)):(wa(i),i.flags&=-16777217):(a=a.memoizedProps,a!==y&&sc(i),wa(i),Xf(i,_,a,y,d)),null;case 27:if(qe(i),d=Ce.current,_=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==y&&sc(i);else{if(!y){if(i.stateNode===null)throw Error(r(166));return wa(i),null}a=ue.current,Ci(i)?Au(i):(a=Y1(_,y,d),i.stateNode=a,sc(i))}return wa(i),null;case 5:if(qe(i),_=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==y&&sc(i);else{if(!y){if(i.stateNode===null)throw Error(r(166));return wa(i),null}if(H=ue.current,Ci(i))Au(i);else{var le=km(Ce.current);switch(H){case 1:H=le.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:H=le.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":H=le.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":H=le.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":H=le.createElement("div"),H.innerHTML="<script><\/script>",H=H.removeChild(H.firstChild);break;case"select":H=typeof y.is=="string"?le.createElement("select",{is:y.is}):le.createElement("select"),y.multiple?H.multiple=!0:y.size&&(H.size=y.size);break;default:H=typeof y.is=="string"?le.createElement(_,{is:y.is}):le.createElement(_)}}H[Rt]=i,H[us]=y;e:for(le=i.child;le!==null;){if(le.tag===5||le.tag===6)H.appendChild(le.stateNode);else if(le.tag!==4&&le.tag!==27&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;le=le.return}le.sibling.return=le.return,le=le.sibling}i.stateNode=H;e:switch(ho(H,_,y),_){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&sc(i)}}return wa(i),Xf(i,i.type,a===null?null:a.memoizedProps,i.pendingProps,d),null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==y&&sc(i);else{if(typeof y!="string"&&i.stateNode===null)throw Error(r(166));if(a=Ce.current,Ci(i)){if(a=i.stateNode,d=i.memoizedProps,y=null,_=Ni,_!==null)switch(_.tag){case 27:case 5:y=_.memoizedProps}a[Rt]=i,a=!!(a.nodeValue===d||y!==null&&y.suppressHydrationWarning===!0||_1(a.nodeValue,d)),a||ql(i,!0)}else a=km(a).createTextNode(y),a[Rt]=i,i.stateNode=a}return wa(i),null;case 31:if(d=i.memoizedState,a===null||a.memoizedState!==null){if(y=Ci(i),d!==null){if(a===null){if(!y)throw Error(r(318));if(a=i.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Rt]=i}else bc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wa(i),a=!1}else d=TA(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return i.flags&256?(Wr(i),i):(Wr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return wa(i),null;case 13:if(y=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(_=Ci(i),y!==null&&y.dehydrated!==null){if(a===null){if(!_)throw Error(r(318));if(_=i.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Rt]=i}else bc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wa(i),_=!1}else _=TA(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=_),_=!0;if(!_)return i.flags&256?(Wr(i),i):(Wr(i),null)}return Wr(i),(i.flags&128)!==0?(i.lanes=d,i):(d=y!==null,a=a!==null&&a.memoizedState!==null,d&&(y=i.child,_=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(_=y.alternate.memoizedState.cachePool.pool),H=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(H=y.memoizedState.cachePool.pool),H!==_&&(y.flags|=2048)),d!==a&&d&&(i.child.flags|=8192),Cu(i,i.updateQueue),wa(i),null);case 4:return we(),a===null&&ix(i.stateNode.containerInfo),wa(i),null;case 10:return No(i.type),wa(i),null;case 19:if(Z(vr),y=i.memoizedState,y===null)return wa(i),null;if(_=(i.flags&128)!==0,H=y.rendering,H===null)if(_)Eu(y,!1);else{if(L!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(H=ki(a),H!==null){for(i.flags|=128,Eu(y,!1),a=H.updateQueue,i.updateQueue=a,Cu(i,a),i.subtreeFlags=0,a=d,d=i.child;d!==null;)CA(d,a),d=d.sibling;return fe(vr,vr.current&1|2),ar&&oo(i,y.treeForkCount),i.child}a=a.sibling}y.tail!==null&&Wt()>Rs&&(i.flags|=128,_=!0,Eu(y,!1),i.lanes=4194304)}else{if(!_)if(a=ki(H),a!==null){if(i.flags|=128,_=!0,a=a.updateQueue,i.updateQueue=a,Cu(i,a),Eu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!H.alternate&&!ar)return wa(i),null}else 2*Wt()-y.renderingStartTime>Rs&&d!==536870912&&(i.flags|=128,_=!0,Eu(y,!1),i.lanes=4194304);y.isBackwards?(H.sibling=i.child,i.child=H):(a=y.last,a!==null?a.sibling=H:i.child=H,y.last=H)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Wt(),a.sibling=null,d=vr.current,fe(vr,_?d&1|2:d&1),ar&&oo(i,y.treeForkCount),a):(wa(i),null);case 22:case 23:return Wr(i),Wa(),y=i.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(i.flags|=8192):y&&(i.flags|=8192),y?(d&536870912)!==0&&(i.flags&128)===0&&(wa(i),i.subtreeFlags&6&&(i.flags|=8192)):wa(i),d=i.updateQueue,d!==null&&Cu(i,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),y=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(y=i.memoizedState.cachePool.pool),y!==d&&(i.flags|=2048),a!==null&&Z(Re),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),No(Da),wa(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Yy(a,i){switch(Ad(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return No(Da),we(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return qe(i),null;case 31:if(i.memoizedState!==null){if(Wr(i),i.alternate===null)throw Error(r(340));bc()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 13:if(Wr(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(r(340));bc()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return Z(vr),null;case 4:return we(),null;case 10:return No(i.type),null;case 22:case 23:return Wr(i),Wa(),a!==null&&Z(Re),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return No(Da),null;case 25:return null;default:return null}}function jm(a,i){switch(Ad(i),i.tag){case 3:No(Da),we();break;case 26:case 27:case 5:qe(i);break;case 4:we();break;case 31:i.memoizedState!==null&&Wr(i);break;case 13:Wr(i);break;case 19:Z(vr);break;case 10:No(i.type);break;case 22:case 23:Wr(i),Wa(),a!==null&&Z(Re);break;case 24:No(Da)}}function QA(a,i){try{var d=i.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&a)===a){y=void 0;var H=d.create,le=d.inst;y=H(),le.destroy=y}d=d.next}while(d!==_)}}catch(Oe){ca(i,i.return,Oe)}}function rA(a,i,d){try{var y=i.updateQueue,_=y!==null?y.lastEffect:null;if(_!==null){var H=_.next;y=H;do{if((y.tag&a)===a){var le=y.inst,Oe=le.destroy;if(Oe!==void 0){le.destroy=void 0,_=i;var et=d,Tt=Oe;try{Tt()}catch(Kt){ca(_,et,Kt)}}}y=y.next}while(y!==H)}}catch(Kt){ca(i,i.return,Kt)}}function Bh(a){var i=a.updateQueue;if(i!==null){var d=a.stateNode;try{qa(i,d)}catch(y){ca(a,a.return,y)}}}function wm(a,i,d){d.props=sA(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){ca(a,i,y)}}function Is(a,i){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d=="function"?a.refCleanup=d(y):d.current=y}}catch(_){ca(a,i,_)}}function co(a,i){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y=="function")try{y()}catch(_){ca(a,i,_)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(_){ca(a,i,_)}else d.current=null}function Tu(a){var i=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":d.autoFocus&&y.focus();break e;case"img":d.src?y.src=d.src:d.srcSet&&(y.srcset=d.srcSet)}}catch(_){ca(a,a.return,_)}}function To(a,i,d){try{var y=a.stateNode;MF(y,a.type,d,i),y[us]=i}catch(_){ca(a,a.return,_)}}function Sm(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Rd(a.type)||a.tag===4}function Qr(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Sm(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Rd(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ua(a,i,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,i?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,i):(i=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,i.appendChild(a),d=d._reactRootContainer,d!=null||i.onclick!==null||(i.onclick=sn));else if(y!==4&&(y===27&&Rd(a.type)&&(d=a.stateNode,i=null),a=a.child,a!==null))for(ua(a,i,d),a=a.sibling;a!==null;)ua(a,i,d),a=a.sibling}function MA(a,i,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,i?d.insertBefore(a,i):d.appendChild(a);else if(y!==4&&(y===27&&Rd(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(MA(a,i,d),a=a.sibling;a!==null;)MA(a,i,d),a=a.sibling}function Bm(a){var i=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,_=i.attributes;_.length;)i.removeAttributeNode(_[0]);ho(i,y,d),i[Rt]=a,i[us]=d}catch(H){ca(a,a.return,H)}}var ul=!1,gi=!1,Ed=!1,Nm=typeof WeakSet=="function"?WeakSet:Set,Ki=null;function Cm(a,i){if(a=a.containerInfo,cx=qm,a=sl(a),nl(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var _=y.anchorOffset,H=y.focusNode;y=y.focusOffset;try{d.nodeType,H.nodeType}catch{d=null;break e}var le=0,Oe=-1,et=-1,Tt=0,Kt=0,Zt=a,Ft=null;t:for(;;){for(var Ut;Zt!==d||_!==0&&Zt.nodeType!==3||(Oe=le+_),Zt!==H||y!==0&&Zt.nodeType!==3||(et=le+y),Zt.nodeType===3&&(le+=Zt.nodeValue.length),(Ut=Zt.firstChild)!==null;)Ft=Zt,Zt=Ut;for(;;){if(Zt===a)break t;if(Ft===d&&++Tt===_&&(Oe=le),Ft===H&&++Kt===y&&(et=le),(Ut=Zt.nextSibling)!==null)break;Zt=Ft,Ft=Zt.parentNode}Zt=Ut}d=Oe===-1||et===-1?null:{start:Oe,end:et}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ax={focusedElem:a,selectionRange:d},qm=!1,Ki=i;Ki!==null;)if(i=Ki,a=i.child,(i.subtreeFlags&1028)!==0&&a!==null)a.return=i,Ki=a;else for(;Ki!==null;){switch(i=Ki,H=i.alternate,a=i.flags,i.tag){case 0:if((a&4)!==0&&(a=i.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)_=a[d],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&H!==null){a=void 0,d=i,_=H.memoizedProps,H=H.memoizedState,y=d.stateNode;try{var Ws=sA(d.type,_);a=y.getSnapshotBeforeUpdate(Ws,H),y.__reactInternalSnapshotBeforeUpdate=a}catch(Tn){ca(d,d.return,Tn)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,d=a.nodeType,d===9)hx(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":hx(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=i.sibling,a!==null){a.return=i.return,Ki=a;break}Ki=i.return}}function Em(a,i,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:hl(a,d),y&4&&QA(5,d);break;case 1:if(hl(a,d),y&4)if(a=d.stateNode,i===null)try{a.componentDidMount()}catch(le){ca(d,d.return,le)}else{var _=sA(d.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(_,i,a.__reactInternalSnapshotBeforeUpdate)}catch(le){ca(d,d.return,le)}}y&64&&Bh(d),y&512&&Is(d,d.return);break;case 3:if(hl(a,d),y&64&&(a=d.updateQueue,a!==null)){if(i=null,d.child!==null)switch(d.child.tag){case 27:case 5:i=d.child.stateNode;break;case 1:i=d.child.stateNode}try{qa(a,i)}catch(le){ca(d,d.return,le)}}break;case 27:i===null&&y&4&&Bm(d);case 26:case 5:hl(a,d),i===null&&y&4&&Tu(d),y&512&&Is(d,d.return);break;case 12:hl(a,d);break;case 31:hl(a,d),y&4&&Zf(a,d);break;case 13:hl(a,d),y&4&&Tm(a,d),y&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=NF.bind(null,d),VF(a,d))));break;case 22:if(y=d.memoizedState!==null||ul,!y){i=i!==null&&i.memoizedState!==null||gi,_=ul;var H=gi;ul=y,(gi=i)&&!H?Nc(a,d,(d.subtreeFlags&8772)!==0):hl(a,d),ul=_,gi=H}break;case 30:break;default:hl(a,d)}}function Jf(a){var i=a.alternate;i!==null&&(a.alternate=null,Jf(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&Mr(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ia=null,Ao=!1;function nc(a,i,d){for(d=d.child;d!==null;)Nh(a,i,d),d=d.sibling}function Nh(a,i,d){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(Qt,d)}catch{}switch(d.tag){case 26:gi||co(d,i),nc(a,i,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:gi||co(d,i);var y=Ia,_=Ao;Rd(d.type)&&(Ia=d.stateNode,Ao=!1),nc(a,i,d),ap(d.stateNode),Ia=y,Ao=_;break;case 5:gi||co(d,i);case 6:if(y=Ia,_=Ao,Ia=null,nc(a,i,d),Ia=y,Ao=_,Ia!==null)if(Ao)try{(Ia.nodeType===9?Ia.body:Ia.nodeName==="HTML"?Ia.ownerDocument.body:Ia).removeChild(d.stateNode)}catch(H){ca(d,i,H)}else try{Ia.removeChild(d.stateNode)}catch(H){ca(d,i,H)}break;case 18:Ia!==null&&(Ao?(a=Ia,G1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Uh(a)):G1(Ia,d.stateNode));break;case 4:y=Ia,_=Ao,Ia=d.stateNode.containerInfo,Ao=!0,nc(a,i,d),Ia=y,Ao=_;break;case 0:case 11:case 14:case 15:rA(2,d,i),gi||rA(4,d,i),nc(a,i,d);break;case 1:gi||(co(d,i),y=d.stateNode,typeof y.componentWillUnmount=="function"&&wm(d,i,y)),nc(a,i,d);break;case 21:nc(a,i,d);break;case 22:gi=(y=gi)||d.memoizedState!==null,nc(a,i,d),gi=y;break;default:nc(a,i,d)}}function Zf(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Uh(a)}catch(d){ca(i,i.return,d)}}}function Tm(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Uh(a)}catch(d){ca(i,i.return,d)}}function Fm(a){switch(a.tag){case 31:case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new Nm),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new Nm),i;default:throw Error(r(435,a.tag))}}function Ch(a,i){var d=Fm(a);i.forEach(function(y){if(!d.has(y)){d.add(y);var _=CF.bind(null,a,y);y.then(_,_)}})}function Fo(a,i){var d=i.deletions;if(d!==null)for(var y=0;y<d.length;y++){var _=d[y],H=a,le=i,Oe=le;e:for(;Oe!==null;){switch(Oe.tag){case 27:if(Rd(Oe.type)){Ia=Oe.stateNode,Ao=!1;break e}break;case 5:Ia=Oe.stateNode,Ao=!1;break e;case 3:case 4:Ia=Oe.stateNode.containerInfo,Ao=!0;break e}Oe=Oe.return}if(Ia===null)throw Error(r(160));Nh(H,le,_),Ia=null,Ao=!1,H=_.alternate,H!==null&&(H.return=null),_.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Fu(i,a),i=i.sibling}var Fl=null;function Fu(a,i){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Fo(i,a),Sa(a),y&4&&(rA(3,a,a.return),QA(3,a),rA(5,a,a.return));break;case 1:Fo(i,a),Sa(a),y&512&&(gi||d===null||co(d,d.return)),y&64&&ul&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var _=Fl;if(Fo(i,a),Sa(a),y&512&&(gi||d===null||co(d,d.return)),y&4){var H=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,_=_.ownerDocument||_;t:switch(y){case"title":H=_.getElementsByTagName("title")[0],(!H||H[an]||H[Rt]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=_.createElement(y),_.head.insertBefore(H,_.querySelector("head > title"))),ho(H,y,d),H[Rt]=a,Yn(H),y=H;break e;case"link":var le=sj("link","href",_).get(y+(d.href||""));if(le){for(var Oe=0;Oe<le.length;Oe++)if(H=le[Oe],H.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&H.getAttribute("rel")===(d.rel==null?null:d.rel)&&H.getAttribute("title")===(d.title==null?null:d.title)&&H.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){le.splice(Oe,1);break t}}H=_.createElement(y),ho(H,y,d),_.head.appendChild(H);break;case"meta":if(le=sj("meta","content",_).get(y+(d.content||""))){for(Oe=0;Oe<le.length;Oe++)if(H=le[Oe],H.getAttribute("content")===(d.content==null?null:""+d.content)&&H.getAttribute("name")===(d.name==null?null:d.name)&&H.getAttribute("property")===(d.property==null?null:d.property)&&H.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&H.getAttribute("charset")===(d.charSet==null?null:d.charSet)){le.splice(Oe,1);break t}}H=_.createElement(y),ho(H,y,d),_.head.appendChild(H);break;default:throw Error(r(468,y))}H[Rt]=a,Yn(H),y=H}a.stateNode=y}else nj(_,a.type,a.stateNode);else a.stateNode=tj(_,y,a.memoizedProps);else H!==y?(H===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):H.count--,y===null?nj(_,a.type,a.stateNode):tj(_,y,a.memoizedProps)):y===null&&a.stateNode!==null&&To(a,a.memoizedProps,d.memoizedProps)}break;case 27:Fo(i,a),Sa(a),y&512&&(gi||d===null||co(d,d.return)),d!==null&&y&4&&To(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Fo(i,a),Sa(a),y&512&&(gi||d===null||co(d,d.return)),a.flags&32){_=a.stateNode;try{$r(_,"")}catch(Ws){ca(a,a.return,Ws)}}y&4&&a.stateNode!=null&&(_=a.memoizedProps,To(a,_,d!==null?d.memoizedProps:_)),y&1024&&(Ed=!0);break;case 6:if(Fo(i,a),Sa(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(Ws){ca(a,a.return,Ws)}}break;case 3:if(zm=null,_=Fl,Fl=Hm(i.containerInfo),Fo(i,a),Fl=_,Sa(a),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Uh(i.containerInfo)}catch(Ws){ca(a,a.return,Ws)}Ed&&(Ed=!1,ep(a));break;case 4:y=Fl,Fl=Hm(a.stateNode.containerInfo),Fo(i,a),Sa(a),Fl=y;break;case 12:Fo(i,a),Sa(a);break;case 31:Fo(i,a),Sa(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Ch(a,y)));break;case 13:Fo(i,a),Sa(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(jt=Wt()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Ch(a,y)));break;case 22:_=a.memoizedState!==null;var et=d!==null&&d.memoizedState!==null,Tt=ul,Kt=gi;if(ul=Tt||_,gi=Kt||et,Fo(i,a),gi=Kt,ul=Tt,Sa(a),y&8192)e:for(i=a.stateNode,i._visibility=_?i._visibility&-2:i._visibility|1,_&&(d===null||et||ul||gi||_A(a)),d=null,i=a;;){if(i.tag===5||i.tag===26){if(d===null){et=d=i;try{if(H=et.stateNode,_)le=H.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{Oe=et.stateNode;var Zt=et.memoizedProps.style,Ft=Zt!=null&&Zt.hasOwnProperty("display")?Zt.display:null;Oe.style.display=Ft==null||typeof Ft=="boolean"?"":(""+Ft).trim()}}catch(Ws){ca(et,et.return,Ws)}}}else if(i.tag===6){if(d===null){et=i;try{et.stateNode.nodeValue=_?"":et.memoizedProps}catch(Ws){ca(et,et.return,Ws)}}}else if(i.tag===18){if(d===null){et=i;try{var Ut=et.stateNode;_?V1(Ut,!0):V1(et.stateNode,!1)}catch(Ws){ca(et,et.return,Ws)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;d===i&&(d=null),i=i.return}d===i&&(d=null),i.sibling.return=i.return,i=i.sibling}y&4&&(y=a.updateQueue,y!==null&&(d=y.retryQueue,d!==null&&(y.retryQueue=null,Ch(a,d))));break;case 19:Fo(i,a),Sa(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Ch(a,y)));break;case 30:break;case 21:break;default:Fo(i,a),Sa(a)}}function Sa(a){var i=a.flags;if(i&2){try{for(var d,y=a.return;y!==null;){if(Sm(y)){d=y;break}y=y.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var _=d.stateNode,H=Qr(a);MA(a,H,_);break;case 5:var le=d.stateNode;d.flags&32&&($r(le,""),d.flags&=-33);var Oe=Qr(a);MA(a,Oe,le);break;case 3:case 4:var et=d.stateNode.containerInfo,Tt=Qr(a);ua(a,Tt,et);break;default:throw Error(r(161))}}catch(Kt){ca(a,a.return,Kt)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function ep(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;ep(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function hl(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Em(a,i.alternate,i),i=i.sibling}function _A(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:rA(4,i,i.return),_A(i);break;case 1:co(i,i.return);var d=i.stateNode;typeof d.componentWillUnmount=="function"&&wm(i,i.return,d),_A(i);break;case 27:ap(i.stateNode);case 26:case 5:co(i,i.return),_A(i);break;case 22:i.memoizedState===null&&_A(i);break;case 30:_A(i);break;default:_A(i)}a=a.sibling}}function Nc(a,i,d){for(d=d&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var y=i.alternate,_=a,H=i,le=H.flags;switch(H.tag){case 0:case 11:case 15:Nc(_,H,d),QA(4,H);break;case 1:if(Nc(_,H,d),y=H,_=y.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Tt){ca(y,y.return,Tt)}if(y=H,_=y.updateQueue,_!==null){var Oe=y.stateNode;try{var et=_.shared.hiddenCallbacks;if(et!==null)for(_.shared.hiddenCallbacks=null,_=0;_<et.length;_++)Pi(et[_],Oe)}catch(Tt){ca(y,y.return,Tt)}}d&&le&64&&Bh(H),Is(H,H.return);break;case 27:Bm(H);case 26:case 5:Nc(_,H,d),d&&y===null&&le&4&&Tu(H),Is(H,H.return);break;case 12:Nc(_,H,d);break;case 31:Nc(_,H,d),d&&le&4&&Zf(_,H);break;case 13:Nc(_,H,d),d&&le&4&&Tm(_,H);break;case 22:H.memoizedState===null&&Nc(_,H,d),Is(H,H.return);break;case 30:break;default:Nc(_,H,d)}i=i.sibling}}function Iu(a,i){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&FA(d))}function aA(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&FA(a))}function Io(a,i,d,y){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Im(a,i,d,y),i=i.sibling}function Im(a,i,d,y){var _=i.flags;switch(i.tag){case 0:case 11:case 15:Io(a,i,d,y),_&2048&&QA(9,i);break;case 1:Io(a,i,d,y);break;case 3:Io(a,i,d,y),_&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&FA(a)));break;case 12:if(_&2048){Io(a,i,d,y),a=i.stateNode;try{var H=i.memoizedProps,le=H.id,Oe=H.onPostCommit;typeof Oe=="function"&&Oe(le,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(et){ca(i,i.return,et)}}else Io(a,i,d,y);break;case 31:Io(a,i,d,y);break;case 13:Io(a,i,d,y);break;case 23:break;case 22:H=i.stateNode,le=i.alternate,i.memoizedState!==null?H._visibility&2?Io(a,i,d,y):Ru(a,i):H._visibility&2?Io(a,i,d,y):(H._visibility|=2,Il(a,i,d,y,(i.subtreeFlags&10256)!==0||!1)),_&2048&&Iu(le,i);break;case 24:Io(a,i,d,y),_&2048&&aA(i.alternate,i);break;default:Io(a,i,d,y)}}function Il(a,i,d,y,_){for(_=_&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var H=a,le=i,Oe=d,et=y,Tt=le.flags;switch(le.tag){case 0:case 11:case 15:Il(H,le,Oe,et,_),QA(8,le);break;case 23:break;case 22:var Kt=le.stateNode;le.memoizedState!==null?Kt._visibility&2?Il(H,le,Oe,et,_):Ru(H,le):(Kt._visibility|=2,Il(H,le,Oe,et,_)),_&&Tt&2048&&Iu(le.alternate,le);break;case 24:Il(H,le,Oe,et,_),_&&Tt&2048&&aA(le.alternate,le);break;default:Il(H,le,Oe,et,_)}i=i.sibling}}function Ru(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var d=a,y=i,_=y.flags;switch(y.tag){case 22:Ru(d,y),_&2048&&Iu(y.alternate,y);break;case 24:Ru(d,y),_&2048&&aA(y.alternate,y);break;default:Ru(d,y)}i=i.sibling}}var Ou=8192;function PA(a,i,d){if(a.subtreeFlags&Ou)for(a=a.child;a!==null;)Rm(a,i,d),a=a.sibling}function Rm(a,i,d){switch(a.tag){case 26:PA(a,i,d),a.flags&Ou&&a.memoizedState!==null&&rI(d,Fl,a.memoizedState,a.memoizedProps);break;case 5:PA(a,i,d);break;case 3:case 4:var y=Fl;Fl=Hm(a.stateNode.containerInfo),PA(a,i,d),Fl=y;break;case 22:a.memoizedState===null&&(y=a.alternate,y!==null&&y.memoizedState!==null?(y=Ou,Ou=16777216,PA(a,i,d),Ou=y):PA(a,i,d));break;default:PA(a,i,d)}}function tp(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function Uu(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var y=i[d];Ki=y,Um(y,a)}tp(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Om(a),a=a.sibling}function Om(a){switch(a.tag){case 0:case 11:case 15:Uu(a),a.flags&2048&&rA(9,a,a.return);break;case 3:Uu(a);break;case 12:Uu(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Eh(a)):Uu(a);break;default:Uu(a)}}function Eh(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var y=i[d];Ki=y,Um(y,a)}tp(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:rA(8,i,i.return),Eh(i);break;case 22:d=i.stateNode,d._visibility&2&&(d._visibility&=-3,Eh(i));break;default:Eh(i)}a=a.sibling}}function Um(a,i){for(;Ki!==null;){var d=Ki;switch(d.tag){case 0:case 11:case 15:rA(8,d,i);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:FA(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Ki=y;else e:for(d=a;Ki!==null;){y=Ki;var _=y.sibling,H=y.return;if(Jf(y),y===d){Ki=null;break e}if(_!==null){_.return=H,Ki=_;break e}Ki=H}}}var Xy={getCacheForType:function(a){var i=Ei(Da),d=i.data.get(a);return d===void 0&&(d=a(),i.data.set(a,d)),d},cacheSignal:function(){return Ei(Da).controller.signal}},Jy=typeof WeakMap=="function"?WeakMap:Map,Kr=0,oa=null,ir=null,dr=0,Xr=0,Yo=null,iA=!1,Td=!1,O=!1,T=0,L=0,U=0,Y=0,de=0,Ee=0,_e=0,Pe=null,rt=null,yt=!1,jt=0,kt=0,Rs=1/0,xs=null,Bs=null,cn=0,Hs=null,Ms=null,qn=0,kn=0,En=null,Os=null,tr=0,ur=null;function un(){return(Kr&2)!==0&&dr!==0?dr&-dr:ne.T!==null?sx():Ps()}function oi(){if(Ee===0)if((dr&536870912)===0||ar){var a=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),Ee=a}else Ee=536870912;return a=va.current,a!==null&&(a.flags|=32),Ee}function la(a,i,d){(a===oa&&(Xr===2||Xr===9)||a.cancelPendingCommit!==null)&&(fl(a,0),uo(a,dr,Ee,!1)),is(a,d),((Kr&2)===0||a!==oa)&&(a===oa&&((Kr&2)===0&&(Y|=d),L===4&&uo(a,dr,Ee,!1)),cA(a))}function Ro(a,i,d){if((Kr&6)!==0)throw Error(r(327));var y=!d&&(i&127)===0&&(i&a.expiredLanes)===0||xt(a,i),_=y?Fd(a,i):Ec(a,i,!0),H=y;do{if(_===0){Td&&!y&&uo(a,i,0,!1);break}else{if(d=a.current.alternate,H&&!Yi(d)){_=Ec(a,i,!1),H=!1;continue}if(_===2){if(H=i,a.errorRecoveryDisabledLanes&H)var le=0;else le=a.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){i=le;e:{var Oe=a;_=Pe;var et=Oe.current.memoizedState.isDehydrated;if(et&&(fl(Oe,le).flags|=256),le=Ec(Oe,le,!1),le!==2){if(O&&!et){Oe.errorRecoveryDisabledLanes|=H,Y|=H,_=4;break e}H=rt,rt=_,H!==null&&(rt===null?rt=H:rt.push.apply(rt,H))}_=le}if(H=!1,_!==2)continue}}if(_===1){fl(a,0),uo(a,i,0,!0);break}e:{switch(y=a,H=_,H){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:uo(y,i,Ee,!iA);break e;case 2:rt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(_=jt+300-Wt(),10<_)){if(uo(y,i,Ee,!iA),Dt(y,0,!0)!==0)break e;qn=i,y.timeoutHandle=K1(Jr.bind(null,y,d,rt,xs,yt,i,Ee,Y,_e,iA,H,"Throttled",-0,0),_);break e}Jr(y,d,rt,xs,yt,i,Ee,Y,_e,iA,H,null,-0,0)}}break}while(!0);cA(a)}function Jr(a,i,d,y,_,H,le,Oe,et,Tt,Kt,Zt,Ft,Ut){if(a.timeoutHandle=-1,Zt=i.subtreeFlags,Zt&8192||(Zt&16785408)===16785408){Zt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sn},Rm(i,H,Zt);var Ws=(H&62914560)===H?jt-Wt():(H&4194048)===H?kt-Wt():0;if(Ws=aI(Zt,Ws),Ws!==null){qn=H,a.cancelPendingCommit=Ws(b1.bind(null,a,i,H,d,y,_,le,Oe,et,Kt,Zt,null,Ft,Ut)),uo(a,H,le,!Tt);return}}b1(a,i,H,d,y,_,le,Oe,et)}function Yi(a){for(var i=a;;){var d=i.tag;if((d===0||d===11||d===15)&&i.flags&16384&&(d=i.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var y=0;y<d.length;y++){var _=d[y],H=_.getSnapshot;_=_.value;try{if(!lr(H(),_))return!1}catch{return!1}}if(d=i.child,i.subtreeFlags&16384&&d!==null)d.return=i,i=d;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function uo(a,i,d,y){i&=~de,i&=~Y,a.suspendedLanes|=i,a.pingedLanes&=~i,y&&(a.warmLanes|=i),y=a.expirationTimes;for(var _=i;0<_;){var H=31-qt(_),le=1<<H;y[H]=-1,_&=~le}d!==0&&Ns(a,d,i)}function Xi(){return(Kr&6)===0?(sp(0),!1):!0}function so(){if(ir!==null){if(Xr===0)var a=ir.return;else a=ir,ol=Wl=null,RA(a),Xt=null,$s=0,a=ir;for(;a!==null;)jm(a.alternate,a),a=a.return;ir=null}}function fl(a,i){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,kF(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),qn=0,so(),oa=a,ir=d=bo(a.current,null),dr=i,Xr=0,Yo=null,iA=!1,Td=xt(a,i),O=!1,_e=Ee=de=Y=U=L=0,rt=Pe=null,yt=!1,(i&8)!==0&&(i|=i&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=i;0<y;){var _=31-qt(y),H=1<<_;i|=a[_],y&=~H}return T=i,BA(),d}function Rl(a,i){pn=null,ne.H=vu,i===ot||i===Ke?(i=Gt(),Xr=3):i===Nt?(i=Gt(),Xr=4):Xr=i===kf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Yo=i,ir===null&&(L=1,wu(a,jo(i,a.current)))}function Cc(){var a=va.current;return a===null?!0:(dr&4194048)===dr?Ar===null:(dr&62914560)===dr||(dr&536870912)!==0?a===Ar:!1}function oA(){var a=ne.H;return ne.H=vu,a===null?vu:a}function lA(){var a=ne.A;return ne.A=Xy,a}function pl(){L=4,iA||(dr&4194048)!==dr&&va.current!==null||(Td=!0),(U&134217727)===0&&(Y&134217727)===0||oa===null||uo(oa,dr,Ee,!1)}function Ec(a,i,d){var y=Kr;Kr|=2;var _=oA(),H=lA();(oa!==a||dr!==i)&&(xs=null,fl(a,i)),i=!1;var le=L;e:do try{if(Xr!==0&&ir!==null){var Oe=ir,et=Yo;switch(Xr){case 8:so(),le=6;break e;case 3:case 2:case 9:case 6:va.current===null&&(i=!0);var Tt=Xr;if(Xr=0,Yo=null,Th(a,Oe,et,Tt),d&&Td){le=0;break e}break;default:Tt=Xr,Xr=0,Yo=null,Th(a,Oe,et,Tt)}}Tc(),le=L;break}catch(Kt){Rl(a,Kt)}while(!0);return i&&a.shellSuspendCounter++,ol=Wl=null,Kr=y,ne.H=_,ne.A=H,ir===null&&(oa=null,dr=0,BA()),le}function Tc(){for(;ir!==null;)y1(ir)}function Fd(a,i){var d=Kr;Kr|=2;var y=oA(),_=lA();oa!==a||dr!==i?(xs=null,Rs=Wt()+500,fl(a,i)):Td=xt(a,i);e:do try{if(Xr!==0&&ir!==null){i=ir;var H=Yo;t:switch(Xr){case 1:Xr=0,Yo=null,Th(a,i,H,1);break;case 2:case 9:if(mt(H)){Xr=0,Yo=null,x1(i);break}i=function(){Xr!==2&&Xr!==9||oa!==a||(Xr=7),cA(a)},H.then(i,i);break e;case 3:Xr=7;break e;case 4:Xr=5;break e;case 7:mt(H)?(Xr=0,Yo=null,x1(i)):(Xr=0,Yo=null,Th(a,i,H,7));break;case 5:var le=null;switch(ir.tag){case 26:le=ir.memoizedState;case 5:case 27:var Oe=ir;if(le?rj(le):Oe.stateNode.complete){Xr=0,Yo=null;var et=Oe.sibling;if(et!==null)ir=et;else{var Tt=Oe.return;Tt!==null?(ir=Tt,Lm(Tt)):ir=null}break t}}Xr=0,Yo=null,Th(a,i,H,5);break;case 6:Xr=0,Yo=null,Th(a,i,H,6);break;case 8:so(),L=6;break e;default:throw Error(r(462))}}Lu();break}catch(Kt){Rl(a,Kt)}while(!0);return ol=Wl=null,ne.H=y,ne.A=_,Kr=d,ir!==null?0:(oa=null,dr=0,BA(),L)}function Lu(){for(;ir!==null&&!Ct();)y1(ir)}function y1(a){var i=Sh(a.alternate,a,T);a.memoizedProps=a.pendingProps,i===null?Lm(a):ir=i}function x1(a){var i=a,d=i.alternate;switch(i.tag){case 15:case 0:i=Cd(d,i,i.pendingProps,i.type,void 0,dr);break;case 11:i=Cd(d,i,i.pendingProps,i.type.render,i.ref,dr);break;case 5:RA(i);default:jm(d,i),i=ir=CA(i,T),i=Sh(d,i,T)}a.memoizedProps=a.pendingProps,i===null?Lm(a):ir=i}function Th(a,i,d,y){ol=Wl=null,RA(i),Xt=null,$s=0;var _=i.return;try{if(qy(a,_,i,d,dr)){L=1,wu(a,jo(d,a.current)),ir=null;return}}catch(H){if(_!==null)throw ir=_,H;L=1,wu(a,jo(d,a.current)),ir=null;return}i.flags&32768?(ar||y===1?a=!0:Td||(dr&536870912)!==0?a=!1:(iA=a=!0,(y===2||y===9||y===3||y===6)&&(y=va.current,y!==null&&y.tag===13&&(y.flags|=16384))),v1(i,a)):Lm(i)}function Lm(a){var i=a;do{if((i.flags&32768)!==0){v1(i,iA);return}a=i.return;var d=Wy(i.alternate,i,T);if(d!==null){ir=d;return}if(i=i.sibling,i!==null){ir=i;return}ir=i=a}while(i!==null);L===0&&(L=5)}function v1(a,i){do{var d=Yy(a.alternate,a);if(d!==null){d.flags&=32767,ir=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!i&&(a=a.sibling,a!==null)){ir=a;return}ir=a=d}while(a!==null);L=6,ir=null}function b1(a,i,d,y,_,H,le,Oe,et){a.cancelPendingCommit=null;do Dm();while(cn!==0);if((Kr&6)!==0)throw Error(r(327));if(i!==null){if(i===a.current)throw Error(r(177));if(H=i.lanes|i.childLanes,H|=ad,Fs(a,d,H,le,Oe,et),a===oa&&(ir=oa=null,dr=0),Ms=i,Hs=a,qn=d,kn=H,En=_,Os=y,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,EF($e,function(){return N1(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||y){y=ne.T,ne.T=null,_=re.p,re.p=2,le=Kr,Kr|=4;try{Cm(a,i,d)}finally{Kr=le,re.p=_,ne.T=y}}cn=1,j1(),w1(),S1()}}function j1(){if(cn===1){cn=0;var a=Hs,i=Ms,d=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null;var y=re.p;re.p=2;var _=Kr;Kr|=4;try{Fu(i,a);var H=Ax,le=sl(a.containerInfo),Oe=H.focusedElem,et=H.selectionRange;if(le!==Oe&&Oe&&Oe.ownerDocument&&Go(Oe.ownerDocument.documentElement,Oe)){if(et!==null&&nl(Oe)){var Tt=et.start,Kt=et.end;if(Kt===void 0&&(Kt=Tt),"selectionStart"in Oe)Oe.selectionStart=Tt,Oe.selectionEnd=Math.min(Kt,Oe.value.length);else{var Zt=Oe.ownerDocument||document,Ft=Zt&&Zt.defaultView||window;if(Ft.getSelection){var Ut=Ft.getSelection(),Ws=Oe.textContent.length,Tn=Math.min(et.start,Ws),fa=et.end===void 0?Tn:Math.min(et.end,Ws);!Ut.extend&&Tn>fa&&(le=fa,fa=Tn,Tn=le);var bt=mc(Oe,Tn),ct=mc(Oe,fa);if(bt&&ct&&(Ut.rangeCount!==1||Ut.anchorNode!==bt.node||Ut.anchorOffset!==bt.offset||Ut.focusNode!==ct.node||Ut.focusOffset!==ct.offset)){var Et=Zt.createRange();Et.setStart(bt.node,bt.offset),Ut.removeAllRanges(),Tn>fa?(Ut.addRange(Et),Ut.extend(ct.node,ct.offset)):(Et.setEnd(ct.node,ct.offset),Ut.addRange(Et))}}}}for(Zt=[],Ut=Oe;Ut=Ut.parentNode;)Ut.nodeType===1&&Zt.push({element:Ut,left:Ut.scrollLeft,top:Ut.scrollTop});for(typeof Oe.focus=="function"&&Oe.focus(),Oe=0;Oe<Zt.length;Oe++){var Yt=Zt[Oe];Yt.element.scrollLeft=Yt.left,Yt.element.scrollTop=Yt.top}}qm=!!cx,Ax=cx=null}finally{Kr=_,re.p=y,ne.T=d}}a.current=i,cn=2}}function w1(){if(cn===2){cn=0;var a=Hs,i=Ms,d=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||d){d=ne.T,ne.T=null;var y=re.p;re.p=2;var _=Kr;Kr|=4;try{Em(a,i.alternate,i)}finally{Kr=_,re.p=y,ne.T=d}}cn=3}}function S1(){if(cn===4||cn===3){cn=0,It();var a=Hs,i=Ms,d=qn,y=Os;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,Ms=Hs=null,B1(a,a.pendingLanes));var _=a.pendingLanes;if(_===0&&(Bs=null),os(d),i=i.stateNode,ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(Qt,i,void 0,(i.current.flags&128)===128)}catch{}if(y!==null){i=ne.T,_=re.p,re.p=2,ne.T=null;try{for(var H=a.onRecoverableError,le=0;le<y.length;le++){var Oe=y[le];H(Oe.value,{componentStack:Oe.stack})}}finally{ne.T=i,re.p=_}}(qn&3)!==0&&Dm(),cA(a),_=a.pendingLanes,(d&261930)!==0&&(_&42)!==0?a===ur?tr++:(tr=0,ur=a):tr=0,sp(0)}}function B1(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,FA(i)))}function Dm(){return j1(),w1(),S1(),N1()}function N1(){if(cn!==5)return!1;var a=Hs,i=kn;kn=0;var d=os(qn),y=ne.T,_=re.p;try{re.p=32>d?32:d,ne.T=null,d=En,En=null;var H=Hs,le=qn;if(cn=0,Ms=Hs=null,qn=0,(Kr&6)!==0)throw Error(r(331));var Oe=Kr;if(Kr|=4,Om(H.current),Im(H,H.current,le,d),Kr=Oe,sp(0,!1),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(Qt,H)}catch{}return!0}finally{re.p=_,ne.T=y,B1(a,i)}}function C1(a,i,d){i=jo(d,i),i=Mf(a.stateNode,i,2),a=Sn(a,i,2),a!==null&&(is(a,2),cA(a))}function ca(a,i,d){if(a.tag===3)C1(a,a,d);else for(;i!==null;){if(i.tag===3){C1(i,a,d);break}else if(i.tag===1){var y=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Bs===null||!Bs.has(y))){a=jo(d,a),d=_f(2),y=Sn(i,d,2),y!==null&&(Pf(d,y,i,a),is(y,2),cA(y));break}}i=i.return}}function Zy(a,i,d){var y=a.pingCache;if(y===null){y=a.pingCache=new Jy;var _=new Set;y.set(i,_)}else _=y.get(i),_===void 0&&(_=new Set,y.set(i,_));_.has(d)||(O=!0,_.add(d),a=BF.bind(null,a,i,d),i.then(a,a))}function BF(a,i,d){var y=a.pingCache;y!==null&&y.delete(i),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,oa===a&&(dr&d)===d&&(L===4||L===3&&(dr&62914560)===dr&&300>Wt()-jt?(Kr&2)===0&&fl(a,0):de|=d,_e===dr&&(_e=0)),cA(a)}function E1(a,i){i===0&&(i=ps()),a=al(a,i),a!==null&&(is(a,i),cA(a))}function NF(a){var i=a.memoizedState,d=0;i!==null&&(d=i.retryLane),E1(a,d)}function CF(a,i){var d=0;switch(a.tag){case 31:case 13:var y=a.stateNode,_=a.memoizedState;_!==null&&(d=_.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(i),E1(a,d)}function EF(a,i){return Ht(a,i)}var Qm=null,Fh=null,ex=!1,Mm=!1,tx=!1,Id=0;function cA(a){a!==Fh&&a.next===null&&(Fh===null?Qm=Fh=a:Fh=Fh.next=a),Mm=!0,ex||(ex=!0,FF())}function sp(a,i){if(!tx&&Mm){tx=!0;do for(var d=!1,y=Qm;y!==null;){if(a!==0){var _=y.pendingLanes;if(_===0)var H=0;else{var le=y.suspendedLanes,Oe=y.pingedLanes;H=(1<<31-qt(42|a)+1)-1,H&=_&~(le&~Oe),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(d=!0,R1(y,H))}else H=dr,H=Dt(y,y===oa?H:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(H&3)===0||xt(y,H)||(d=!0,R1(y,H));y=y.next}while(d);tx=!1}}function TF(){T1()}function T1(){Mm=ex=!1;var a=0;Id!==0&&PF()&&(a=Id);for(var i=Wt(),d=null,y=Qm;y!==null;){var _=y.next,H=F1(y,i);H===0?(y.next=null,d===null?Qm=_:d.next=_,_===null&&(Fh=d)):(d=y,(a!==0||(H&3)!==0)&&(Mm=!0)),y=_}cn!==0&&cn!==5||sp(a),Id!==0&&(Id=0)}function F1(a,i){for(var d=a.suspendedLanes,y=a.pingedLanes,_=a.expirationTimes,H=a.pendingLanes&-62914561;0<H;){var le=31-qt(H),Oe=1<<le,et=_[le];et===-1?((Oe&d)===0||(Oe&y)!==0)&&(_[le]=rs(Oe,i)):et<=i&&(a.expiredLanes|=Oe),H&=~Oe}if(i=oa,d=dr,d=Dt(a,a===i?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===i&&(Xr===2||Xr===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&At(y),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||xt(a,d)){if(i=d&-d,i===a.callbackPriority)return i;switch(y!==null&&At(y),os(d)){case 2:case 8:d=_s;break;case 32:d=$e;break;case 268435456:d=it;break;default:d=$e}return y=I1.bind(null,a),d=Ht(d,y),a.callbackPriority=i,a.callbackNode=d,i}return y!==null&&y!==null&&At(y),a.callbackPriority=2,a.callbackNode=null,2}function I1(a,i){if(cn!==0&&cn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Dm()&&a.callbackNode!==d)return null;var y=dr;return y=Dt(a,a===oa?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(Ro(a,y,i),F1(a,Wt()),a.callbackNode!=null&&a.callbackNode===d?I1.bind(null,a):null)}function R1(a,i){if(Dm())return null;Ro(a,i,!0)}function FF(){HF(function(){(Kr&6)!==0?Ht(Ss,TF):T1()})}function sx(){if(Id===0){var a=I;a===0&&(a=js,js<<=1,(js&261888)===0&&(js=256)),Id=a}return Id}function O1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:tn(""+a)}function U1(a,i){var d=i.ownerDocument.createElement("input");return d.name=i.name,d.value=i.value,a.id&&d.setAttribute("form",a.id),i.parentNode.insertBefore(d,i),a=new FormData(a),d.parentNode.removeChild(d),a}function IF(a,i,d,y,_){if(i==="submit"&&d&&d.stateNode===_){var H=O1((_[us]||null).action),le=y.submitter;le&&(i=(i=le[us]||null)?O1(i.formAction):le.getAttribute("formAction"),i!==null&&(H=i,le=null));var Oe=new B("action","action",null,y,_);a.push({event:Oe,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Id!==0){var et=le?U1(_,le):new FormData(_);gh(d,{pending:!0,data:et,method:_.method,action:H},null,et)}}else typeof H=="function"&&(Oe.preventDefault(),et=le?U1(_,le):new FormData(_),gh(d,{pending:!0,data:et,method:_.method,action:H},H,et))},currentTarget:_}]})}}for(var nx=0;nx<zl.length;nx++){var rx=zl[nx],RF=rx.toLowerCase(),OF=rx[0].toUpperCase()+rx.slice(1);ao(RF,"on"+OF)}ao(gc,"onAnimationEnd"),ao(Kl,"onAnimationIteration"),ao(au,"onAnimationStart"),ao("dblclick","onDoubleClick"),ao("focusin","onFocus"),ao("focusout","onBlur"),ao(iu,"onTransitionRun"),ao(ou,"onTransitionStart"),ao(lu,"onTransitionCancel"),ao(nd,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var np="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(np));function L1(a,i){i=(i&4)!==0;for(var d=0;d<a.length;d++){var y=a[d],_=y.event;y=y.listeners;e:{var H=void 0;if(i)for(var le=y.length-1;0<=le;le--){var Oe=y[le],et=Oe.instance,Tt=Oe.currentTarget;if(Oe=Oe.listener,et!==H&&_.isPropagationStopped())break e;H=Oe,_.currentTarget=Tt;try{H(_)}catch(Kt){Kc(Kt)}_.currentTarget=null,H=et}else for(le=0;le<y.length;le++){if(Oe=y[le],et=Oe.instance,Tt=Oe.currentTarget,Oe=Oe.listener,et!==H&&_.isPropagationStopped())break e;H=Oe,_.currentTarget=Tt;try{H(_)}catch(Kt){Kc(Kt)}_.currentTarget=null,H=et}}}}function br(a,i){var d=i[as];d===void 0&&(d=i[as]=new Set);var y=a+"__bubble";d.has(y)||(D1(i,a,2,!1),d.add(y))}function ax(a,i,d){var y=0;i&&(y|=4),D1(d,a,y,i)}var _m="_reactListening"+Math.random().toString(36).slice(2);function ix(a){if(!a[_m]){a[_m]=!0,dn.forEach(function(d){d!=="selectionchange"&&(UF.has(d)||ax(d,!1,a),ax(d,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[_m]||(i[_m]=!0,ax("selectionchange",!1,i))}}function D1(a,i,d,y){switch(dj(i)){case 2:var _=lI;break;case 8:_=cI;break;default:_=bx}d=_.bind(null,i,d,a),_=void 0,!Bn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(_=!0),y?_!==void 0?a.addEventListener(i,d,{capture:!0,passive:_}):a.addEventListener(i,d,!0):_!==void 0?a.addEventListener(i,d,{passive:_}):a.addEventListener(i,d,!1)}function ox(a,i,d,y,_){var H=y;if((i&1)===0&&(i&2)===0&&y!==null)e:for(;;){if(y===null)return;var le=y.tag;if(le===3||le===4){var Oe=y.stateNode.containerInfo;if(Oe===_)break;if(le===4)for(le=y.return;le!==null;){var et=le.tag;if((et===3||et===4)&&le.stateNode.containerInfo===_)return;le=le.return}for(;Oe!==null;){if(le=Un(Oe),le===null)return;if(et=le.tag,et===5||et===6||et===26||et===27){y=H=le;continue e}Oe=Oe.parentNode}}y=y.return}Ka(function(){var Tt=H,Kt=qs(d),Zt=[];e:{var Ft=rd.get(a);if(Ft!==void 0){var Ut=B,Ws=a;switch(a){case"keypress":if(j(d)===0)break e;case"keydown":case"keyup":Ut=yr;break;case"focusin":Ws="focus",Ut=gs;break;case"focusout":Ws="blur",Ut=gs;break;case"beforeblur":case"afterblur":Ut=gs;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ut=st;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ut=Lt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ut=ri;break;case gc:case Kl:case au:Ut=z;break;case nd:Ut=ji;break;case"scroll":case"scrollend":Ut=Q;break;case"wheel":Ut=ko;break;case"copy":case"cut":case"paste":Ut=Qe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ut=Ua;break;case"toggle":case"beforetoggle":Ut=SA}var Tn=(i&4)!==0,fa=!Tn&&(a==="scroll"||a==="scrollend"),bt=Tn?Ft!==null?Ft+"Capture":null:Ft;Tn=[];for(var ct=Tt,Et;ct!==null;){var Yt=ct;if(Et=Yt.stateNode,Yt=Yt.tag,Yt!==5&&Yt!==26&&Yt!==27||Et===null||bt===null||(Yt=Ca(ct,bt),Yt!=null&&Tn.push(rp(ct,Yt,Et))),fa)break;ct=ct.return}0<Tn.length&&(Ft=new Ut(Ft,Ws,null,d,Kt),Zt.push({event:Ft,listeners:Tn}))}}if((i&7)===0){e:{if(Ft=a==="mouseover"||a==="pointerover",Ut=a==="mouseout"||a==="pointerout",Ft&&d!==ks&&(Ws=d.relatedTarget||d.fromElement)&&(Un(Ws)||Ws[As]))break e;if((Ut||Ft)&&(Ft=Kt.window===Kt?Kt:(Ft=Kt.ownerDocument)?Ft.defaultView||Ft.parentWindow:window,Ut?(Ws=d.relatedTarget||d.toElement,Ut=Tt,Ws=Ws?Un(Ws):null,Ws!==null&&(fa=c(Ws),Tn=Ws.tag,Ws!==fa||Tn!==5&&Tn!==27&&Tn!==6)&&(Ws=null)):(Ut=null,Ws=Tt),Ut!==Ws)){if(Tn=st,Yt="onMouseLeave",bt="onMouseEnter",ct="mouse",(a==="pointerout"||a==="pointerover")&&(Tn=Ua,Yt="onPointerLeave",bt="onPointerEnter",ct="pointer"),fa=Ut==null?Ft:Pn(Ut),Et=Ws==null?Ft:Pn(Ws),Ft=new Tn(Yt,ct+"leave",Ut,d,Kt),Ft.target=fa,Ft.relatedTarget=Et,Yt=null,Un(Kt)===Tt&&(Tn=new Tn(bt,ct+"enter",Ws,d,Kt),Tn.target=Et,Tn.relatedTarget=fa,Yt=Tn),fa=Yt,Ut&&Ws)t:{for(Tn=LF,bt=Ut,ct=Ws,Et=0,Yt=bt;Yt;Yt=Tn(Yt))Et++;Yt=0;for(var bn=ct;bn;bn=Tn(bn))Yt++;for(;0<Et-Yt;)bt=Tn(bt),Et--;for(;0<Yt-Et;)ct=Tn(ct),Yt--;for(;Et--;){if(bt===ct||ct!==null&&bt===ct.alternate){Tn=bt;break t}bt=Tn(bt),ct=Tn(ct)}Tn=null}else Tn=null;Ut!==null&&Q1(Zt,Ft,Ut,Tn,!1),Ws!==null&&fa!==null&&Q1(Zt,fa,Ws,Tn,!0)}}e:{if(Ft=Tt?Pn(Tt):window,Ut=Ft.nodeName&&Ft.nodeName.toLowerCase(),Ut==="select"||Ut==="input"&&Ft.type==="file")var Gr=vo;else if(yo(Ft))if(Gn)Gr=wi;else{Gr=Ea;var An=fc}else Ut=Ft.nodeName,!Ut||Ut.toLowerCase()!=="input"||Ft.type!=="checkbox"&&Ft.type!=="radio"?Tt&&bi(Tt.elementType)&&(Gr=vo):Gr=Gi;if(Gr&&(Gr=Gr(a,Tt))){Sr(Zt,Gr,d,Kt);break e}An&&An(a,Ft,Tt),a==="focusout"&&Tt&&Ft.type==="number"&&Tt.memoizedProps.value!=null&&ka(Ft,"number",Ft.value)}switch(An=Tt?Pn(Tt):window,a){case"focusin":(yo(An)||An.contentEditable==="true")&&(La=An,jl=Tt,Qi=null);break;case"focusout":Qi=jl=La=null;break;case"mousedown":Vi=!0;break;case"contextmenu":case"mouseup":case"dragend":Vi=!1,Br(Zt,d,Kt);break;case"selectionchange":if(Vo)break;case"keydown":case"keyup":Br(Zt,d,Kt)}var Xn;if(mo)e:{switch(a){case"compositionstart":var Cr="onCompositionStart";break e;case"compositionend":Cr="onCompositionEnd";break e;case"compositionupdate":Cr="onCompositionUpdate";break e}Cr=void 0}else Ho?kl(a,d)&&(Cr="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Cr="onCompositionStart");Cr&&(ro&&d.locale!=="ko"&&(Ho||Cr!=="onCompositionStart"?Cr==="onCompositionEnd"&&Ho&&(Xn=x()):(Zn=Kt,pa="value"in Zn?Zn.value:Zn.textContent,Ho=!0)),An=Pm(Tt,Cr),0<An.length&&(Cr=new ut(Cr,a,null,d,Kt),Zt.push({event:Cr,listeners:An}),Xn?Cr.data=Xn:(Xn=Hl(d),Xn!==null&&(Cr.data=Xn)))),(Xn=Pl?Ga(a,d):fi(a,d))&&(Cr=Pm(Tt,"onBeforeInput"),0<Cr.length&&(An=new ut("onBeforeInput","beforeinput",null,d,Kt),Zt.push({event:An,listeners:Cr}),An.data=Xn)),IF(Zt,a,Tt,d,Kt)}L1(Zt,i)})}function rp(a,i,d){return{instance:a,listener:i,currentTarget:d}}function Pm(a,i){for(var d=i+"Capture",y=[];a!==null;){var _=a,H=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||H===null||(_=Ca(a,d),_!=null&&y.unshift(rp(a,_,H)),_=Ca(a,i),_!=null&&y.push(rp(a,_,H))),a.tag===3)return y;a=a.return}return[]}function LF(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Q1(a,i,d,y,_){for(var H=i._reactName,le=[];d!==null&&d!==y;){var Oe=d,et=Oe.alternate,Tt=Oe.stateNode;if(Oe=Oe.tag,et!==null&&et===y)break;Oe!==5&&Oe!==26&&Oe!==27||Tt===null||(et=Tt,_?(Tt=Ca(d,H),Tt!=null&&le.unshift(rp(d,Tt,et))):_||(Tt=Ca(d,H),Tt!=null&&le.push(rp(d,Tt,et)))),d=d.return}le.length!==0&&a.push({event:i,listeners:le})}var DF=/\r\n?/g,QF=/\u0000|\uFFFD/g;function M1(a){return(typeof a=="string"?a:""+a).replace(DF,`
`).replace(QF,"")}function _1(a,i){return i=M1(i),M1(a)===i}function ha(a,i,d,y,_,H){switch(d){case"children":typeof y=="string"?i==="body"||i==="textarea"&&y===""||$r(a,y):(typeof y=="number"||typeof y=="bigint")&&i!=="body"&&$r(a,""+y);break;case"className":ts(a,"class",y);break;case"tabIndex":ts(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ts(a,d,y);break;case"style":Ui(a,y,H);break;case"data":if(i!=="object"){ts(a,"data",y);break}case"src":case"href":if(y===""&&(i!=="a"||d!=="href")){a.removeAttribute(d);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=tn(""+y),a.setAttribute(d,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(d==="formAction"?(i!=="input"&&ha(a,i,"name",_.name,_,null),ha(a,i,"formEncType",_.formEncType,_,null),ha(a,i,"formMethod",_.formMethod,_,null),ha(a,i,"formTarget",_.formTarget,_,null)):(ha(a,i,"encType",_.encType,_,null),ha(a,i,"method",_.method,_,null),ha(a,i,"target",_.target,_,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=tn(""+y),a.setAttribute(d,y);break;case"onClick":y!=null&&(a.onclick=sn);break;case"onScroll":y!=null&&br("scroll",a);break;case"onScrollEnd":y!=null&&br("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(_.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}d=tn(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""+y):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":y===!0?a.setAttribute(d,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,y):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(d,y):a.removeAttribute(d);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case"popover":br("beforetoggle",a),br("toggle",a),Ls(a,"popover",y);break;case"xlinkActuate":Qs(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Qs(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Qs(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Qs(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Qs(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Qs(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Qs(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Qs(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Qs(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ls(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ui.get(d)||d,Ls(a,d,y))}}function lx(a,i,d,y,_,H){switch(d){case"style":Ui(a,y,H);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(_.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof y=="string"?$r(a,y):(typeof y=="number"||typeof y=="bigint")&&$r(a,""+y);break;case"onScroll":y!=null&&br("scroll",a);break;case"onScrollEnd":y!=null&&br("scrollend",a);break;case"onClick":y!=null&&(a.onclick=sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vn.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(_=d.endsWith("Capture"),i=d.slice(2,_?d.length-7:void 0),H=a[us]||null,H=H!=null?H[d]:null,typeof H=="function"&&a.removeEventListener(i,H,_),typeof y=="function")){typeof H!="function"&&H!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(i,y,_);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,""):Ls(a,d,y)}}}function ho(a,i,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":br("error",a),br("load",a);var y=!1,_=!1,H;for(H in d)if(d.hasOwnProperty(H)){var le=d[H];if(le!=null)switch(H){case"src":y=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ha(a,i,H,le,d,null)}}_&&ha(a,i,"srcSet",d.srcSet,d,null),y&&ha(a,i,"src",d.src,d,null);return;case"input":br("invalid",a);var Oe=H=le=_=null,et=null,Tt=null;for(y in d)if(d.hasOwnProperty(y)){var Kt=d[y];if(Kt!=null)switch(y){case"name":_=Kt;break;case"type":le=Kt;break;case"checked":et=Kt;break;case"defaultChecked":Tt=Kt;break;case"value":H=Kt;break;case"defaultValue":Oe=Kt;break;case"children":case"dangerouslySetInnerHTML":if(Kt!=null)throw Error(r(137,i));break;default:ha(a,i,y,Kt,d,null)}}Oi(a,H,Oe,et,Tt,le,_,!1);return;case"select":br("invalid",a),y=le=H=null;for(_ in d)if(d.hasOwnProperty(_)&&(Oe=d[_],Oe!=null))switch(_){case"value":H=Oe;break;case"defaultValue":le=Oe;break;case"multiple":y=Oe;default:ha(a,i,_,Oe,d,null)}i=H,d=le,a.multiple=!!y,i!=null?Rr(a,!!y,i,!1):d!=null&&Rr(a,!!y,d,!0);return;case"textarea":br("invalid",a),H=_=y=null;for(le in d)if(d.hasOwnProperty(le)&&(Oe=d[le],Oe!=null))switch(le){case"value":y=Oe;break;case"defaultValue":_=Oe;break;case"children":H=Oe;break;case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(91));break;default:ha(a,i,le,Oe,d,null)}Na(a,y,_,H);return;case"option":for(et in d)if(d.hasOwnProperty(et)&&(y=d[et],y!=null))switch(et){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:ha(a,i,et,y,d,null)}return;case"dialog":br("beforetoggle",a),br("toggle",a),br("cancel",a),br("close",a);break;case"iframe":case"object":br("load",a);break;case"video":case"audio":for(y=0;y<np.length;y++)br(np[y],a);break;case"image":br("error",a),br("load",a);break;case"details":br("toggle",a);break;case"embed":case"source":case"link":br("error",a),br("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Tt in d)if(d.hasOwnProperty(Tt)&&(y=d[Tt],y!=null))switch(Tt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ha(a,i,Tt,y,d,null)}return;default:if(bi(i)){for(Kt in d)d.hasOwnProperty(Kt)&&(y=d[Kt],y!==void 0&&lx(a,i,Kt,y,d,void 0));return}}for(Oe in d)d.hasOwnProperty(Oe)&&(y=d[Oe],y!=null&&ha(a,i,Oe,y,d,null))}function MF(a,i,d,y){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,H=null,le=null,Oe=null,et=null,Tt=null,Kt=null;for(Ut in d){var Zt=d[Ut];if(d.hasOwnProperty(Ut)&&Zt!=null)switch(Ut){case"checked":break;case"value":break;case"defaultValue":et=Zt;default:y.hasOwnProperty(Ut)||ha(a,i,Ut,null,y,Zt)}}for(var Ft in y){var Ut=y[Ft];if(Zt=d[Ft],y.hasOwnProperty(Ft)&&(Ut!=null||Zt!=null))switch(Ft){case"type":H=Ut;break;case"name":_=Ut;break;case"checked":Tt=Ut;break;case"defaultChecked":Kt=Ut;break;case"value":le=Ut;break;case"defaultValue":Oe=Ut;break;case"children":case"dangerouslySetInnerHTML":if(Ut!=null)throw Error(r(137,i));break;default:Ut!==Zt&&ha(a,i,Ft,Ut,y,Zt)}}di(a,le,Oe,et,Tt,Kt,H,_);return;case"select":Ut=le=Oe=Ft=null;for(H in d)if(et=d[H],d.hasOwnProperty(H)&&et!=null)switch(H){case"value":break;case"multiple":Ut=et;default:y.hasOwnProperty(H)||ha(a,i,H,null,y,et)}for(_ in y)if(H=y[_],et=d[_],y.hasOwnProperty(_)&&(H!=null||et!=null))switch(_){case"value":Ft=H;break;case"defaultValue":Oe=H;break;case"multiple":le=H;default:H!==et&&ha(a,i,_,H,y,et)}i=Oe,d=le,y=Ut,Ft!=null?Rr(a,!!d,Ft,!1):!!y!=!!d&&(i!=null?Rr(a,!!d,i,!0):Rr(a,!!d,d?[]:"",!1));return;case"textarea":Ut=Ft=null;for(Oe in d)if(_=d[Oe],d.hasOwnProperty(Oe)&&_!=null&&!y.hasOwnProperty(Oe))switch(Oe){case"value":break;case"children":break;default:ha(a,i,Oe,null,y,_)}for(le in y)if(_=y[le],H=d[le],y.hasOwnProperty(le)&&(_!=null||H!=null))switch(le){case"value":Ft=_;break;case"defaultValue":Ut=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==H&&ha(a,i,le,_,y,H)}Ha(a,Ft,Ut);return;case"option":for(var Ws in d)if(Ft=d[Ws],d.hasOwnProperty(Ws)&&Ft!=null&&!y.hasOwnProperty(Ws))switch(Ws){case"selected":a.selected=!1;break;default:ha(a,i,Ws,null,y,Ft)}for(et in y)if(Ft=y[et],Ut=d[et],y.hasOwnProperty(et)&&Ft!==Ut&&(Ft!=null||Ut!=null))switch(et){case"selected":a.selected=Ft&&typeof Ft!="function"&&typeof Ft!="symbol";break;default:ha(a,i,et,Ft,y,Ut)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tn in d)Ft=d[Tn],d.hasOwnProperty(Tn)&&Ft!=null&&!y.hasOwnProperty(Tn)&&ha(a,i,Tn,null,y,Ft);for(Tt in y)if(Ft=y[Tt],Ut=d[Tt],y.hasOwnProperty(Tt)&&Ft!==Ut&&(Ft!=null||Ut!=null))switch(Tt){case"children":case"dangerouslySetInnerHTML":if(Ft!=null)throw Error(r(137,i));break;default:ha(a,i,Tt,Ft,y,Ut)}return;default:if(bi(i)){for(var fa in d)Ft=d[fa],d.hasOwnProperty(fa)&&Ft!==void 0&&!y.hasOwnProperty(fa)&&lx(a,i,fa,void 0,y,Ft);for(Kt in y)Ft=y[Kt],Ut=d[Kt],!y.hasOwnProperty(Kt)||Ft===Ut||Ft===void 0&&Ut===void 0||lx(a,i,Kt,Ft,y,Ut);return}}for(var bt in d)Ft=d[bt],d.hasOwnProperty(bt)&&Ft!=null&&!y.hasOwnProperty(bt)&&ha(a,i,bt,null,y,Ft);for(Zt in y)Ft=y[Zt],Ut=d[Zt],!y.hasOwnProperty(Zt)||Ft===Ut||Ft==null&&Ut==null||ha(a,i,Zt,Ft,y,Ut)}function P1(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _F(){if(typeof performance.getEntriesByType=="function"){for(var a=0,i=0,d=performance.getEntriesByType("resource"),y=0;y<d.length;y++){var _=d[y],H=_.transferSize,le=_.initiatorType,Oe=_.duration;if(H&&Oe&&P1(le)){for(le=0,Oe=_.responseEnd,y+=1;y<d.length;y++){var et=d[y],Tt=et.startTime;if(Tt>Oe)break;var Kt=et.transferSize,Zt=et.initiatorType;Kt&&P1(Zt)&&(et=et.responseEnd,le+=Kt*(et<Oe?1:(Oe-Tt)/(et-Tt)))}if(--y,i+=8*(H+le)/(_.duration/1e3),a++,10<a)break}}if(0<a)return i/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var cx=null,Ax=null;function km(a){return a.nodeType===9?a:a.ownerDocument}function k1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H1(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function dx(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ux=null;function PF(){var a=window.event;return a&&a.type==="popstate"?a===ux?!1:(ux=a,!0):(ux=null,!1)}var K1=typeof setTimeout=="function"?setTimeout:void 0,kF=typeof clearTimeout=="function"?clearTimeout:void 0,z1=typeof Promise=="function"?Promise:void 0,HF=typeof queueMicrotask=="function"?queueMicrotask:typeof z1<"u"?function(a){return z1.resolve(null).then(a).catch(KF)}:K1;function KF(a){setTimeout(function(){throw a})}function Rd(a){return a==="head"}function G1(a,i){var d=i,y=0;do{var _=d.nextSibling;if(a.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"||d==="/&"){if(y===0){a.removeChild(_),Uh(i);return}y--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")y++;else if(d==="html")ap(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,ap(d);for(var H=d.firstChild;H;){var le=H.nextSibling,Oe=H.nodeName;H[an]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&H.rel.toLowerCase()==="stylesheet"||d.removeChild(H),H=le}}else d==="body"&&ap(a.ownerDocument.body);d=_}while(d);Uh(i)}function V1(a,i){var d=a;a=0;do{var y=d.nextSibling;if(d.nodeType===1?i?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(i?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=y}while(d)}function hx(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var d=i;switch(i=i.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":hx(d),Mr(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function zF(a,i,d,y){for(;a.nodeType===1;){var _=d;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[an])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(H=a.getAttribute("rel"),H==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(H!==_.rel||a.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||a.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||a.getAttribute("title")!==(_.title==null?null:_.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(H=a.getAttribute("src"),(H!==(_.src==null?null:_.src)||a.getAttribute("type")!==(_.type==null?null:_.type)||a.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&H&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var H=_.name==null?null:""+_.name;if(_.type==="hidden"&&a.getAttribute("name")===H)return a}else return a;if(a=rc(a.nextSibling),a===null)break}return null}function GF(a,i,d){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=rc(a.nextSibling),a===null))return null;return a}function $1(a,i){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!i||(a=rc(a.nextSibling),a===null))return null;return a}function fx(a){return a.data==="$?"||a.data==="$~"}function px(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function VF(a,i){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=i;else if(a.data!=="$?"||d.readyState!=="loading")i();else{var y=function(){i(),d.removeEventListener("DOMContentLoaded",y)};d.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function rc(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return a}var mx=null;function q1(a){a=a.nextSibling;for(var i=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(i===0)return rc(a.nextSibling);i--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||i++}a=a.nextSibling}return null}function W1(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(i===0)return a;i--}else d!=="/$"&&d!=="/&"||i++}a=a.previousSibling}return null}function Y1(a,i,d){switch(i=km(d),a){case"html":if(a=i.documentElement,!a)throw Error(r(452));return a;case"head":if(a=i.head,!a)throw Error(r(453));return a;case"body":if(a=i.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function ap(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Mr(a)}var ac=new Map,X1=new Set;function Hm(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var kA=re.d;re.d={f:$F,r:qF,D:WF,C:YF,L:XF,m:JF,X:eI,S:ZF,M:tI};function $F(){var a=kA.f(),i=Xi();return a||i}function qF(a){var i=Ks(a);i!==null&&i.tag===5&&i.type==="form"?um(i):kA.r(a)}var Ih=typeof document>"u"?null:document;function J1(a,i,d){var y=Ih;if(y&&typeof i=="string"&&i){var _=zn(i);_='link[rel="'+a+'"][href="'+_+'"]',typeof d=="string"&&(_+='[crossorigin="'+d+'"]'),X1.has(_)||(X1.add(_),a={rel:a,crossOrigin:d,href:i},y.querySelector(_)===null&&(i=y.createElement("link"),ho(i,"link",a),Yn(i),y.head.appendChild(i)))}}function WF(a){kA.D(a),J1("dns-prefetch",a,null)}function YF(a,i){kA.C(a,i),J1("preconnect",a,i)}function XF(a,i,d){kA.L(a,i,d);var y=Ih;if(y&&a&&i){var _='link[rel="preload"][as="'+zn(i)+'"]';i==="image"&&d&&d.imageSrcSet?(_+='[imagesrcset="'+zn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(_+='[imagesizes="'+zn(d.imageSizes)+'"]')):_+='[href="'+zn(a)+'"]';var H=_;switch(i){case"style":H=Rh(a);break;case"script":H=Oh(a)}ac.has(H)||(a=g({rel:"preload",href:i==="image"&&d&&d.imageSrcSet?void 0:a,as:i},d),ac.set(H,a),y.querySelector(_)!==null||i==="style"&&y.querySelector(ip(H))||i==="script"&&y.querySelector(op(H))||(i=y.createElement("link"),ho(i,"link",a),Yn(i),y.head.appendChild(i)))}}function JF(a,i){kA.m(a,i);var d=Ih;if(d&&a){var y=i&&typeof i.as=="string"?i.as:"script",_='link[rel="modulepreload"][as="'+zn(y)+'"][href="'+zn(a)+'"]',H=_;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=Oh(a)}if(!ac.has(H)&&(a=g({rel:"modulepreload",href:a},i),ac.set(H,a),d.querySelector(_)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(op(H)))return}y=d.createElement("link"),ho(y,"link",a),Yn(y),d.head.appendChild(y)}}}function ZF(a,i,d){kA.S(a,i,d);var y=Ih;if(y&&a){var _=nr(y).hoistableStyles,H=Rh(a);i=i||"default";var le=_.get(H);if(!le){var Oe={loading:0,preload:null};if(le=y.querySelector(ip(H)))Oe.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":i},d),(d=ac.get(H))&&gx(a,d);var et=le=y.createElement("link");Yn(et),ho(et,"link",a),et._p=new Promise(function(Tt,Kt){et.onload=Tt,et.onerror=Kt}),et.addEventListener("load",function(){Oe.loading|=1}),et.addEventListener("error",function(){Oe.loading|=2}),Oe.loading|=4,Km(le,i,y)}le={type:"stylesheet",instance:le,count:1,state:Oe},_.set(H,le)}}}function eI(a,i){kA.X(a,i);var d=Ih;if(d&&a){var y=nr(d).hoistableScripts,_=Oh(a),H=y.get(_);H||(H=d.querySelector(op(_)),H||(a=g({src:a,async:!0},i),(i=ac.get(_))&&yx(a,i),H=d.createElement("script"),Yn(H),ho(H,"link",a),d.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},y.set(_,H))}}function tI(a,i){kA.M(a,i);var d=Ih;if(d&&a){var y=nr(d).hoistableScripts,_=Oh(a),H=y.get(_);H||(H=d.querySelector(op(_)),H||(a=g({src:a,async:!0,type:"module"},i),(i=ac.get(_))&&yx(a,i),H=d.createElement("script"),Yn(H),ho(H,"link",a),d.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},y.set(_,H))}}function Z1(a,i,d,y){var _=(_=Ce.current)?Hm(_):null;if(!_)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(i=Rh(d.href),d=nr(_).hoistableStyles,y=d.get(i),y||(y={type:"style",instance:null,count:0,state:null},d.set(i,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Rh(d.href);var H=nr(_).hoistableStyles,le=H.get(a);if(le||(_=_.ownerDocument||_,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(a,le),(H=_.querySelector(ip(a)))&&!H._p&&(le.instance=H,le.state.loading=5),ac.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ac.set(a,d),H||sI(_,a,d,le.state))),i&&y===null)throw Error(r(528,""));return le}if(i&&y!==null)throw Error(r(529,""));return null;case"script":return i=d.async,d=d.src,typeof d=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Oh(d),d=nr(_).hoistableScripts,y=d.get(i),y||(y={type:"script",instance:null,count:0,state:null},d.set(i,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Rh(a){return'href="'+zn(a)+'"'}function ip(a){return'link[rel="stylesheet"]['+a+"]"}function ej(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function sI(a,i,d,y){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?y.loading=1:(i=a.createElement("link"),y.preload=i,i.addEventListener("load",function(){return y.loading|=1}),i.addEventListener("error",function(){return y.loading|=2}),ho(i,"link",d),Yn(i),a.head.appendChild(i))}function Oh(a){return'[src="'+zn(a)+'"]'}function op(a){return"script[async]"+a}function tj(a,i,d){if(i.count++,i.instance===null)switch(i.type){case"style":var y=a.querySelector('style[data-href~="'+zn(d.href)+'"]');if(y)return i.instance=y,Yn(y),y;var _=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Yn(y),ho(y,"style",_),Km(y,d.precedence,a),i.instance=y;case"stylesheet":_=Rh(d.href);var H=a.querySelector(ip(_));if(H)return i.state.loading|=4,i.instance=H,Yn(H),H;y=ej(d),(_=ac.get(_))&&gx(y,_),H=(a.ownerDocument||a).createElement("link"),Yn(H);var le=H;return le._p=new Promise(function(Oe,et){le.onload=Oe,le.onerror=et}),ho(H,"link",y),i.state.loading|=4,Km(H,d.precedence,a),i.instance=H;case"script":return H=Oh(d.src),(_=a.querySelector(op(H)))?(i.instance=_,Yn(_),_):(y=d,(_=ac.get(H))&&(y=g({},d),yx(y,_)),a=a.ownerDocument||a,_=a.createElement("script"),Yn(_),ho(_,"link",y),a.head.appendChild(_),i.instance=_);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(y=i.instance,i.state.loading|=4,Km(y,d.precedence,a));return i.instance}function Km(a,i,d){for(var y=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=y.length?y[y.length-1]:null,H=_,le=0;le<y.length;le++){var Oe=y[le];if(Oe.dataset.precedence===i)H=Oe;else if(H!==_)break}H?H.parentNode.insertBefore(a,H.nextSibling):(i=d.nodeType===9?d.head:d,i.insertBefore(a,i.firstChild))}function gx(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function yx(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var zm=null;function sj(a,i,d){if(zm===null){var y=new Map,_=zm=new Map;_.set(d,y)}else _=zm,y=_.get(d),y||(y=new Map,_.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),_=0;_<d.length;_++){var H=d[_];if(!(H[an]||H[Rt]||a==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var le=H.getAttribute(i)||"";le=a+le;var Oe=y.get(le);Oe?Oe.push(H):y.set(le,[H])}}return y}function nj(a,i,d){a=a.ownerDocument||a,a.head.insertBefore(d,i==="title"?a.querySelector("head > title"):null)}function nI(a,i,d){if(d===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function rj(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function rI(a,i,d,y){if(d.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var _=Rh(y.href),H=i.querySelector(ip(_));if(H){i=H._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(a.count++,a=Gm.bind(a),i.then(a,a)),d.state.loading|=4,d.instance=H,Yn(H);return}H=i.ownerDocument||i,y=ej(y),(_=ac.get(_))&&gx(y,_),H=H.createElement("link"),Yn(H);var le=H;le._p=new Promise(function(Oe,et){le.onload=Oe,le.onerror=et}),ho(H,"link",y),d.instance=H}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,i),(i=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=Gm.bind(a),i.addEventListener("load",d),i.addEventListener("error",d))}}var xx=0;function aI(a,i){return a.stylesheets&&a.count===0&&$m(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var y=setTimeout(function(){if(a.stylesheets&&$m(a,a.stylesheets),a.unsuspend){var H=a.unsuspend;a.unsuspend=null,H()}},6e4+i);0<a.imgBytes&&xx===0&&(xx=62500*_F());var _=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&$m(a,a.stylesheets),a.unsuspend)){var H=a.unsuspend;a.unsuspend=null,H()}},(a.imgBytes>xx?50:800)+i);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(y),clearTimeout(_)}}:null}function Gm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$m(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Vm=null;function $m(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Vm=new Map,i.forEach(iI,a),Vm=null,Gm.call(a))}function iI(a,i){if(!(i.state.loading&4)){var d=Vm.get(a);if(d)var y=d.get(null);else{d=new Map,Vm.set(a,d);for(var _=a.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<_.length;H++){var le=_[H];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(d.set(le.dataset.precedence,le),y=le)}y&&d.set(null,y)}_=i.instance,le=_.getAttribute("data-precedence"),H=d.get(le)||y,H===y&&d.set(null,_),d.set(le,_),this.count++,y=Gm.bind(this),_.addEventListener("load",y),_.addEventListener("error",y),H?H.parentNode.insertBefore(_,H.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(_,a.firstChild)),i.state.loading|=4}}var lp={$$typeof:k,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function oI(a,i,d,y,_,H,le,Oe,et){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.hiddenUpdates=yn(null),this.identifierPrefix=y,this.onUncaughtError=_,this.onCaughtError=H,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=et,this.incompleteTransitions=new Map}function aj(a,i,d,y,_,H,le,Oe,et,Tt,Kt,Zt){return a=new oI(a,i,d,le,et,Tt,Kt,Zt,Oe),i=1,H===!0&&(i|=24),H=_i(3,null,null,i),a.current=H,H.stateNode=a,i=$c(),i.refCount++,a.pooledCache=i,i.refCount++,H.memoizedState={element:y,isDehydrated:d,cache:i},ws(H),a}function ij(a){return a?(a=Bi,a):Bi}function oj(a,i,d,y,_,H){_=ij(_),y.context===null?y.context=_:y.pendingContext=_,y=xn(i),y.payload={element:d},H=H===void 0?null:H,H!==null&&(y.callback=H),d=Sn(a,y,i),d!==null&&(la(d,a,i),Pr(d,a,i))}function lj(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<i?d:i}}function vx(a,i){lj(a,i),(a=a.alternate)&&lj(a,i)}function cj(a){if(a.tag===13||a.tag===31){var i=al(a,67108864);i!==null&&la(i,a,67108864),vx(a,67108864)}}function Aj(a){if(a.tag===13||a.tag===31){var i=un();i=zt(i);var d=al(a,i);d!==null&&la(d,a,i),vx(a,i)}}var qm=!0;function lI(a,i,d,y){var _=ne.T;ne.T=null;var H=re.p;try{re.p=2,bx(a,i,d,y)}finally{re.p=H,ne.T=_}}function cI(a,i,d,y){var _=ne.T;ne.T=null;var H=re.p;try{re.p=8,bx(a,i,d,y)}finally{re.p=H,ne.T=_}}function bx(a,i,d,y){if(qm){var _=jx(y);if(_===null)ox(a,i,y,Wm,d),uj(a,y);else if(dI(_,a,i,d,y))y.stopPropagation();else if(uj(a,y),i&4&&-1<AI.indexOf(a)){for(;_!==null;){var H=Ks(_);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var le=gt(H.pendingLanes);if(le!==0){var Oe=H;for(Oe.pendingLanes|=2,Oe.entangledLanes|=2;le;){var et=1<<31-qt(le);Oe.entanglements[1]|=et,le&=~et}cA(H),(Kr&6)===0&&(Rs=Wt()+500,sp(0))}}break;case 31:case 13:Oe=al(H,2),Oe!==null&&la(Oe,H,2),Xi(),vx(H,2)}if(H=jx(y),H===null&&ox(a,i,y,Wm,d),H===_)break;_=H}_!==null&&y.stopPropagation()}else ox(a,i,y,null,d)}}function jx(a){return a=qs(a),wx(a)}var Wm=null;function wx(a){if(Wm=null,a=Un(a),a!==null){var i=c(a);if(i===null)a=null;else{var d=i.tag;if(d===13){if(a=p(i),a!==null)return a;a=null}else if(d===31){if(a=f(i),a!==null)return a;a=null}else if(d===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Wm=a,null}function dj(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Es()){case Ss:return 2;case _s:return 8;case $e:case ke:return 32;case it:return 268435456;default:return 32}default:return 32}}var Sx=!1,Od=null,Ud=null,Ld=null,cp=new Map,Ap=new Map,Dd=[],AI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uj(a,i){switch(a){case"focusin":case"focusout":Od=null;break;case"dragenter":case"dragleave":Ud=null;break;case"mouseover":case"mouseout":Ld=null;break;case"pointerover":case"pointerout":cp.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ap.delete(i.pointerId)}}function dp(a,i,d,y,_,H){return a===null||a.nativeEvent!==H?(a={blockedOn:i,domEventName:d,eventSystemFlags:y,nativeEvent:H,targetContainers:[_]},i!==null&&(i=Ks(i),i!==null&&cj(i)),a):(a.eventSystemFlags|=y,i=a.targetContainers,_!==null&&i.indexOf(_)===-1&&i.push(_),a)}function dI(a,i,d,y,_){switch(i){case"focusin":return Od=dp(Od,a,i,d,y,_),!0;case"dragenter":return Ud=dp(Ud,a,i,d,y,_),!0;case"mouseover":return Ld=dp(Ld,a,i,d,y,_),!0;case"pointerover":var H=_.pointerId;return cp.set(H,dp(cp.get(H)||null,a,i,d,y,_)),!0;case"gotpointercapture":return H=_.pointerId,Ap.set(H,dp(Ap.get(H)||null,a,i,d,y,_)),!0}return!1}function hj(a){var i=Un(a.target);if(i!==null){var d=c(i);if(d!==null){if(i=d.tag,i===13){if(i=p(d),i!==null){a.blockedOn=i,Ye(a.priority,function(){Aj(d)});return}}else if(i===31){if(i=f(d),i!==null){a.blockedOn=i,Ye(a.priority,function(){Aj(d)});return}}else if(i===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ym(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var d=jx(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);ks=y,d.target.dispatchEvent(y),ks=null}else return i=Ks(d),i!==null&&cj(i),a.blockedOn=d,!1;i.shift()}return!0}function fj(a,i,d){Ym(a)&&d.delete(i)}function uI(){Sx=!1,Od!==null&&Ym(Od)&&(Od=null),Ud!==null&&Ym(Ud)&&(Ud=null),Ld!==null&&Ym(Ld)&&(Ld=null),cp.forEach(fj),Ap.forEach(fj)}function Xm(a,i){a.blockedOn===i&&(a.blockedOn=null,Sx||(Sx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uI)))}var Jm=null;function pj(a){Jm!==a&&(Jm=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jm===a&&(Jm=null);for(var i=0;i<a.length;i+=3){var d=a[i],y=a[i+1],_=a[i+2];if(typeof y!="function"){if(wx(y||d)===null)continue;break}var H=Ks(d);H!==null&&(a.splice(i,3),i-=3,gh(H,{pending:!0,data:_,method:d.method,action:y},y,_))}}))}function Uh(a){function i(et){return Xm(et,a)}Od!==null&&Xm(Od,a),Ud!==null&&Xm(Ud,a),Ld!==null&&Xm(Ld,a),cp.forEach(i),Ap.forEach(i);for(var d=0;d<Dd.length;d++){var y=Dd[d];y.blockedOn===a&&(y.blockedOn=null)}for(;0<Dd.length&&(d=Dd[0],d.blockedOn===null);)hj(d),d.blockedOn===null&&Dd.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y<d.length;y+=3){var _=d[y],H=d[y+1],le=_[us]||null;if(typeof H=="function")le||pj(d);else if(le){var Oe=null;if(H&&H.hasAttribute("formAction")){if(_=H,le=H[us]||null)Oe=le.formAction;else if(wx(_)!==null)continue}else Oe=le.action;typeof Oe=="function"?d[y+1]=Oe:(d.splice(y,3),y-=3),pj(d)}}}function mj(){function a(H){H.canIntercept&&H.info==="react-transition"&&H.intercept({handler:function(){return new Promise(function(le){return _=le})},focusReset:"manual",scroll:"manual"})}function i(){_!==null&&(_(),_=null),y||setTimeout(d,20)}function d(){if(!y&&!navigation.transition){var H=navigation.currentEntry;H&&H.url!=null&&navigation.navigate(H.url,{state:H.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,_=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(d,100),function(){y=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),_!==null&&(_(),_=null)}}}function Bx(a){this._internalRoot=a}Zm.prototype.render=Bx.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(r(409));var d=i.current,y=un();oj(d,y,a,i,null,null)},Zm.prototype.unmount=Bx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;oj(a.current,2,null,a,null,null),Xi(),i[As]=null}};function Zm(a){this._internalRoot=a}Zm.prototype.unstable_scheduleHydration=function(a){if(a){var i=Ps();a={blockedOn:null,target:a,priority:i};for(var d=0;d<Dd.length&&i!==0&&i<Dd[d].priority;d++);Dd.splice(d,0,a),d===0&&hj(a)}};var gj=s.version;if(gj!=="19.2.0")throw Error(r(527,gj,"19.2.0"));re.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(i),a=a!==null?l(a):null,a=a===null?null:a.stateNode,a};var hI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{Qt=eg.inject(hI),ss=eg}catch{}}return hp.createRoot=function(a,i){if(!o(a))throw Error(r(299));var d=!1,y="",_=mm,H=bu,le=ju;return i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onUncaughtError!==void 0&&(_=i.onUncaughtError),i.onCaughtError!==void 0&&(H=i.onCaughtError),i.onRecoverableError!==void 0&&(le=i.onRecoverableError)),i=aj(a,1,!1,null,null,d,y,null,_,H,le,mj),a[As]=i.current,ix(a),new Bx(i)},hp.hydrateRoot=function(a,i,d){if(!o(a))throw Error(r(299));var y=!1,_="",H=mm,le=bu,Oe=ju,et=null;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onUncaughtError!==void 0&&(H=d.onUncaughtError),d.onCaughtError!==void 0&&(le=d.onCaughtError),d.onRecoverableError!==void 0&&(Oe=d.onRecoverableError),d.formState!==void 0&&(et=d.formState)),i=aj(a,1,!0,i,d??null,y,_,et,H,le,Oe,mj),i.context=ij(null),d=i.current,y=un(),y=zt(y),_=xn(y),_.callback=null,Sn(d,_,y),d=y,i.current.lanes=d,is(i,d),cA(i),a[As]=i.current,ix(a),new Zm(i)},hp.version="19.2.0",hp}var Ej;function SI(){if(Ej)return Cx.exports;Ej=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Cx.exports=wI(),Cx.exports}var BI=SI();function NI(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,c,p=[],f="",A=t.split("/");for(A[0]||A.shift();o=A.shift();)n=o[0],n==="*"?(p.push(n),f+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),c=o.indexOf(".",1),p.push(o.substring(1,~r?r:~c?c:o.length)),f+=~r&&!~c?"(?:/([^/]+?))?":"/([^/]+?)",~c&&(f+=(~r?"?":"")+"\\"+o.substring(c))):f+="/"+o;return{keys:p,pattern:new RegExp("^"+f+(s?"(?=$|/)":"/?$"),"i")}}var C=hy();const Mo=Xv(C),td=pI({__proto__:null,default:Mo},[C]);var Rx={exports:{}},Ox={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tj;function CI(){if(Tj)return Ox;Tj=1;var t=hy();function s(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:s,r=t.useState,o=t.useEffect,c=t.useLayoutEffect,p=t.useDebugValue;function f(g,v){var m=v(),N=r({inst:{value:m,getSnapshot:v}}),w=N[0].inst,E=N[1];return c(function(){w.value=m,w.getSnapshot=v,A(w)&&E({inst:w})},[g,m,v]),o(function(){return A(w)&&E({inst:w}),g(function(){A(w)&&E({inst:w})})},[g]),p(m),m}function A(g){var v=g.getSnapshot;g=g.value;try{var m=v();return!n(g,m)}catch{return!0}}function h(g,v){return v()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Ox.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:l,Ox}var Fj;function EI(){return Fj||(Fj=1,Rx.exports=CI()),Rx.exports}var TI=EI();const FI=td.useInsertionEffect,II=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RI=II?C.useLayoutEffect:C.useEffect,OI=FI||RI,bB=t=>{const s=C.useRef([t,(...n)=>s[0](...n)]).current;return OI(()=>{s[0]=t}),s[1]},UI="popstate",Jv="pushState",Zv="replaceState",LI="hashchange",Ij=[UI,Jv,Zv,LI],DI=t=>{for(const s of Ij)addEventListener(s,t);return()=>{for(const s of Ij)removeEventListener(s,t)}},jB=(t,s)=>TI.useSyncExternalStore(DI,t,s),QI=()=>location.search,MI=({ssrSearch:t=""}={})=>jB(QI,()=>t),Rj=()=>location.pathname,_I=({ssrPath:t}={})=>jB(Rj,t?()=>t:Rj),PI=(t,{replace:s=!1,state:n=null}={})=>history[s?Zv:Jv](n,"",t),kI=(t={})=>[_I(t),PI],Oj=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Oj]>"u"){for(const t of[Jv,Zv]){const s=history[t];history[t]=function(){const n=s.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Oj,{value:!0})}const HI=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",wB=(t="")=>t==="/"?"":t,KI=(t,s)=>t[0]==="~"?t.slice(1):wB(s)+t,zI=(t="",s)=>HI(Uj(wB(t)),Uj(s)),Uj=t=>{try{return decodeURI(t)}catch{return t}},SB={hook:kI,searchHook:MI,parser:NI,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},BB=C.createContext(SB),df=()=>C.useContext(BB),NB={},CB=C.createContext(NB),GI=()=>C.useContext(CB),fy=t=>{const[s,n]=t.hook(t);return[zI(t.base,s),bB((r,o)=>n(KI(r,t.base),o))]},el=()=>fy(df()),eb=(t,s,n,r)=>{const{pattern:o,keys:c}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",r),p=o.exec(n)||[],[f,...A]=p;return f!==void 0?[!0,(()=>{const h=c!==!1?Object.fromEntries(c.map((g,v)=>[g,A[v]])):p.groups;let l={...A};return h&&Object.assign(l,h),l})(),...r?[f]:[]]:[!1,null]},VI=t=>eb(df().parser,t,el()[0]),$I=({children:t,...s})=>{const n=df(),r=s.hook?SB:n;let o=r;const[c,p]=s.ssrPath?.split("?")??[];p&&(s.ssrSearch=p,s.ssrPath=c),s.hrefs=s.hrefs??s.hook?.hrefs;let f=C.useRef({}),A=f.current,h=A;for(let l in r){const g=l==="base"?r[l]+(s[l]||""):s[l]||r[l];A===h&&g!==h[l]&&(f.current=h={...h}),h[l]=g,g!==r[l]&&(o=h)}return C.createElement(BB.Provider,{value:o,children:t})},Lj=({children:t,component:s},n)=>s?C.createElement(s,{params:n}):typeof t=="function"?t(n):t,qI=t=>{let s=C.useRef(NB),n=s.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),s.current=n},zr=({path:t,nest:s,match:n,...r})=>{const o=df(),[c]=fy(o),[p,f,A]=n??eb(o.parser,t,c,s),h=qI({...GI(),...f});if(!p)return null;const l=A?C.createElement($I,{base:A},Lj(r,h)):Lj(r,h);return C.createElement(CB.Provider,{value:h,children:l})},Ra=C.forwardRef((t,s)=>{const n=df(),[r,o]=fy(n),{to:c="",href:p=c,onClick:f,asChild:A,children:h,className:l,replace:g,state:v,...m}=t,N=bB(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(f?.(E),E.defaultPrevented||(E.preventDefault(),o(p,t)))}),w=n.hrefs(p[0]==="~"?p.slice(1):n.base+p,n);return A&&C.isValidElement(h)?C.cloneElement(h,{onClick:N,href:w}):C.createElement("a",{...m,onClick:N,href:w,className:l?.call?l(r===p):l,children:h,ref:s})}),EB=t=>Array.isArray(t)?t.flatMap(s=>EB(s&&s.type===C.Fragment?s.props.children:s)):[t],WI=({children:t,location:s})=>{const n=df(),[r]=fy(n);for(const o of EB(t)){let c=0;if(C.isValidElement(o)&&(c=eb(n.parser,o.props.path,s||r,o.props.nest))[0])return C.cloneElement(o,{match:c})}return null};var py=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},my=typeof window>"u"||"Deno"in globalThis;function Oc(){}function YI(t,s){return typeof t=="function"?t(s):t}function XI(t){return typeof t=="number"&&t>=0&&t!==1/0}function JI(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Dj(t,s){return typeof t=="function"?t(s):t}function ZI(t,s){return typeof t=="function"?t(s):t}function Qj(t,s){const{type:n="all",exact:r,fetchStatus:o,predicate:c,queryKey:p,stale:f}=t;if(p){if(r){if(s.queryHash!==tb(p,s.options))return!1}else if(!kp(s.queryKey,p))return!1}if(n!=="all"){const A=s.isActive();if(n==="active"&&!A||n==="inactive"&&A)return!1}return!(typeof f=="boolean"&&s.isStale()!==f||o&&o!==s.state.fetchStatus||c&&!c(s))}function Mj(t,s){const{exact:n,status:r,predicate:o,mutationKey:c}=t;if(c){if(!s.options.mutationKey)return!1;if(n){if(Pp(s.options.mutationKey)!==Pp(c))return!1}else if(!kp(s.options.mutationKey,c))return!1}return!(r&&s.state.status!==r||o&&!o(s))}function tb(t,s){return(s?.queryKeyHashFn||Pp)(t)}function Pp(t){return JSON.stringify(t,(s,n)=>$0(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function kp(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?!Object.keys(s).some(n=>!kp(t[n],s[n])):!1}function TB(t,s){if(t===s)return t;const n=_j(t)&&_j(s);if(n||$0(t)&&$0(s)){const r=n?t:Object.keys(t),o=r.length,c=n?s:Object.keys(s),p=c.length,f=n?[]:{};let A=0;for(let h=0;h<p;h++){const l=n?h:c[h];(!n&&r.includes(l)||n)&&t[l]===void 0&&s[l]===void 0?(f[l]=void 0,A++):(f[l]=TB(t[l],s[l]),f[l]===t[l]&&t[l]!==void 0&&A++)}return o===p&&A===o?t:f}return s}function _j(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $0(t){if(!Pj(t))return!1;const s=t.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!Pj(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Pj(t){return Object.prototype.toString.call(t)==="[object Object]"}function eR(t){return new Promise(s=>{setTimeout(s,t)})}function tR(t,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,s):n.structuralSharing!==!1?TB(t,s):s}function sR(t,s,n=0){const r=[...t,s];return n&&r.length>n?r.slice(1):r}function nR(t,s,n=0){const r=[s,...t];return n&&r.length>n?r.slice(0,-1):r}var sb=Symbol();function FB(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===sb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var rR=class extends py{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!my&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},IB=new rR,aR=class extends py{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!my&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Gg=new aR;function iR(){let t,s;const n=new Promise((o,c)=>{t=o,s=c});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),s(o)},n}function oR(t){return Math.min(1e3*2**t,3e4)}function RB(t){return(t??"online")==="online"?Gg.isOnline():!0}var OB=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Ux(t){return t instanceof OB}function UB(t){let s=!1,n=0,r=!1,o;const c=iR(),p=w=>{r||(v(new OB(w)),t.abort?.())},f=()=>{s=!0},A=()=>{s=!1},h=()=>IB.isFocused()&&(t.networkMode==="always"||Gg.isOnline())&&t.canRun(),l=()=>RB(t.networkMode)&&t.canRun(),g=w=>{r||(r=!0,t.onSuccess?.(w),o?.(),c.resolve(w))},v=w=>{r||(r=!0,t.onError?.(w),o?.(),c.reject(w))},m=()=>new Promise(w=>{o=E=>{(r||h())&&w(E)},t.onPause?.()}).then(()=>{o=void 0,r||t.onContinue?.()}),N=()=>{if(r)return;let w;const E=n===0?t.initialPromise:void 0;try{w=E??t.fn()}catch(F){w=Promise.reject(F)}Promise.resolve(w).then(g).catch(F=>{if(r)return;const M=t.retry??(my?0:3),k=t.retryDelay??oR,K=typeof k=="function"?k(n,F):k,G=M===!0||typeof M=="number"&&n<M||typeof M=="function"&&M(n,F);if(s||!G){v(F);return}n++,t.onFail?.(n,F),eR(K).then(()=>h()?void 0:m()).then(()=>{s?v(F):N()})})};return{promise:c,cancel:p,continue:()=>(o?.(),c),cancelRetry:f,continueRetry:A,canStart:l,start:()=>(l()?N():m().then(N),c)}}function lR(){let t=[],s=0,n=f=>{f()},r=f=>{f()},o=f=>setTimeout(f,0);const c=f=>{s?t.push(f):o(()=>{n(f)})},p=()=>{const f=t;t=[],f.length&&o(()=>{r(()=>{f.forEach(A=>{n(A)})})})};return{batch:f=>{let A;s++;try{A=f()}finally{s--,s||p()}return A},batchCalls:f=>(...A)=>{c(()=>{f(...A)})},schedule:c,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{r=f},setScheduler:f=>{o=f}}}var Jo=lR(),LB=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),XI(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(my?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},cR=class extends LB{#e;#t;#s;#n;#i;#a;constructor(t){super(),this.#a=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=dR(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const n=tR(this.state.data,t,this.options);return this.#r({data:n,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),n}setState(t,s){this.#r({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#n?.promise;return this.#n?.cancel(t),s?s.then(Oc).catch(Oc):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>ZI(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===sb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!JI(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(A=>A.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,r=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},o=()=>{const f=FB(this.options,s),A={queryKey:this.queryKey,meta:this.meta};return r(A),this.#a=!1,this.options.persister?this.options.persister(f,A,this):f(A)},c={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};r(c),this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#r({type:"fetch",meta:c.fetchOptions?.meta});const p=f=>{Ux(f)&&f.silent||this.#r({type:"error",error:f}),Ux(f)||(this.#s.config.onError?.(f,this),this.#s.config.onSettled?.(this.state.data,f,this)),this.scheduleGc()};return this.#n=UB({initialPromise:s?.initialPromise,fn:c.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{if(f===void 0){p(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(A){p(A);return}this.#s.config.onSuccess?.(f,this),this.#s.config.onSettled?.(f,this.state.error,this),this.scheduleGc()},onError:p,onFail:(f,A)=>{this.#r({type:"failed",failureCount:f,error:A})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}),this.#n.start()}#r(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...AR(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return Ux(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),Jo.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function AR(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RB(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function dR(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,n=s!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var uR=class extends py{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,n){const r=s.queryKey,o=s.queryHash??tb(r,s);let c=this.get(o);return c||(c=new cR({cache:this,queryKey:r,queryHash:o,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(c)),c}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Jo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Qj(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>Qj(t,n)):s}notify(t){Jo.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Jo.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Jo.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hR=class extends LB{#e;#t;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||fR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(s=>s!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){this.#s=UB({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,o)=>{this.#n({type:"failed",failureCount:r,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",n=!this.#s.canStart();try{if(!s){this.#n({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const o=await this.options.onMutate?.(t);o!==this.state.context&&this.#n({type:"pending",context:o,variables:t,isPaused:n})}const r=await this.#s.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Jo.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function fR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pR=class extends py{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,s,n){const r=new hR({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(s),state:n});return this.add(r),r}add(t){const s=tg(t),n=this.#e.get(s)??[];n.push(t),this.#e.set(s,n),this.notify({type:"added",mutation:t})}remove(t){const s=tg(t);if(this.#e.has(s)){const n=this.#e.get(s)?.filter(r=>r!==t);n&&(n.length===0?this.#e.delete(s):this.#e.set(s,n))}this.notify({type:"removed",mutation:t})}canRun(t){const s=this.#e.get(tg(t))?.find(n=>n.state.status==="pending");return!s||s===t}runNext(t){return this.#e.get(tg(t))?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Jo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Mj(s,n))}findAll(t={}){return this.getAll().filter(s=>Mj(t,s))}notify(t){Jo.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Jo.batch(()=>Promise.all(t.map(s=>s.continue().catch(Oc))))}};function tg(t){return t.options.scope?.id??String(t.mutationId)}function kj(t){return{onFetch:(s,n)=>{const r=s.options,o=s.fetchOptions?.meta?.fetchMore?.direction,c=s.state.data?.pages||[],p=s.state.data?.pageParams||[];let f={pages:[],pageParams:[]},A=0;const h=async()=>{let l=!1;const g=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(s.signal.aborted?l=!0:s.signal.addEventListener("abort",()=>{l=!0}),s.signal)})},v=FB(s.options,s.fetchOptions),m=async(N,w,E)=>{if(l)return Promise.reject();if(w==null&&N.pages.length)return Promise.resolve(N);const F={queryKey:s.queryKey,pageParam:w,direction:E?"backward":"forward",meta:s.options.meta};g(F);const M=await v(F),{maxPages:k}=s.options,K=E?nR:sR;return{pages:K(N.pages,M,k),pageParams:K(N.pageParams,w,k)}};if(o&&c.length){const N=o==="backward",w=N?mR:Hj,E={pages:c,pageParams:p},F=w(r,E);f=await m(E,F,N)}else{const N=t??c.length;do{const w=A===0?p[0]??r.initialPageParam:Hj(r,f);if(A>0&&w==null)break;f=await m(f,w),A++}while(A<N)}return f};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n):s.fetchFn=h}}}function Hj(t,{pages:s,pageParams:n}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,n[r],n):void 0}function mR(t,{pages:s,pageParams:n}){return s.length>0?t.getPreviousPageParam?.(s[0],s,n[0],n):void 0}var gR=class{#e;#t;#s;#n;#i;#a;#r;#o;constructor(t={}){this.#e=t.queryCache||new uR,this.#t=t.mutationCache||new pR,this.#s=t.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#r=IB.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Gg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#r?.(),this.#r=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.getQueryData(t.queryKey);if(s===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=this.#e.build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Dj(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(s)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:n})=>{const r=n.data;return[s,r]})}setQueryData(t,s,n){const r=this.defaultQueryOptions({queryKey:t}),c=this.#e.get(r.queryHash)?.state.data,p=YI(s,c);if(p!==void 0)return this.#e.build(this,r).setData(p,{...n,manual:!0})}setQueriesData(t,s,n){return Jo.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,n)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;Jo.batch(()=>{s.findAll(t).forEach(n=>{s.remove(n)})})}resetQueries(t,s){const n=this.#e,r={type:"active",...t};return Jo.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries(r,s)))}cancelQueries(t={},s={}){const n={revert:!0,...s},r=Jo.batch(()=>this.#e.findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(Oc).catch(Oc)}invalidateQueries(t={},s={}){return Jo.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,s)})}refetchQueries(t={},s){const n={...s,cancelRefetch:s?.cancelRefetch??!0},r=Jo.batch(()=>this.#e.findAll(t).filter(o=>!o.isDisabled()).map(o=>{let c=o.fetch(void 0,n);return n.throwOnError||(c=c.catch(Oc)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(r).then(Oc)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const n=this.#e.build(this,s);return n.isStaleByTime(Dj(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Oc).catch(Oc)}fetchInfiniteQuery(t){return t.behavior=kj(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Oc).catch(Oc)}ensureInfiniteQueryData(t){return t.behavior=kj(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gg.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#n.set(Pp(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#n.values()];let n={};return s.forEach(r=>{kp(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,s){this.#i.set(Pp(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#i.values()];let n={};return s.forEach(r=>{kp(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=tb(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===sb&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},yR=C.createContext(void 0),xR=({client:t,children:s})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(yR.Provider,{value:t,children:s}));async function vR(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}const bR=({on401:t})=>async({queryKey:s})=>{const n=await fetch(s.join("/"),{credentials:"include"});return await vR(n),await n.json()},jR=new gR({defaultOptions:{queries:{queryFn:bR({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),wR={},SR=wR?.VITE_API_BASE_URL?.replace(/\/+$/,"")||"/api";let Cg=null;function Kj(t){Cg=t}function BR(t){return t.startsWith("/")||(t=`/${t}`),t.startsWith("/api/")?t.replace(/^\/api/,""):t==="/api"?"":t}async function DB(t){const s=t.headers.get("content-type")||"",n=await t.text();if(!t.ok)throw new Error(`HTTP ${t.status} ${t.statusText}
Content-Type: ${s}
Body (first 300 chars):
${n.slice(0,300)}`);if(!s.toLowerCase().includes("application/json"))throw new Error(`Expected JSON but got "${s}".
Body (first 300 chars):
${n.slice(0,300)}

Hint: You're likely hitting the FRONTEND (index.html) instead of the BACKEND API.
Set VITE_API_BASE_URL to your backend '/api' or configure a proxy.`);try{return JSON.parse(n)}catch(r){throw new Error(`JSON parse failed: ${r?.message||r}
Body (first 300 chars):
${n.slice(0,300)}`)}}async function nt(t,s){const n=typeof localStorage<"u"?localStorage.getItem("authToken"):null,r=Cg||n,o=r?`${r.slice(0,8)}...${r.slice(-8)}`:null,c=new Headers(s?.headers||{});if(!c.has("Content-Type")&&s?.body&&c.set("Content-Type","application/json"),r){c.set("Authorization",`Bearer ${r}`);try{c.set("authorization",`Bearer ${r}`)}catch{}}const p=BR(t),f=`${SR}${p}`;console.log("[apiFetch]","url:",f,"globalToken?",!!Cg,"fallbackToken?",!!n,"token:",o);const A=await fetch(f,{...s||{},headers:c});return A.status===401&&(console.log("[apiFetch] 401 received, clearing globalToken"),Cg=null),A}async function Xo(t){const s=await nt(t,{method:"GET"});return DB(s)}async function no(t,s){const n=await nt(t,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});return DB(n)}const QB=C.createContext(void 0),zj="/api";function NR({children:t}){const[s,n]=C.useState(null),[r,o]=C.useState(null),[c,p]=C.useState(!1),[f,A]=C.useState(null);C.useEffect(()=>{const v=localStorage.getItem("authToken");v&&(o(v),Kj(v))},[]),C.useEffect(()=>{Kj(r),r&&localStorage.setItem("authToken",r)},[r]);const h=async(v,m)=>{p(!0),A(null);try{const N=await fetch(`${zj}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v,password:m})});if(!N.ok){let M="Login failed";try{M=(await N.json())?.message||M}catch{}throw new Error(M)}const w=await N.json(),E=w.user,F=w.token;return n(E),o(F),{user:E,token:F}}catch(N){throw A(N?.message||"Login failed"),N}finally{p(!1)}},l=async(v,m,N,w,E,F,M,k,K,G)=>{p(!0),A(null);try{const ee=await fetch(`${zj}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v,password:m,role:N||"user",fullName:w||"",mobileNumber:E||"",department:F||"",employeeCode:M||"",companyName:k||"",gstNumber:K||"",businessAddress:G||""})});if(!ee.ok){let V="Signup failed";try{V=(await ee.json())?.message||V}catch{}throw new Error(V)}await ee.json()}catch(ee){throw A(ee?.message||"Signup failed"),ee}finally{p(!1)}},g=()=>{n(null),o(null);try{localStorage.removeItem("authToken")}catch{}};return e.jsx(QB.Provider,{value:{user:s,token:r,login:h,signup:l,logout:g,isLoading:c,error:f},children:t})}function MB(){const t=C.useContext(QB);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const _B=C.createContext(void 0);function CR({children:t}){const[s,n]=C.useState(null),[r,o]=C.useState([]),[c,p]=C.useState([]),[f,A]=C.useState([]),[h,l]=C.useState([]),[g,v]=C.useState([]),[m,N]=C.useState(()=>{try{return JSON.parse(localStorage.getItem("pendingShopRequests")||"[]")}catch{return[]}}),[w,E]=C.useState(()=>{try{return JSON.parse(localStorage.getItem("pendingMaterialRequests")||"[]")}catch{return[]}}),[F,M]=C.useState([]),[k,K]=C.useState(0),[G,ee]=C.useState(0),V=ue=>({id:ue.id,name:ue.name,code:ue.code,rate:ue.rate,shopId:ue.shop_id||ue.shopId||null,unit:ue.unit,category:ue.category,brandName:ue.brandname||ue.brandName||"",modelNumber:ue.modelnumber||ue.modelNumber||"",subCategory:ue.subcategory||ue.subCategory||"",product:ue.product||"",technicalSpecification:ue.technicalspecification||ue.technicalSpecification||"",image:ue.image,attributes:ue.attributes||{},disabled:ue.disabled||!1});C.useEffect(()=>{let ue=!0;return(async()=>{try{const pe=await Xo("/shops");ue&&pe?.shops&&o(pe.shops)}catch(pe){console.warn("load shops failed",pe)}try{const pe=await Xo("/materials");ue&&pe?.materials&&p(pe.materials.map(V))}catch(pe){console.warn("load materials failed",pe)}try{const pe=await Xo("/products");ue&&pe?.products&&A(pe.products)}catch(pe){console.warn("load products failed",pe)}try{const pe=await Xo("/shops-pending-approval");ue&&pe?.shops&&l(pe.shops)}catch(pe){console.warn("load pending shops failed",pe)}try{const pe=await Xo("/materials-pending-approval");ue&&pe?.materials&&M(pe.materials)}catch(pe){console.warn("load pending materials failed",pe)}try{const pe=await Xo("/messages");ue&&pe?.messages&&v(pe.messages)}catch(pe){console.warn("load support messages failed",pe)}})(),()=>{ue=!1}},[]),C.useEffect(()=>{try{localStorage.setItem("pendingShopRequests",JSON.stringify(m))}catch{}},[m]),C.useEffect(()=>{try{localStorage.setItem("pendingMaterialRequests",JSON.stringify(w))}catch{}},[w]);const X=async()=>{const ue=Date.now();if(!(ue-G<5e3||k>=10||!(typeof localStorage<"u"&&localStorage.getItem("authToken")))){if(K(Ce=>Ce+1),ee(ue),m.length>0){const Ce=[];for(const Ne of m){try{const ye=await Ae(Ne.shop);if(ye&&ye.id){try{const we=await Xo("/shops-pending-approval");we?.shops&&l(we.shops)}catch(we){console.warn("refresh pending shops failed",we)}continue}}catch(ye){console.warn("flush pending shop failed",ye)}Ce.push(Ne)}N(Ce)}if(w.length>0){const Ce=[];for(const Ne of w){try{const ye=await ce(Ne.material);if(ye&&ye.id){try{const we=await Xo("/materials-pending-approval");we?.materials&&M(we.materials)}catch(we){console.warn("refresh pending materials failed",we)}continue}}catch(ye){console.warn("flush pending material failed",ye)}Ce.push(Ne)}E(Ce)}}};C.useEffect(()=>{const ue=pe=>{pe.key==="authToken"&&pe.newValue&&X().catch(Ce=>console.warn("flush failed",Ce))};return window.addEventListener("storage",ue),()=>window.removeEventListener("storage",ue)},[]),C.useEffect(()=>{s&&m.length+w.length>0&&X().catch(()=>{})},[s]);const J=ue=>n(ue),he=()=>n(null),q=async ue=>{const pe=await no("/shops",ue);if(pe?.shop)return o(Ce=>[pe.shop,...Ce]),pe.shop;throw new Error("addShop: server did not return created shop")},ie=async ue=>{const pe=await no("/materials",ue);if(pe?.material){const Ce=V(pe.material);return p(Ne=>[Ce,...Ne]),pe.material}throw new Error("addMaterial: server did not return created material")},Ae=async ue=>{try{return(await no("/shops",ue))?.shop||null}catch(pe){console.warn("[submitShopForApproval] server submit failed, enqueueing locally",pe?.message||pe);const Ce={id:Math.random().toString(),shop:ue};return N(Ne=>[Ce,...Ne]),null}},ce=async ue=>{try{return(await no("/materials",ue))?.material||null}catch(pe){console.warn("[submitMaterialForApproval] server submit failed, enqueueing locally",pe?.message||pe);const Ce={id:Math.random().toString(),material:ue};return E(Ne=>[Ce,...Ne]),null}},fe={user:s,login:J,logout:he,shops:r,materials:c,products:f,approvalRequests:h,supportMessages:g,pendingShops:m,pendingMaterials:w,materialApprovalRequests:F,addShop:q,addMaterial:ie,deleteShop:async ue=>{console.log("[deleteShop] attempting to delete shop",ue);try{const pe=await nt(`/shops/${ue}`,{method:"DELETE"});if(console.log("[deleteShop] response status:",pe.status),pe.ok){console.log("[deleteShop] delete successful, removing from local list"),o(Ce=>Ce.filter(Ne=>Ne.id!==ue));return}try{const Ce=await pe.text();console.warn("[deleteShop] failed:",pe.status,Ce)}catch{console.warn("[deleteShop] failed:",pe.status)}}catch(pe){console.warn("[deleteShop] exception:",pe)}console.log("[deleteShop] re-syncing from server");try{const pe=await Xo("/shops");pe?.shops&&o(pe.shops)}catch(pe){console.warn("refresh shops failed",pe)}},deleteMaterial:async ue=>{console.log("[deleteMaterial] attempting to delete material",ue);try{const pe=await nt(`/materials/${ue}`,{method:"DELETE"});if(console.log("[deleteMaterial] response status:",pe.status),pe.ok){console.log("[deleteMaterial] delete successful, removing from local list"),p(Ce=>Ce.filter(Ne=>Ne.id!==ue));return}try{const Ce=await pe.text();console.warn("[deleteMaterial] failed:",pe.status,Ce)}catch{console.warn("[deleteMaterial] failed:",pe.status)}}catch(pe){console.warn("[deleteMaterial] exception:",pe)}console.log("[deleteMaterial] re-syncing from server");try{const pe=await Xo("/materials");pe?.materials&&p(pe.materials.map(V))}catch(pe){console.warn("refresh materials failed",pe)}},approveShop:async ue=>{const pe=await no(`/shops/${ue}/approve`,{});try{const Ce=await Xo("/shops");Ce?.shops&&o(Ce.shops)}catch(Ce){console.warn("approveShop refresh failed",Ce)}return pe?.shop},rejectShop:async(ue,pe)=>{const Ce=await no(`/shops/${ue}/reject`,{reason:pe});try{const Ne=await Xo("/shops");Ne?.shops&&o(Ne.shops)}catch(Ne){console.warn("rejectShop refresh failed",Ne)}return Ce?.shop},approveMaterial:async ue=>{const pe=await no(`/materials/${ue}/approve`,{});try{const Ce=await Xo("/materials");Ce?.materials&&p(Ce.materials.map(V))}catch(Ce){console.warn("approveMaterial refresh failed",Ce)}return pe?.material},rejectMaterial:async(ue,pe)=>{const Ce=await no(`/materials/${ue}/reject`,{reason:pe});try{const Ne=await Xo("/materials");Ne?.materials&&p(Ne.materials.map(V))}catch(Ne){console.warn("rejectMaterial refresh failed",Ne)}return Ce?.material},submitShopForApproval:Ae,submitMaterialForApproval:ce,addSupportMessage:async(ue,pe,Ce)=>{try{const Ne=await no("/messages",{senderName:ue,message:pe,info:Ce||null});Ne?.message&&v(ye=>[Ne.message,...ye])}catch(Ne){throw console.warn("addSupportMessage failed",Ne),Ne}},deleteMessage:async ue=>{try{if((await nt(`/messages/${ue}`,{method:"DELETE"})).ok){v(Ce=>Ce.filter(Ne=>Ne.id!==ue));return}throw new Error("Failed to delete message")}catch(pe){throw console.warn("deleteMessage failed",pe),pe}}};return e.jsx(_B.Provider,{value:fe,children:t})}function ci(){const t=C.useContext(_B);if(!t)throw new Error("useData must be used inside DataProvider");return t}const ER=1,TR=1e6;let Lx=0;function FR(){return Lx=(Lx+1)%Number.MAX_SAFE_INTEGER,Lx.toString()}const Dx=new Map,Gj=t=>{if(Dx.has(t))return;const s=setTimeout(()=>{Dx.delete(t),Np({type:"REMOVE_TOAST",toastId:t})},TR);Dx.set(t,s)},IR=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,ER)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=s;return n?Gj(n):t.toasts.forEach(r=>{Gj(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)}}},Eg=[];let Tg={toasts:[]};function Np(t){Tg=IR(Tg,t),Eg.forEach(s=>{s(Tg)})}function RR({...t}){const s=FR(),n=o=>Np({type:"UPDATE_TOAST",toast:{...o,id:s}}),r=()=>Np({type:"DISMISS_TOAST",toastId:s});return Np({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:o=>{o||r()}}}),{id:s,dismiss:r,update:n}}function Ai(){const[t,s]=C.useState(Tg);return C.useEffect(()=>(Eg.push(s),()=>{const n=Eg.indexOf(s);n>-1&&Eg.splice(n,1)}),[t]),{...t,toast:RR,dismiss:n=>Np({type:"DISMISS_TOAST",toastId:n})}}var rh=vB();const PB=Xv(rh);function Ll(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function Vj(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function ah(...t){return s=>{let n=!1;const r=t.map(o=>{const c=Vj(o,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let o=0;o<r.length;o++){const c=r[o];typeof c=="function"?c():Vj(t[o],null)}}}}function Fr(...t){return C.useCallback(ah(...t),t)}function OR(t,s){const n=C.createContext(s),r=c=>{const{children:p,...f}=c,A=C.useMemo(()=>f,Object.values(f));return e.jsx(n.Provider,{value:A,children:p})};r.displayName=t+"Provider";function o(c){const p=C.useContext(n);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[r,o]}function uc(t,s=[]){let n=[];function r(c,p){const f=C.createContext(p),A=n.length;n=[...n,p];const h=g=>{const{scope:v,children:m,...N}=g,w=v?.[t]?.[A]||f,E=C.useMemo(()=>N,Object.values(N));return e.jsx(w.Provider,{value:E,children:m})};h.displayName=c+"Provider";function l(g,v){const m=v?.[t]?.[A]||f,N=C.useContext(m);if(N)return N;if(p!==void 0)return p;throw new Error(`\`${g}\` must be used within \`${c}\``)}return[h,l]}const o=()=>{const c=n.map(p=>C.createContext(p));return function(f){const A=f?.[t]||c;return C.useMemo(()=>({[`__scope${t}`]:{...f,[t]:A}}),[f,A])}};return o.scopeName=t,[r,UR(o,...s)]}function UR(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const p=r.reduce((f,{useScope:A,scopeName:h})=>{const g=A(c)[`__scope${h}`];return{...f,...g}},{});return C.useMemo(()=>({[`__scope${s.scopeName}`]:p}),[p])}};return n.scopeName=s.scopeName,n}function q0(t){const s=LR(t),n=C.forwardRef((r,o)=>{const{children:c,...p}=r,f=C.Children.toArray(c),A=f.find(QR);if(A){const h=A.props.children,l=f.map(g=>g===A?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return e.jsx(s,{...p,ref:o,children:C.isValidElement(h)?C.cloneElement(h,void 0,l):null})}return e.jsx(s,{...p,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function LR(t){const s=C.forwardRef((n,r)=>{const{children:o,...c}=n;if(C.isValidElement(o)){const p=_R(o),f=MR(c,o.props);return o.type!==C.Fragment&&(f.ref=r?ah(r,p):p),C.cloneElement(o,f)}return C.Children.count(o)>1?C.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var DR=Symbol("radix.slottable");function QR(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===DR}function MR(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...f)=>{c(...f),o(...f)}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function _R(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function PR(t){const s=t+"CollectionProvider",[n,r]=uc(s),[o,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),p=w=>{const{scope:E,children:F}=w,M=Mo.useRef(null),k=Mo.useRef(new Map).current;return e.jsx(o,{scope:E,itemMap:k,collectionRef:M,children:F})};p.displayName=s;const f=t+"CollectionSlot",A=q0(f),h=Mo.forwardRef((w,E)=>{const{scope:F,children:M}=w,k=c(f,F),K=Fr(E,k.collectionRef);return e.jsx(A,{ref:K,children:M})});h.displayName=f;const l=t+"CollectionItemSlot",g="data-radix-collection-item",v=q0(l),m=Mo.forwardRef((w,E)=>{const{scope:F,children:M,...k}=w,K=Mo.useRef(null),G=Fr(E,K),ee=c(l,F);return Mo.useEffect(()=>(ee.itemMap.set(K,{ref:K,...k}),()=>void ee.itemMap.delete(K))),e.jsx(v,{[g]:"",ref:G,children:M})});m.displayName=l;function N(w){const E=c(t+"CollectionConsumer",w);return Mo.useCallback(()=>{const M=E.collectionRef.current;if(!M)return[];const k=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((ee,V)=>k.indexOf(ee.ref.current)-k.indexOf(V.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:p,Slot:h,ItemSlot:m},N,r]}var kR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],bA=kR.reduce((t,s)=>{const n=q0(`Primitive.${s}`),r=C.forwardRef((o,c)=>{const{asChild:p,...f}=o,A=p?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(A,{...f,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function kB(t,s){t&&rh.flushSync(()=>t.dispatchEvent(s))}function Po(t){const s=C.useRef(t);return C.useEffect(()=>{s.current=t}),C.useMemo(()=>(...n)=>s.current?.(...n),[])}function HB(t,s=globalThis?.document){const n=Po(t);C.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var HR="DismissableLayer",W0="dismissableLayer.update",KR="dismissableLayer.pointerDownOutside",zR="dismissableLayer.focusOutside",$j,KB=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zB=C.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:p,onDismiss:f,...A}=t,h=C.useContext(KB),[l,g]=C.useState(null),v=l?.ownerDocument??globalThis?.document,[,m]=C.useState({}),N=Fr(s,V=>g(V)),w=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),F=w.indexOf(E),M=l?w.indexOf(l):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,K=M>=F,G=VR(V=>{const X=V.target,J=[...h.branches].some(he=>he.contains(X));!K||J||(o?.(V),p?.(V),V.defaultPrevented||f?.())},v),ee=$R(V=>{const X=V.target;[...h.branches].some(he=>he.contains(X))||(c?.(V),p?.(V),V.defaultPrevented||f?.())},v);return HB(V=>{M===h.layers.size-1&&(r?.(V),!V.defaultPrevented&&f&&(V.preventDefault(),f()))},v),C.useEffect(()=>{if(l)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&($j=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(l)),h.layers.add(l),qj(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=$j)}},[l,v,n,h]),C.useEffect(()=>()=>{l&&(h.layers.delete(l),h.layersWithOutsidePointerEventsDisabled.delete(l),qj())},[l,h]),C.useEffect(()=>{const V=()=>m({});return document.addEventListener(W0,V),()=>document.removeEventListener(W0,V)},[]),e.jsx(bA.div,{...A,ref:N,style:{pointerEvents:k?K?"auto":"none":void 0,...t.style},onFocusCapture:Ll(t.onFocusCapture,ee.onFocusCapture),onBlurCapture:Ll(t.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:Ll(t.onPointerDownCapture,G.onPointerDownCapture)})});zB.displayName=HR;var GR="DismissableLayerBranch",GB=C.forwardRef((t,s)=>{const n=C.useContext(KB),r=C.useRef(null),o=Fr(s,r);return C.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(bA.div,{...t,ref:o})});GB.displayName=GR;function VR(t,s=globalThis?.document){const n=Po(t),r=C.useRef(!1),o=C.useRef(()=>{});return C.useEffect(()=>{const c=f=>{if(f.target&&!r.current){let A=function(){VB(KR,n,h,{discrete:!0})};const h={originalEvent:f};f.pointerType==="touch"?(s.removeEventListener("click",o.current),o.current=A,s.addEventListener("click",o.current,{once:!0})):A()}else s.removeEventListener("click",o.current);r.current=!1},p=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(p),s.removeEventListener("pointerdown",c),s.removeEventListener("click",o.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function $R(t,s=globalThis?.document){const n=Po(t),r=C.useRef(!1);return C.useEffect(()=>{const o=c=>{c.target&&!r.current&&VB(zR,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",o),()=>s.removeEventListener("focusin",o)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qj(){const t=new CustomEvent(W0);document.dispatchEvent(t)}function VB(t,s,n,{discrete:r}){const o=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&o.addEventListener(t,s,{once:!0}),r?kB(o,c):o.dispatchEvent(c)}var qR=zB,WR=GB,Pa=globalThis?.document?C.useLayoutEffect:()=>{},YR="Portal",$B=C.forwardRef((t,s)=>{const{container:n,...r}=t,[o,c]=C.useState(!1);Pa(()=>c(!0),[]);const p=n||o&&globalThis?.document?.body;return p?PB.createPortal(e.jsx(bA.div,{...r,ref:s}),p):null});$B.displayName=YR;function XR(t,s){return C.useReducer((n,r)=>s[n][r]??n,t)}var qB=t=>{const{present:s,children:n}=t,r=JR(s),o=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),c=Fr(r.ref,ZR(o));return typeof n=="function"||r.isPresent?C.cloneElement(o,{ref:c}):null};qB.displayName="Presence";function JR(t){const[s,n]=C.useState(),r=C.useRef({}),o=C.useRef(t),c=C.useRef("none"),p=t?"mounted":"unmounted",[f,A]=XR(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const h=sg(r.current);c.current=f==="mounted"?h:"none"},[f]),Pa(()=>{const h=r.current,l=o.current;if(l!==t){const v=c.current,m=sg(h);t?A("MOUNT"):m==="none"||h?.display==="none"?A("UNMOUNT"):A(l&&v!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,A]),Pa(()=>{if(s){let h;const l=s.ownerDocument.defaultView??window,g=m=>{const w=sg(r.current).includes(m.animationName);if(m.target===s&&w&&(A("ANIMATION_END"),!o.current)){const E=s.style.animationFillMode;s.style.animationFillMode="forwards",h=l.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=E)})}},v=m=>{m.target===s&&(c.current=sg(r.current))};return s.addEventListener("animationstart",v),s.addEventListener("animationcancel",g),s.addEventListener("animationend",g),()=>{l.clearTimeout(h),s.removeEventListener("animationstart",v),s.removeEventListener("animationcancel",g),s.removeEventListener("animationend",g)}}else A("ANIMATION_END")},[s,A]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:C.useCallback(h=>{h&&(r.current=getComputedStyle(h)),n(h)},[])}}function sg(t){return t?.animationName||"none"}function ZR(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function e3({prop:t,defaultProp:s,onChange:n=()=>{}}){const[r,o]=t3({defaultProp:s,onChange:n}),c=t!==void 0,p=c?t:r,f=Po(n),A=C.useCallback(h=>{if(c){const g=typeof h=="function"?h(t):h;g!==t&&f(g)}else o(h)},[c,t,o,f]);return[p,A]}function t3({defaultProp:t,onChange:s}){const n=C.useState(t),[r]=n,o=C.useRef(r),c=Po(s);return C.useEffect(()=>{o.current!==r&&(c(r),o.current=r)},[r,o,c]),n}var s3="VisuallyHidden",nb=C.forwardRef((t,s)=>e.jsx(bA.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));nb.displayName=s3;var rb="ToastProvider",[ab,n3,r3]=PR("Toast"),[WB]=uc("Toast",[r3]),[a3,gy]=WB(rb),YB=t=>{const{__scopeToast:s,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:c=50,children:p}=t,[f,A]=C.useState(null),[h,l]=C.useState(0),g=C.useRef(!1),v=C.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${rb}\`. Expected non-empty \`string\`.`),e.jsx(ab.Provider,{scope:s,children:e.jsx(a3,{scope:s,label:n,duration:r,swipeDirection:o,swipeThreshold:c,toastCount:h,viewport:f,onViewportChange:A,onToastAdd:C.useCallback(()=>l(m=>m+1),[]),onToastRemove:C.useCallback(()=>l(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:p})})};YB.displayName=rb;var XB="ToastViewport",i3=["F8"],Y0="toast.viewportPause",X0="toast.viewportResume",JB=C.forwardRef((t,s)=>{const{__scopeToast:n,hotkey:r=i3,label:o="Notifications ({hotkey})",...c}=t,p=gy(XB,n),f=n3(n),A=C.useRef(null),h=C.useRef(null),l=C.useRef(null),g=C.useRef(null),v=Fr(s,g,p.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=p.toastCount>0;C.useEffect(()=>{const E=F=>{r.length!==0&&r.every(k=>F[k]||F.code===k)&&g.current?.focus()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),C.useEffect(()=>{const E=A.current,F=g.current;if(N&&E&&F){const M=()=>{if(!p.isClosePausedRef.current){const ee=new CustomEvent(Y0);F.dispatchEvent(ee),p.isClosePausedRef.current=!0}},k=()=>{if(p.isClosePausedRef.current){const ee=new CustomEvent(X0);F.dispatchEvent(ee),p.isClosePausedRef.current=!1}},K=ee=>{!E.contains(ee.relatedTarget)&&k()},G=()=>{E.contains(document.activeElement)||k()};return E.addEventListener("focusin",M),E.addEventListener("focusout",K),E.addEventListener("pointermove",M),E.addEventListener("pointerleave",G),window.addEventListener("blur",M),window.addEventListener("focus",k),()=>{E.removeEventListener("focusin",M),E.removeEventListener("focusout",K),E.removeEventListener("pointermove",M),E.removeEventListener("pointerleave",G),window.removeEventListener("blur",M),window.removeEventListener("focus",k)}}},[N,p.isClosePausedRef]);const w=C.useCallback(({tabbingDirection:E})=>{const M=f().map(k=>{const K=k.ref.current,G=[K,...x3(K)];return E==="forwards"?G:G.reverse()});return(E==="forwards"?M.reverse():M).flat()},[f]);return C.useEffect(()=>{const E=g.current;if(E){const F=M=>{const k=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!k){const G=document.activeElement,ee=M.shiftKey;if(M.target===E&&ee){h.current?.focus();return}const J=w({tabbingDirection:ee?"backwards":"forwards"}),he=J.findIndex(q=>q===G);Qx(J.slice(he+1))?M.preventDefault():ee?h.current?.focus():l.current?.focus()}};return E.addEventListener("keydown",F),()=>E.removeEventListener("keydown",F)}},[f,w]),e.jsxs(WR,{ref:A,role:"region","aria-label":o.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&e.jsx(J0,{ref:h,onFocusFromOutsideViewport:()=>{const E=w({tabbingDirection:"forwards"});Qx(E)}}),e.jsx(ab.Slot,{scope:n,children:e.jsx(bA.ol,{tabIndex:-1,...c,ref:v})}),N&&e.jsx(J0,{ref:l,onFocusFromOutsideViewport:()=>{const E=w({tabbingDirection:"backwards"});Qx(E)}})]})});JB.displayName=XB;var ZB="ToastFocusProxy",J0=C.forwardRef((t,s)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,c=gy(ZB,n);return e.jsx(nb,{"aria-hidden":!0,tabIndex:0,...o,ref:s,style:{position:"fixed"},onFocus:p=>{const f=p.relatedTarget;!c.viewport?.contains(f)&&r()}})});J0.displayName=ZB;var yy="Toast",o3="toast.swipeStart",l3="toast.swipeMove",c3="toast.swipeCancel",A3="toast.swipeEnd",eN=C.forwardRef((t,s)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:c,...p}=t,[f=!0,A]=e3({prop:r,defaultProp:o,onChange:c});return e.jsx(qB,{present:n||f,children:e.jsx(h3,{open:f,...p,ref:s,onClose:()=>A(!1),onPause:Po(t.onPause),onResume:Po(t.onResume),onSwipeStart:Ll(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ll(t.onSwipeMove,h=>{const{x:l,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${l}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:Ll(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ll(t.onSwipeEnd,h=>{const{x:l,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${l}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),A(!1)})})})});eN.displayName=yy;var[d3,u3]=WB(yy,{onClose(){}}),h3=C.forwardRef((t,s)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:c,onClose:p,onEscapeKeyDown:f,onPause:A,onResume:h,onSwipeStart:l,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:m,...N}=t,w=gy(yy,n),[E,F]=C.useState(null),M=Fr(s,ce=>F(ce)),k=C.useRef(null),K=C.useRef(null),G=o||w.duration,ee=C.useRef(0),V=C.useRef(G),X=C.useRef(0),{onToastAdd:J,onToastRemove:he}=w,q=Po(()=>{E?.contains(document.activeElement)&&w.viewport?.focus(),p()}),ie=C.useCallback(ce=>{!ce||ce===1/0||(window.clearTimeout(X.current),ee.current=new Date().getTime(),X.current=window.setTimeout(q,ce))},[q]);C.useEffect(()=>{const ce=w.viewport;if(ce){const oe=()=>{ie(V.current),h?.()},ne=()=>{const re=new Date().getTime()-ee.current;V.current=V.current-re,window.clearTimeout(X.current),A?.()};return ce.addEventListener(Y0,ne),ce.addEventListener(X0,oe),()=>{ce.removeEventListener(Y0,ne),ce.removeEventListener(X0,oe)}}},[w.viewport,G,A,h,ie]),C.useEffect(()=>{c&&!w.isClosePausedRef.current&&ie(G)},[c,G,w.isClosePausedRef,ie]),C.useEffect(()=>(J(),()=>he()),[J,he]);const Ae=C.useMemo(()=>E?oN(E):null,[E]);return w.viewport?e.jsxs(e.Fragment,{children:[Ae&&e.jsx(f3,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Ae}),e.jsx(d3,{scope:n,onClose:q,children:rh.createPortal(e.jsx(ab.ItemSlot,{scope:n,children:e.jsx(qR,{asChild:!0,onEscapeKeyDown:Ll(f,()=>{w.isFocusedToastEscapeKeyDownRef.current||q(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(bA.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":w.swipeDirection,...N,ref:M,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ll(t.onKeyDown,ce=>{ce.key==="Escape"&&(f?.(ce.nativeEvent),ce.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,q()))}),onPointerDown:Ll(t.onPointerDown,ce=>{ce.button===0&&(k.current={x:ce.clientX,y:ce.clientY})}),onPointerMove:Ll(t.onPointerMove,ce=>{if(!k.current)return;const oe=ce.clientX-k.current.x,ne=ce.clientY-k.current.y,re=!!K.current,se=["left","right"].includes(w.swipeDirection),je=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,De=se?je(0,oe):0,ge=se?0:je(0,ne),Z=ce.pointerType==="touch"?10:2,fe={x:De,y:ge},ue={originalEvent:ce,delta:fe};re?(K.current=fe,ng(l3,g,ue,{discrete:!1})):Wj(fe,w.swipeDirection,Z)?(K.current=fe,ng(o3,l,ue,{discrete:!1}),ce.target.setPointerCapture(ce.pointerId)):(Math.abs(oe)>Z||Math.abs(ne)>Z)&&(k.current=null)}),onPointerUp:Ll(t.onPointerUp,ce=>{const oe=K.current,ne=ce.target;if(ne.hasPointerCapture(ce.pointerId)&&ne.releasePointerCapture(ce.pointerId),K.current=null,k.current=null,oe){const re=ce.currentTarget,se={originalEvent:ce,delta:oe};Wj(oe,w.swipeDirection,w.swipeThreshold)?ng(A3,m,se,{discrete:!0}):ng(c3,v,se,{discrete:!0}),re.addEventListener("click",je=>je.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),f3=t=>{const{__scopeToast:s,children:n,...r}=t,o=gy(yy,s),[c,p]=C.useState(!1),[f,A]=C.useState(!1);return g3(()=>p(!0)),C.useEffect(()=>{const h=window.setTimeout(()=>A(!0),1e3);return()=>window.clearTimeout(h)},[]),f?null:e.jsx($B,{asChild:!0,children:e.jsx(nb,{...r,children:c&&e.jsxs(e.Fragment,{children:[o.label," ",n]})})})},p3="ToastTitle",tN=C.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(bA.div,{...r,ref:s})});tN.displayName=p3;var m3="ToastDescription",sN=C.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(bA.div,{...r,ref:s})});sN.displayName=m3;var nN="ToastAction",rN=C.forwardRef((t,s)=>{const{altText:n,...r}=t;return n.trim()?e.jsx(iN,{altText:n,asChild:!0,children:e.jsx(ib,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${nN}\`. Expected non-empty \`string\`.`),null)});rN.displayName=nN;var aN="ToastClose",ib=C.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t,o=u3(aN,n);return e.jsx(iN,{asChild:!0,children:e.jsx(bA.button,{type:"button",...r,ref:s,onClick:Ll(t.onClick,o.onClose)})})});ib.displayName=aN;var iN=C.forwardRef((t,s)=>{const{__scopeToast:n,altText:r,...o}=t;return e.jsx(bA.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:s})});function oN(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),y3(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",c=r.dataset.radixToastAnnounceExclude==="";if(!o)if(c){const p=r.dataset.radixToastAnnounceAlt;p&&s.push(p)}else s.push(...oN(r))}}),s}function ng(t,s,n,{discrete:r}){const o=n.originalEvent.currentTarget,c=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});s&&o.addEventListener(t,s,{once:!0}),r?kB(o,c):o.dispatchEvent(c)}var Wj=(t,s,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),c=r>o;return s==="left"||s==="right"?c&&r>n:!c&&o>n};function g3(t=()=>{}){const s=Po(t);Pa(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[s])}function y3(t){return t.nodeType===t.ELEMENT_NODE}function x3(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Qx(t){const s=document.activeElement;return t.some(n=>n===s?!0:(n.focus(),document.activeElement!==s))}var v3=YB,lN=JB,cN=eN,AN=tN,dN=sN,uN=rN,hN=ib;function fN(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(n=fN(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function pN(){for(var t,s,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(s=fN(t))&&(r&&(r+=" "),r+=s);return r}const Yj=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Xj=pN,xy=(t,s)=>n=>{var r;if(s?.variants==null)return Xj(t,n?.class,n?.className);const{variants:o,defaultVariants:c}=s,p=Object.keys(o).map(h=>{const l=n?.[h],g=c?.[h];if(l===null)return null;const v=Yj(l)||Yj(g);return o[h][v]}),f=n&&Object.entries(n).reduce((h,l)=>{let[g,v]=l;return v===void 0||(h[g]=v),h},{}),A=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((h,l)=>{let{class:g,className:v,...m}=l;return Object.entries(m).every(N=>{let[w,E]=N;return Array.isArray(E)?E.includes({...c,...f}[w]):{...c,...f}[w]===E})?[...h,g,v]:h},[]);return Xj(t,p,A,n?.class,n?.className)};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,r)=>r?r.toUpperCase():n.toLowerCase()),Jj=t=>{const s=j3(t);return s.charAt(0).toUpperCase()+s.slice(1)},mN=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim(),w3=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=C.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:p,...f},A)=>C.createElement("svg",{ref:A,...S3,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:mN("lucide",o),...!c&&!w3(f)&&{"aria-hidden":"true"},...f},[...p.map(([h,l])=>C.createElement(h,l)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=(t,s)=>{const n=C.forwardRef(({className:r,...o},c)=>C.createElement(B3,{ref:c,iconNode:s,className:mN(`lucide-${b3(Jj(t))}`,`lucide-${t}`,r),...o}));return n.displayName=Jj(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gN=Wn("arrow-left",N3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],E3=Wn("arrow-right",C3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M3 3h18",key:"o7r712"}],["path",{d:"M20 7H8",key:"gd2fo2"}],["path",{d:"M20 11H8",key:"1ynp89"}],["path",{d:"M10 19h10",key:"19hjk5"}],["path",{d:"M8 15h12",key:"1yqzne"}],["path",{d:"M4 3v14",key:"fggqzn"}],["circle",{cx:"4",cy:"19",r:"2",key:"p3m9r0"}]],yN=Wn("blinds",T3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 9v6",key:"199k2o"}],["path",{d:"M16 15v6",key:"8rj2es"}],["path",{d:"M16 3v6",key:"1j6rpj"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M8 15v6",key:"1stoo3"}],["path",{d:"M8 3v6",key:"vlvjmk"}]],xN=Wn("brick-wall",F3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],lc=Wn("building-2",I3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],rf=Wn("calculator",R3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ob=Wn("check",O3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vN=Wn("chevron-down",U3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qn=Wn("chevron-left",L3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Mn=Wn("chevron-right",D3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],M3=Wn("chevron-up",Q3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],P3=Wn("circle-alert",_3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_l=Wn("circle-check",k3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Vg=Wn("circle-x",H3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],z3=Wn("circle",K3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zj=Wn("clock",G3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],bN=Wn("cloud",V3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],jN=Wn("door-open",$3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],si=Wn("download",q3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],wN=Wn("droplets",W3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],X3=Wn("hammer",Y3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Z3=Wn("layout-dashboard",J3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],vy=Wn("layers",eO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$g=Wn("loader-circle",tO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nO=Wn("log-out",sO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],aO=Wn("map-pin",rO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],oO=Wn("menu",iO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],af=Wn("message-square",lO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Gd=Wn("package",cO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],SN=Wn("paint-bucket",AO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],uO=Wn("paintbrush",dO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],VA=Wn("plus",hO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ew=Wn("settings",fO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],BN=Wn("shield-alert",pO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qg=Wn("shopping-cart",mO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yO=Wn("star",gO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],tw=Wn("store",xO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uA=Wn("trash-2",vO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],NN=Wn("users",bO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wO=Wn("user",jO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lb=Wn("x",SO);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Wg=Wn("zap",BO),cb="-",NO=t=>{const s=EO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:p=>{const f=p.split(cb);return f[0]===""&&f.length!==1&&f.shift(),CN(f,s)||CO(p)},getConflictingClassGroupIds:(p,f)=>{const A=n[p]||[];return f&&r[p]?[...A,...r[p]]:A}}},CN=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],r=s.nextPart.get(n),o=r?CN(t.slice(1),r):void 0;if(o)return o;if(s.validators.length===0)return;const c=t.join(cb);return s.validators.find(({validator:p})=>p(c))?.classGroupId},sw=/^\[(.+)\]$/,CO=t=>{if(sw.test(t)){const s=sw.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},EO=t=>{const{theme:s,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const o in n)Z0(n[o],r,o,s);return r},Z0=(t,s,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const c=o===""?s:nw(s,o);c.classGroupId=n;return}if(typeof o=="function"){if(TO(o)){Z0(o(r),s,n,r);return}s.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([c,p])=>{Z0(p,nw(s,c),n,r)})})},nw=(t,s)=>{let n=t;return s.split(cb).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},TO=t=>t.isThemeGetter,FO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,r=new Map;const o=(c,p)=>{n.set(c,p),s++,s>t&&(s=0,r=n,n=new Map)};return{get(c){let p=n.get(c);if(p!==void 0)return p;if((p=r.get(c))!==void 0)return o(c,p),p},set(c,p){n.has(c)?n.set(c,p):o(c,p)}}},ev="!",tv=":",IO=tv.length,RO=t=>{const{prefix:s,experimentalParseClassName:n}=t;let r=o=>{const c=[];let p=0,f=0,A=0,h;for(let N=0;N<o.length;N++){let w=o[N];if(p===0&&f===0){if(w===tv){c.push(o.slice(A,N)),A=N+IO;continue}if(w==="/"){h=N;continue}}w==="["?p++:w==="]"?p--:w==="("?f++:w===")"&&f--}const l=c.length===0?o:o.substring(A),g=OO(l),v=g!==l,m=h&&h>A?h-A:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:m}};if(s){const o=s+tv,c=r;r=p=>p.startsWith(o)?c(p.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=c=>n({className:c,parseClassName:o})}return r},OO=t=>t.endsWith(ev)?t.substring(0,t.length-1):t.startsWith(ev)?t.substring(1):t,UO=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let c=[];return r.forEach(p=>{p[0]==="["||s[p]?(o.push(...c.sort(),p),c=[]):c.push(p)}),o.push(...c.sort()),o}},LO=t=>({cache:FO(t.cacheSize),parseClassName:RO(t),sortModifiers:UO(t),...NO(t)}),DO=/\s+/,QO=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:c}=s,p=[],f=t.trim().split(DO);let A="";for(let h=f.length-1;h>=0;h-=1){const l=f[h],{isExternal:g,modifiers:v,hasImportantModifier:m,baseClassName:N,maybePostfixModifierPosition:w}=n(l);if(g){A=l+(A.length>0?" "+A:A);continue}let E=!!w,F=r(E?N.substring(0,w):N);if(!F){if(!E){A=l+(A.length>0?" "+A:A);continue}if(F=r(N),!F){A=l+(A.length>0?" "+A:A);continue}E=!1}const M=c(v).join(":"),k=m?M+ev:M,K=k+F;if(p.includes(K))continue;p.push(K);const G=o(F,E);for(let ee=0;ee<G.length;++ee){const V=G[ee];p.push(k+V)}A=l+(A.length>0?" "+A:A)}return A};function MO(){let t=0,s,n,r="";for(;t<arguments.length;)(s=arguments[t++])&&(n=EN(s))&&(r&&(r+=" "),r+=n);return r}const EN=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=EN(t[r]))&&(n&&(n+=" "),n+=s);return n};function _O(t,...s){let n,r,o,c=p;function p(A){const h=s.reduce((l,g)=>g(l),t());return n=LO(h),r=n.cache.get,o=n.cache.set,c=f,f(A)}function f(A){const h=r(A);if(h)return h;const l=QO(A,n);return o(A,l),l}return function(){return c(MO.apply(null,arguments))}}const Ji=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},TN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,FN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,PO=/^\d+\/\d+$/,kO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,KO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,zO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lh=t=>PO.test(t),or=t=>!!t&&!Number.isNaN(Number(t)),Md=t=>!!t&&Number.isInteger(Number(t)),Mx=t=>t.endsWith("%")&&or(t.slice(0,-1)),HA=t=>kO.test(t),VO=()=>!0,$O=t=>HO.test(t)&&!KO.test(t),IN=()=>!1,qO=t=>zO.test(t),WO=t=>GO.test(t),YO=t=>!Zs(t)&&!en(t),XO=t=>uf(t,UN,IN),Zs=t=>TN.test(t),Du=t=>uf(t,LN,$O),_x=t=>uf(t,sU,or),rw=t=>uf(t,RN,IN),JO=t=>uf(t,ON,WO),rg=t=>uf(t,DN,qO),en=t=>FN.test(t),fp=t=>hf(t,LN),ZO=t=>hf(t,nU),aw=t=>hf(t,RN),eU=t=>hf(t,UN),tU=t=>hf(t,ON),ag=t=>hf(t,DN,!0),uf=(t,s,n)=>{const r=TN.exec(t);return r?r[1]?s(r[1]):n(r[2]):!1},hf=(t,s,n=!1)=>{const r=FN.exec(t);return r?r[1]?s(r[1]):n:!1},RN=t=>t==="position"||t==="percentage",ON=t=>t==="image"||t==="url",UN=t=>t==="length"||t==="size"||t==="bg-size",LN=t=>t==="length",sU=t=>t==="number",nU=t=>t==="family-name",DN=t=>t==="shadow",rU=()=>{const t=Ji("color"),s=Ji("font"),n=Ji("text"),r=Ji("font-weight"),o=Ji("tracking"),c=Ji("leading"),p=Ji("breakpoint"),f=Ji("container"),A=Ji("spacing"),h=Ji("radius"),l=Ji("shadow"),g=Ji("inset-shadow"),v=Ji("text-shadow"),m=Ji("drop-shadow"),N=Ji("blur"),w=Ji("perspective"),E=Ji("aspect"),F=Ji("ease"),M=Ji("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],G=()=>[...K(),en,Zs],ee=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],X=()=>[en,Zs,A],J=()=>[Lh,"full","auto",...X()],he=()=>[Md,"none","subgrid",en,Zs],q=()=>["auto",{span:["full",Md,en,Zs]},Md,en,Zs],ie=()=>[Md,"auto",en,Zs],Ae=()=>["auto","min","max","fr",en,Zs],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...X()],re=()=>[Lh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...X()],se=()=>[t,en,Zs],je=()=>[...K(),aw,rw,{position:[en,Zs]}],De=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ge=()=>["auto","cover","contain",eU,XO,{size:[en,Zs]}],Z=()=>[Mx,fp,Du],fe=()=>["","none","full",h,en,Zs],ue=()=>["",or,fp,Du],pe=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[or,Mx,aw,rw],ye=()=>["","none",N,en,Zs],we=()=>["none",or,en,Zs],Te=()=>["none",or,en,Zs],qe=()=>[or,en,Zs],ve=()=>[Lh,"full",...X()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[HA],breakpoint:[HA],color:[VO],container:[HA],"drop-shadow":[HA],ease:["in","out","in-out"],font:[YO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[HA],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[HA],shadow:[HA],spacing:["px",or],text:[HA],"text-shadow":[HA],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lh,Zs,en,E]}],container:["container"],columns:[{columns:[or,Zs,en,f]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:G()}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:J()}],"inset-x":[{"inset-x":J()}],"inset-y":[{"inset-y":J()}],start:[{start:J()}],end:[{end:J()}],top:[{top:J()}],right:[{right:J()}],bottom:[{bottom:J()}],left:[{left:J()}],visibility:["visible","invisible","collapse"],z:[{z:[Md,"auto",en,Zs]}],basis:[{basis:[Lh,"full","auto",f,...X()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[or,Lh,"auto","initial","none",Zs]}],grow:[{grow:["",or,en,Zs]}],shrink:[{shrink:["",or,en,Zs]}],order:[{order:[Md,"first","last","none",en,Zs]}],"grid-cols":[{"grid-cols":he()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":he()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ae()}],"auto-rows":[{"auto-rows":Ae()}],gap:[{gap:X()}],"gap-x":[{"gap-x":X()}],"gap-y":[{"gap-y":X()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:X()}],px:[{px:X()}],py:[{py:X()}],ps:[{ps:X()}],pe:[{pe:X()}],pt:[{pt:X()}],pr:[{pr:X()}],pb:[{pb:X()}],pl:[{pl:X()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":X()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":X()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[f,"screen",...re()]}],"min-w":[{"min-w":[f,"screen","none",...re()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[p]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",n,fp,Du]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,en,_x]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mx,Zs]}],"font-family":[{font:[ZO,Zs,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,en,Zs]}],"line-clamp":[{"line-clamp":[or,"none",en,_x]}],leading:[{leading:[c,...X()]}],"list-image":[{"list-image":["none",en,Zs]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",en,Zs]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:se()}],"text-color":[{text:se()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[or,"from-font","auto",en,Du]}],"text-decoration-color":[{decoration:se()}],"underline-offset":[{"underline-offset":[or,"auto",en,Zs]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",en,Zs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",en,Zs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:je()}],"bg-repeat":[{bg:De()}],"bg-size":[{bg:ge()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Md,en,Zs],radial:["",en,Zs],conic:[Md,en,Zs]},tU,JO]}],"bg-color":[{bg:se()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:se()}],"gradient-via":[{via:se()}],"gradient-to":[{to:se()}],rounded:[{rounded:fe()}],"rounded-s":[{"rounded-s":fe()}],"rounded-e":[{"rounded-e":fe()}],"rounded-t":[{"rounded-t":fe()}],"rounded-r":[{"rounded-r":fe()}],"rounded-b":[{"rounded-b":fe()}],"rounded-l":[{"rounded-l":fe()}],"rounded-ss":[{"rounded-ss":fe()}],"rounded-se":[{"rounded-se":fe()}],"rounded-ee":[{"rounded-ee":fe()}],"rounded-es":[{"rounded-es":fe()}],"rounded-tl":[{"rounded-tl":fe()}],"rounded-tr":[{"rounded-tr":fe()}],"rounded-br":[{"rounded-br":fe()}],"rounded-bl":[{"rounded-bl":fe()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:se()}],"border-color-x":[{"border-x":se()}],"border-color-y":[{"border-y":se()}],"border-color-s":[{"border-s":se()}],"border-color-e":[{"border-e":se()}],"border-color-t":[{"border-t":se()}],"border-color-r":[{"border-r":se()}],"border-color-b":[{"border-b":se()}],"border-color-l":[{"border-l":se()}],"divide-color":[{divide:se()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[or,en,Zs]}],"outline-w":[{outline:["",or,fp,Du]}],"outline-color":[{outline:se()}],shadow:[{shadow:["","none",l,ag,rg]}],"shadow-color":[{shadow:se()}],"inset-shadow":[{"inset-shadow":["none",g,ag,rg]}],"inset-shadow-color":[{"inset-shadow":se()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:se()}],"ring-offset-w":[{"ring-offset":[or,Du]}],"ring-offset-color":[{"ring-offset":se()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":se()}],"text-shadow":[{"text-shadow":["none",v,ag,rg]}],"text-shadow-color":[{"text-shadow":se()}],opacity:[{opacity:[or,en,Zs]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[or]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":se()}],"mask-image-linear-to-color":[{"mask-linear-to":se()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":se()}],"mask-image-t-to-color":[{"mask-t-to":se()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":se()}],"mask-image-r-to-color":[{"mask-r-to":se()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":se()}],"mask-image-b-to-color":[{"mask-b-to":se()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":se()}],"mask-image-l-to-color":[{"mask-l-to":se()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":se()}],"mask-image-x-to-color":[{"mask-x-to":se()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":se()}],"mask-image-y-to-color":[{"mask-y-to":se()}],"mask-image-radial":[{"mask-radial":[en,Zs]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":se()}],"mask-image-radial-to-color":[{"mask-radial-to":se()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":K()}],"mask-image-conic-pos":[{"mask-conic":[or]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":se()}],"mask-image-conic-to-color":[{"mask-conic-to":se()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:je()}],"mask-repeat":[{mask:De()}],"mask-size":[{mask:ge()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",en,Zs]}],filter:[{filter:["","none",en,Zs]}],blur:[{blur:ye()}],brightness:[{brightness:[or,en,Zs]}],contrast:[{contrast:[or,en,Zs]}],"drop-shadow":[{"drop-shadow":["","none",m,ag,rg]}],"drop-shadow-color":[{"drop-shadow":se()}],grayscale:[{grayscale:["",or,en,Zs]}],"hue-rotate":[{"hue-rotate":[or,en,Zs]}],invert:[{invert:["",or,en,Zs]}],saturate:[{saturate:[or,en,Zs]}],sepia:[{sepia:["",or,en,Zs]}],"backdrop-filter":[{"backdrop-filter":["","none",en,Zs]}],"backdrop-blur":[{"backdrop-blur":ye()}],"backdrop-brightness":[{"backdrop-brightness":[or,en,Zs]}],"backdrop-contrast":[{"backdrop-contrast":[or,en,Zs]}],"backdrop-grayscale":[{"backdrop-grayscale":["",or,en,Zs]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[or,en,Zs]}],"backdrop-invert":[{"backdrop-invert":["",or,en,Zs]}],"backdrop-opacity":[{"backdrop-opacity":[or,en,Zs]}],"backdrop-saturate":[{"backdrop-saturate":[or,en,Zs]}],"backdrop-sepia":[{"backdrop-sepia":["",or,en,Zs]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":X()}],"border-spacing-x":[{"border-spacing-x":X()}],"border-spacing-y":[{"border-spacing-y":X()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",en,Zs]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[or,"initial",en,Zs]}],ease:[{ease:["linear","initial",F,en,Zs]}],delay:[{delay:[or,en,Zs]}],animate:[{animate:["none",M,en,Zs]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,en,Zs]}],"perspective-origin":[{"perspective-origin":G()}],rotate:[{rotate:we()}],"rotate-x":[{"rotate-x":we()}],"rotate-y":[{"rotate-y":we()}],"rotate-z":[{"rotate-z":we()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:qe()}],"skew-x":[{"skew-x":qe()}],"skew-y":[{"skew-y":qe()}],transform:[{transform:[en,Zs,"","none","gpu","cpu"]}],"transform-origin":[{origin:G()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ve()}],"translate-x":[{"translate-x":ve()}],"translate-y":[{"translate-y":ve()}],"translate-z":[{"translate-z":ve()}],"translate-none":["translate-none"],accent:[{accent:se()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:se()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",en,Zs]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",en,Zs]}],fill:[{fill:["none",...se()]}],"stroke-w":[{stroke:[or,fp,Du,_x]}],stroke:[{stroke:["none",...se()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},aU=_O(rU);function Xs(...t){return aU(pN(t))}const iU=v3,QN=C.forwardRef(({className:t,...s},n)=>e.jsx(lN,{ref:n,className:Xs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));QN.displayName=lN.displayName;const oU=xy("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),MN=C.forwardRef(({className:t,variant:s,...n},r)=>e.jsx(cN,{ref:r,className:Xs(oU({variant:s}),t),...n}));MN.displayName=cN.displayName;const lU=C.forwardRef(({className:t,...s},n)=>e.jsx(uN,{ref:n,className:Xs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));lU.displayName=uN.displayName;const _N=C.forwardRef(({className:t,...s},n)=>e.jsx(hN,{ref:n,className:Xs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(lb,{className:"h-4 w-4"})}));_N.displayName=hN.displayName;const PN=C.forwardRef(({className:t,...s},n)=>e.jsx(AN,{ref:n,className:Xs("text-sm font-semibold",t),...s}));PN.displayName=AN.displayName;const kN=C.forwardRef(({className:t,...s},n)=>e.jsx(dN,{ref:n,className:Xs("text-sm opacity-90",t),...s}));kN.displayName=dN.displayName;function cU(){const{toasts:t}=Ai();return e.jsxs(iU,{children:[t.map(function({id:s,title:n,description:r,action:o,...c}){return e.jsxs(MN,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(PN,{children:n}),r&&e.jsx(kN,{children:r})]}),o,e.jsx(_N,{})]},s)}),e.jsx(QN,{})]})}function Dh(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function Px(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function AU(t){const s=dU(t),n=C.forwardRef((r,o)=>{const{children:c,...p}=r,f=C.Children.toArray(c),A=f.find(hU);if(A){const h=A.props.children,l=f.map(g=>g===A?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return e.jsx(s,{...p,ref:o,children:C.isValidElement(h)?C.cloneElement(h,void 0,l):null})}return e.jsx(s,{...p,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function dU(t){const s=C.forwardRef((n,r)=>{const{children:o,...c}=n;if(C.isValidElement(o)){const p=pU(o),f=fU(c,o.props);return o.type!==C.Fragment&&(f.ref=r?ah(r,p):p),C.cloneElement(o,f)}return C.Children.count(o)>1?C.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var uU=Symbol("radix.slottable");function hU(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===uU}function fU(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...f)=>{const A=c(...f);return o(...f),A}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function pU(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var mU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sr=mU.reduce((t,s)=>{const n=AU(`Primitive.${s}`),r=C.forwardRef((o,c)=>{const{asChild:p,...f}=o,A=p?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(A,{...f,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function gU(t,s){t&&rh.flushSync(()=>t.dispatchEvent(s))}var yU="DismissableLayer",sv="dismissableLayer.update",xU="dismissableLayer.pointerDownOutside",vU="dismissableLayer.focusOutside",iw,HN=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),by=C.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:p,onDismiss:f,...A}=t,h=C.useContext(HN),[l,g]=C.useState(null),v=l?.ownerDocument??globalThis?.document,[,m]=C.useState({}),N=Fr(s,V=>g(V)),w=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),F=w.indexOf(E),M=l?w.indexOf(l):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,K=M>=F,G=wU(V=>{const X=V.target,J=[...h.branches].some(he=>he.contains(X));!K||J||(o?.(V),p?.(V),V.defaultPrevented||f?.())},v),ee=SU(V=>{const X=V.target;[...h.branches].some(he=>he.contains(X))||(c?.(V),p?.(V),V.defaultPrevented||f?.())},v);return HB(V=>{M===h.layers.size-1&&(r?.(V),!V.defaultPrevented&&f&&(V.preventDefault(),f()))},v),C.useEffect(()=>{if(l)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(iw=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(l)),h.layers.add(l),ow(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=iw)}},[l,v,n,h]),C.useEffect(()=>()=>{l&&(h.layers.delete(l),h.layersWithOutsidePointerEventsDisabled.delete(l),ow())},[l,h]),C.useEffect(()=>{const V=()=>m({});return document.addEventListener(sv,V),()=>document.removeEventListener(sv,V)},[]),e.jsx(sr.div,{...A,ref:N,style:{pointerEvents:k?K?"auto":"none":void 0,...t.style},onFocusCapture:Px(t.onFocusCapture,ee.onFocusCapture),onBlurCapture:Px(t.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:Px(t.onPointerDownCapture,G.onPointerDownCapture)})});by.displayName=yU;var bU="DismissableLayerBranch",jU=C.forwardRef((t,s)=>{const n=C.useContext(HN),r=C.useRef(null),o=Fr(s,r);return C.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(sr.div,{...t,ref:o})});jU.displayName=bU;function wU(t,s=globalThis?.document){const n=Po(t),r=C.useRef(!1),o=C.useRef(()=>{});return C.useEffect(()=>{const c=f=>{if(f.target&&!r.current){let A=function(){KN(xU,n,h,{discrete:!0})};const h={originalEvent:f};f.pointerType==="touch"?(s.removeEventListener("click",o.current),o.current=A,s.addEventListener("click",o.current,{once:!0})):A()}else s.removeEventListener("click",o.current);r.current=!1},p=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(p),s.removeEventListener("pointerdown",c),s.removeEventListener("click",o.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function SU(t,s=globalThis?.document){const n=Po(t),r=C.useRef(!1);return C.useEffect(()=>{const o=c=>{c.target&&!r.current&&KN(vU,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",o),()=>s.removeEventListener("focusin",o)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ow(){const t=new CustomEvent(sv);document.dispatchEvent(t)}function KN(t,s,n,{discrete:r}){const o=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&o.addEventListener(t,s,{once:!0}),r?gU(o,c):o.dispatchEvent(c)}var BU=td[" useId ".trim().toString()]||(()=>{}),NU=0;function $d(t){const[s,n]=C.useState(BU());return Pa(()=>{n(r=>r??String(NU++))},[t]),s?`radix-${s}`:""}const CU=["top","right","bottom","left"],Yd=Math.min,Ul=Math.max,Yg=Math.round,ig=Math.floor,mA=t=>({x:t,y:t}),EU={left:"right",right:"left",bottom:"top",top:"bottom"},TU={start:"end",end:"start"};function nv(t,s,n){return Ul(t,Yd(s,n))}function YA(t,s){return typeof t=="function"?t(s):t}function XA(t){return t.split("-")[0]}function ff(t){return t.split("-")[1]}function Ab(t){return t==="x"?"y":"x"}function db(t){return t==="y"?"height":"width"}const FU=new Set(["top","bottom"]);function fA(t){return FU.has(XA(t))?"y":"x"}function ub(t){return Ab(fA(t))}function IU(t,s,n){n===void 0&&(n=!1);const r=ff(t),o=ub(t),c=db(o);let p=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[c]>s.floating[c]&&(p=Xg(p)),[p,Xg(p)]}function RU(t){const s=Xg(t);return[rv(t),s,rv(s)]}function rv(t){return t.replace(/start|end/g,s=>TU[s])}const lw=["left","right"],cw=["right","left"],OU=["top","bottom"],UU=["bottom","top"];function LU(t,s,n){switch(t){case"top":case"bottom":return n?s?cw:lw:s?lw:cw;case"left":case"right":return s?OU:UU;default:return[]}}function DU(t,s,n,r){const o=ff(t);let c=LU(XA(t),n==="start",r);return o&&(c=c.map(p=>p+"-"+o),s&&(c=c.concat(c.map(rv)))),c}function Xg(t){return t.replace(/left|right|bottom|top/g,s=>EU[s])}function QU(t){return{top:0,right:0,bottom:0,left:0,...t}}function zN(t){return typeof t!="number"?QU(t):{top:t,right:t,bottom:t,left:t}}function Jg(t){const{x:s,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:s,right:s+r,bottom:n+o,x:s,y:n}}function Aw(t,s,n){let{reference:r,floating:o}=t;const c=fA(s),p=ub(s),f=db(p),A=XA(s),h=c==="y",l=r.x+r.width/2-o.width/2,g=r.y+r.height/2-o.height/2,v=r[f]/2-o[f]/2;let m;switch(A){case"top":m={x:l,y:r.y-o.height};break;case"bottom":m={x:l,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:g};break;case"left":m={x:r.x-o.width,y:g};break;default:m={x:r.x,y:r.y}}switch(ff(s)){case"start":m[p]-=v*(n&&h?-1:1);break;case"end":m[p]+=v*(n&&h?-1:1);break}return m}const MU=async(t,s,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:c=[],platform:p}=n,f=c.filter(Boolean),A=await(p.isRTL==null?void 0:p.isRTL(s));let h=await p.getElementRects({reference:t,floating:s,strategy:o}),{x:l,y:g}=Aw(h,r,A),v=r,m={},N=0;for(let w=0;w<f.length;w++){const{name:E,fn:F}=f[w],{x:M,y:k,data:K,reset:G}=await F({x:l,y:g,initialPlacement:r,placement:v,strategy:o,middlewareData:m,rects:h,platform:p,elements:{reference:t,floating:s}});l=M??l,g=k??g,m={...m,[E]:{...m[E],...K}},G&&N<=50&&(N++,typeof G=="object"&&(G.placement&&(v=G.placement),G.rects&&(h=G.rects===!0?await p.getElementRects({reference:t,floating:s,strategy:o}):G.rects),{x:l,y:g}=Aw(h,v,A)),w=-1)}return{x:l,y:g,placement:v,strategy:o,middlewareData:m}};async function Hp(t,s){var n;s===void 0&&(s={});const{x:r,y:o,platform:c,rects:p,elements:f,strategy:A}=t,{boundary:h="clippingAncestors",rootBoundary:l="viewport",elementContext:g="floating",altBoundary:v=!1,padding:m=0}=YA(s,t),N=zN(m),E=f[v?g==="floating"?"reference":"floating":g],F=Jg(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(E)))==null||n?E:E.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:h,rootBoundary:l,strategy:A})),M=g==="floating"?{x:r,y:o,width:p.floating.width,height:p.floating.height}:p.reference,k=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),K=await(c.isElement==null?void 0:c.isElement(k))?await(c.getScale==null?void 0:c.getScale(k))||{x:1,y:1}:{x:1,y:1},G=Jg(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:M,offsetParent:k,strategy:A}):M);return{top:(F.top-G.top+N.top)/K.y,bottom:(G.bottom-F.bottom+N.bottom)/K.y,left:(F.left-G.left+N.left)/K.x,right:(G.right-F.right+N.right)/K.x}}const _U=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:o,rects:c,platform:p,elements:f,middlewareData:A}=s,{element:h,padding:l=0}=YA(t,s)||{};if(h==null)return{};const g=zN(l),v={x:n,y:r},m=ub(o),N=db(m),w=await p.getDimensions(h),E=m==="y",F=E?"top":"left",M=E?"bottom":"right",k=E?"clientHeight":"clientWidth",K=c.reference[N]+c.reference[m]-v[m]-c.floating[N],G=v[m]-c.reference[m],ee=await(p.getOffsetParent==null?void 0:p.getOffsetParent(h));let V=ee?ee[k]:0;(!V||!await(p.isElement==null?void 0:p.isElement(ee)))&&(V=f.floating[k]||c.floating[N]);const X=K/2-G/2,J=V/2-w[N]/2-1,he=Yd(g[F],J),q=Yd(g[M],J),ie=he,Ae=V-w[N]-q,ce=V/2-w[N]/2+X,oe=nv(ie,ce,Ae),ne=!A.arrow&&ff(o)!=null&&ce!==oe&&c.reference[N]/2-(ce<ie?he:q)-w[N]/2<0,re=ne?ce<ie?ce-ie:ce-Ae:0;return{[m]:v[m]+re,data:{[m]:oe,centerOffset:ce-oe-re,...ne&&{alignmentOffset:re}},reset:ne}}}),PU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:o,middlewareData:c,rects:p,initialPlacement:f,platform:A,elements:h}=s,{mainAxis:l=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:w=!0,...E}=YA(t,s);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const F=XA(o),M=fA(f),k=XA(f)===f,K=await(A.isRTL==null?void 0:A.isRTL(h.floating)),G=v||(k||!w?[Xg(f)]:RU(f)),ee=N!=="none";!v&&ee&&G.push(...DU(f,w,N,K));const V=[f,...G],X=await Hp(s,E),J=[];let he=((r=c.flip)==null?void 0:r.overflows)||[];if(l&&J.push(X[F]),g){const ce=IU(o,p,K);J.push(X[ce[0]],X[ce[1]])}if(he=[...he,{placement:o,overflows:J}],!J.every(ce=>ce<=0)){var q,ie;const ce=(((q=c.flip)==null?void 0:q.index)||0)+1,oe=V[ce];if(oe&&(!(g==="alignment"?M!==fA(oe):!1)||he.every(se=>fA(se.placement)===M?se.overflows[0]>0:!0)))return{data:{index:ce,overflows:he},reset:{placement:oe}};let ne=(ie=he.filter(re=>re.overflows[0]<=0).sort((re,se)=>re.overflows[1]-se.overflows[1])[0])==null?void 0:ie.placement;if(!ne)switch(m){case"bestFit":{var Ae;const re=(Ae=he.filter(se=>{if(ee){const je=fA(se.placement);return je===M||je==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(je=>je>0).reduce((je,De)=>je+De,0)]).sort((se,je)=>se[1]-je[1])[0])==null?void 0:Ae[0];re&&(ne=re);break}case"initialPlacement":ne=f;break}if(o!==ne)return{reset:{placement:ne}}}return{}}}};function dw(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function uw(t){return CU.some(s=>t[s]>=0)}const kU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...o}=YA(t,s);switch(r){case"referenceHidden":{const c=await Hp(s,{...o,elementContext:"reference"}),p=dw(c,n.reference);return{data:{referenceHiddenOffsets:p,referenceHidden:uw(p)}}}case"escaped":{const c=await Hp(s,{...o,altBoundary:!0}),p=dw(c,n.floating);return{data:{escapedOffsets:p,escaped:uw(p)}}}default:return{}}}}},GN=new Set(["left","top"]);async function HU(t,s){const{placement:n,platform:r,elements:o}=t,c=await(r.isRTL==null?void 0:r.isRTL(o.floating)),p=XA(n),f=ff(n),A=fA(n)==="y",h=GN.has(p)?-1:1,l=c&&A?-1:1,g=YA(s,t);let{mainAxis:v,crossAxis:m,alignmentAxis:N}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return f&&typeof N=="number"&&(m=f==="end"?N*-1:N),A?{x:m*l,y:v*h}:{x:v*h,y:m*l}}const KU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:o,y:c,placement:p,middlewareData:f}=s,A=await HU(s,t);return p===((n=f.offset)==null?void 0:n.placement)&&(r=f.arrow)!=null&&r.alignmentOffset?{}:{x:o+A.x,y:c+A.y,data:{...A,placement:p}}}}},zU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:o}=s,{mainAxis:c=!0,crossAxis:p=!1,limiter:f={fn:E=>{let{x:F,y:M}=E;return{x:F,y:M}}},...A}=YA(t,s),h={x:n,y:r},l=await Hp(s,A),g=fA(XA(o)),v=Ab(g);let m=h[v],N=h[g];if(c){const E=v==="y"?"top":"left",F=v==="y"?"bottom":"right",M=m+l[E],k=m-l[F];m=nv(M,m,k)}if(p){const E=g==="y"?"top":"left",F=g==="y"?"bottom":"right",M=N+l[E],k=N-l[F];N=nv(M,N,k)}const w=f.fn({...s,[v]:m,[g]:N});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[v]:c,[g]:p}}}}}},GU=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:o,rects:c,middlewareData:p}=s,{offset:f=0,mainAxis:A=!0,crossAxis:h=!0}=YA(t,s),l={x:n,y:r},g=fA(o),v=Ab(g);let m=l[v],N=l[g];const w=YA(f,s),E=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(A){const k=v==="y"?"height":"width",K=c.reference[v]-c.floating[k]+E.mainAxis,G=c.reference[v]+c.reference[k]-E.mainAxis;m<K?m=K:m>G&&(m=G)}if(h){var F,M;const k=v==="y"?"width":"height",K=GN.has(XA(o)),G=c.reference[g]-c.floating[k]+(K&&((F=p.offset)==null?void 0:F[g])||0)+(K?0:E.crossAxis),ee=c.reference[g]+c.reference[k]+(K?0:((M=p.offset)==null?void 0:M[g])||0)-(K?E.crossAxis:0);N<G?N=G:N>ee&&(N=ee)}return{[v]:m,[g]:N}}}},VU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:o,rects:c,platform:p,elements:f}=s,{apply:A=()=>{},...h}=YA(t,s),l=await Hp(s,h),g=XA(o),v=ff(o),m=fA(o)==="y",{width:N,height:w}=c.floating;let E,F;g==="top"||g==="bottom"?(E=g,F=v===(await(p.isRTL==null?void 0:p.isRTL(f.floating))?"start":"end")?"left":"right"):(F=g,E=v==="end"?"top":"bottom");const M=w-l.top-l.bottom,k=N-l.left-l.right,K=Yd(w-l[E],M),G=Yd(N-l[F],k),ee=!s.middlewareData.shift;let V=K,X=G;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(X=k),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(V=M),ee&&!v){const he=Ul(l.left,0),q=Ul(l.right,0),ie=Ul(l.top,0),Ae=Ul(l.bottom,0);m?X=N-2*(he!==0||q!==0?he+q:Ul(l.left,l.right)):V=w-2*(ie!==0||Ae!==0?ie+Ae:Ul(l.top,l.bottom))}await A({...s,availableWidth:X,availableHeight:V});const J=await p.getDimensions(f.floating);return N!==J.width||w!==J.height?{reset:{rects:!0}}:{}}}};function jy(){return typeof window<"u"}function pf(t){return VN(t)?(t.nodeName||"").toLowerCase():"#document"}function Ql(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function jA(t){var s;return(s=(VN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function VN(t){return jy()?t instanceof Node||t instanceof Ql(t).Node:!1}function Lc(t){return jy()?t instanceof Element||t instanceof Ql(t).Element:!1}function xA(t){return jy()?t instanceof HTMLElement||t instanceof Ql(t).HTMLElement:!1}function hw(t){return!jy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ql(t).ShadowRoot}const $U=new Set(["inline","contents"]);function Zp(t){const{overflow:s,overflowX:n,overflowY:r,display:o}=Dc(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!$U.has(o)}const qU=new Set(["table","td","th"]);function WU(t){return qU.has(pf(t))}const YU=[":popover-open",":modal"];function wy(t){return YU.some(s=>{try{return t.matches(s)}catch{return!1}})}const XU=["transform","translate","scale","rotate","perspective"],JU=["transform","translate","scale","rotate","perspective","filter"],ZU=["paint","layout","strict","content"];function hb(t){const s=fb(),n=Lc(t)?Dc(t):t;return XU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||JU.some(r=>(n.willChange||"").includes(r))||ZU.some(r=>(n.contain||"").includes(r))}function eL(t){let s=Xd(t);for(;xA(s)&&!of(s);){if(hb(s))return s;if(wy(s))return null;s=Xd(s)}return null}function fb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tL=new Set(["html","body","#document"]);function of(t){return tL.has(pf(t))}function Dc(t){return Ql(t).getComputedStyle(t)}function Sy(t){return Lc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Xd(t){if(pf(t)==="html")return t;const s=t.assignedSlot||t.parentNode||hw(t)&&t.host||jA(t);return hw(s)?s.host:s}function $N(t){const s=Xd(t);return of(s)?t.ownerDocument?t.ownerDocument.body:t.body:xA(s)&&Zp(s)?s:$N(s)}function Kp(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const o=$N(t),c=o===((r=t.ownerDocument)==null?void 0:r.body),p=Ql(o);if(c){const f=av(p);return s.concat(p,p.visualViewport||[],Zp(o)?o:[],f&&n?Kp(f):[])}return s.concat(o,Kp(o,[],n))}function av(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function qN(t){const s=Dc(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const o=xA(t),c=o?t.offsetWidth:n,p=o?t.offsetHeight:r,f=Yg(n)!==c||Yg(r)!==p;return f&&(n=c,r=p),{width:n,height:r,$:f}}function pb(t){return Lc(t)?t:t.contextElement}function Zh(t){const s=pb(t);if(!xA(s))return mA(1);const n=s.getBoundingClientRect(),{width:r,height:o,$:c}=qN(s);let p=(c?Yg(n.width):n.width)/r,f=(c?Yg(n.height):n.height)/o;return(!p||!Number.isFinite(p))&&(p=1),(!f||!Number.isFinite(f))&&(f=1),{x:p,y:f}}const sL=mA(0);function WN(t){const s=Ql(t);return!fb()||!s.visualViewport?sL:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function nL(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Ql(t)?!1:s}function Ju(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),c=pb(t);let p=mA(1);s&&(r?Lc(r)&&(p=Zh(r)):p=Zh(t));const f=nL(c,n,r)?WN(c):mA(0);let A=(o.left+f.x)/p.x,h=(o.top+f.y)/p.y,l=o.width/p.x,g=o.height/p.y;if(c){const v=Ql(c),m=r&&Lc(r)?Ql(r):r;let N=v,w=av(N);for(;w&&r&&m!==N;){const E=Zh(w),F=w.getBoundingClientRect(),M=Dc(w),k=F.left+(w.clientLeft+parseFloat(M.paddingLeft))*E.x,K=F.top+(w.clientTop+parseFloat(M.paddingTop))*E.y;A*=E.x,h*=E.y,l*=E.x,g*=E.y,A+=k,h+=K,N=Ql(w),w=av(N)}}return Jg({width:l,height:g,x:A,y:h})}function By(t,s){const n=Sy(t).scrollLeft;return s?s.left+n:Ju(jA(t)).left+n}function YN(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-By(t,n),o=n.top+s.scrollTop;return{x:r,y:o}}function rL(t){let{elements:s,rect:n,offsetParent:r,strategy:o}=t;const c=o==="fixed",p=jA(r),f=s?wy(s.floating):!1;if(r===p||f&&c)return n;let A={scrollLeft:0,scrollTop:0},h=mA(1);const l=mA(0),g=xA(r);if((g||!g&&!c)&&((pf(r)!=="body"||Zp(p))&&(A=Sy(r)),xA(r))){const m=Ju(r);h=Zh(r),l.x=m.x+r.clientLeft,l.y=m.y+r.clientTop}const v=p&&!g&&!c?YN(p,A):mA(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-A.scrollLeft*h.x+l.x+v.x,y:n.y*h.y-A.scrollTop*h.y+l.y+v.y}}function aL(t){return Array.from(t.getClientRects())}function iL(t){const s=jA(t),n=Sy(t),r=t.ownerDocument.body,o=Ul(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),c=Ul(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let p=-n.scrollLeft+By(t);const f=-n.scrollTop;return Dc(r).direction==="rtl"&&(p+=Ul(s.clientWidth,r.clientWidth)-o),{width:o,height:c,x:p,y:f}}const fw=25;function oL(t,s){const n=Ql(t),r=jA(t),o=n.visualViewport;let c=r.clientWidth,p=r.clientHeight,f=0,A=0;if(o){c=o.width,p=o.height;const l=fb();(!l||l&&s==="fixed")&&(f=o.offsetLeft,A=o.offsetTop)}const h=By(r);if(h<=0){const l=r.ownerDocument,g=l.body,v=getComputedStyle(g),m=l.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,N=Math.abs(r.clientWidth-g.clientWidth-m);N<=fw&&(c-=N)}else h<=fw&&(c+=h);return{width:c,height:p,x:f,y:A}}const lL=new Set(["absolute","fixed"]);function cL(t,s){const n=Ju(t,!0,s==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,c=xA(t)?Zh(t):mA(1),p=t.clientWidth*c.x,f=t.clientHeight*c.y,A=o*c.x,h=r*c.y;return{width:p,height:f,x:A,y:h}}function pw(t,s,n){let r;if(s==="viewport")r=oL(t,n);else if(s==="document")r=iL(jA(t));else if(Lc(s))r=cL(s,n);else{const o=WN(t);r={x:s.x-o.x,y:s.y-o.y,width:s.width,height:s.height}}return Jg(r)}function XN(t,s){const n=Xd(t);return n===s||!Lc(n)||of(n)?!1:Dc(n).position==="fixed"||XN(n,s)}function AL(t,s){const n=s.get(t);if(n)return n;let r=Kp(t,[],!1).filter(f=>Lc(f)&&pf(f)!=="body"),o=null;const c=Dc(t).position==="fixed";let p=c?Xd(t):t;for(;Lc(p)&&!of(p);){const f=Dc(p),A=hb(p);!A&&f.position==="fixed"&&(o=null),(c?!A&&!o:!A&&f.position==="static"&&!!o&&lL.has(o.position)||Zp(p)&&!A&&XN(t,p))?r=r.filter(l=>l!==p):o=f,p=Xd(p)}return s.set(t,r),r}function dL(t){let{element:s,boundary:n,rootBoundary:r,strategy:o}=t;const p=[...n==="clippingAncestors"?wy(s)?[]:AL(s,this._c):[].concat(n),r],f=p[0],A=p.reduce((h,l)=>{const g=pw(s,l,o);return h.top=Ul(g.top,h.top),h.right=Yd(g.right,h.right),h.bottom=Yd(g.bottom,h.bottom),h.left=Ul(g.left,h.left),h},pw(s,f,o));return{width:A.right-A.left,height:A.bottom-A.top,x:A.left,y:A.top}}function uL(t){const{width:s,height:n}=qN(t);return{width:s,height:n}}function hL(t,s,n){const r=xA(s),o=jA(s),c=n==="fixed",p=Ju(t,!0,c,s);let f={scrollLeft:0,scrollTop:0};const A=mA(0);function h(){A.x=By(o)}if(r||!r&&!c)if((pf(s)!=="body"||Zp(o))&&(f=Sy(s)),r){const m=Ju(s,!0,c,s);A.x=m.x+s.clientLeft,A.y=m.y+s.clientTop}else o&&h();c&&!r&&o&&h();const l=o&&!r&&!c?YN(o,f):mA(0),g=p.left+f.scrollLeft-A.x-l.x,v=p.top+f.scrollTop-A.y-l.y;return{x:g,y:v,width:p.width,height:p.height}}function kx(t){return Dc(t).position==="static"}function mw(t,s){if(!xA(t)||Dc(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return jA(t)===n&&(n=n.ownerDocument.body),n}function JN(t,s){const n=Ql(t);if(wy(t))return n;if(!xA(t)){let o=Xd(t);for(;o&&!of(o);){if(Lc(o)&&!kx(o))return o;o=Xd(o)}return n}let r=mw(t,s);for(;r&&WU(r)&&kx(r);)r=mw(r,s);return r&&of(r)&&kx(r)&&!hb(r)?n:r||eL(t)||n}const fL=async function(t){const s=this.getOffsetParent||JN,n=this.getDimensions,r=await n(t.floating);return{reference:hL(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pL(t){return Dc(t).direction==="rtl"}const mL={convertOffsetParentRelativeRectToViewportRelativeRect:rL,getDocumentElement:jA,getClippingRect:dL,getOffsetParent:JN,getElementRects:fL,getClientRects:aL,getDimensions:uL,getScale:Zh,isElement:Lc,isRTL:pL};function ZN(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function gL(t,s){let n=null,r;const o=jA(t);function c(){var f;clearTimeout(r),(f=n)==null||f.disconnect(),n=null}function p(f,A){f===void 0&&(f=!1),A===void 0&&(A=1),c();const h=t.getBoundingClientRect(),{left:l,top:g,width:v,height:m}=h;if(f||s(),!v||!m)return;const N=ig(g),w=ig(o.clientWidth-(l+v)),E=ig(o.clientHeight-(g+m)),F=ig(l),k={rootMargin:-N+"px "+-w+"px "+-E+"px "+-F+"px",threshold:Ul(0,Yd(1,A))||1};let K=!0;function G(ee){const V=ee[0].intersectionRatio;if(V!==A){if(!K)return p();V?p(!1,V):r=setTimeout(()=>{p(!1,1e-7)},1e3)}V===1&&!ZN(h,t.getBoundingClientRect())&&p(),K=!1}try{n=new IntersectionObserver(G,{...k,root:o.ownerDocument})}catch{n=new IntersectionObserver(G,k)}n.observe(t)}return p(!0),c}function yL(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:A=!1}=r,h=pb(t),l=o||c?[...h?Kp(h):[],...Kp(s)]:[];l.forEach(F=>{o&&F.addEventListener("scroll",n,{passive:!0}),c&&F.addEventListener("resize",n)});const g=h&&f?gL(h,n):null;let v=-1,m=null;p&&(m=new ResizeObserver(F=>{let[M]=F;M&&M.target===h&&m&&(m.unobserve(s),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var k;(k=m)==null||k.observe(s)})),n()}),h&&!A&&m.observe(h),m.observe(s));let N,w=A?Ju(t):null;A&&E();function E(){const F=Ju(t);w&&!ZN(w,F)&&n(),w=F,N=requestAnimationFrame(E)}return n(),()=>{var F;l.forEach(M=>{o&&M.removeEventListener("scroll",n),c&&M.removeEventListener("resize",n)}),g?.(),(F=m)==null||F.disconnect(),m=null,A&&cancelAnimationFrame(N)}}const xL=KU,vL=zU,bL=PU,jL=VU,wL=kU,gw=_U,SL=GU,BL=(t,s,n)=>{const r=new Map,o={platform:mL,...n},c={...o.platform,_c:r};return MU(t,s,{...o,platform:c})};var NL=typeof document<"u",CL=function(){},Fg=NL?C.useLayoutEffect:CL;function Zg(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,o;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!Zg(t[r],s[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,o[r]))return!1;for(r=n;r--!==0;){const c=o[r];if(!(c==="_owner"&&t.$$typeof)&&!Zg(t[c],s[c]))return!1}return!0}return t!==t&&s!==s}function eC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function yw(t,s){const n=eC(t);return Math.round(s*n)/n}function Hx(t){const s=C.useRef(t);return Fg(()=>{s.current=t}),s}function EL(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:c,floating:p}={},transform:f=!0,whileElementsMounted:A,open:h}=t,[l,g]=C.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[v,m]=C.useState(r);Zg(v,r)||m(r);const[N,w]=C.useState(null),[E,F]=C.useState(null),M=C.useCallback(se=>{se!==ee.current&&(ee.current=se,w(se))},[]),k=C.useCallback(se=>{se!==V.current&&(V.current=se,F(se))},[]),K=c||N,G=p||E,ee=C.useRef(null),V=C.useRef(null),X=C.useRef(l),J=A!=null,he=Hx(A),q=Hx(o),ie=Hx(h),Ae=C.useCallback(()=>{if(!ee.current||!V.current)return;const se={placement:s,strategy:n,middleware:v};q.current&&(se.platform=q.current),BL(ee.current,V.current,se).then(je=>{const De={...je,isPositioned:ie.current!==!1};ce.current&&!Zg(X.current,De)&&(X.current=De,rh.flushSync(()=>{g(De)}))})},[v,s,n,q,ie]);Fg(()=>{h===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,g(se=>({...se,isPositioned:!1})))},[h]);const ce=C.useRef(!1);Fg(()=>(ce.current=!0,()=>{ce.current=!1}),[]),Fg(()=>{if(K&&(ee.current=K),G&&(V.current=G),K&&G){if(he.current)return he.current(K,G,Ae);Ae()}},[K,G,Ae,he,J]);const oe=C.useMemo(()=>({reference:ee,floating:V,setReference:M,setFloating:k}),[M,k]),ne=C.useMemo(()=>({reference:K,floating:G}),[K,G]),re=C.useMemo(()=>{const se={position:n,left:0,top:0};if(!ne.floating)return se;const je=yw(ne.floating,l.x),De=yw(ne.floating,l.y);return f?{...se,transform:"translate("+je+"px, "+De+"px)",...eC(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:je,top:De}},[n,f,ne.floating,l.x,l.y]);return C.useMemo(()=>({...l,update:Ae,refs:oe,elements:ne,floatingStyles:re}),[l,Ae,oe,ne,re])}const TL=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?gw({element:r.current,padding:o}).fn(n):{}:r?gw({element:r,padding:o}).fn(n):{}}}},FL=(t,s)=>({...xL(t),options:[t,s]}),IL=(t,s)=>({...vL(t),options:[t,s]}),RL=(t,s)=>({...SL(t),options:[t,s]}),OL=(t,s)=>({...bL(t),options:[t,s]}),UL=(t,s)=>({...jL(t),options:[t,s]}),LL=(t,s)=>({...wL(t),options:[t,s]}),DL=(t,s)=>({...TL(t),options:[t,s]});var QL="Arrow",tC=C.forwardRef((t,s)=>{const{children:n,width:r=10,height:o=5,...c}=t;return e.jsx(sr.svg,{...c,ref:s,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});tC.displayName=QL;var ML=tC;function mb(t){const[s,n]=C.useState(void 0);return Pa(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const c=o[0];let p,f;if("borderBoxSize"in c){const A=c.borderBoxSize,h=Array.isArray(A)?A[0]:A;p=h.inlineSize,f=h.blockSize}else p=t.offsetWidth,f=t.offsetHeight;n({width:p,height:f})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var gb="Popper",[sC,Ny]=uc(gb),[_L,nC]=sC(gb),rC=t=>{const{__scopePopper:s,children:n}=t,[r,o]=C.useState(null);return e.jsx(_L,{scope:s,anchor:r,onAnchorChange:o,children:n})};rC.displayName=gb;var aC="PopperAnchor",iC=C.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...o}=t,c=nC(aC,n),p=C.useRef(null),f=Fr(s,p),A=C.useRef(null);return C.useEffect(()=>{const h=A.current;A.current=r?.current||p.current,h!==A.current&&c.onAnchorChange(A.current)}),r?null:e.jsx(sr.div,{...o,ref:f})});iC.displayName=aC;var yb="PopperContent",[PL,kL]=sC(yb),oC=C.forwardRef((t,s)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:c="center",alignOffset:p=0,arrowPadding:f=0,avoidCollisions:A=!0,collisionBoundary:h=[],collisionPadding:l=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:m="optimized",onPlaced:N,...w}=t,E=nC(yb,n),[F,M]=C.useState(null),k=Fr(s,Ne=>M(Ne)),[K,G]=C.useState(null),ee=mb(K),V=ee?.width??0,X=ee?.height??0,J=r+(c!=="center"?"-"+c:""),he=typeof l=="number"?l:{top:0,right:0,bottom:0,left:0,...l},q=Array.isArray(h)?h:[h],ie=q.length>0,Ae={padding:he,boundary:q.filter(KL),altBoundary:ie},{refs:ce,floatingStyles:oe,placement:ne,isPositioned:re,middlewareData:se}=EL({strategy:"fixed",placement:J,whileElementsMounted:(...Ne)=>yL(...Ne,{animationFrame:m==="always"}),elements:{reference:E.anchor},middleware:[FL({mainAxis:o+X,alignmentAxis:p}),A&&IL({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?RL():void 0,...Ae}),A&&OL({...Ae}),UL({...Ae,apply:({elements:Ne,rects:ye,availableWidth:we,availableHeight:Te})=>{const{width:qe,height:ve}=ye.reference,Ge=Ne.floating.style;Ge.setProperty("--radix-popper-available-width",`${we}px`),Ge.setProperty("--radix-popper-available-height",`${Te}px`),Ge.setProperty("--radix-popper-anchor-width",`${qe}px`),Ge.setProperty("--radix-popper-anchor-height",`${ve}px`)}}),K&&DL({element:K,padding:f}),zL({arrowWidth:V,arrowHeight:X}),v&&LL({strategy:"referenceHidden",...Ae})]}),[je,De]=AC(ne),ge=Po(N);Pa(()=>{re&&ge?.()},[re,ge]);const Z=se.arrow?.x,fe=se.arrow?.y,ue=se.arrow?.centerOffset!==0,[pe,Ce]=C.useState();return Pa(()=>{F&&Ce(window.getComputedStyle(F).zIndex)},[F]),e.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:re?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[se.transformOrigin?.x,se.transformOrigin?.y].join(" "),...se.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(PL,{scope:n,placedSide:je,onArrowChange:G,arrowX:Z,arrowY:fe,shouldHideArrow:ue,children:e.jsx(sr.div,{"data-side":je,"data-align":De,...w,ref:k,style:{...w.style,animation:re?void 0:"none"}})})})});oC.displayName=yb;var lC="PopperArrow",HL={top:"bottom",right:"left",bottom:"top",left:"right"},cC=C.forwardRef(function(s,n){const{__scopePopper:r,...o}=s,c=kL(lC,r),p=HL[c.placedSide];return e.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[p]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:e.jsx(ML,{...o,ref:n,style:{...o.style,display:"block"}})})});cC.displayName=lC;function KL(t){return t!==null}var zL=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:r,middlewareData:o}=s,p=o.arrow?.centerOffset!==0,f=p?0:t.arrowWidth,A=p?0:t.arrowHeight,[h,l]=AC(n),g={start:"0%",center:"50%",end:"100%"}[l],v=(o.arrow?.x??0)+f/2,m=(o.arrow?.y??0)+A/2;let N="",w="";return h==="bottom"?(N=p?g:`${v}px`,w=`${-A}px`):h==="top"?(N=p?g:`${v}px`,w=`${r.floating.height+A}px`):h==="right"?(N=`${-A}px`,w=p?g:`${m}px`):h==="left"&&(N=`${r.floating.width+A}px`,w=p?g:`${m}px`),{data:{x:N,y:w}}}});function AC(t){const[s,n="center"]=t.split("-");return[s,n]}var GL=rC,dC=iC,uC=oC,hC=cC,VL="Portal",Cy=C.forwardRef((t,s)=>{const{container:n,...r}=t,[o,c]=C.useState(!1);Pa(()=>c(!0),[]);const p=n||o&&globalThis?.document?.body;return p?PB.createPortal(e.jsx(sr.div,{...r,ref:s}),p):null});Cy.displayName=VL;function $L(t,s){return C.useReducer((n,r)=>s[n][r]??n,t)}var sd=t=>{const{present:s,children:n}=t,r=qL(s),o=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),c=Fr(r.ref,WL(o));return typeof n=="function"||r.isPresent?C.cloneElement(o,{ref:c}):null};sd.displayName="Presence";function qL(t){const[s,n]=C.useState(),r=C.useRef(null),o=C.useRef(t),c=C.useRef("none"),p=t?"mounted":"unmounted",[f,A]=$L(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const h=og(r.current);c.current=f==="mounted"?h:"none"},[f]),Pa(()=>{const h=r.current,l=o.current;if(l!==t){const v=c.current,m=og(h);t?A("MOUNT"):m==="none"||h?.display==="none"?A("UNMOUNT"):A(l&&v!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,A]),Pa(()=>{if(s){let h;const l=s.ownerDocument.defaultView??window,g=m=>{const w=og(r.current).includes(CSS.escape(m.animationName));if(m.target===s&&w&&(A("ANIMATION_END"),!o.current)){const E=s.style.animationFillMode;s.style.animationFillMode="forwards",h=l.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=E)})}},v=m=>{m.target===s&&(c.current=og(r.current))};return s.addEventListener("animationstart",v),s.addEventListener("animationcancel",g),s.addEventListener("animationend",g),()=>{l.clearTimeout(h),s.removeEventListener("animationstart",v),s.removeEventListener("animationcancel",g),s.removeEventListener("animationend",g)}}else A("ANIMATION_END")},[s,A]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:C.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function og(t){return t?.animationName||"none"}function WL(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var YL=Symbol("radix.slottable");function XL(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=YL,s}var fC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),JL="VisuallyHidden",pC=C.forwardRef((t,s)=>e.jsx(sr.span,{...t,ref:s,style:{...fC,...t.style}}));pC.displayName=JL;var ZL=pC,[Ey]=uc("Tooltip",[Ny]),xb=Ny(),mC="TooltipProvider",eD=700,xw="tooltip.open",[tD,gC]=Ey(mC),yC=t=>{const{__scopeTooltip:s,delayDuration:n=eD,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:c}=t,p=C.useRef(!0),f=C.useRef(!1),A=C.useRef(0);return C.useEffect(()=>{const h=A.current;return()=>window.clearTimeout(h)},[]),e.jsx(tD,{scope:s,isOpenDelayedRef:p,delayDuration:n,onOpen:C.useCallback(()=>{window.clearTimeout(A.current),p.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(A.current),A.current=window.setTimeout(()=>p.current=!0,r)},[r]),isPointerInTransitRef:f,onPointerInTransitChange:C.useCallback(h=>{f.current=h},[]),disableHoverableContent:o,children:c})};yC.displayName=mC;var xC="Tooltip",[Wz,em]=Ey(xC),iv="TooltipTrigger",sD=C.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,o=em(iv,n),c=gC(iv,n),p=xb(n),f=C.useRef(null),A=Fr(s,f,o.onTriggerChange),h=C.useRef(!1),l=C.useRef(!1),g=C.useCallback(()=>h.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),e.jsx(dC,{asChild:!0,...p,children:e.jsx(sr.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:A,onPointerMove:Dh(t.onPointerMove,v=>{v.pointerType!=="touch"&&!l.current&&!c.isPointerInTransitRef.current&&(o.onTriggerEnter(),l.current=!0)}),onPointerLeave:Dh(t.onPointerLeave,()=>{o.onTriggerLeave(),l.current=!1}),onPointerDown:Dh(t.onPointerDown,()=>{o.open&&o.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Dh(t.onFocus,()=>{h.current||o.onOpen()}),onBlur:Dh(t.onBlur,o.onClose),onClick:Dh(t.onClick,o.onClose)})})});sD.displayName=iv;var vb="TooltipPortal",[nD,rD]=Ey(vb,{forceMount:void 0}),vC=t=>{const{__scopeTooltip:s,forceMount:n,children:r,container:o}=t,c=em(vb,s);return e.jsx(nD,{scope:s,forceMount:n,children:e.jsx(sd,{present:n||c.open,children:e.jsx(Cy,{asChild:!0,container:o,children:r})})})};vC.displayName=vb;var lf="TooltipContent",bC=C.forwardRef((t,s)=>{const n=rD(lf,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...c}=t,p=em(lf,t.__scopeTooltip);return e.jsx(sd,{present:r||p.open,children:p.disableHoverableContent?e.jsx(jC,{side:o,...c,ref:s}):e.jsx(aD,{side:o,...c,ref:s})})}),aD=C.forwardRef((t,s)=>{const n=em(lf,t.__scopeTooltip),r=gC(lf,t.__scopeTooltip),o=C.useRef(null),c=Fr(s,o),[p,f]=C.useState(null),{trigger:A,onClose:h}=n,l=o.current,{onPointerInTransitChange:g}=r,v=C.useCallback(()=>{f(null),g(!1)},[g]),m=C.useCallback((N,w)=>{const E=N.currentTarget,F={x:N.clientX,y:N.clientY},M=AD(F,E.getBoundingClientRect()),k=dD(F,M),K=uD(w.getBoundingClientRect()),G=fD([...k,...K]);f(G),g(!0)},[g]);return C.useEffect(()=>()=>v(),[v]),C.useEffect(()=>{if(A&&l){const N=E=>m(E,l),w=E=>m(E,A);return A.addEventListener("pointerleave",N),l.addEventListener("pointerleave",w),()=>{A.removeEventListener("pointerleave",N),l.removeEventListener("pointerleave",w)}}},[A,l,m,v]),C.useEffect(()=>{if(p){const N=w=>{const E=w.target,F={x:w.clientX,y:w.clientY},M=A?.contains(E)||l?.contains(E),k=!hD(F,p);M?v():k&&(v(),h())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[A,l,p,h,v]),e.jsx(jC,{...t,ref:c})}),[iD,oD]=Ey(xC,{isInside:!1}),lD=XL("TooltipContent"),jC=C.forwardRef((t,s)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:c,onPointerDownOutside:p,...f}=t,A=em(lf,n),h=xb(n),{onClose:l}=A;return C.useEffect(()=>(document.addEventListener(xw,l),()=>document.removeEventListener(xw,l)),[l]),C.useEffect(()=>{if(A.trigger){const g=v=>{v.target?.contains(A.trigger)&&l()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[A.trigger,l]),e.jsx(by,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:g=>g.preventDefault(),onDismiss:l,children:e.jsxs(uC,{"data-state":A.stateAttribute,...h,...f,ref:s,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(lD,{children:r}),e.jsx(iD,{scope:n,isInside:!0,children:e.jsx(ZL,{id:A.contentId,role:"tooltip",children:o||r})})]})})});bC.displayName=lf;var wC="TooltipArrow",cD=C.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,o=xb(n);return oD(wC,n).isInside?null:e.jsx(hC,{...o,...r,ref:s})});cD.displayName=wC;function AD(t,s){const n=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),o=Math.abs(s.right-t.x),c=Math.abs(s.left-t.x);switch(Math.min(n,r,o,c)){case c:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dD(t,s,n=5){const r=[];switch(s){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function uD(t){const{top:s,right:n,bottom:r,left:o}=t;return[{x:o,y:s},{x:n,y:s},{x:n,y:r},{x:o,y:r}]}function hD(t,s){const{x:n,y:r}=t;let o=!1;for(let c=0,p=s.length-1;c<s.length;p=c++){const f=s[c],A=s[p],h=f.x,l=f.y,g=A.x,v=A.y;l>r!=v>r&&n<(g-h)*(r-l)/(v-l)+h&&(o=!o)}return o}function fD(t){const s=t.slice();return s.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),pD(s)}function pD(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const o=t[r];for(;s.length>=2;){const c=s[s.length-1],p=s[s.length-2];if((c.x-p.x)*(o.y-p.y)>=(c.y-p.y)*(o.x-p.x))s.pop();else break}s.push(o)}s.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const c=n[n.length-1],p=n[n.length-2];if((c.x-p.x)*(o.y-p.y)>=(c.y-p.y)*(o.x-p.x))n.pop();else break}n.push(o)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var mD=yC,gD=vC,SC=bC;const yD=mD,xD=C.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(gD,{children:e.jsx(SC,{ref:r,sideOffset:s,className:Xs("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n})}));xD.displayName=SC.displayName;const Vs=C.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Xs("rounded-xl border bg-card text-card-foreground shadow",t),...s}));Vs.displayName="Card";const ta=C.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Xs("flex flex-col space-y-1.5 p-6",t),...s}));ta.displayName="CardHeader";const sa=C.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Xs("font-semibold leading-none tracking-tight",t),...s}));sa.displayName="CardTitle";const ei=C.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Xs("text-sm text-muted-foreground",t),...s}));ei.displayName="CardDescription";const fn=C.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Xs("p-6 pt-0",t),...s}));fn.displayName="CardContent";const mf=C.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Xs("flex items-center p-6 pt-0",t),...s}));mf.displayName="CardFooter";function vD(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(Vs,{className:"w-full max-w-md mx-4",children:e.jsxs(fn,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(P3,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const bb=C.createContext({});function jb(t){const s=C.useRef(null);return s.current===null&&(s.current=t()),s.current}const wb=typeof window<"u",BC=wb?C.useLayoutEffect:C.useEffect,Ty=C.createContext(null);function Sb(t,s){t.indexOf(s)===-1&&t.push(s)}function Bb(t,s){const n=t.indexOf(s);n>-1&&t.splice(n,1)}const JA=(t,s,n)=>n>s?s:n<t?t:n;let Nb=()=>{};const ZA={},NC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function CC(t){return typeof t=="object"&&t!==null}const EC=t=>/^0[^.\s]+$/u.test(t);function Cb(t){let s;return()=>(s===void 0&&(s=t()),s)}const Ac=t=>t,bD=(t,s)=>n=>s(t(n)),tm=(...t)=>t.reduce(bD),zp=(t,s,n)=>{const r=s-t;return r===0?1:(n-t)/r};class Eb{constructor(){this.subscriptions=[]}add(s){return Sb(this.subscriptions,s),()=>Bb(this.subscriptions,s)}notify(s,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](s,n,r);else for(let c=0;c<o;c++){const p=this.subscriptions[c];p&&p(s,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gA=t=>t*1e3,cc=t=>t/1e3;function TC(t,s){return s?t*(1e3/s):0}const FC=(t,s,n)=>(((1-3*n+3*s)*t+(3*n-6*s))*t+3*s)*t,jD=1e-7,wD=12;function SD(t,s,n,r,o){let c,p,f=0;do p=s+(n-s)/2,c=FC(p,r,o)-t,c>0?n=p:s=p;while(Math.abs(c)>jD&&++f<wD);return p}function sm(t,s,n,r){if(t===s&&n===r)return Ac;const o=c=>SD(c,0,1,t,n);return c=>c===0||c===1?c:FC(o(c),s,r)}const IC=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,RC=t=>s=>1-t(1-s),OC=sm(.33,1.53,.69,.99),Tb=RC(OC),UC=IC(Tb),LC=t=>(t*=2)<1?.5*Tb(t):.5*(2-Math.pow(2,-10*(t-1))),Fb=t=>1-Math.sin(Math.acos(t)),DC=RC(Fb),QC=IC(Fb),BD=sm(.42,0,1,1),ND=sm(0,0,.58,1),MC=sm(.42,0,.58,1),CD=t=>Array.isArray(t)&&typeof t[0]!="number",_C=t=>Array.isArray(t)&&typeof t[0]=="number",ED={linear:Ac,easeIn:BD,easeInOut:MC,easeOut:ND,circIn:Fb,circInOut:QC,circOut:DC,backIn:Tb,backInOut:UC,backOut:OC,anticipate:LC},TD=t=>typeof t=="string",vw=t=>{if(_C(t)){Nb(t.length===4);const[s,n,r,o]=t;return sm(s,n,r,o)}else if(TD(t))return ED[t];return t},lg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function FD(t,s){let n=new Set,r=new Set,o=!1,c=!1;const p=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function A(l){p.has(l)&&(h.schedule(l),t()),l(f)}const h={schedule:(l,g=!1,v=!1)=>{const N=v&&o?n:r;return g&&p.add(l),N.has(l)||N.add(l),l},cancel:l=>{r.delete(l),p.delete(l)},process:l=>{if(f=l,o){c=!0;return}o=!0,[n,r]=[r,n],n.forEach(A),n.clear(),o=!1,c&&(c=!1,h.process(l))}};return h}const ID=40;function PC(t,s){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,p=lg.reduce((k,K)=>(k[K]=FD(c),k),{}),{setup:f,read:A,resolveKeyframes:h,preUpdate:l,update:g,preRender:v,render:m,postRender:N}=p,w=()=>{const k=ZA.useManualTiming?o.timestamp:performance.now();n=!1,ZA.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(k-o.timestamp,ID),1)),o.timestamp=k,o.isProcessing=!0,f.process(o),A.process(o),h.process(o),l.process(o),g.process(o),v.process(o),m.process(o),N.process(o),o.isProcessing=!1,n&&s&&(r=!1,t(w))},E=()=>{n=!0,r=!0,o.isProcessing||t(w)};return{schedule:lg.reduce((k,K)=>{const G=p[K];return k[K]=(ee,V=!1,X=!1)=>(n||E(),G.schedule(ee,V,X)),k},{}),cancel:k=>{for(let K=0;K<lg.length;K++)p[lg[K]].cancel(k)},state:o,steps:p}}const{schedule:ti,cancel:Jd,state:fo,steps:Kx}=PC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ac,!0);let Ig;function RD(){Ig=void 0}const ml={now:()=>(Ig===void 0&&ml.set(fo.isProcessing||ZA.useManualTiming?fo.timestamp:performance.now()),Ig),set:t=>{Ig=t,queueMicrotask(RD)}},kC=t=>s=>typeof s=="string"&&s.startsWith(t),Ib=kC("--"),OD=kC("var(--"),Rb=t=>OD(t)?UD.test(t.split("/*")[0].trim()):!1,UD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gp={...gf,transform:t=>JA(0,1,t)},cg={...gf,default:1},Cp=t=>Math.round(t*1e5)/1e5,Ob=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function LD(t){return t==null}const DD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ub=(t,s)=>n=>!!(typeof n=="string"&&DD.test(n)&&n.startsWith(t)||s&&!LD(n)&&Object.prototype.hasOwnProperty.call(n,s)),HC=(t,s,n)=>r=>{if(typeof r!="string")return r;const[o,c,p,f]=r.match(Ob);return{[t]:parseFloat(o),[s]:parseFloat(c),[n]:parseFloat(p),alpha:f!==void 0?parseFloat(f):1}},QD=t=>JA(0,255,t),zx={...gf,transform:t=>Math.round(QD(t))},Pu={test:Ub("rgb","red"),parse:HC("red","green","blue"),transform:({red:t,green:s,blue:n,alpha:r=1})=>"rgba("+zx.transform(t)+", "+zx.transform(s)+", "+zx.transform(n)+", "+Cp(Gp.transform(r))+")"};function MD(t){let s="",n="",r="",o="";return t.length>5?(s=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(s=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),s+=s,n+=n,r+=r,o+=o),{red:parseInt(s,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const ov={test:Ub("#"),parse:MD,transform:Pu.transform},nm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),kd=nm("deg"),yA=nm("%"),On=nm("px"),_D=nm("vh"),PD=nm("vw"),bw={...yA,parse:t=>yA.parse(t)/100,transform:t=>yA.transform(t*100)},$h={test:Ub("hsl","hue"),parse:HC("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+yA.transform(Cp(s))+", "+yA.transform(Cp(n))+", "+Cp(Gp.transform(r))+")"},zi={test:t=>Pu.test(t)||ov.test(t)||$h.test(t),parse:t=>Pu.test(t)?Pu.parse(t):$h.test(t)?$h.parse(t):ov.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Pu.transform(t):$h.transform(t),getAnimatableNone:t=>{const s=zi.parse(t);return s.alpha=0,zi.transform(s)}},kD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function HD(t){return isNaN(t)&&typeof t=="string"&&(t.match(Ob)?.length||0)+(t.match(kD)?.length||0)>0}const KC="number",zC="color",KD="var",zD="var(",jw="${}",GD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vp(t){const s=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let c=0;const f=s.replace(GD,A=>(zi.test(A)?(r.color.push(c),o.push(zC),n.push(zi.parse(A))):A.startsWith(zD)?(r.var.push(c),o.push(KD),n.push(A)):(r.number.push(c),o.push(KC),n.push(parseFloat(A))),++c,jw)).split(jw);return{values:n,split:f,indexes:r,types:o}}function GC(t){return Vp(t).values}function VC(t){const{split:s,types:n}=Vp(t),r=s.length;return o=>{let c="";for(let p=0;p<r;p++)if(c+=s[p],o[p]!==void 0){const f=n[p];f===KC?c+=Cp(o[p]):f===zC?c+=zi.transform(o[p]):c+=o[p]}return c}}const VD=t=>typeof t=="number"?0:zi.test(t)?zi.getAnimatableNone(t):t;function $D(t){const s=GC(t);return VC(t)(s.map(VD))}const Zd={test:HD,parse:GC,createTransformer:VC,getAnimatableNone:$D};function Gx(t,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(s-t)*6*n:n<1/2?s:n<2/3?t+(s-t)*(2/3-n)*6:t}function qD({hue:t,saturation:s,lightness:n,alpha:r}){t/=360,s/=100,n/=100;let o=0,c=0,p=0;if(!s)o=c=p=n;else{const f=n<.5?n*(1+s):n+s-n*s,A=2*n-f;o=Gx(A,f,t+1/3),c=Gx(A,f,t),p=Gx(A,f,t-1/3)}return{red:Math.round(o*255),green:Math.round(c*255),blue:Math.round(p*255),alpha:r}}function ey(t,s){return n=>n>0?s:t}const li=(t,s,n)=>t+(s-t)*n,Vx=(t,s,n)=>{const r=t*t,o=n*(s*s-r)+r;return o<0?0:Math.sqrt(o)},WD=[ov,Pu,$h],YD=t=>WD.find(s=>s.test(t));function ww(t){const s=YD(t);if(!s)return!1;let n=s.parse(t);return s===$h&&(n=qD(n)),n}const Sw=(t,s)=>{const n=ww(t),r=ww(s);if(!n||!r)return ey(t,s);const o={...n};return c=>(o.red=Vx(n.red,r.red,c),o.green=Vx(n.green,r.green,c),o.blue=Vx(n.blue,r.blue,c),o.alpha=li(n.alpha,r.alpha,c),Pu.transform(o))},lv=new Set(["none","hidden"]);function XD(t,s){return lv.has(t)?n=>n<=0?t:s:n=>n>=1?s:t}function JD(t,s){return n=>li(t,s,n)}function Lb(t){return typeof t=="number"?JD:typeof t=="string"?Rb(t)?ey:zi.test(t)?Sw:tQ:Array.isArray(t)?$C:typeof t=="object"?zi.test(t)?Sw:ZD:ey}function $C(t,s){const n=[...t],r=n.length,o=t.map((c,p)=>Lb(c)(c,s[p]));return c=>{for(let p=0;p<r;p++)n[p]=o[p](c);return n}}function ZD(t,s){const n={...t,...s},r={};for(const o in n)t[o]!==void 0&&s[o]!==void 0&&(r[o]=Lb(t[o])(t[o],s[o]));return o=>{for(const c in r)n[c]=r[c](o);return n}}function eQ(t,s){const n=[],r={color:0,var:0,number:0};for(let o=0;o<s.values.length;o++){const c=s.types[o],p=t.indexes[c][r[c]],f=t.values[p]??0;n[o]=f,r[c]++}return n}const tQ=(t,s)=>{const n=Zd.createTransformer(s),r=Vp(t),o=Vp(s);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?lv.has(t)&&!o.values.length||lv.has(s)&&!r.values.length?XD(t,s):tm($C(eQ(r,o),o.values),n):ey(t,s)};function qC(t,s,n){return typeof t=="number"&&typeof s=="number"&&typeof n=="number"?li(t,s,n):Lb(t)(t,s)}const sQ=t=>{const s=({timestamp:n})=>t(n);return{start:(n=!0)=>ti.update(s,n),stop:()=>Jd(s),now:()=>fo.isProcessing?fo.timestamp:ml.now()}},WC=(t,s,n=10)=>{let r="";const o=Math.max(Math.round(s/n),2);for(let c=0;c<o;c++)r+=Math.round(t(c/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ty=2e4;function Db(t){let s=0;const n=50;let r=t.next(s);for(;!r.done&&s<ty;)s+=n,r=t.next(s);return s>=ty?1/0:s}function nQ(t,s=100,n){const r=n({...t,keyframes:[0,s]}),o=Math.min(Db(r),ty);return{type:"keyframes",ease:c=>r.next(o*c).value/s,duration:cc(o)}}const rQ=5;function YC(t,s,n){const r=Math.max(s-rQ,0);return TC(n-t(r),s-r)}const xi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$x=.001;function aQ({duration:t=xi.duration,bounce:s=xi.bounce,velocity:n=xi.velocity,mass:r=xi.mass}){let o,c,p=1-s;p=JA(xi.minDamping,xi.maxDamping,p),t=JA(xi.minDuration,xi.maxDuration,cc(t)),p<1?(o=h=>{const l=h*p,g=l*t,v=l-n,m=cv(h,p),N=Math.exp(-g);return $x-v/m*N},c=h=>{const g=h*p*t,v=g*n+n,m=Math.pow(p,2)*Math.pow(h,2)*t,N=Math.exp(-g),w=cv(Math.pow(h,2),p);return(-o(h)+$x>0?-1:1)*((v-m)*N)/w}):(o=h=>{const l=Math.exp(-h*t),g=(h-n)*t+1;return-$x+l*g},c=h=>{const l=Math.exp(-h*t),g=(n-h)*(t*t);return l*g});const f=5/t,A=oQ(o,c,f);if(t=gA(t),isNaN(A))return{stiffness:xi.stiffness,damping:xi.damping,duration:t};{const h=Math.pow(A,2)*r;return{stiffness:h,damping:p*2*Math.sqrt(r*h),duration:t}}}const iQ=12;function oQ(t,s,n){let r=n;for(let o=1;o<iQ;o++)r=r-t(r)/s(r);return r}function cv(t,s){return t*Math.sqrt(1-s*s)}const lQ=["duration","bounce"],cQ=["stiffness","damping","mass"];function Bw(t,s){return s.some(n=>t[n]!==void 0)}function AQ(t){let s={velocity:xi.velocity,stiffness:xi.stiffness,damping:xi.damping,mass:xi.mass,isResolvedFromDuration:!1,...t};if(!Bw(t,cQ)&&Bw(t,lQ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,c=2*JA(.05,1,1-(t.bounce||0))*Math.sqrt(o);s={...s,mass:xi.mass,stiffness:o,damping:c}}else{const n=aQ(t);s={...s,...n,mass:xi.mass},s.isResolvedFromDuration=!0}return s}function sy(t=xi.visualDuration,s=xi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:o}=n;const c=n.keyframes[0],p=n.keyframes[n.keyframes.length-1],f={done:!1,value:c},{stiffness:A,damping:h,mass:l,duration:g,velocity:v,isResolvedFromDuration:m}=AQ({...n,velocity:-cc(n.velocity||0)}),N=v||0,w=h/(2*Math.sqrt(A*l)),E=p-c,F=cc(Math.sqrt(A/l)),M=Math.abs(E)<5;r||(r=M?xi.restSpeed.granular:xi.restSpeed.default),o||(o=M?xi.restDelta.granular:xi.restDelta.default);let k;if(w<1){const G=cv(F,w);k=ee=>{const V=Math.exp(-w*F*ee);return p-V*((N+w*F*E)/G*Math.sin(G*ee)+E*Math.cos(G*ee))}}else if(w===1)k=G=>p-Math.exp(-F*G)*(E+(N+F*E)*G);else{const G=F*Math.sqrt(w*w-1);k=ee=>{const V=Math.exp(-w*F*ee),X=Math.min(G*ee,300);return p-V*((N+w*F*E)*Math.sinh(X)+G*E*Math.cosh(X))/G}}const K={calculatedDuration:m&&g||null,next:G=>{const ee=k(G);if(m)f.done=G>=g;else{let V=G===0?N:0;w<1&&(V=G===0?gA(N):YC(k,G,ee));const X=Math.abs(V)<=r,J=Math.abs(p-ee)<=o;f.done=X&&J}return f.value=f.done?p:ee,f},toString:()=>{const G=Math.min(Db(K),ty),ee=WC(V=>K.next(G*V).value,G,30);return G+"ms "+ee},toTransition:()=>{}};return K}sy.applyToOptions=t=>{const s=nQ(t,100,sy);return t.ease=s.ease,t.duration=gA(s.duration),t.type="keyframes",t};function Av({keyframes:t,velocity:s=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:c=500,modifyTarget:p,min:f,max:A,restDelta:h=.5,restSpeed:l}){const g=t[0],v={done:!1,value:g},m=X=>f!==void 0&&X<f||A!==void 0&&X>A,N=X=>f===void 0?A:A===void 0||Math.abs(f-X)<Math.abs(A-X)?f:A;let w=n*s;const E=g+w,F=p===void 0?E:p(E);F!==E&&(w=F-g);const M=X=>-w*Math.exp(-X/r),k=X=>F+M(X),K=X=>{const J=M(X),he=k(X);v.done=Math.abs(J)<=h,v.value=v.done?F:he};let G,ee;const V=X=>{m(v.value)&&(G=X,ee=sy({keyframes:[v.value,N(v.value)],velocity:YC(k,X,v.value),damping:o,stiffness:c,restDelta:h,restSpeed:l}))};return V(0),{calculatedDuration:null,next:X=>{let J=!1;return!ee&&G===void 0&&(J=!0,K(X),V(X)),G!==void 0&&X>=G?ee.next(X-G):(!J&&K(X),v)}}}function dQ(t,s,n){const r=[],o=n||ZA.mix||qC,c=t.length-1;for(let p=0;p<c;p++){let f=o(t[p],t[p+1]);if(s){const A=Array.isArray(s)?s[p]||Ac:s;f=tm(A,f)}r.push(f)}return r}function uQ(t,s,{clamp:n=!0,ease:r,mixer:o}={}){const c=t.length;if(Nb(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const p=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const f=dQ(s,r,o),A=f.length,h=l=>{if(p&&l<t[0])return s[0];let g=0;if(A>1)for(;g<t.length-2&&!(l<t[g+1]);g++);const v=zp(t[g],t[g+1],l);return f[g](v)};return n?l=>h(JA(t[0],t[c-1],l)):h}function hQ(t,s){const n=t[t.length-1];for(let r=1;r<=s;r++){const o=zp(0,s,r);t.push(li(n,1,o))}}function fQ(t){const s=[0];return hQ(s,t.length-1),s}function pQ(t,s){return t.map(n=>n*s)}function mQ(t,s){return t.map(()=>s||MC).splice(0,t.length-1)}function Ep({duration:t=300,keyframes:s,times:n,ease:r="easeInOut"}){const o=CD(r)?r.map(vw):vw(r),c={done:!1,value:s[0]},p=pQ(n&&n.length===s.length?n:fQ(s),t),f=uQ(p,s,{ease:Array.isArray(o)?o:mQ(s,o)});return{calculatedDuration:t,next:A=>(c.value=f(A),c.done=A>=t,c)}}const gQ=t=>t!==null;function Qb(t,{repeat:s,repeatType:n="loop"},r,o=1){const c=t.filter(gQ),f=o<0||s&&n!=="loop"&&s%2===1?0:c.length-1;return!f||r===void 0?c[f]:r}const yQ={decay:Av,inertia:Av,tween:Ep,keyframes:Ep,spring:sy};function XC(t){typeof t.type=="string"&&(t.type=yQ[t.type])}class Mb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,n){return this.finished.then(s,n)}}const xQ=t=>t/100;class _b extends Mb{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ml.now()&&this.tick(ml.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;XC(s);const{type:n=Ep,repeat:r=0,repeatDelay:o=0,repeatType:c,velocity:p=0}=s;let{keyframes:f}=s;const A=n||Ep;A!==Ep&&typeof f[0]!="number"&&(this.mixKeyframes=tm(xQ,qC(f[0],f[1])),f=[0,100]);const h=A({...s,keyframes:f});c==="mirror"&&(this.mirroredGenerator=A({...s,keyframes:[...f].reverse(),velocity:-p})),h.calculatedDuration===null&&(h.calculatedDuration=Db(h));const{calculatedDuration:l}=h;this.calculatedDuration=l,this.resolvedDuration=l+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=h}updateTime(s){const n=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(s,n=!1){const{generator:r,totalDuration:o,mixKeyframes:c,mirroredGenerator:p,resolvedDuration:f,calculatedDuration:A}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:l,repeat:g,repeatType:v,repeatDelay:m,type:N,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-o/this.speed,this.startTime)),n?this.currentTime=s:this.updateTime(s);const F=this.currentTime-h*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?F<0:F>o;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let k=this.currentTime,K=r;if(g){const X=Math.min(this.currentTime,o)/f;let J=Math.floor(X),he=X%1;!he&&X>=1&&(he=1),he===1&&J--,J=Math.min(J,g+1),!!(J%2)&&(v==="reverse"?(he=1-he,m&&(he-=m/f)):v==="mirror"&&(K=p)),k=JA(0,1,he)*f}const G=M?{done:!1,value:l[0]}:K.next(k);c&&(G.value=c(G.value));let{done:ee}=G;!M&&A!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return V&&N!==Av&&(G.value=Qb(l,this.options,E,this.speed)),w&&w(G.value),V&&this.finish(),G}then(s,n){return this.finished.then(s,n)}get duration(){return cc(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+cc(s)}get time(){return cc(this.currentTime)}set time(s){s=gA(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(ml.now());const n=this.playbackSpeed!==s;this.playbackSpeed=s,n&&(this.time=cc(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=sQ,startTime:n}=this.options;this.driver||(this.driver=s(o=>this.tick(o))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ml.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function vQ(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const ku=t=>t*180/Math.PI,dv=t=>{const s=ku(Math.atan2(t[1],t[0]));return uv(s)},bQ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:dv,rotateZ:dv,skewX:t=>ku(Math.atan(t[1])),skewY:t=>ku(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},uv=t=>(t=t%360,t<0&&(t+=360),t),Nw=dv,Cw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Ew=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),jQ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Cw,scaleY:Ew,scale:t=>(Cw(t)+Ew(t))/2,rotateX:t=>uv(ku(Math.atan2(t[6],t[5]))),rotateY:t=>uv(ku(Math.atan2(-t[2],t[0]))),rotateZ:Nw,rotate:Nw,skewX:t=>ku(Math.atan(t[4])),skewY:t=>ku(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function hv(t){return t.includes("scale")?1:0}function fv(t,s){if(!t||t==="none")return hv(s);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=jQ,o=n;else{const f=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=bQ,o=f}if(!o)return hv(s);const c=r[s],p=o[1].split(",").map(SQ);return typeof c=="function"?c(p):p[c]}const wQ=(t,s)=>{const{transform:n="none"}=getComputedStyle(t);return fv(n,s)};function SQ(t){return parseFloat(t.trim())}const yf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xf=new Set(yf),Tw=t=>t===gf||t===On,BQ=new Set(["x","y","z"]),NQ=yf.filter(t=>!BQ.has(t));function CQ(t){const s=[];return NQ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(s.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),s}const Vu={width:({x:t},{paddingLeft:s="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),height:({y:t},{paddingTop:s="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>fv(s,"x"),y:(t,{transform:s})=>fv(s,"y")};Vu.translateX=Vu.x;Vu.translateY=Vu.y;const $u=new Set;let pv=!1,mv=!1,gv=!1;function JC(){if(mv){const t=Array.from($u).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),n=new Map;s.forEach(r=>{const o=CQ(r);o.length&&(n.set(r,o),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([c,p])=>{r.getValue(c)?.set(p)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}mv=!1,pv=!1,$u.forEach(t=>t.complete(gv)),$u.clear()}function ZC(){$u.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(mv=!0)})}function EQ(){gv=!0,ZC(),JC(),gv=!1}class Pb{constructor(s,n,r,o,c,p=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=n,this.name=r,this.motionValue=o,this.element=c,this.isAsync=p}scheduleResolve(){this.state="scheduled",this.isAsync?($u.add(this),pv||(pv=!0,ti.read(ZC),ti.resolveKeyframes(JC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:n,element:r,motionValue:o}=this;if(s[0]===null){const c=o?.get(),p=s[s.length-1];if(c!==void 0)s[0]=c;else if(r&&n){const f=r.readValue(n,p);f!=null&&(s[0]=f)}s[0]===void 0&&(s[0]=p),o&&c===void 0&&o.set(s[0])}vQ(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),$u.delete(this)}cancel(){this.state==="scheduled"&&($u.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const TQ=t=>t.startsWith("--");function FQ(t,s,n){TQ(s)?t.style.setProperty(s,n):t.style[s]=n}const IQ=Cb(()=>window.ScrollTimeline!==void 0),RQ={};function OQ(t,s){const n=Cb(t);return()=>RQ[s]??n()}const e5=OQ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sp=([t,s,n,r])=>`cubic-bezier(${t}, ${s}, ${n}, ${r})`,Fw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sp([0,.65,.55,1]),circOut:Sp([.55,0,1,.45]),backIn:Sp([.31,.01,.66,-.59]),backOut:Sp([.33,1.53,.69,.99])};function t5(t,s){if(t)return typeof t=="function"?e5()?WC(t,s):"ease-out":_C(t)?Sp(t):Array.isArray(t)?t.map(n=>t5(n,s)||Fw.easeOut):Fw[t]}function UQ(t,s,n,{delay:r=0,duration:o=300,repeat:c=0,repeatType:p="loop",ease:f="easeOut",times:A}={},h=void 0){const l={[s]:n};A&&(l.offset=A);const g=t5(f,o);Array.isArray(g)&&(l.easing=g);const v={delay:r,duration:o,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:c+1,direction:p==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),t.animate(l,v)}function s5(t){return typeof t=="function"&&"applyToOptions"in t}function LQ({type:t,...s}){return s5(t)&&e5()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class DQ extends Mb{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:n,name:r,keyframes:o,pseudoElement:c,allowFlatten:p=!1,finalKeyframe:f,onComplete:A}=s;this.isPseudoElement=!!c,this.allowFlatten=p,this.options=s,Nb(typeof s.type!="string");const h=LQ(s);this.animation=UQ(n,r,o,h,c),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const l=Qb(o,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(l):FQ(n,r,l),this.animation.cancel()}A?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return cc(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+cc(s)}get time(){return cc(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=gA(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&IQ()?(this.animation.timeline=s,Ac):n(this)}}const n5={anticipate:LC,backInOut:UC,circInOut:QC};function QQ(t){return t in n5}function MQ(t){typeof t.ease=="string"&&QQ(t.ease)&&(t.ease=n5[t.ease])}const Iw=10;class _Q extends DQ{constructor(s){MQ(s),XC(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:n,onUpdate:r,onComplete:o,element:c,...p}=this.options;if(!n)return;if(s!==void 0){n.set(s);return}const f=new _b({...p,autoplay:!1}),A=gA(this.finishedTime??this.time);n.setWithVelocity(f.sample(A-Iw).value,f.sample(A).value,Iw),f.stop()}}const Rw=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zd.test(t)||t==="0")&&!t.startsWith("url("));function PQ(t){const s=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}function kQ(t,s,n,r){const o=t[0];if(o===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],p=Rw(o,s),f=Rw(c,s);return!p||!f?!1:PQ(t)||(n==="spring"||s5(n))&&r}function yv(t){t.duration=0,t.type="keyframes"}const HQ=new Set(["opacity","clipPath","filter","transform"]),KQ=Cb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zQ(t){const{motionValue:s,name:n,repeatDelay:r,repeatType:o,damping:c,type:p}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:A,transformTemplate:h}=s.owner.getProps();return KQ()&&n&&HQ.has(n)&&(n!=="transform"||!h)&&!A&&!r&&o!=="mirror"&&c!==0&&p!=="inertia"}const GQ=40;class VQ extends Mb{constructor({autoplay:s=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:c=0,repeatType:p="loop",keyframes:f,name:A,motionValue:h,element:l,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ml.now();const v={autoplay:s,delay:n,type:r,repeat:o,repeatDelay:c,repeatType:p,name:A,motionValue:h,element:l,...g},m=l?.KeyframeResolver||Pb;this.keyframeResolver=new m(f,(N,w,E)=>this.onKeyframesResolved(N,w,v,!E),A,h,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,n,r,o){this.keyframeResolver=void 0;const{name:c,type:p,velocity:f,delay:A,isHandoff:h,onUpdate:l}=r;this.resolvedAt=ml.now(),kQ(s,c,p,f)||((ZA.instantAnimations||!A)&&l?.(Qb(s,r,n)),s[0]=s[s.length-1],yv(r),r.repeat=0);const v={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>GQ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:s},m=!h&&zQ(v)?new _Q({...v,element:v.motionValue.owner.current}):new _b(v);m.finished.then(()=>this.notifyFinished()).catch(Ac),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(s,n){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),EQ()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const $Q=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function qQ(t){const s=$Q.exec(t);if(!s)return[,];const[,n,r,o]=s;return[`--${n??r}`,o]}function r5(t,s,n=1){const[r,o]=qQ(t);if(!r)return;const c=window.getComputedStyle(s).getPropertyValue(r);if(c){const p=c.trim();return NC(p)?parseFloat(p):p}return Rb(o)?r5(o,s,n+1):o}function kb(t,s){return t?.[s]??t?.default??t}const a5=new Set(["width","height","top","left","right","bottom",...yf]),WQ={test:t=>t==="auto",parse:t=>t},i5=t=>s=>s.test(t),o5=[gf,On,yA,kd,PD,_D,WQ],Ow=t=>o5.find(i5(t));function YQ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||EC(t):!0}const XQ=new Set(["brightness","contrast","saturate","opacity"]);function JQ(t){const[s,n]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=n.match(Ob)||[];if(!r)return t;const o=n.replace(r,"");let c=XQ.has(s)?1:0;return r!==n&&(c*=100),s+"("+c+o+")"}const ZQ=/\b([a-z-]*)\(.*?\)/gu,xv={...Zd,getAnimatableNone:t=>{const s=t.match(ZQ);return s?s.map(JQ).join(" "):t}},Uw={...gf,transform:Math.round},e6={rotate:kd,rotateX:kd,rotateY:kd,rotateZ:kd,scale:cg,scaleX:cg,scaleY:cg,scaleZ:cg,skew:kd,skewX:kd,skewY:kd,distance:On,translateX:On,translateY:On,translateZ:On,x:On,y:On,z:On,perspective:On,transformPerspective:On,opacity:Gp,originX:bw,originY:bw,originZ:On},Hb={borderWidth:On,borderTopWidth:On,borderRightWidth:On,borderBottomWidth:On,borderLeftWidth:On,borderRadius:On,radius:On,borderTopLeftRadius:On,borderTopRightRadius:On,borderBottomRightRadius:On,borderBottomLeftRadius:On,width:On,maxWidth:On,height:On,maxHeight:On,top:On,right:On,bottom:On,left:On,padding:On,paddingTop:On,paddingRight:On,paddingBottom:On,paddingLeft:On,margin:On,marginTop:On,marginRight:On,marginBottom:On,marginLeft:On,backgroundPositionX:On,backgroundPositionY:On,...e6,zIndex:Uw,fillOpacity:Gp,strokeOpacity:Gp,numOctaves:Uw},t6={...Hb,color:zi,backgroundColor:zi,outlineColor:zi,fill:zi,stroke:zi,borderColor:zi,borderTopColor:zi,borderRightColor:zi,borderBottomColor:zi,borderLeftColor:zi,filter:xv,WebkitFilter:xv},l5=t=>t6[t];function c5(t,s){let n=l5(t);return n!==xv&&(n=Zd),n.getAnimatableNone?n.getAnimatableNone(s):void 0}const s6=new Set(["auto","none","0"]);function n6(t,s,n){let r=0,o;for(;r<t.length&&!o;){const c=t[r];typeof c=="string"&&!s6.has(c)&&Vp(c).values.length&&(o=t[r]),r++}if(o&&n)for(const c of s)t[c]=c5(n,o)}class r6 extends Pb{constructor(s,n,r,o,c){super(s,n,r,o,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let A=0;A<s.length;A++){let h=s[A];if(typeof h=="string"&&(h=h.trim(),Rb(h))){const l=r5(h,n.current);l!==void 0&&(s[A]=l),A===s.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!a5.has(r)||s.length!==2)return;const[o,c]=s,p=Ow(o),f=Ow(c);if(p!==f)if(Tw(p)&&Tw(f))for(let A=0;A<s.length;A++){const h=s[A];typeof h=="string"&&(s[A]=parseFloat(h))}else Vu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:n}=this,r=[];for(let o=0;o<s.length;o++)(s[o]===null||YQ(s[o]))&&r.push(o);r.length&&n6(s,r,n)}measureInitialState(){const{element:s,unresolvedKeyframes:n,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vu[r](s.measureViewportBox(),window.getComputedStyle(s.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&s.getValue(r,o).jump(o,!1)}measureEndState(){const{element:s,name:n,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const o=s.getValue(n);o&&o.jump(this.measuredOrigin,!1);const c=r.length-1,p=r[c];r[c]=Vu[n](s.measureViewportBox(),window.getComputedStyle(s.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,A])=>{s.getValue(f).set(A)}),this.resolveNoneKeyframes()}}function a6(t,s,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const o=n?.[t]??r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const A5=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function d5(t){return CC(t)&&"offsetHeight"in t}const Lw=30,i6=t=>!isNaN(parseFloat(t));class o6{constructor(s,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const o=ml.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=n.owner}setCurrent(s){this.current=s,this.updatedAt=ml.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=i6(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,n){this.events[s]||(this.events[s]=new Eb);const r=this.events[s].add(n);return s==="change"?()=>{r(),ti.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,n){this.passiveEffect=s,this.stopPassiveEffect=n}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,n=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=ml.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>Lw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Lw);return TC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(s){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=s(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cf(t,s){return new o6(t,s)}const{schedule:Kb}=PC(queueMicrotask,!1),Ic={x:!1,y:!1};function u5(){return Ic.x||Ic.y}function l6(t){return t==="x"||t==="y"?Ic[t]?null:(Ic[t]=!0,()=>{Ic[t]=!1}):Ic.x||Ic.y?null:(Ic.x=Ic.y=!0,()=>{Ic.x=Ic.y=!1})}function h5(t,s){const n=a6(t),r=new AbortController,o={passive:!0,...s,signal:r.signal};return[n,o,()=>r.abort()]}function Dw(t){return!(t.pointerType==="touch"||u5())}function c6(t,s,n={}){const[r,o,c]=h5(t,n),p=f=>{if(!Dw(f))return;const{target:A}=f,h=s(A,f);if(typeof h!="function"||!A)return;const l=g=>{Dw(g)&&(h(g),A.removeEventListener("pointerleave",l))};A.addEventListener("pointerleave",l,o)};return r.forEach(f=>{f.addEventListener("pointerenter",p,o)}),c}const f5=(t,s)=>s?t===s?!0:f5(t,s.parentElement):!1,zb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,A6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function d6(t){return A6.has(t.tagName)||t.tabIndex!==-1}const Rg=new WeakSet;function Qw(t){return s=>{s.key==="Enter"&&t(s)}}function qx(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const u6=(t,s)=>{const n=t.currentTarget;if(!n)return;const r=Qw(()=>{if(Rg.has(n))return;qx(n,"down");const o=Qw(()=>{qx(n,"up")}),c=()=>qx(n,"cancel");n.addEventListener("keyup",o,s),n.addEventListener("blur",c,s)});n.addEventListener("keydown",r,s),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),s)};function Mw(t){return zb(t)&&!u5()}function h6(t,s,n={}){const[r,o,c]=h5(t,n),p=f=>{const A=f.currentTarget;if(!Mw(f))return;Rg.add(A);const h=s(A,f),l=(m,N)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),Rg.has(A)&&Rg.delete(A),Mw(m)&&typeof h=="function"&&h(m,{success:N})},g=m=>{l(m,A===window||A===document||n.useGlobalTarget||f5(A,m.target))},v=m=>{l(m,!1)};window.addEventListener("pointerup",g,o),window.addEventListener("pointercancel",v,o)};return r.forEach(f=>{(n.useGlobalTarget?window:f).addEventListener("pointerdown",p,o),d5(f)&&(f.addEventListener("focus",h=>u6(h,o)),!d6(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),c}function p5(t){return CC(t)&&"ownerSVGElement"in t}function f6(t){return p5(t)&&t.tagName==="svg"}const _o=t=>!!(t&&t.getVelocity),p6=[...o5,zi,Zd],m6=t=>p6.find(i5(t)),Gb=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function _w(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function g6(...t){return s=>{let n=!1;const r=t.map(o=>{const c=_w(o,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let o=0;o<r.length;o++){const c=r[o];typeof c=="function"?c():_w(t[o],null)}}}}function y6(...t){return C.useCallback(g6(...t),t)}class x6 extends C.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=d5(r)&&r.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=o-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function v6({children:t,isPresent:s,anchorX:n,root:r}){const o=C.useId(),c=C.useRef(null),p=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=C.useContext(Gb),A=y6(c,t?.ref);return C.useInsertionEffect(()=>{const{width:h,height:l,top:g,left:v,right:m}=p.current;if(s||!c.current||!h||!l)return;const N=n==="left"?`left: ${v}`:`right: ${m}`;c.current.dataset.motionPopId=o;const w=document.createElement("style");f&&(w.nonce=f);const E=r??document.head;return E.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${l}px !important;
            ${N}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(w)&&E.removeChild(w)}},[s]),e.jsx(x6,{isPresent:s,childRef:c,sizeRef:p,children:C.cloneElement(t,{ref:A})})}const b6=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:c,mode:p,anchorX:f,root:A})=>{const h=jb(j6),l=C.useId();let g=!0,v=C.useMemo(()=>(g=!1,{id:l,initial:s,isPresent:n,custom:o,onExitComplete:m=>{h.set(m,!0);for(const N of h.values())if(!N)return;r&&r()},register:m=>(h.set(m,!1),()=>h.delete(m))}),[n,h,r]);return c&&g&&(v={...v}),C.useMemo(()=>{h.forEach((m,N)=>h.set(N,!1))},[n]),C.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),p==="popLayout"&&(t=e.jsx(v6,{isPresent:n,anchorX:f,root:A,children:t})),e.jsx(Ty.Provider,{value:v,children:t})};function j6(){return new Map}function m5(t=!0){const s=C.useContext(Ty);if(s===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=s,c=C.useId();C.useEffect(()=>{if(t)return o(c)},[t]);const p=C.useCallback(()=>t&&r&&r(c),[c,r,t]);return!n&&r?[!1,p]:[!0]}const Ag=t=>t.key||"";function Pw(t){const s=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&s.push(n)}),s}const gl=({children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:c="sync",propagate:p=!1,anchorX:f="left",root:A})=>{const[h,l]=m5(p),g=C.useMemo(()=>Pw(t),[t]),v=p&&!h?[]:g.map(Ag),m=C.useRef(!0),N=C.useRef(g),w=jb(()=>new Map),[E,F]=C.useState(g),[M,k]=C.useState(g);BC(()=>{m.current=!1,N.current=g;for(let ee=0;ee<M.length;ee++){const V=Ag(M[ee]);v.includes(V)?w.delete(V):w.get(V)!==!0&&w.set(V,!1)}},[M,v.length,v.join("-")]);const K=[];if(g!==E){let ee=[...g];for(let V=0;V<M.length;V++){const X=M[V],J=Ag(X);v.includes(J)||(ee.splice(V,0,X),K.push(X))}return c==="wait"&&K.length&&(ee=K),k(Pw(ee)),F(g),null}const{forceRender:G}=C.useContext(bb);return e.jsx(e.Fragment,{children:M.map(ee=>{const V=Ag(ee),X=p&&!h?!1:g===M||v.includes(V),J=()=>{if(w.has(V))w.set(V,!0);else return;let he=!0;w.forEach(q=>{q||(he=!1)}),he&&(G?.(),k(N.current),p&&l?.(),r&&r())};return e.jsx(b6,{isPresent:X,initial:!m.current||n?void 0:!1,custom:s,presenceAffectsLayout:o,mode:c,root:A,onExitComplete:X?void 0:J,anchorX:f,children:ee},V)})})},g5=C.createContext({strict:!1}),kw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Af={};for(const t in kw)Af[t]={isEnabled:s=>kw[t].some(n=>!!s[n])};function w6(t){for(const s in t)Af[s]={...Af[s],...t[s]}}const S6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ny(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||S6.has(t)}let y5=t=>!ny(t);function B6(t){typeof t=="function"&&(y5=s=>s.startsWith("on")?!ny(s):t(s))}try{B6(require("@emotion/is-prop-valid").default)}catch{}function N6(t,s,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(y5(o)||n===!0&&ny(o)||!s&&!ny(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}const Fy=C.createContext({});function Iy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $p(t){return typeof t=="string"||Array.isArray(t)}const Vb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$b=["initial",...Vb];function Ry(t){return Iy(t.animate)||$b.some(s=>$p(t[s]))}function x5(t){return!!(Ry(t)||t.variants)}function C6(t,s){if(Ry(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$p(n)?n:void 0,animate:$p(r)?r:void 0}}return t.inherit!==!1?s:{}}function E6(t){const{initial:s,animate:n}=C6(t,C.useContext(Fy));return C.useMemo(()=>({initial:s,animate:n}),[Hw(s),Hw(n)])}function Hw(t){return Array.isArray(t)?t.join(" "):t}const qp={};function T6(t){for(const s in t)qp[s]=t[s],Ib(s)&&(qp[s].isCSSVariable=!0)}function v5(t,{layout:s,layoutId:n}){return xf.has(t)||t.startsWith("origin")||(s||n!==void 0)&&(!!qp[t]||t==="opacity")}const F6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},I6=yf.length;function R6(t,s,n){let r="",o=!0;for(let c=0;c<I6;c++){const p=yf[c],f=t[p];if(f===void 0)continue;let A=!0;if(typeof f=="number"?A=f===(p.startsWith("scale")?1:0):A=parseFloat(f)===0,!A||n){const h=A5(f,Hb[p]);if(!A){o=!1;const l=F6[p]||p;r+=`${l}(${h}) `}n&&(s[p]=h)}}return r=r.trim(),n?r=n(s,o?"":r):o&&(r="none"),r}function qb(t,s,n){const{style:r,vars:o,transformOrigin:c}=t;let p=!1,f=!1;for(const A in s){const h=s[A];if(xf.has(A)){p=!0;continue}else if(Ib(A)){o[A]=h;continue}else{const l=A5(h,Hb[A]);A.startsWith("origin")?(f=!0,c[A]=l):r[A]=l}}if(s.transform||(p||n?r.transform=R6(s,t.transform,n):r.transform&&(r.transform="none")),f){const{originX:A="50%",originY:h="50%",originZ:l=0}=c;r.transformOrigin=`${A} ${h} ${l}`}}const Wb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function b5(t,s,n){for(const r in s)!_o(s[r])&&!v5(r,n)&&(t[r]=s[r])}function O6({transformTemplate:t},s){return C.useMemo(()=>{const n=Wb();return qb(n,s,t),Object.assign({},n.vars,n.style)},[s])}function U6(t,s){const n=t.style||{},r={};return b5(r,n,t),Object.assign(r,O6(t,s)),r}function L6(t,s){const n={},r=U6(t,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const D6={offset:"stroke-dashoffset",array:"stroke-dasharray"},Q6={offset:"strokeDashoffset",array:"strokeDasharray"};function M6(t,s,n=1,r=0,o=!0){t.pathLength=1;const c=o?D6:Q6;t[c.offset]=On.transform(-r);const p=On.transform(s),f=On.transform(n);t[c.array]=`${p} ${f}`}function j5(t,{attrX:s,attrY:n,attrScale:r,pathLength:o,pathSpacing:c=1,pathOffset:p=0,...f},A,h,l){if(qb(t,f,h),A){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v}=t;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=l?.transformBox??"fill-box",delete g.transformBox),s!==void 0&&(g.x=s),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&M6(g,o,c,p,!1)}const w5=()=>({...Wb(),attrs:{}}),S5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _6(t,s,n,r){const o=C.useMemo(()=>{const c=w5();return j5(c,s,S5(r),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};b5(c,t.style,t),o.style={...c,...o.style}}return o}const P6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yb(t){return typeof t!="string"||t.includes("-")?!1:!!(P6.indexOf(t)>-1||/[A-Z]/u.test(t))}function k6(t,s,n,{latestValues:r},o,c=!1){const f=(Yb(t)?_6:L6)(s,r,o,t),A=N6(s,typeof t=="string",c),h=t!==C.Fragment?{...A,...f,ref:n}:{},{children:l}=s,g=C.useMemo(()=>_o(l)?l.get():l,[l]);return C.createElement(t,{...h,children:g})}function Kw(t){const s=[{},{}];return t?.values.forEach((n,r)=>{s[0][r]=n.get(),s[1][r]=n.getVelocity()}),s}function Xb(t,s,n,r){if(typeof s=="function"){const[o,c]=Kw(r);s=s(n!==void 0?n:t.custom,o,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[o,c]=Kw(r);s=s(n!==void 0?n:t.custom,o,c)}return s}function Og(t){return _o(t)?t.get():t}function H6({scrapeMotionValuesFromProps:t,createRenderState:s},n,r,o){return{latestValues:K6(n,r,o,t),renderState:s()}}function K6(t,s,n,r){const o={},c=r(t,{});for(const v in c)o[v]=Og(c[v]);let{initial:p,animate:f}=t;const A=Ry(t),h=x5(t);s&&h&&!A&&t.inherit!==!1&&(p===void 0&&(p=s.initial),f===void 0&&(f=s.animate));let l=n?n.initial===!1:!1;l=l||p===!1;const g=l?f:p;if(g&&typeof g!="boolean"&&!Iy(g)){const v=Array.isArray(g)?g:[g];for(let m=0;m<v.length;m++){const N=Xb(t,v[m]);if(N){const{transitionEnd:w,transition:E,...F}=N;for(const M in F){let k=F[M];if(Array.isArray(k)){const K=l?k.length-1:0;k=k[K]}k!==null&&(o[M]=k)}for(const M in w)o[M]=w[M]}}}return o}const B5=t=>(s,n)=>{const r=C.useContext(Fy),o=C.useContext(Ty),c=()=>H6(t,s,r,o);return n?c():jb(c)};function Jb(t,s,n){const{style:r}=t,o={};for(const c in r)(_o(r[c])||s.style&&_o(s.style[c])||v5(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(o[c]=r[c]);return o}const z6=B5({scrapeMotionValuesFromProps:Jb,createRenderState:Wb});function N5(t,s,n){const r=Jb(t,s,n);for(const o in t)if(_o(t[o])||_o(s[o])){const c=yf.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[c]=t[o]}return r}const G6=B5({scrapeMotionValuesFromProps:N5,createRenderState:w5}),V6=Symbol.for("motionComponentSymbol");function qh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $6(t,s,n){return C.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),n&&(typeof n=="function"?n(r):qh(n)&&(n.current=r))},[s])}const Zb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),q6="framerAppearId",C5="data-"+Zb(q6),E5=C.createContext({});function W6(t,s,n,r,o){const{visualElement:c}=C.useContext(Fy),p=C.useContext(g5),f=C.useContext(Ty),A=C.useContext(Gb).reducedMotion,h=C.useRef(null);r=r||p.renderer,!h.current&&r&&(h.current=r(t,{visualState:s,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:A}));const l=h.current,g=C.useContext(E5);l&&!l.projection&&o&&(l.type==="html"||l.type==="svg")&&Y6(h.current,n,o,g);const v=C.useRef(!1);C.useInsertionEffect(()=>{l&&v.current&&l.update(n,f)});const m=n[C5],N=C.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return BC(()=>{l&&(v.current=!0,window.MotionIsMounted=!0,l.updateFeatures(),l.scheduleRenderMicrotask(),N.current&&l.animationState&&l.animationState.animateChanges())}),C.useEffect(()=>{l&&(!N.current&&l.animationState&&l.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),N.current=!1),l.enteringChildren=void 0)}),l}function Y6(t,s,n,r){const{layoutId:o,layout:c,drag:p,dragConstraints:f,layoutScroll:A,layoutRoot:h,layoutCrossfade:l}=s;t.projection=new n(t.latestValues,s["data-framer-portal-id"]?void 0:T5(t.parent)),t.projection.setOptions({layoutId:o,layout:c,alwaysMeasureLayout:!!p||f&&qh(f),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,crossfade:l,layoutScroll:A,layoutRoot:h})}function T5(t){if(t)return t.options.allowProjection!==!1?t.projection:T5(t.parent)}function Wx(t,{forwardMotionProps:s=!1}={},n,r){n&&w6(n);const o=Yb(t)?G6:z6;function c(f,A){let h;const l={...C.useContext(Gb),...f,layoutId:X6(f)},{isStatic:g}=l,v=E6(f),m=o(f,g);if(!g&&wb){J6();const N=Z6(l);h=N.MeasureLayout,v.visualElement=W6(t,m,l,r,N.ProjectionNode)}return e.jsxs(Fy.Provider,{value:v,children:[h&&v.visualElement?e.jsx(h,{visualElement:v.visualElement,...l}):null,k6(t,f,$6(m,v.visualElement,A),m,g,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const p=C.forwardRef(c);return p[V6]=t,p}function X6({layoutId:t}){const s=C.useContext(bb).id;return s&&t!==void 0?s+"-"+t:t}function J6(t,s){C.useContext(g5).strict}function Z6(t){const{drag:s,layout:n}=Af;if(!s&&!n)return{};const r={...s,...n};return{MeasureLayout:s?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function eM(t,s){if(typeof Proxy>"u")return Wx;const n=new Map,r=(c,p)=>Wx(c,p,t,s),o=(c,p)=>r(c,p);return new Proxy(o,{get:(c,p)=>p==="create"?r:(n.has(p)||n.set(p,Wx(p,void 0,t,s)),n.get(p))})}function F5({top:t,left:s,right:n,bottom:r}){return{x:{min:s,max:n},y:{min:t,max:r}}}function tM({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function sM(t,s){if(!s)return t;const n=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Yx(t){return t===void 0||t===1}function vv({scale:t,scaleX:s,scaleY:n}){return!Yx(t)||!Yx(s)||!Yx(n)}function Mu(t){return vv(t)||I5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function I5(t){return zw(t.x)||zw(t.y)}function zw(t){return t&&t!=="0%"}function ry(t,s,n){const r=t-n,o=s*r;return n+o}function Gw(t,s,n,r,o){return o!==void 0&&(t=ry(t,o,r)),ry(t,n,r)+s}function bv(t,s=0,n=1,r,o){t.min=Gw(t.min,s,n,r,o),t.max=Gw(t.max,s,n,r,o)}function R5(t,{x:s,y:n}){bv(t.x,s.translate,s.scale,s.originPoint),bv(t.y,n.translate,n.scale,n.originPoint)}const Vw=.999999999999,$w=1.0000000000001;function nM(t,s,n,r=!1){const o=n.length;if(!o)return;s.x=s.y=1;let c,p;for(let f=0;f<o;f++){c=n[f],p=c.projectionDelta;const{visualElement:A}=c.options;A&&A.props.style&&A.props.style.display==="contents"||(r&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Yh(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),p&&(s.x*=p.x.scale,s.y*=p.y.scale,R5(t,p)),r&&Mu(c.latestValues)&&Yh(t,c.latestValues))}s.x<$w&&s.x>Vw&&(s.x=1),s.y<$w&&s.y>Vw&&(s.y=1)}function Wh(t,s){t.min=t.min+s,t.max=t.max+s}function qw(t,s,n,r,o=.5){const c=li(t.min,t.max,o);bv(t,s,n,c,r)}function Yh(t,s){qw(t.x,s.x,s.scaleX,s.scale,s.originX),qw(t.y,s.y,s.scaleY,s.scale,s.originY)}function O5(t,s){return F5(sM(t.getBoundingClientRect(),s))}function rM(t,s,n){const r=O5(t,n),{scroll:o}=s;return o&&(Wh(r.x,o.offset.x),Wh(r.y,o.offset.y)),r}const Ww=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xh=()=>({x:Ww(),y:Ww()}),Yw=()=>({min:0,max:0}),Ti=()=>({x:Yw(),y:Yw()}),jv={current:null},U5={current:!1};function aM(){if(U5.current=!0,!!wb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>jv.current=t.matches;t.addEventListener("change",s),s()}else jv.current=!1}const iM=new WeakMap;function oM(t,s,n){for(const r in s){const o=s[r],c=n[r];if(_o(o))t.addValue(r,o);else if(_o(c))t.addValue(r,cf(o,{owner:t}));else if(c!==o)if(t.hasValue(r)){const p=t.getValue(r);p.liveStyle===!0?p.jump(o):p.hasAnimated||p.set(o)}else{const p=t.getStaticValue(r);t.addValue(r,cf(p!==void 0?p:o,{owner:t}))}}for(const r in n)s[r]===void 0&&t.removeValue(r);return s}const Xw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lM{scrapeMotionValuesFromProps(s,n,r){return{}}constructor({parent:s,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:c,visualState:p},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ml.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ti.render(this.render,!1,!0))};const{latestValues:A,renderState:h}=p;this.latestValues=A,this.baseTarget={...A},this.initialValues=n.initial?{...A}:{},this.renderState=h,this.parent=s,this.props=n,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=o,this.options=f,this.blockInitialAnimation=!!c,this.isControllingVariants=Ry(n),this.isVariantNode=x5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:l,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in g){const m=g[v];A[v]!==void 0&&_o(m)&&m.set(A[v])}}mount(s){this.current=s,iM.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),U5.current||aM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Jd(this.notifyUpdate),Jd(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,n){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=xf.has(s);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",p=>{this.latestValues[s]=p,this.props.onUpdate&&ti.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,s,n)),this.valueSubscriptions.set(s,()=>{o(),c&&c(),n.owner&&n.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Af){const n=Af[s];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[s]&&o&&r(this.props)&&(this.features[s]=new o(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ti()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,n){this.latestValues[s]=n}update(s,n){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Xw.length;r++){const o=Xw[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const c="on"+o,p=s[c];p&&(this.propEventSubscriptions[o]=this.on(o,p))}this.prevMotionValues=oM(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(s),()=>n.variantChildren.delete(s)}addValue(s,n){const r=this.values.get(s);n!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,n),this.values.set(s,n),this.latestValues[s]=n.get())}removeValue(s){this.values.delete(s);const n=this.valueSubscriptions.get(s);n&&(n(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,n){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&n!==void 0&&(r=cf(n===null?void 0:n,{owner:this}),this.addValue(s,r)),r}readValue(s,n){let r=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return r!=null&&(typeof r=="string"&&(NC(r)||EC(r))?r=parseFloat(r):!m6(r)&&Zd.test(n)&&(r=c5(s,n)),this.setBaseTarget(s,_o(r)?r.get():r)),_o(r)?r.get():r}setBaseTarget(s,n){this.baseTarget[s]=n}getBaseTarget(s){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=Xb(this.props,n,this.presenceContext?.custom);c&&(r=c[s])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,s);return o!==void 0&&!_o(o)?o:this.initialValues[s]!==void 0&&r===void 0?void 0:this.baseTarget[s]}on(s,n){return this.events[s]||(this.events[s]=new Eb),this.events[s].add(n)}notify(s,...n){this.events[s]&&this.events[s].notify(...n)}scheduleRenderMicrotask(){Kb.render(this.render)}}class L5 extends lM{constructor(){super(...arguments),this.KeyframeResolver=r6}sortInstanceNodePosition(s,n){return s.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(s,n){return s.style?s.style[n]:void 0}removeValueFromRenderState(s,{vars:n,style:r}){delete n[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;_o(s)&&(this.childSubscription=s.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function D5(t,{style:s,vars:n},r,o){const c=t.style;let p;for(p in s)c[p]=s[p];o?.applyProjectionStyles(c,r);for(p in n)c.setProperty(p,n[p])}function cM(t){return window.getComputedStyle(t)}class AM extends L5{constructor(){super(...arguments),this.type="html",this.renderInstance=D5}readValueFromInstance(s,n){if(xf.has(n))return this.projection?.isProjecting?hv(n):wQ(s,n);{const r=cM(s),o=(Ib(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(s,{transformPagePoint:n}){return O5(s,n)}build(s,n,r){qb(s,n,r.transformTemplate)}scrapeMotionValuesFromProps(s,n,r){return Jb(s,n,r)}}const Q5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dM(t,s,n,r){D5(t,s,void 0,r);for(const o in s.attrs)t.setAttribute(Q5.has(o)?o:Zb(o),s.attrs[o])}class uM extends L5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ti}getBaseTargetFromProps(s,n){return s[n]}readValueFromInstance(s,n){if(xf.has(n)){const r=l5(n);return r&&r.default||0}return n=Q5.has(n)?n:Zb(n),s.getAttribute(n)}scrapeMotionValuesFromProps(s,n,r){return N5(s,n,r)}build(s,n,r){j5(s,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(s,n,r,o){dM(s,n,r,o)}mount(s){this.isSVGTag=S5(s.tagName),super.mount(s)}}const hM=(t,s)=>Yb(t)?new uM(s):new AM(s,{allowProjection:t!==C.Fragment});function ef(t,s,n){const r=t.getProps();return Xb(r,s,n!==void 0?n:r.custom,t)}const wv=t=>Array.isArray(t);function fM(t,s,n){t.hasValue(s)?t.getValue(s).set(n):t.addValue(s,cf(n))}function pM(t){return wv(t)?t[t.length-1]||0:t}function mM(t,s){const n=ef(t,s);let{transitionEnd:r={},transition:o={},...c}=n||{};c={...c,...r};for(const p in c){const f=pM(c[p]);fM(t,p,f)}}function gM(t){return!!(_o(t)&&t.add)}function Sv(t,s){const n=t.getValue("willChange");if(gM(n))return n.add(s);if(!n&&ZA.WillChange){const r=new ZA.WillChange("auto");t.addValue("willChange",r),r.add(s)}}function M5(t){return t.props[C5]}const yM=t=>t!==null;function xM(t,{repeat:s,repeatType:n="loop"},r){const o=t.filter(yM),c=s&&n!=="loop"&&s%2===1?0:o.length-1;return o[c]}const vM={type:"spring",stiffness:500,damping:25,restSpeed:10},bM=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jM={type:"keyframes",duration:.8},wM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SM=(t,{keyframes:s})=>s.length>2?jM:xf.has(t)?t.startsWith("scale")?bM(s[1]):vM:wM;function BM({when:t,delay:s,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:c,repeatType:p,repeatDelay:f,from:A,elapsed:h,...l}){return!!Object.keys(l).length}const e1=(t,s,n,r={},o,c)=>p=>{const f=kb(r,t)||{},A=f.delay||r.delay||0;let{elapsed:h=0}=r;h=h-gA(A);const l={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:s.getVelocity(),...f,delay:-h,onUpdate:v=>{s.set(v),f.onUpdate&&f.onUpdate(v)},onComplete:()=>{p(),f.onComplete&&f.onComplete()},name:t,motionValue:s,element:c?void 0:o};BM(f)||Object.assign(l,SM(t,l)),l.duration&&(l.duration=gA(l.duration)),l.repeatDelay&&(l.repeatDelay=gA(l.repeatDelay)),l.from!==void 0&&(l.keyframes[0]=l.from);let g=!1;if((l.type===!1||l.duration===0&&!l.repeatDelay)&&(yv(l),l.delay===0&&(g=!0)),(ZA.instantAnimations||ZA.skipAnimations)&&(g=!0,yv(l),l.delay=0),l.allowFlatten=!f.type&&!f.ease,g&&!c&&s.get()!==void 0){const v=xM(l.keyframes,f);if(v!==void 0){ti.update(()=>{l.onUpdate(v),l.onComplete()});return}}return f.isSync?new _b(l):new VQ(l)};function NM({protectedKeys:t,needsAnimating:s},n){const r=t.hasOwnProperty(n)&&s[n]!==!0;return s[n]=!1,r}function _5(t,s,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:p,...f}=s;r&&(c=r);const A=[],h=o&&t.animationState&&t.animationState.getState()[o];for(const l in f){const g=t.getValue(l,t.latestValues[l]??null),v=f[l];if(v===void 0||h&&NM(h,l))continue;const m={delay:n,...kb(c||{},l)},N=g.get();if(N!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===N&&!m.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const F=M5(t);if(F){const M=window.MotionHandoffAnimation(F,l,ti);M!==null&&(m.startTime=M,w=!0)}}Sv(t,l),g.start(e1(l,g,v,t.shouldReduceMotion&&a5.has(l)?{type:!1}:m,t,w));const E=g.animation;E&&A.push(E)}return p&&Promise.all(A).then(()=>{ti.update(()=>{p&&mM(t,p)})}),A}function P5(t,s,n,r=0,o=1){const c=Array.from(t).sort((h,l)=>h.sortNodePosition(l)).indexOf(s),p=t.size,f=(p-1)*r;return typeof n=="function"?n(c,p):o===1?c*r:f-c*r}function Bv(t,s,n={}){const r=ef(t,s,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const c=r?()=>Promise.all(_5(t,r,n)):()=>Promise.resolve(),p=t.variantChildren&&t.variantChildren.size?(A=0)=>{const{delayChildren:h=0,staggerChildren:l,staggerDirection:g}=o;return CM(t,s,A,h,l,g,n)}:()=>Promise.resolve(),{when:f}=o;if(f){const[A,h]=f==="beforeChildren"?[c,p]:[p,c];return A().then(()=>h())}else return Promise.all([c(),p(n.delay)])}function CM(t,s,n=0,r=0,o=0,c=1,p){const f=[];for(const A of t.variantChildren)A.notify("AnimationStart",s),f.push(Bv(A,s,{...p,delay:n+(typeof r=="function"?0:r)+P5(t.variantChildren,A,r,o,c)}).then(()=>A.notify("AnimationComplete",s)));return Promise.all(f)}function EM(t,s,n={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const o=s.map(c=>Bv(t,c,n));r=Promise.all(o)}else if(typeof s=="string")r=Bv(t,s,n);else{const o=typeof s=="function"?ef(t,s,n.custom):s;r=Promise.all(_5(t,o,n))}return r.then(()=>{t.notify("AnimationComplete",s)})}function k5(t,s){if(!Array.isArray(s))return!1;const n=s.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(s[r]!==t[r])return!1;return!0}const TM=$b.length;function H5(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?H5(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const s={};for(let n=0;n<TM;n++){const r=$b[n],o=t.props[r];($p(o)||o===!1)&&(s[r]=o)}return s}const FM=[...Vb].reverse(),IM=Vb.length;function RM(t){return s=>Promise.all(s.map(({animation:n,options:r})=>EM(t,n,r)))}function OM(t){let s=RM(t),n=Jw(),r=!0;const o=A=>(h,l)=>{const g=ef(t,l,A==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:v,transitionEnd:m,...N}=g;h={...h,...N,...m}}return h};function c(A){s=A(t)}function p(A){const{props:h}=t,l=H5(t.parent)||{},g=[],v=new Set;let m={},N=1/0;for(let E=0;E<IM;E++){const F=FM[E],M=n[F],k=h[F]!==void 0?h[F]:l[F],K=$p(k),G=F===A?M.isActive:null;G===!1&&(N=E);let ee=k===l[F]&&k!==h[F]&&K;if(ee&&r&&t.manuallyAnimateOnMount&&(ee=!1),M.protectedKeys={...m},!M.isActive&&G===null||!k&&!M.prevProp||Iy(k)||typeof k=="boolean")continue;const V=UM(M.prevProp,k);let X=V||F===A&&M.isActive&&!ee&&K||E>N&&K,J=!1;const he=Array.isArray(k)?k:[k];let q=he.reduce(o(F),{});G===!1&&(q={});const{prevResolvedValues:ie={}}=M,Ae={...ie,...q},ce=re=>{X=!0,v.has(re)&&(J=!0,v.delete(re)),M.needsAnimating[re]=!0;const se=t.getValue(re);se&&(se.liveStyle=!1)};for(const re in Ae){const se=q[re],je=ie[re];if(m.hasOwnProperty(re))continue;let De=!1;wv(se)&&wv(je)?De=!k5(se,je):De=se!==je,De?se!=null?ce(re):v.add(re):se!==void 0&&v.has(re)?ce(re):M.protectedKeys[re]=!0}M.prevProp=k,M.prevResolvedValues=q,M.isActive&&(m={...m,...q}),r&&t.blockInitialAnimation&&(X=!1);const oe=ee&&V;X&&(!oe||J)&&g.push(...he.map(re=>{const se={type:F};if(typeof re=="string"&&r&&!oe&&t.manuallyAnimateOnMount&&t.parent){const{parent:je}=t,De=ef(je,re);if(je.enteringChildren&&De){const{delayChildren:ge}=De.transition||{};se.delay=P5(je.enteringChildren,t,ge)}}return{animation:re,options:se}}))}if(v.size){const E={};if(typeof h.initial!="boolean"){const F=ef(t,Array.isArray(h.initial)?h.initial[0]:h.initial);F&&F.transition&&(E.transition=F.transition)}v.forEach(F=>{const M=t.getBaseTarget(F),k=t.getValue(F);k&&(k.liveStyle=!0),E[F]=M??null}),g.push({animation:E})}let w=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?s(g):Promise.resolve()}function f(A,h){if(n[A].isActive===h)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(A,h)),n[A].isActive=h;const l=p(A);for(const g in n)n[g].protectedKeys={};return l}return{animateChanges:p,setActive:f,setAnimateFunction:c,getState:()=>n,reset:()=>{n=Jw()}}}function UM(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!k5(s,t):!1}function Qu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jw(){return{animate:Qu(!0),whileInView:Qu(),whileHover:Qu(),whileTap:Qu(),whileDrag:Qu(),whileFocus:Qu(),exit:Qu()}}class tu{constructor(s){this.isMounted=!1,this.node=s}update(){}}class LM extends tu{constructor(s){super(s),s.animationState||(s.animationState=OM(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Iy(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:n}=this.node.prevProps||{};s!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let DM=0;class QM extends tu{constructor(){super(...arguments),this.id=DM++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const o=this.node.animationState.setActive("exit",!s);n&&!s&&o.then(()=>{n(this.id)})}mount(){const{register:s,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const MM={animation:{Feature:LM},exit:{Feature:QM}};function Wp(t,s,n,r={passive:!0}){return t.addEventListener(s,n,r),()=>t.removeEventListener(s,n)}function rm(t){return{point:{x:t.pageX,y:t.pageY}}}const _M=t=>s=>zb(s)&&t(s,rm(s));function Tp(t,s,n,r){return Wp(t,s,_M(n),r)}const K5=1e-4,PM=1-K5,kM=1+K5,z5=.01,HM=0-z5,KM=0+z5;function Zo(t){return t.max-t.min}function zM(t,s,n){return Math.abs(t-s)<=n}function Zw(t,s,n,r=.5){t.origin=r,t.originPoint=li(s.min,s.max,t.origin),t.scale=Zo(n)/Zo(s),t.translate=li(n.min,n.max,t.origin)-t.originPoint,(t.scale>=PM&&t.scale<=kM||isNaN(t.scale))&&(t.scale=1),(t.translate>=HM&&t.translate<=KM||isNaN(t.translate))&&(t.translate=0)}function Fp(t,s,n,r){Zw(t.x,s.x,n.x,r?r.originX:void 0),Zw(t.y,s.y,n.y,r?r.originY:void 0)}function e2(t,s,n){t.min=n.min+s.min,t.max=t.min+Zo(s)}function GM(t,s,n){e2(t.x,s.x,n.x),e2(t.y,s.y,n.y)}function t2(t,s,n){t.min=s.min-n.min,t.max=t.min+Zo(s)}function Ip(t,s,n){t2(t.x,s.x,n.x),t2(t.y,s.y,n.y)}function oc(t){return[t("x"),t("y")]}const G5=({current:t})=>t?t.ownerDocument.defaultView:null,s2=(t,s)=>Math.abs(t-s);function VM(t,s){const n=s2(t.x,s.x),r=s2(t.y,s.y);return Math.sqrt(n**2+r**2)}class V5{constructor(s,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:c=!1,distanceThreshold:p=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Jx(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,N=VM(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!N)return;const{point:w}=v,{timestamp:E}=fo;this.history.push({...w,timestamp:E});const{onStart:F,onMove:M}=this.handlers;m||(F&&F(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,m)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Xx(m,this.transformPagePoint),ti.update(this.updatePoint,!0)},this.handlePointerUp=(v,m)=>{this.end();const{onEnd:N,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=Jx(v.type==="pointercancel"?this.lastMoveEventInfo:Xx(m,this.transformPagePoint),this.history);this.startEvent&&N&&N(v,F),w&&w(v,F)},!zb(s))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=p,this.contextWindow=o||window;const f=rm(s),A=Xx(f,this.transformPagePoint),{point:h}=A,{timestamp:l}=fo;this.history=[{...h,timestamp:l}];const{onSessionStart:g}=n;g&&g(s,Jx(A,this.history)),this.removeListeners=tm(Tp(this.contextWindow,"pointermove",this.handlePointerMove),Tp(this.contextWindow,"pointerup",this.handlePointerUp),Tp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Jd(this.updatePoint)}}function Xx(t,s){return s?{point:s(t.point)}:t}function n2(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Jx({point:t},s){return{point:t,delta:n2(t,$5(s)),offset:n2(t,$M(s)),velocity:qM(s,.1)}}function $M(t){return t[0]}function $5(t){return t[t.length-1]}function qM(t,s){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=$5(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>gA(s)));)n--;if(!r)return{x:0,y:0};const c=cc(o.timestamp-r.timestamp);if(c===0)return{x:0,y:0};const p={x:(o.x-r.x)/c,y:(o.y-r.y)/c};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function WM(t,{min:s,max:n},r){return s!==void 0&&t<s?t=r?li(s,t,r.min):Math.max(t,s):n!==void 0&&t>n&&(t=r?li(n,t,r.max):Math.min(t,n)),t}function r2(t,s,n){return{min:s!==void 0?t.min+s:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function YM(t,{top:s,left:n,bottom:r,right:o}){return{x:r2(t.x,n,o),y:r2(t.y,s,r)}}function a2(t,s){let n=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function XM(t,s){return{x:a2(t.x,s.x),y:a2(t.y,s.y)}}function JM(t,s){let n=.5;const r=Zo(t),o=Zo(s);return o>r?n=zp(s.min,s.max-r,t.min):r>o&&(n=zp(t.min,t.max-o,s.min)),JA(0,1,n)}function ZM(t,s){const n={};return s.min!==void 0&&(n.min=s.min-t.min),s.max!==void 0&&(n.max=s.max-t.min),n}const Nv=.35;function e_(t=Nv){return t===!1?t=0:t===!0&&(t=Nv),{x:i2(t,"left","right"),y:i2(t,"top","bottom")}}function i2(t,s,n){return{min:o2(t,s),max:o2(t,n)}}function o2(t,s){return typeof t=="number"?t:t[s]||0}const t_=new WeakMap;class s_{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ti(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const c=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rm(g).point)},p=(g,v)=>{const{drag:m,dragPropagation:N,onDragStart:w}=this.getProps();if(m&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=l6(m),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oc(F=>{let M=this.getAxisMotionValue(F).get()||0;if(yA.test(M)){const{projection:k}=this.visualElement;if(k&&k.layout){const K=k.layout.layoutBox[F];K&&(M=Zo(K)*(parseFloat(M)/100))}}this.originPoint[F]=M}),w&&ti.postRender(()=>w(g,v)),Sv(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},f=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:m,dragDirectionLock:N,onDirectionLock:w,onDrag:E}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:F}=v;if(N&&this.currentDirection===null){this.currentDirection=n_(F),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",v.point,F),this.updateAxis("y",v.point,F),this.visualElement.render(),E&&E(g,v)},A=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>oc(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new V5(s,{onSessionStart:c,onStart:p,onMove:f,onSessionEnd:A,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,distanceThreshold:r,contextWindow:G5(this.visualElement)})}stop(s,n){const r=s||this.latestPointerEvent,o=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!o||!r)return;const{velocity:p}=o;this.startAnimation(p);const{onDragEnd:f}=this.getProps();f&&ti.postRender(()=>f(r,o))}cancel(){this.isDragging=!1;const{projection:s,animationState:n}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(s,n,r){const{drag:o}=this.getProps();if(!r||!dg(s,o,this.currentDirection))return;const c=this.getAxisMotionValue(s);let p=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(p=WM(p,this.constraints[s],this.elastic[s])),c.set(p)}resolveConstraints(){const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;s&&qh(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=YM(r.layoutBox,s):this.constraints=!1,this.elastic=e_(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&oc(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=ZM(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:n}=this.getProps();if(!s||!qh(s))return!1;const r=s.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const c=rM(r,o.root,this.visualElement.getTransformPagePoint());let p=XM(o.layout.layoutBox,c);if(n){const f=n(tM(p));this.hasMutatedConstraints=!!f,f&&(p=F5(f))}return p}startAnimation(s){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:c,dragSnapToOrigin:p,onDragTransitionEnd:f}=this.getProps(),A=this.constraints||{},h=oc(l=>{if(!dg(l,n,this.currentDirection))return;let g=A&&A[l]||{};p&&(g={min:0,max:0});const v=o?200:1e6,m=o?40:1e7,N={type:"inertia",velocity:r?s[l]:0,bounceStiffness:v,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...c,...g};return this.startAxisValueAnimation(l,N)});return Promise.all(h).then(f)}startAxisValueAnimation(s,n){const r=this.getAxisMotionValue(s);return Sv(this.visualElement,s),r.start(e1(s,r,0,n,this.visualElement,!1))}stopAnimation(){oc(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){oc(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const n=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){oc(n=>{const{drag:r}=this.getProps();if(!dg(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,c=this.getAxisMotionValue(n);if(o&&o.layout){const{min:p,max:f}=o.layout.layoutBox[n];c.set(s[n]-li(p,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!qh(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};oc(p=>{const f=this.getAxisMotionValue(p);if(f&&this.constraints!==!1){const A=f.get();o[p]=JM({min:A,max:A},this.constraints[p])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),oc(p=>{if(!dg(p,s,null))return;const f=this.getAxisMotionValue(p),{min:A,max:h}=this.constraints[p];f.set(li(A,h,o[p]))})}addListeners(){if(!this.visualElement.current)return;t_.set(this.visualElement,this);const s=this.visualElement.current,n=Tp(s,"pointerdown",A=>{const{drag:h,dragListener:l=!0}=this.getProps();h&&l&&this.start(A)}),r=()=>{const{dragConstraints:A}=this.getProps();qh(A)&&A.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,c=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),ti.read(r);const p=Wp(window,"resize",()=>this.scalePositionWithinConstraints()),f=o.addEventListener("didUpdate",(({delta:A,hasLayoutChanged:h})=>{this.isDragging&&h&&(oc(l=>{const g=this.getAxisMotionValue(l);g&&(this.originPoint[l]+=A[l].translate,g.set(g.get()+A[l].translate))}),this.visualElement.render())}));return()=>{p(),n(),c(),f&&f()}}getProps(){const s=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:c=!1,dragElastic:p=Nv,dragMomentum:f=!0}=s;return{...s,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:c,dragElastic:p,dragMomentum:f}}}function dg(t,s,n){return(s===!0||s===t)&&(n===null||n===t)}function n_(t,s=10){let n=null;return Math.abs(t.y)>s?n="y":Math.abs(t.x)>s&&(n="x"),n}class r_ extends tu{constructor(s){super(s),this.removeGroupControls=Ac,this.removeListeners=Ac,this.controls=new s_(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ac}unmount(){this.removeGroupControls(),this.removeListeners()}}const l2=t=>(s,n)=>{t&&ti.postRender(()=>t(s,n))};class a_ extends tu{constructor(){super(...arguments),this.removePointerDownListener=Ac}onPointerDown(s){this.session=new V5(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:G5(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:l2(s),onStart:l2(n),onMove:r,onEnd:(c,p)=>{delete this.session,o&&ti.postRender(()=>o(c,p))}}}mount(){this.removePointerDownListener=Tp(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ug={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function c2(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const pp={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(On.test(t))t=parseFloat(t);else return t;const n=c2(t,s.target.x),r=c2(t,s.target.y);return`${n}% ${r}%`}},i_={correct:(t,{treeScale:s,projectionDelta:n})=>{const r=t,o=Zd.parse(t);if(o.length>5)return r;const c=Zd.createTransformer(t),p=typeof o[0]!="number"?1:0,f=n.x.scale*s.x,A=n.y.scale*s.y;o[0+p]/=f,o[1+p]/=A;const h=li(f,A,.5);return typeof o[2+p]=="number"&&(o[2+p]/=h),typeof o[3+p]=="number"&&(o[3+p]/=h),c(o)}};let Zx=!1;class o_ extends C.Component{componentDidMount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:c}=s;T6(l_),c&&(n.group&&n.group.add(c),r&&r.register&&o&&r.register(c),Zx&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Ug.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:n,visualElement:r,drag:o,isPresent:c}=this.props,{projection:p}=r;return p&&(p.isPresent=c,Zx=!0,o||s.layoutDependency!==n||n===void 0||s.isPresent!==c?p.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?p.promote():p.relegate()||ti.postRender(()=>{const f=p.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Kb.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=s;Zx=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function q5(t){const[s,n]=m5(),r=C.useContext(bb);return e.jsx(o_,{...t,layoutGroup:r,switchLayoutGroup:C.useContext(E5),isPresent:s,safeToRemove:n})}const l_={borderRadius:{...pp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pp,borderTopRightRadius:pp,borderBottomLeftRadius:pp,borderBottomRightRadius:pp,boxShadow:i_};function c_(t,s,n){const r=_o(t)?t:cf(t);return r.start(e1("",r,s,n)),r.animation}const A_=(t,s)=>t.depth-s.depth;class d_{constructor(){this.children=[],this.isDirty=!1}add(s){Sb(this.children,s),this.isDirty=!0}remove(s){Bb(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(A_),this.isDirty=!1,this.children.forEach(s)}}function u_(t,s){const n=ml.now(),r=({timestamp:o})=>{const c=o-n;c>=s&&(Jd(r),t(c-s))};return ti.setup(r,!0),()=>Jd(r)}const W5=["TopLeft","TopRight","BottomLeft","BottomRight"],h_=W5.length,A2=t=>typeof t=="string"?parseFloat(t):t,d2=t=>typeof t=="number"||On.test(t);function f_(t,s,n,r,o,c){o?(t.opacity=li(0,n.opacity??1,p_(r)),t.opacityExit=li(s.opacity??1,0,m_(r))):c&&(t.opacity=li(s.opacity??1,n.opacity??1,r));for(let p=0;p<h_;p++){const f=`border${W5[p]}Radius`;let A=u2(s,f),h=u2(n,f);if(A===void 0&&h===void 0)continue;A||(A=0),h||(h=0),A===0||h===0||d2(A)===d2(h)?(t[f]=Math.max(li(A2(A),A2(h),r),0),(yA.test(h)||yA.test(A))&&(t[f]+="%")):t[f]=h}(s.rotate||n.rotate)&&(t.rotate=li(s.rotate||0,n.rotate||0,r))}function u2(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const p_=Y5(0,.5,DC),m_=Y5(.5,.95,Ac);function Y5(t,s,n){return r=>r<t?0:r>s?1:n(zp(t,s,r))}function h2(t,s){t.min=s.min,t.max=s.max}function ic(t,s){h2(t.x,s.x),h2(t.y,s.y)}function f2(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function p2(t,s,n,r,o){return t-=s,t=ry(t,1/n,r),o!==void 0&&(t=ry(t,1/o,r)),t}function g_(t,s=0,n=1,r=.5,o,c=t,p=t){if(yA.test(s)&&(s=parseFloat(s),s=li(p.min,p.max,s/100)-p.min),typeof s!="number")return;let f=li(c.min,c.max,r);t===c&&(f-=s),t.min=p2(t.min,s,n,f,o),t.max=p2(t.max,s,n,f,o)}function m2(t,s,[n,r,o],c,p){g_(t,s[n],s[r],s[o],s.scale,c,p)}const y_=["x","scaleX","originX"],x_=["y","scaleY","originY"];function g2(t,s,n,r){m2(t.x,s,y_,n?n.x:void 0,r?r.x:void 0),m2(t.y,s,x_,n?n.y:void 0,r?r.y:void 0)}function y2(t){return t.translate===0&&t.scale===1}function X5(t){return y2(t.x)&&y2(t.y)}function x2(t,s){return t.min===s.min&&t.max===s.max}function v_(t,s){return x2(t.x,s.x)&&x2(t.y,s.y)}function v2(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function J5(t,s){return v2(t.x,s.x)&&v2(t.y,s.y)}function b2(t){return Zo(t.x)/Zo(t.y)}function j2(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class b_{constructor(){this.members=[]}add(s){Sb(this.members,s),s.scheduleRender()}remove(s){if(Bb(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(s){const n=this.members.findIndex(o=>s===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const c=this.members[o];if(c.isPresent!==!1){r=c;break}}return r?(this.promote(r),!0):!1}promote(s,n){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,n&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:o}=s.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:n,resumingFrom:r}=s;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function j_(t,s,n){let r="";const o=t.x.translate/s.x,c=t.y.translate/s.y,p=n?.z||0;if((o||c||p)&&(r=`translate3d(${o}px, ${c}px, ${p}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),n){const{transformPerspective:h,rotate:l,rotateX:g,rotateY:v,skewX:m,skewY:N}=n;h&&(r=`perspective(${h}px) ${r}`),l&&(r+=`rotate(${l}deg) `),g&&(r+=`rotateX(${g}deg) `),v&&(r+=`rotateY(${v}deg) `),m&&(r+=`skewX(${m}deg) `),N&&(r+=`skewY(${N}deg) `)}const f=t.x.scale*s.x,A=t.y.scale*s.y;return(f!==1||A!==1)&&(r+=`scale(${f}, ${A})`),r||"none"}const e0=["","X","Y","Z"],w_=1e3;let S_=0;function t0(t,s,n,r){const{latestValues:o}=s;o[t]&&(n[t]=o[t],s.setStaticValue(t,0),r&&(r[t]=0))}function Z5(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const n=M5(s);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ti,!(o||c))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Z5(r)}function eE({attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(p={},f=s?.()){this.id=S_++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(C_),this.nodes.forEach(I_),this.nodes.forEach(R_),this.nodes.forEach(E_)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let A=0;A<this.path.length;A++)this.path[A].shouldResetTransform=!0;this.root===this&&(this.nodes=new d_)}addEventListener(p,f){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new Eb),this.eventHandlers.get(p).add(f)}notifyListeners(p,...f){const A=this.eventHandlers.get(p);A&&A.notify(...f)}hasListeners(p){return this.eventHandlers.has(p)}mount(p){if(this.instance)return;this.isSVG=p5(p)&&!f6(p),this.instance=p;const{layoutId:f,layout:A,visualElement:h}=this.options;if(h&&!h.current&&h.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(A||f)&&(this.isLayoutDirty=!0),t){let l,g=0;const v=()=>this.root.updateBlockedByResize=!1;ti.read(()=>{g=window.innerWidth}),t(p,()=>{const m=window.innerWidth;m!==g&&(g=m,this.root.updateBlockedByResize=!0,l&&l(),l=u_(v,250),Ug.hasAnimatedSinceResize&&(Ug.hasAnimatedSinceResize=!1,this.nodes.forEach(B2)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&h&&(f||A)&&this.addEventListener("didUpdate",({delta:l,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||h.getDefaultTransition()||Q_,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=h.getProps(),F=!this.targetLayout||!J5(this.targetLayout,m),M=!g&&v;if(this.options.layoutRoot||this.resumeFrom||M||g&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...kb(N,"layout"),onPlay:w,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(l,M)}else g||B2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Jd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O_),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Z5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let l=0;l<this.path.length;l++){const g=this.path[l];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:f,layout:A}=this.options;if(f===void 0&&!A)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(w2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(S2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(F_),this.nodes.forEach(B_),this.nodes.forEach(N_)):this.nodes.forEach(S2),this.clearAllSnapshots();const f=ml.now();fo.delta=JA(0,1e3/60,f-fo.timestamp),fo.timestamp=f,fo.isProcessing=!0,Kx.update.process(fo),Kx.preRender.process(fo),Kx.render.process(fo),fo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(T_),this.sharedNodes.forEach(U_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ti.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ti.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Zo(this.snapshot.measuredBox.x)&&!Zo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let A=0;A<this.path.length;A++)this.path[A].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ti(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(f=!1),f&&this.instance){const A=r(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:A,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:A}}}resetTransform(){if(!o)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!X5(this.projectionDelta),A=this.getTransformTemplate(),h=A?A(this.latestValues,""):void 0,l=h!==this.prevTransformTemplateValue;p&&this.instance&&(f||Mu(this.latestValues)||l)&&(o(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const f=this.measurePageBox();let A=this.removeElementScroll(f);return p&&(A=this.removeTransform(A)),M_(A),{animationId:this.root.animationId,measuredBox:f,layoutBox:A,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return Ti();const f=p.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(__))){const{scroll:h}=this.root;h&&(Wh(f.x,h.offset.x),Wh(f.y,h.offset.y))}return f}removeElementScroll(p){const f=Ti();if(ic(f,p),this.scroll?.wasRoot)return f;for(let A=0;A<this.path.length;A++){const h=this.path[A],{scroll:l,options:g}=h;h!==this.root&&l&&g.layoutScroll&&(l.wasRoot&&ic(f,p),Wh(f.x,l.offset.x),Wh(f.y,l.offset.y))}return f}applyTransform(p,f=!1){const A=Ti();ic(A,p);for(let h=0;h<this.path.length;h++){const l=this.path[h];!f&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Yh(A,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),Mu(l.latestValues)&&Yh(A,l.latestValues)}return Mu(this.latestValues)&&Yh(A,this.latestValues),A}removeTransform(p){const f=Ti();ic(f,p);for(let A=0;A<this.path.length;A++){const h=this.path[A];if(!h.instance||!Mu(h.latestValues))continue;vv(h.latestValues)&&h.updateSnapshot();const l=Ti(),g=h.measurePageBox();ic(l,g),g2(f,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,l)}return Mu(this.latestValues)&&g2(f,this.latestValues),f}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const A=!!this.resumingFrom||this!==f;if(!(p||A&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:l,layoutId:g}=this.options;if(!(!this.layout||!(l||g))){if(this.resolvedRelativeTargetAt=fo.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ti(),this.relativeTargetOrigin=Ti(),Ip(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),ic(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ti(),this.targetWithTransforms=Ti()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ic(this.target,this.layout.layoutBox),R5(this.target,this.targetDelta)):ic(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ti(),this.relativeTargetOrigin=Ti(),Ip(this.relativeTargetOrigin,this.target,v.target),ic(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||vv(this.parent.latestValues)||I5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const p=this.getLead(),f=!!this.resumingFrom||this!==p;let A=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(A=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(A=!1),this.resolvedRelativeTargetAt===fo.timestamp&&(A=!1),A)return;const{layout:h,layoutId:l}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||l))return;ic(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;nM(this.layoutCorrected,this.treeScale,this.path,f),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=Ti());const{target:m}=p;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(f2(this.prevProjectionDelta.x,this.projectionDelta.x),f2(this.prevProjectionDelta.y,this.projectionDelta.y)),Fp(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!j2(this.projectionDelta.x,this.prevProjectionDelta.x)||!j2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.visualElement?.scheduleRender(),p){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xh(),this.projectionDelta=Xh(),this.projectionDeltaWithTransform=Xh()}setAnimationOrigin(p,f=!1){const A=this.snapshot,h=A?A.latestValues:{},l={...this.latestValues},g=Xh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const v=Ti(),m=A?A.source:void 0,N=this.layout?this.layout.source:void 0,w=m!==N,E=this.getStack(),F=!E||E.members.length<=1,M=!!(w&&!F&&this.options.crossfade===!0&&!this.path.some(D_));this.animationProgress=0;let k;this.mixTargetDelta=K=>{const G=K/1e3;N2(g.x,p.x,G),N2(g.y,p.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ip(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L_(this.relativeTarget,this.relativeTargetOrigin,v,G),k&&v_(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Ti()),ic(k,this.relativeTarget)),w&&(this.animationValues=l,f_(l,h,this.latestValues,G,M,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Jd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ti.update(()=>{Ug.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cf(0)),this.currentAnimation=c_(this.motionValue,[0,1e3],{...p,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),p.onUpdate&&p.onUpdate(f)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(w_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:f,target:A,layout:h,latestValues:l}=p;if(!(!f||!A||!h)){if(this!==p&&this.layout&&h&&tE(this.options.animationType,this.layout.layoutBox,h.layoutBox)){A=this.target||Ti();const g=Zo(this.layout.layoutBox.x);A.x.min=p.target.x.min,A.x.max=A.x.min+g;const v=Zo(this.layout.layoutBox.y);A.y.min=p.target.y.min,A.y.max=A.y.min+v}ic(f,A),Yh(f,l),Fp(this.projectionDeltaWithTransform,this.layoutCorrected,f,l)}}registerSharedNode(p,f){this.sharedNodes.has(p)||this.sharedNodes.set(p,new b_),this.sharedNodes.get(p).add(f);const h=f.options.initialPromotionConfig;f.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(f):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){const{layoutId:p}=this.options;return p?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:p}=this.options;return p?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:f,preserveFollowOpacity:A}={}){const h=this.getStack();h&&h.promote(this,A),p&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let f=!1;const{latestValues:A}=p;if((A.z||A.rotate||A.rotateX||A.rotateY||A.rotateZ||A.skewX||A.skewY)&&(f=!0),!f)return;const h={};A.z&&t0("z",p,h,this.animationValues);for(let l=0;l<e0.length;l++)t0(`rotate${e0[l]}`,p,h,this.animationValues),t0(`skew${e0[l]}`,p,h,this.animationValues);p.render();for(const l in h)p.setStaticValue(l,h[l]),this.animationValues&&(this.animationValues[l]=h[l]);p.scheduleRender()}applyProjectionStyles(p,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){p.visibility="hidden";return}const A=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,p.visibility="",p.opacity="",p.pointerEvents=Og(f?.pointerEvents)||"",p.transform=A?A(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Og(f?.pointerEvents)||""),this.hasProjected&&!Mu(this.latestValues)&&(p.transform=A?A({},""):"none",this.hasProjected=!1);return}p.visibility="";const l=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=j_(this.projectionDeltaWithTransform,this.treeScale,l);A&&(g=A(l,g)),p.transform=g;const{x:v,y:m}=this.projectionDelta;p.transformOrigin=`${v.origin*100}% ${m.origin*100}% 0`,h.animationValues?p.opacity=h===this?l.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:l.opacityExit:p.opacity=h===this?l.opacity!==void 0?l.opacity:"":l.opacityExit!==void 0?l.opacityExit:0;for(const N in qp){if(l[N]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:F}=qp[N],M=g==="none"?l[N]:w(l[N],h);if(E){const k=E.length;for(let K=0;K<k;K++)p[E[K]]=M}else F?this.options.visualElement.renderState.vars[N]=M:p[N]=M}this.options.layoutId&&(p.pointerEvents=h===this?Og(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>p.currentAnimation?.stop()),this.root.nodes.forEach(w2),this.root.sharedNodes.clear()}}}function B_(t){t.updateLayout()}function N_(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:o}=t.options,c=s.source!==t.layout.source;o==="size"?oc(l=>{const g=c?s.measuredBox[l]:s.layoutBox[l],v=Zo(g);g.min=n[l].min,g.max=g.min+v}):tE(o,s.layoutBox,n)&&oc(l=>{const g=c?s.measuredBox[l]:s.layoutBox[l],v=Zo(n[l]);g.max=g.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[l].max=t.relativeTarget[l].min+v)});const p=Xh();Fp(p,n,s.layoutBox);const f=Xh();c?Fp(f,t.applyTransform(r,!0),s.measuredBox):Fp(f,n,s.layoutBox);const A=!X5(p);let h=!1;if(!t.resumeFrom){const l=t.getClosestProjectingParent();if(l&&!l.resumeFrom){const{snapshot:g,layout:v}=l;if(g&&v){const m=Ti();Ip(m,s.layoutBox,g.layoutBox);const N=Ti();Ip(N,n,v.layoutBox),J5(m,N)||(h=!0),l.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=m,t.relativeParent=l)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:f,layoutDelta:p,hasLayoutChanged:A,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function C_(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function E_(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function T_(t){t.clearSnapshot()}function w2(t){t.clearMeasurements()}function S2(t){t.isLayoutDirty=!1}function F_(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function B2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function I_(t){t.resolveTargetDelta()}function R_(t){t.calcProjection()}function O_(t){t.resetSkewAndRotation()}function U_(t){t.removeLeadSnapshot()}function N2(t,s,n){t.translate=li(s.translate,0,n),t.scale=li(s.scale,1,n),t.origin=s.origin,t.originPoint=s.originPoint}function C2(t,s,n,r){t.min=li(s.min,n.min,r),t.max=li(s.max,n.max,r)}function L_(t,s,n,r){C2(t.x,s.x,n.x,r),C2(t.y,s.y,n.y,r)}function D_(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Q_={duration:.45,ease:[.4,0,.1,1]},E2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),T2=E2("applewebkit/")&&!E2("chrome/")?Math.round:Ac;function F2(t){t.min=T2(t.min),t.max=T2(t.max)}function M_(t){F2(t.x),F2(t.y)}function tE(t,s,n){return t==="position"||t==="preserve-aspect"&&!zM(b2(s),b2(n),.2)}function __(t){return t!==t.root&&t.scroll?.wasRoot}const P_=eE({attachResizeListener:(t,s)=>Wp(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),s0={current:void 0},sE=eE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!s0.current){const t=new P_({});t.mount(window),t.setOptions({layoutScroll:!0}),s0.current=t}return s0.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),k_={pan:{Feature:a_},drag:{Feature:r_,ProjectionNode:sE,MeasureLayout:q5}};function I2(t,s,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,c=r[o];c&&ti.postRender(()=>c(s,rm(s)))}class H_ extends tu{mount(){const{current:s}=this.node;s&&(this.unmount=c6(s,(n,r)=>(I2(this.node,r,"Start"),o=>I2(this.node,o,"End"))))}unmount(){}}class K_ extends tu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tm(Wp(this.node.current,"focus",()=>this.onFocus()),Wp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function R2(t,s,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),c=r[o];c&&ti.postRender(()=>c(s,rm(s)))}class z_ extends tu{mount(){const{current:s}=this.node;s&&(this.unmount=h6(s,(n,r)=>(R2(this.node,r,"Start"),(o,{success:c})=>R2(this.node,o,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Cv=new WeakMap,n0=new WeakMap,G_=t=>{const s=Cv.get(t.target);s&&s(t)},V_=t=>{t.forEach(G_)};function $_({root:t,...s}){const n=t||document;n0.has(n)||n0.set(n,{});const r=n0.get(n),o=JSON.stringify(s);return r[o]||(r[o]=new IntersectionObserver(V_,{root:t,...s})),r[o]}function q_(t,s,n){const r=$_(s);return Cv.set(t,n),r.observe(t),()=>{Cv.delete(t),r.unobserve(t)}}const W_={some:0,all:1};class Y_ extends tu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:c}=s,p={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:W_[o]},f=A=>{const{isIntersecting:h}=A;if(this.isInView===h||(this.isInView=h,c&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:l,onViewportLeave:g}=this.node.getProps(),v=h?l:g;v&&v(A)};return q_(this.node.current,p,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:n}=this.node;["amount","margin","root"].some(X_(s,n))&&this.startObserver()}unmount(){}}function X_({viewport:t={}},{viewport:s={}}={}){return n=>t[n]!==s[n]}const J_={inView:{Feature:Y_},tap:{Feature:z_},focus:{Feature:K_},hover:{Feature:H_}},Z_={layout:{ProjectionNode:sE,MeasureLayout:q5}},eP={...MM,...J_,...k_,...Z_},hs=eM(eP,hM);var tP=Symbol.for("react.lazy"),ay=td[" use ".trim().toString()];function sP(t){return typeof t=="object"&&t!==null&&"then"in t}function nE(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===tP&&"_payload"in t&&sP(t._payload)}function rE(t){const s=rP(t),n=C.forwardRef((r,o)=>{let{children:c,...p}=r;nE(c)&&typeof ay=="function"&&(c=ay(c._payload));const f=C.Children.toArray(c),A=f.find(iP);if(A){const h=A.props.children,l=f.map(g=>g===A?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return e.jsx(s,{...p,ref:o,children:C.isValidElement(h)?C.cloneElement(h,void 0,l):null})}return e.jsx(s,{...p,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}var nP=rE("Slot");function rP(t){const s=C.forwardRef((n,r)=>{let{children:o,...c}=n;if(nE(o)&&typeof ay=="function"&&(o=ay(o._payload)),C.isValidElement(o)){const p=lP(o),f=oP(c,o.props);return o.type!==C.Fragment&&(f.ref=r?ah(r,p):p),C.cloneElement(o,f)}return C.Children.count(o)>1?C.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var aP=Symbol("radix.slottable");function iP(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aP}function oP(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...f)=>{const A=c(...f);return o(...f),A}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function lP(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const cP=xy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground shadow-sm border-destructive-border",outline:" border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ie=C.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...o},c)=>{const p=r?nP:"button";return e.jsx(p,{className:Xs(cP({variant:s,size:n,className:t})),ref:c,...o})});Ie.displayName="Button";const Ve=C.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:Xs("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ve.displayName="Input";var AP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dP=AP.reduce((t,s)=>{const n=rE(`Primitive.${s}`),r=C.forwardRef((o,c)=>{const{asChild:p,...f}=o,A=p?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(A,{...f,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),uP="Label",aE=C.forwardRef((t,s)=>e.jsx(dP.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));aE.displayName=uP;var iE=aE;const hP=xy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xe=C.forwardRef(({className:t,...s},n)=>e.jsx(iE,{ref:n,className:Xs(hP(),t),...s}));Xe.displayName=iE.displayName;function fP(){const[,t]=el(),{login:s}=ci(),{login:n}=MB(),{toast:r}=Ai(),[o,c]=C.useState(!1),[p,f]=C.useState(""),[A,h]=C.useState(""),l=async g=>{g.preventDefault(),c(!0);try{const{user:v,token:m}=await n(p,A);switch(s({id:v.id,name:v.name,email:v.email,role:v.role,shopId:v.role==="supplier"?v.shopId:void 0}),v.role){case"admin":t("/admin/dashboard");break;case"software_team":t("/software/dashboard");break;case"purchase_team":t("/purchase/dashboard");break;case"supplier":t("/supplier/dashboard");break;case"pre_sales":t("/create-project");break;default:t("/dashboard")}}catch(v){const m=v?.message||"Invalid email or password. Account must exist.",N=String(m).toLowerCase();if(N.includes("under review")||N.includes("wait for approval")||N.includes("rejected")){t("/supplier-pending"),c(!1);return}r({title:"Login Failed",description:m,variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(hs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(Vs,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ta,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(lc,{className:"h-6 w-6"})})}),e.jsx(sa,{className:"text-center text-2xl font-bold text-gray-900",children:"BOQ Management System"}),e.jsx(ei,{className:"text-center text-gray-600",children:"Login to access your dashboard"})]}),e.jsx(fn,{className:"pt-6",children:e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(Ve,{type:"email",placeholder:"name@example.com",value:p,onChange:g=>f(g.target.value),required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsx(Ve,{type:"password",placeholder:"",value:A,onChange:g=>h(g.target.value),required:!0,className:"h-11"})]}),e.jsx(Ie,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Logging in...":"Login"})]})}),e.jsxs(mf,{className:"flex flex-col gap-4 border-t border-gray-100 pt-6 bg-gray-50/50",children:[e.jsx("div",{className:"text-center text-sm text-gray-600",children:e.jsx(Ra,{href:"/forgot-password",className:"text-blue-600 hover:underline font-medium",children:"Forgot Password?"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(Ra,{href:"/signup",className:"text-blue-600 hover:underline font-medium",children:"Sign Up"})]})]})]})})]})}const Ml=C.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:Xs("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));Ml.displayName="Textarea";function Ev(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function tf(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}function O2(t){const s=pP(t),n=C.forwardRef((r,o)=>{const{children:c,...p}=r,f=C.Children.toArray(c),A=f.find(gP);if(A){const h=A.props.children,l=f.map(g=>g===A?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return e.jsx(s,{...p,ref:o,children:C.isValidElement(h)?C.cloneElement(h,void 0,l):null})}return e.jsx(s,{...p,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function pP(t){const s=C.forwardRef((n,r)=>{const{children:o,...c}=n;if(C.isValidElement(o)){const p=xP(o),f=yP(c,o.props);return o.type!==C.Fragment&&(f.ref=r?ah(r,p):p),C.cloneElement(o,f)}return C.Children.count(o)>1?C.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var mP=Symbol("radix.slottable");function gP(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mP}function yP(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...f)=>{const A=c(...f);return o(...f),A}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function xP(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function oE(t){const s=t+"CollectionProvider",[n,r]=uc(s),[o,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),p=w=>{const{scope:E,children:F}=w,M=Mo.useRef(null),k=Mo.useRef(new Map).current;return e.jsx(o,{scope:E,itemMap:k,collectionRef:M,children:F})};p.displayName=s;const f=t+"CollectionSlot",A=O2(f),h=Mo.forwardRef((w,E)=>{const{scope:F,children:M}=w,k=c(f,F),K=Fr(E,k.collectionRef);return e.jsx(A,{ref:K,children:M})});h.displayName=f;const l=t+"CollectionItemSlot",g="data-radix-collection-item",v=O2(l),m=Mo.forwardRef((w,E)=>{const{scope:F,children:M,...k}=w,K=Mo.useRef(null),G=Fr(E,K),ee=c(l,F);return Mo.useEffect(()=>(ee.itemMap.set(K,{ref:K,...k}),()=>void ee.itemMap.delete(K))),e.jsx(v,{[g]:"",ref:G,children:M})});m.displayName=l;function N(w){const E=c(t+"CollectionConsumer",w);return Mo.useCallback(()=>{const M=E.collectionRef.current;if(!M)return[];const k=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((ee,V)=>k.indexOf(ee.ref.current)-k.indexOf(V.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:p,Slot:h,ItemSlot:m},N,r]}var vP=td[" useInsertionEffect ".trim().toString()]||Pa;function bP({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,p]=jP({defaultProp:s,onChange:n}),f=t!==void 0,A=f?t:o;{const l=C.useRef(t!==void 0);C.useEffect(()=>{const g=l.current;g!==f&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=f},[f,r])}const h=C.useCallback(l=>{if(f){const g=wP(l)?l(t):l;g!==t&&p.current?.(g)}else c(l)},[f,t,c,p]);return[A,h]}function jP({defaultProp:t,onChange:s}){const[n,r]=C.useState(t),o=C.useRef(n),c=C.useRef(s);return vP(()=>{c.current=s},[s]),C.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function wP(t){return typeof t=="function"}var SP=C.createContext(void 0);function Oy(t){const s=C.useContext(SP);return t||s||"ltr"}var r0="rovingFocusGroup.onEntryFocus",BP={bubbles:!1,cancelable:!0},am="RovingFocusGroup",[Tv,lE,NP]=oE(am),[CP,Uy]=uc(am,[NP]),[EP,TP]=CP(am),cE=C.forwardRef((t,s)=>e.jsx(Tv.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Tv.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(FP,{...t,ref:s})})}));cE.displayName=am;var FP=C.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:c,currentTabStopId:p,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:A,onEntryFocus:h,preventScrollOnEntryFocus:l=!1,...g}=t,v=C.useRef(null),m=Fr(s,v),N=Oy(c),[w,E]=bP({prop:p,defaultProp:f??null,onChange:A,caller:am}),[F,M]=C.useState(!1),k=Po(h),K=lE(n),G=C.useRef(!1),[ee,V]=C.useState(0);return C.useEffect(()=>{const X=v.current;if(X)return X.addEventListener(r0,k),()=>X.removeEventListener(r0,k)},[k]),e.jsx(EP,{scope:n,orientation:r,dir:N,loop:o,currentTabStopId:w,onItemFocus:C.useCallback(X=>E(X),[E]),onItemShiftTab:C.useCallback(()=>M(!0),[]),onFocusableItemAdd:C.useCallback(()=>V(X=>X+1),[]),onFocusableItemRemove:C.useCallback(()=>V(X=>X-1),[]),children:e.jsx(sr.div,{tabIndex:F||ee===0?-1:0,"data-orientation":r,...g,ref:m,style:{outline:"none",...t.style},onMouseDown:tf(t.onMouseDown,()=>{G.current=!0}),onFocus:tf(t.onFocus,X=>{const J=!G.current;if(X.target===X.currentTarget&&J&&!F){const he=new CustomEvent(r0,BP);if(X.currentTarget.dispatchEvent(he),!he.defaultPrevented){const q=K().filter(ne=>ne.focusable),ie=q.find(ne=>ne.active),Ae=q.find(ne=>ne.id===w),oe=[ie,Ae,...q].filter(Boolean).map(ne=>ne.ref.current);uE(oe,l)}}G.current=!1}),onBlur:tf(t.onBlur,()=>M(!1))})})}),AE="RovingFocusGroupItem",dE=C.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:c,children:p,...f}=t,A=$d(),h=c||A,l=TP(AE,n),g=l.currentTabStopId===h,v=lE(n),{onFocusableItemAdd:m,onFocusableItemRemove:N,currentTabStopId:w}=l;return C.useEffect(()=>{if(r)return m(),()=>N()},[r,m,N]),e.jsx(Tv.ItemSlot,{scope:n,id:h,focusable:r,active:o,children:e.jsx(sr.span,{tabIndex:g?0:-1,"data-orientation":l.orientation,...f,ref:s,onMouseDown:tf(t.onMouseDown,E=>{r?l.onItemFocus(h):E.preventDefault()}),onFocus:tf(t.onFocus,()=>l.onItemFocus(h)),onKeyDown:tf(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){l.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const F=OP(E,l.orientation,l.dir);if(F!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let k=v().filter(K=>K.focusable).map(K=>K.ref.current);if(F==="last")k.reverse();else if(F==="prev"||F==="next"){F==="prev"&&k.reverse();const K=k.indexOf(E.currentTarget);k=l.loop?UP(k,K+1):k.slice(K+1)}setTimeout(()=>uE(k))}}),children:typeof p=="function"?p({isCurrentTabStop:g,hasTabStop:w!=null}):p})})});dE.displayName=AE;var IP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function RP(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function OP(t,s,n){const r=RP(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return IP[r]}function uE(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function UP(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var hE=cE,fE=dE,LP=td[" useInsertionEffect ".trim().toString()]||Pa;function DP({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,p]=QP({defaultProp:s,onChange:n}),f=t!==void 0,A=f?t:o;{const l=C.useRef(t!==void 0);C.useEffect(()=>{const g=l.current;g!==f&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=f},[f,r])}const h=C.useCallback(l=>{if(f){const g=MP(l)?l(t):l;g!==t&&p.current?.(g)}else c(l)},[f,t,c,p]);return[A,h]}function QP({defaultProp:t,onChange:s}){const[n,r]=C.useState(t),o=C.useRef(n),c=C.useRef(s);return LP(()=>{c.current=s},[s]),C.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function MP(t){return typeof t=="function"}function t1(t){const s=C.useRef({value:t,previous:t});return C.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var s1="Radio",[_P,pE]=uc(s1),[PP,kP]=_P(s1),mE=C.forwardRef((t,s)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:c,disabled:p,value:f="on",onCheck:A,form:h,...l}=t,[g,v]=C.useState(null),m=Fr(s,E=>v(E)),N=C.useRef(!1),w=g?h||!!g.closest("form"):!0;return e.jsxs(PP,{scope:n,checked:o,disabled:p,children:[e.jsx(sr.button,{type:"button",role:"radio","aria-checked":o,"data-state":vE(o),"data-disabled":p?"":void 0,disabled:p,value:f,...l,ref:m,onClick:Ev(t.onClick,E=>{o||A?.(),w&&(N.current=E.isPropagationStopped(),N.current||E.stopPropagation())})}),w&&e.jsx(xE,{control:g,bubbles:!N.current,name:r,value:f,checked:o,required:c,disabled:p,form:h,style:{transform:"translateX(-100%)"}})]})});mE.displayName=s1;var gE="RadioIndicator",yE=C.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:r,...o}=t,c=kP(gE,n);return e.jsx(sd,{present:r||c.checked,children:e.jsx(sr.span,{"data-state":vE(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:s})})});yE.displayName=gE;var HP="RadioBubbleInput",xE=C.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:r=!0,...o},c)=>{const p=C.useRef(null),f=Fr(p,c),A=t1(n),h=mb(s);return C.useEffect(()=>{const l=p.current;if(!l)return;const g=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(g,"checked").set;if(A!==n&&m){const N=new Event("click",{bubbles:r});m.call(l,n),l.dispatchEvent(N)}},[A,n,r]),e.jsx(sr.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:f,style:{...o.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});xE.displayName=HP;function vE(t){return t?"checked":"unchecked"}var KP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ly="RadioGroup",[zP]=uc(Ly,[Uy,pE]),bE=Uy(),jE=pE(),[GP,VP]=zP(Ly),wE=C.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:c,required:p=!1,disabled:f=!1,orientation:A,dir:h,loop:l=!0,onValueChange:g,...v}=t,m=bE(n),N=Oy(h),[w,E]=DP({prop:c,defaultProp:o??null,onChange:g,caller:Ly});return e.jsx(GP,{scope:n,name:r,required:p,disabled:f,value:w,onValueChange:E,children:e.jsx(hE,{asChild:!0,...m,orientation:A,dir:N,loop:l,children:e.jsx(sr.div,{role:"radiogroup","aria-required":p,"aria-orientation":A,"data-disabled":f?"":void 0,dir:N,...v,ref:s})})})});wE.displayName=Ly;var SE="RadioGroupItem",BE=C.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:r,...o}=t,c=VP(SE,n),p=c.disabled||r,f=bE(n),A=jE(n),h=C.useRef(null),l=Fr(s,h),g=c.value===o.value,v=C.useRef(!1);return C.useEffect(()=>{const m=w=>{KP.includes(w.key)&&(v.current=!0)},N=()=>v.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",N)}},[]),e.jsx(fE,{asChild:!0,...f,focusable:!p,active:g,children:e.jsx(mE,{disabled:p,required:c.required,checked:g,...A,...o,name:c.name,ref:l,onCheck:()=>c.onValueChange(o.value),onKeyDown:Ev(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:Ev(o.onFocus,()=>{v.current&&h.current?.click()})})})});BE.displayName=SE;var $P="RadioGroupIndicator",NE=C.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...r}=t,o=jE(n);return e.jsx(yE,{...o,...r,ref:s})});NE.displayName=$P;var CE=wE,EE=BE,qP=NE;const TE=C.forwardRef(({className:t,...s},n)=>e.jsx(CE,{className:Xs("grid gap-2",t),...s,ref:n}));TE.displayName=CE.displayName;const FE=C.forwardRef(({className:t,...s},n)=>e.jsx(EE,{ref:n,className:Xs("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(qP,{className:"flex items-center justify-center",children:e.jsx(z3,{className:"h-3.5 w-3.5 fill-primary"})})}));FE.displayName=EE.displayName;function U2(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}var WP=td[" useInsertionEffect ".trim().toString()]||Pa;function YP({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,p]=XP({defaultProp:s,onChange:n}),f=t!==void 0,A=f?t:o;{const l=C.useRef(t!==void 0);C.useEffect(()=>{const g=l.current;g!==f&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=f},[f,r])}const h=C.useCallback(l=>{if(f){const g=JP(l)?l(t):l;g!==t&&p.current?.(g)}else c(l)},[f,t,c,p]);return[A,h]}function XP({defaultProp:t,onChange:s}){const[n,r]=C.useState(t),o=C.useRef(n),c=C.useRef(s);return WP(()=>{c.current=s},[s]),C.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function JP(t){return typeof t=="function"}var Dy="Checkbox",[ZP]=uc(Dy),[e8,n1]=ZP(Dy);function t8(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:o,disabled:c,form:p,name:f,onCheckedChange:A,required:h,value:l="on",internal_do_not_use_render:g}=t,[v,m]=YP({prop:n,defaultProp:o??!1,onChange:A,caller:Dy}),[N,w]=C.useState(null),[E,F]=C.useState(null),M=C.useRef(!1),k=N?!!p||!!N.closest("form"):!0,K={checked:v,disabled:c,setChecked:m,control:N,setControl:w,name:f,form:p,value:l,hasConsumerStoppedPropagationRef:M,required:h,defaultChecked:qd(o)?!1:o,isFormControl:k,bubbleInput:E,setBubbleInput:F};return e.jsx(e8,{scope:s,...K,children:s8(g)?g(K):r})}var IE="CheckboxTrigger",RE=C.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},o)=>{const{control:c,value:p,disabled:f,checked:A,required:h,setControl:l,setChecked:g,hasConsumerStoppedPropagationRef:v,isFormControl:m,bubbleInput:N}=n1(IE,t),w=Fr(o,l),E=C.useRef(A);return C.useEffect(()=>{const F=c?.form;if(F){const M=()=>g(E.current);return F.addEventListener("reset",M),()=>F.removeEventListener("reset",M)}},[c,g]),e.jsx(sr.button,{type:"button",role:"checkbox","aria-checked":qd(A)?"mixed":A,"aria-required":h,"data-state":QE(A),"data-disabled":f?"":void 0,disabled:f,value:p,...r,ref:w,onKeyDown:U2(s,F=>{F.key==="Enter"&&F.preventDefault()}),onClick:U2(n,F=>{g(M=>qd(M)?!0:!M),N&&m&&(v.current=F.isPropagationStopped(),v.current||F.stopPropagation())})})});RE.displayName=IE;var r1=C.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:c,required:p,disabled:f,value:A,onCheckedChange:h,form:l,...g}=t;return e.jsx(t8,{__scopeCheckbox:n,checked:o,defaultChecked:c,disabled:f,required:p,onCheckedChange:h,name:r,form:l,value:A,internal_do_not_use_render:({isFormControl:v})=>e.jsxs(e.Fragment,{children:[e.jsx(RE,{...g,ref:s,__scopeCheckbox:n}),v&&e.jsx(DE,{__scopeCheckbox:n})]})})});r1.displayName=Dy;var OE="CheckboxIndicator",UE=C.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...o}=t,c=n1(OE,n);return e.jsx(sd,{present:r||qd(c.checked)||c.checked===!0,children:e.jsx(sr.span,{"data-state":QE(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:s,style:{pointerEvents:"none",...t.style}})})});UE.displayName=OE;var LE="CheckboxBubbleInput",DE=C.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:c,defaultChecked:p,required:f,disabled:A,name:h,value:l,form:g,bubbleInput:v,setBubbleInput:m}=n1(LE,t),N=Fr(n,m),w=t1(c),E=mb(r);C.useEffect(()=>{const M=v;if(!M)return;const k=window.HTMLInputElement.prototype,G=Object.getOwnPropertyDescriptor(k,"checked").set,ee=!o.current;if(w!==c&&G){const V=new Event("click",{bubbles:ee});M.indeterminate=qd(c),G.call(M,qd(c)?!1:c),M.dispatchEvent(V)}},[v,w,c,o]);const F=C.useRef(qd(c)?!1:c);return e.jsx(sr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??F.current,required:f,disabled:A,name:h,value:l,form:g,...s,tabIndex:-1,ref:N,style:{...s.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});DE.displayName=LE;function s8(t){return typeof t=="function"}function qd(t){return t==="indeterminate"}function QE(t){return qd(t)?"indeterminate":t?"checked":"unchecked"}const gn=C.forwardRef(({className:t,...s},n)=>e.jsx(r1,{ref:n,className:Xs("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(UE,{className:Xs("grid place-content-center text-current"),children:e.jsx(ob,{className:"h-4 w-4"})})}));gn.displayName=r1.displayName;function n8(){const[,t]=el(),{signup:s}=MB(),{toast:n}=Ai(),[r,o]=C.useState(!1),[c,p]=C.useState(null),[f,A]=C.useState({fullName:"",email:"",mobileNumber:"",password:"",confirmPassword:"",companyName:"",gstNumber:"",businessAddress:"",department:"",employeeCode:""}),[h,l]=C.useState(!1),g=[{value:"admin",label:"Admin",icon:ew,description:"Full system access"},{value:"software_team",label:"Software Team",icon:NN,description:"Technical management"},{value:"purchase_team",label:"Purchase Team",icon:qg,description:"Procurement management"},{value:"user_client",label:"User / Client",icon:wO,description:"General system access"},{value:"pre_sales",label:"Pre-Sales",icon:qg,description:"Create projects and BOQs"},{value:"contractor",label:"Contractor",icon:ew,description:"Access sub-categories and estimators"},{value:"supplier",label:"Supplier",icon:lc,description:"Material supplier"}],v=()=>c?!f.fullName.trim()||!f.email.trim()||!f.mobileNumber.trim()?(n({title:"Error",description:"All basic fields are required",variant:"destructive"}),!1):!f.password||f.password!==f.confirmPassword?(n({title:"Error",description:"Passwords do not match",variant:"destructive"}),!1):c==="supplier"&&(!f.companyName||!f.gstNumber||!f.businessAddress)?(n({title:"Error",description:"Supplier details are required",variant:"destructive"}),!1):h?!0:(n({title:"Error",description:"Please confirm the information",variant:"destructive"}),!1):(n({title:"Error",description:"Please select a role",variant:"destructive"}),!1),m=async N=>{if(N.preventDefault(),!!v()){o(!0);try{if(await s(f.email,f.password,c,f.fullName,f.mobileNumber,f.department,f.employeeCode,f.companyName,f.gstNumber,f.businessAddress),c==="supplier"){n({title:"Request Submitted",description:"Your supplier account is waiting for admin approval."}),t("/pending-approval");return}n({title:"Account Created",description:"Please login using your email and password"}),t("/")}catch{n({title:"Error",description:"Create account failed",variant:"destructive"})}finally{o(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx(hs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:e.jsxs(Vs,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ta,{className:"text-center pb-6 border-b",children:[e.jsx(sa,{className:"text-3xl font-bold",children:"Create Your Account"}),e.jsx(ei,{children:"Register to access the BOQ Management System"})]}),e.jsx(fn,{className:"pt-6",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsx(TE,{value:c||"",onValueChange:N=>p(N),className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(N=>e.jsxs("div",{children:[e.jsx(FE,{value:N.value,id:N.value,className:"peer sr-only"}),e.jsxs(Xe,{htmlFor:N.value,className:"flex flex-col items-center justify-center rounded-lg border-2 p-4 cursor-pointer peer-data-[state=checked]:border-blue-500",children:[e.jsx(N.icon,{className:"h-6 w-6 mb-2"}),e.jsx("div",{className:"font-medium",children:N.label}),e.jsx("div",{className:"text-xs text-gray-500",children:N.description})]})]},N.value))}),e.jsx(Ve,{placeholder:"Full Name",value:f.fullName,onChange:N=>A({...f,fullName:N.target.value})}),e.jsx(Ve,{placeholder:"Mobile Number",value:f.mobileNumber,onChange:N=>A({...f,mobileNumber:N.target.value})}),e.jsx(Ve,{type:"email",placeholder:"Email",value:f.email,onChange:N=>A({...f,email:N.target.value})}),e.jsx(Ve,{type:"password",placeholder:"Password",value:f.password,onChange:N=>A({...f,password:N.target.value})}),e.jsx(Ve,{type:"password",placeholder:"Confirm Password",value:f.confirmPassword,onChange:N=>A({...f,confirmPassword:N.target.value})}),c==="supplier"&&e.jsxs(e.Fragment,{children:[e.jsx(Ve,{placeholder:"Company Name",value:f.companyName,onChange:N=>A({...f,companyName:N.target.value})}),e.jsx(Ve,{placeholder:"GST Number",value:f.gstNumber,onChange:N=>A({...f,gstNumber:N.target.value})}),e.jsx(Ml,{placeholder:"Business Address",value:f.businessAddress,onChange:N=>A({...f,businessAddress:N.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gn,{checked:h,onCheckedChange:N=>l(N===!0)}),e.jsx(Xe,{children:"I confirm the above information is correct"})]}),e.jsx(Ie,{type:"submit",disabled:r,className:"w-full",children:r?"Creating...":"Create Account"})]})}),e.jsx(mf,{className:"justify-center",children:e.jsx(Ra,{href:"/",className:"text-blue-600 hover:underline",children:"Already have an account? Login"})})]})})})}function r8(){const[,t]=el(),{toast:s}=Ai(),[n,r]=C.useState(!1),[o,c]=C.useState(""),p=async f=>{if(f.preventDefault(),!o.trim()){s({title:"Error",description:"Email address is required",variant:"destructive"});return}r(!0);try{if((await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})})).ok)s({title:"Success",description:"Password reset link sent to your email address"}),t("/");else throw new Error("Failed to send reset link")}catch{s({title:"Error",description:"Failed to send reset link. Please try again.",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(hs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(Vs,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ta,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(lc,{className:"h-6 w-6"})})}),e.jsx(sa,{className:"text-center text-2xl font-bold text-gray-900",children:"Forgot Password"}),e.jsx(ei,{className:"text-center text-gray-600",children:"Enter your registered email address to receive a password reset link."})]}),e.jsx(fn,{className:"pt-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(Ve,{type:"email",placeholder:"name@example.com",value:o,onChange:f=>c(f.target.value),required:!0,className:"h-11"})]}),e.jsx(Ie,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:n,children:n?"Sending...":"Send Reset Link"})]})}),e.jsx(mf,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(Ra,{href:"/",className:"flex items-center gap-2 text-blue-600 hover:underline font-medium",children:[e.jsx(gN,{className:"h-4 w-4"}),"Back to Login"]})})]})})]})}function L2(){return el(),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(hs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(Vs,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ta,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-yellow-500 flex items-center justify-center text-white",children:e.jsx(Zj,{className:"h-6 w-6"})})}),e.jsx(sa,{className:"text-center text-2xl font-bold text-gray-900",children:"Account Under Verification"})]}),e.jsx(fn,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Zj,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Your account is currently under review. You will be able to access the system once your account is approved by the BOQ team."}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"What happens next?"}),e.jsx("br",{})," Our team will review your application",e.jsx("br",{})," You will receive an email notification once approved",e.jsx("br",{})," Approval typically takes 1-2 business days"]})})]})]})}),e.jsx(mf,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(Ra,{href:"/",className:"flex items-center gap-2 text-blue-600 hover:underline font-medium",children:[e.jsx(gN,{className:"h-4 w-4"}),"Back to Login"]})})]})})]})}const a8=xy("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:"text-foreground border [border-color:var(--badge-outline)]"}},defaultVariants:{variant:"default"}});function qA({className:t,variant:s,...n}){return e.jsx("div",{className:Xs(a8({variant:s}),t),...n})}const D2={BrickWall:xN,DoorOpen:jN,Cloud:bN,Layers:vy,PaintBucket:SN,Blinds:yN,Zap:Wg,Droplets:wN,Hammer:X3,ShieldAlert:BN},i8=[{icon:xN,label:"Civil ",href:"/estimators/civil-wall"},{icon:jN,label:"Doors",href:"/estimators/doors"},{icon:bN,label:"False Ceiling",href:"/estimators/false-ceiling"},{icon:vy,label:"Flooring",href:"/estimators/flooring"},{icon:SN,label:"Painting",href:"/estimators/painting"},{icon:yN,label:"Blinds",href:"/estimators/blinds"},{icon:Wg,label:"Electrical",href:"/estimators/electrical"},{icon:wN,label:"Plumbing",href:"/estimators/plumbing"}];function o8(){const[t,s]=el(),[n,r]=C.useState(!0),[o,c]=C.useState(""),[p,f]=C.useState([]),[A,h]=C.useState(!0),{user:l,logout:g,supportMessages:v,materialApprovalRequests:m}=ci(),[N,w]=C.useState(0),[E,F]=C.useState(0),[M,k]=C.useState(0);C.useEffect(()=>{const oe=async()=>{try{h(!0);const re=await nt("/api/sidebar-subcategories",{headers:{}});if(re.ok){const De=((await re.json()).subcategories||[]).map(ge=>({...ge,icon:D2[ge.icon]||vy}));f(De)}}catch(re){console.warn("Failed to load subcategories:",re),f(i8.map(se=>({id:se.label,name:se.label,href:se.href,icon:Object.entries(D2).find(([je,De])=>De===se.icon)?.[0]||"Layers",category:"Estimators"})))}finally{h(!1)}};oe();const ne=setInterval(oe,3e4);return()=>clearInterval(ne)},[]),C.useEffect(()=>{(async()=>{try{const oe=await fetch("/api/shops-pending-approval");if(oe.ok){const ne=await oe.json();w((ne?.shops||[]).filter(re=>re.status==="pending").length)}}catch(oe){console.warn("load shop count failed",oe)}})()},[]),C.useEffect(()=>{try{if(!m){F(0);return}F((m||[]).filter(oe=>oe.status==="pending").length)}catch(oe){console.warn("compute material pending count failed",oe),F(0)}},[m]),C.useEffect(()=>{try{if(!v){k(0);return}const oe=(v||[]).filter(ne=>ne.is_read===!1).length;k(oe||(v||[]).length)}catch(oe){console.warn("compute message count failed",oe),k(0)}},[v]);const K=()=>{g(),s("/")},G=l?.role==="admin"||l?.role==="software_team",ee=l?.role==="pre_sales",V=l?.role==="contractor",X=l?.role==="admin"||l?.role==="software_team"||l?.role==="purchase_team";l?.role==="supplier"||l?.role;const J=l?.role==="user",he=l?.role==="admin",q=l?.role==="admin"||l?.role==="software_team"||ee,Ae=typeof window>"u"?null:new URL(window.location.href).searchParams.get("tab"),ce=o?p.filter(oe=>(oe.name||oe.label).toLowerCase().includes(o.toLowerCase())):p;return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 md:hidden",onClick:()=>r(!n),children:n?e.jsx(lb,{className:"h-6 w-6"}):e.jsx(oO,{className:"h-6 w-6"})}),e.jsxs("aside",{className:Xs("fixed inset-y-0 left-0 z-40 w-64 transform bg-sidebar border-r border-sidebar-border transition-transform duration-200 ease-in-out md:translate-x-0 flex flex-col",n?"translate-x-0":"-translate-x-full"),children:[e.jsx("div",{className:"flex h-16 items-center justify-center border-b border-sidebar-border bg-sidebar-primary/10",children:e.jsxs("h1",{className:"text-xl font-bold tracking-tight text-sidebar-primary font-heading",children:["BUILD",e.jsx("span",{className:"text-foreground",children:"ESTIMATE"})]})}),e.jsxs("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1",children:[!ee&&!V&&l?.role!=="supplier"&&e.jsx(Ra,{href:"/dashboard",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/dashboard"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),children:[e.jsx(Z3,{className:"h-4 w-4"}),"Dashboard"]})}),ee&&e.jsxs(e.Fragment,{children:[e.jsx(Ra,{href:"/create-project",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-2 cursor-pointer",t==="/create-project"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(lc,{className:"h-4 w-4"})," Create Project"]})}),e.jsx(Ra,{href:"/create-boq",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/create-boq"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(qg,{className:"h-4 w-4"})," Create BOQ"]})})]}),X&&!ee&&!V&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Admin"}),e.jsx(Ra,{href:"/admin/dashboard?tab=materials",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",Ae==="materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Gd,{className:"h-4 w-4"})," Item Master"]})}),e.jsx(Ra,{href:"/admin/dashboard?tab=shops",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",Ae==="shops"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(lc,{className:"h-4 w-4"})," Manage Shops"]})}),e.jsx(Ra,{href:"/admin/dashboard?tab=create-product",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",Ae==="create-product"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Gd,{className:"h-4 w-4"})," Create Product"]})}),e.jsx(Ra,{href:"/admin/dashboard?tab=approvals",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",Ae==="approvals"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(BN,{className:"h-4 w-4"})," Shop Approvals",N>0&&e.jsx(qA,{variant:"destructive",className:"ml-auto",children:N})]})}),e.jsx(Ra,{href:"/admin/dashboard?tab=material-approvals",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",Ae==="material-approvals"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(_l,{className:"h-4 w-4"})," Material Approvals",E>0&&e.jsx(qA,{variant:"destructive",className:"ml-auto",children:E})]})}),e.jsx(Ra,{href:"/admin/dashboard?tab=messages",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",Ae==="messages"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(af,{className:"h-4 w-4"})," Messages",M>0&&e.jsx(qA,{variant:"secondary",className:"ml-auto",children:M})]})}),q&&e.jsx(Ra,{href:"/create-project",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-2 cursor-pointer",t==="/create-project"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(lc,{className:"h-4 w-4"})," Create Project"]})}),q&&e.jsx(Ra,{href:"/create-boq",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/create-boq"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(qg,{className:"h-4 w-4"})," Create BOQ"]})}),he&&!ee&&!V&&e.jsx(Ra,{href:"/admin/suppliers",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/suppliers"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(NN,{className:"h-4 w-4"})," Supplier Approvals"]})})]}),!ee&&!V&&(l?.role==="supplier"||l?.role==="purchase_team"||l?.role==="admin")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:l?.role==="admin"?"Materials":"Supplier"}),l?.role==="supplier"&&e.jsx(Ra,{href:"/supplier/shops",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/supplier/shops"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(lc,{className:"h-4 w-4"})," Add Shop"]})}),e.jsx(Ra,{href:"/supplier/materials",children:e.jsxs("span",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/supplier/materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Gd,{className:"h-4 w-4"})," Manage Materials"]})})]}):null,(V||J||G||l?.role==="purchase_team")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Sub-Categories"}),e.jsx("div",{className:"px-3 mb-2",children:e.jsx("input",{value:o,onChange:oe=>c(oe.target.value),placeholder:"Search Sub-Categories",className:"w-full rounded-md border px-2 py-1 text-sm bg-transparent text-sidebar-foreground placeholder:text-muted-foreground"})}),ce.map(oe=>{const ne=oe.href||`/estimators/${oe.name.toLowerCase().replace(/\s+/g,"")}`,re=oe.icon;return e.jsx(Ra,{href:ne,children:e.jsxs("div",{className:Xs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t===ne?"bg-sidebar-primary text-sidebar-primary-foreground shadow-md":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),onClick:()=>r(!1),children:[re&&e.jsx(re,{className:"h-4 w-4"}),oe.name||oe.label]})},oe.id||ne)})]}),!ee&&!V&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-6 px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Resources"}),e.jsx(Ra,{href:"/subscription",children:e.jsxs("span",{className:"flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium text-sidebar-foreground hover:bg-sidebar-accent cursor-pointer",children:[e.jsx(Gd,{className:"h-4 w-4"}),"Subscription"]})})]})]}),e.jsxs("div",{className:"border-t border-sidebar-border p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-sidebar-primary/20 flex items-center justify-center text-sidebar-primary font-bold",children:l?.fullName?.[0]?.toUpperCase()||l?.username?.[0]?.toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("span",{className:"text-sm font-medium text-sidebar-foreground truncate",children:l?.fullName||l?.username||"Guest"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate capitalize",children:l?.role?.replace("_"," ")||"Visitor"})]})]}),e.jsxs(Ie,{variant:"outline",className:"w-full justify-start text-destructive hover:text-destructive",onClick:K,children:[e.jsx(nO,{className:"mr-2 h-4 w-4"})," Log Out"]})]})]})]})}function ni({children:t}){return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(o8,{}),e.jsx("main",{className:"md:pl-64 min-h-screen transition-all duration-200",children:e.jsx("div",{className:"container mx-auto p-4 md:p-8 pt-16 md:pt-8 max-w-7xl",children:t})})]})}function a0(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}var l8=td[" useInsertionEffect ".trim().toString()]||Pa;function c8({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,p]=A8({defaultProp:s,onChange:n}),f=t!==void 0,A=f?t:o;{const l=C.useRef(t!==void 0);C.useEffect(()=>{const g=l.current;g!==f&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=f},[f,r])}const h=C.useCallback(l=>{if(f){const g=d8(l)?l(t):l;g!==t&&p.current?.(g)}else c(l)},[f,t,c,p]);return[A,h]}function A8({defaultProp:t,onChange:s}){const[n,r]=C.useState(t),o=C.useRef(n),c=C.useRef(s);return l8(()=>{c.current=s},[s]),C.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function d8(t){return typeof t=="function"}var Qy="Tabs",[u8]=uc(Qy,[Uy]),ME=Uy(),[h8,a1]=u8(Qy),_E=C.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:c,orientation:p="horizontal",dir:f,activationMode:A="automatic",...h}=t,l=Oy(f),[g,v]=c8({prop:r,onChange:o,defaultProp:c??"",caller:Qy});return e.jsx(h8,{scope:n,baseId:$d(),value:g,onValueChange:v,orientation:p,dir:l,activationMode:A,children:e.jsx(sr.div,{dir:l,"data-orientation":p,...h,ref:s})})});_E.displayName=Qy;var PE="TabsList",kE=C.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,c=a1(PE,n),p=ME(n);return e.jsx(hE,{asChild:!0,...p,orientation:c.orientation,dir:c.dir,loop:r,children:e.jsx(sr.div,{role:"tablist","aria-orientation":c.orientation,...o,ref:s})})});kE.displayName=PE;var HE="TabsTrigger",KE=C.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...c}=t,p=a1(HE,n),f=ME(n),A=VE(p.baseId,r),h=$E(p.baseId,r),l=r===p.value;return e.jsx(fE,{asChild:!0,...f,focusable:!o,active:l,children:e.jsx(sr.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":h,"data-state":l?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:A,...c,ref:s,onMouseDown:a0(t.onMouseDown,g=>{!o&&g.button===0&&g.ctrlKey===!1?p.onValueChange(r):g.preventDefault()}),onKeyDown:a0(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&p.onValueChange(r)}),onFocus:a0(t.onFocus,()=>{const g=p.activationMode!=="manual";!l&&!o&&g&&p.onValueChange(r)})})})});KE.displayName=HE;var zE="TabsContent",GE=C.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:o,children:c,...p}=t,f=a1(zE,n),A=VE(f.baseId,r),h=$E(f.baseId,r),l=r===f.value,g=C.useRef(l);return C.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),e.jsx(sd,{present:o||l,children:({present:v})=>e.jsx(sr.div,{"data-state":l?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":A,hidden:!v,id:h,tabIndex:0,...p,ref:s,style:{...t.style,animationDuration:g.current?"0s":void 0},children:v&&c})})});GE.displayName=zE;function VE(t,s){return`${t}-trigger-${s}`}function $E(t,s){return`${t}-content-${s}`}var f8=_E,qE=kE,WE=KE,YE=GE;const p8=f8,m8=C.forwardRef(({className:t,...s},n)=>e.jsx(qE,{ref:n,className:Xs("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));m8.displayName=qE.displayName;const g8=C.forwardRef(({className:t,...s},n)=>e.jsx(WE,{ref:n,className:Xs("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));g8.displayName=WE.displayName;const Hd=C.forwardRef(({className:t,...s},n)=>e.jsx(YE,{ref:n,className:Xs("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Hd.displayName=YE.displayName;function Q2(t,[s,n]){return Math.min(n,Math.max(s,t))}function po(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}var i0=0;function XE(){C.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??M2()),document.body.insertAdjacentElement("beforeend",t[1]??M2()),i0++,()=>{i0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),i0--}},[])}function M2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var o0="focusScope.autoFocusOnMount",l0="focusScope.autoFocusOnUnmount",_2={bubbles:!1,cancelable:!0},y8="FocusScope",i1=C.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:c,...p}=t,[f,A]=C.useState(null),h=Po(o),l=Po(c),g=C.useRef(null),v=Fr(s,w=>A(w)),m=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let w=function(k){if(m.paused||!f)return;const K=k.target;f.contains(K)?g.current=K:Kd(g.current,{select:!0})},E=function(k){if(m.paused||!f)return;const K=k.relatedTarget;K!==null&&(f.contains(K)||Kd(g.current,{select:!0}))},F=function(k){if(document.activeElement===document.body)for(const G of k)G.removedNodes.length>0&&Kd(f)};document.addEventListener("focusin",w),document.addEventListener("focusout",E);const M=new MutationObserver(F);return f&&M.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",E),M.disconnect()}}},[r,f,m.paused]),C.useEffect(()=>{if(f){k2.add(m);const w=document.activeElement;if(!f.contains(w)){const F=new CustomEvent(o0,_2);f.addEventListener(o0,h),f.dispatchEvent(F),F.defaultPrevented||(x8(S8(JE(f)),{select:!0}),document.activeElement===w&&Kd(f))}return()=>{f.removeEventListener(o0,h),setTimeout(()=>{const F=new CustomEvent(l0,_2);f.addEventListener(l0,l),f.dispatchEvent(F),F.defaultPrevented||Kd(w??document.body,{select:!0}),f.removeEventListener(l0,l),k2.remove(m)},0)}}},[f,h,l,m]);const N=C.useCallback(w=>{if(!n&&!r||m.paused)return;const E=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,F=document.activeElement;if(E&&F){const M=w.currentTarget,[k,K]=v8(M);k&&K?!w.shiftKey&&F===K?(w.preventDefault(),n&&Kd(k,{select:!0})):w.shiftKey&&F===k&&(w.preventDefault(),n&&Kd(K,{select:!0})):F===M&&w.preventDefault()}},[n,r,m.paused]);return e.jsx(sr.div,{tabIndex:-1,...p,ref:v,onKeyDown:N})});i1.displayName=y8;function x8(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(Kd(r,{select:s}),document.activeElement!==n)return}function v8(t){const s=JE(t),n=P2(s,t),r=P2(s.reverse(),t);return[n,r]}function JE(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function P2(t,s){for(const n of t)if(!b8(n,{upTo:s}))return n}function b8(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function j8(t){return t instanceof HTMLInputElement&&"select"in t}function Kd(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&j8(t)&&s&&t.select()}}var k2=w8();function w8(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=H2(t,s),t.unshift(s)},remove(s){t=H2(t,s),t[0]?.resume()}}}function H2(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function S8(t){return t.filter(s=>s.tagName!=="A")}function B8(t){const s=N8(t),n=C.forwardRef((r,o)=>{const{children:c,...p}=r,f=C.Children.toArray(c),A=f.find(E8);if(A){const h=A.props.children,l=f.map(g=>g===A?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return e.jsx(s,{...p,ref:o,children:C.isValidElement(h)?C.cloneElement(h,void 0,l):null})}return e.jsx(s,{...p,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function N8(t){const s=C.forwardRef((n,r)=>{const{children:o,...c}=n;if(C.isValidElement(o)){const p=F8(o),f=T8(c,o.props);return o.type!==C.Fragment&&(f.ref=r?ah(r,p):p),C.cloneElement(o,f)}return C.Children.count(o)>1?C.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var C8=Symbol("radix.slottable");function E8(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===C8}function T8(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...f)=>{const A=c(...f);return o(...f),A}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function F8(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var I8=td[" useInsertionEffect ".trim().toString()]||Pa;function K2({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,p]=R8({defaultProp:s,onChange:n}),f=t!==void 0,A=f?t:o;{const l=C.useRef(t!==void 0);C.useEffect(()=>{const g=l.current;g!==f&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=f},[f,r])}const h=C.useCallback(l=>{if(f){const g=O8(l)?l(t):l;g!==t&&p.current?.(g)}else c(l)},[f,t,c,p]);return[A,h]}function R8({defaultProp:t,onChange:s}){const[n,r]=C.useState(t),o=C.useRef(n),c=C.useRef(s);return I8(()=>{c.current=s},[s]),C.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function O8(t){return typeof t=="function"}var U8=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Qh=new WeakMap,ug=new WeakMap,hg={},c0=0,ZE=function(t){return t&&(t.host||ZE(t.parentNode))},L8=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=ZE(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},D8=function(t,s,n,r){var o=L8(s,Array.isArray(t)?t:[t]);hg[n]||(hg[n]=new WeakMap);var c=hg[n],p=[],f=new Set,A=new Set(o),h=function(g){!g||f.has(g)||(f.add(g),h(g.parentNode))};o.forEach(h);var l=function(g){!g||A.has(g)||Array.prototype.forEach.call(g.children,function(v){if(f.has(v))l(v);else try{var m=v.getAttribute(r),N=m!==null&&m!=="false",w=(Qh.get(v)||0)+1,E=(c.get(v)||0)+1;Qh.set(v,w),c.set(v,E),p.push(v),w===1&&N&&ug.set(v,!0),E===1&&v.setAttribute(n,"true"),N||v.setAttribute(r,"true")}catch(F){console.error("aria-hidden: cannot operate on ",v,F)}})};return l(s),f.clear(),c0++,function(){p.forEach(function(g){var v=Qh.get(g)-1,m=c.get(g)-1;Qh.set(g,v),c.set(g,m),v||(ug.has(g)||g.removeAttribute(r),ug.delete(g)),m||g.removeAttribute(n)}),c0--,c0||(Qh=new WeakMap,Qh=new WeakMap,ug=new WeakMap,hg={})}},e4=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=U8(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),D8(r,o,n,"aria-hidden")):function(){return null}},hA=function(){return hA=Object.assign||function(s){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},hA.apply(this,arguments)};function t4(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)s.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Q8(t,s,n){if(n||arguments.length===2)for(var r=0,o=s.length,c;r<o;r++)(c||!(r in s))&&(c||(c=Array.prototype.slice.call(s,0,r)),c[r]=s[r]);return t.concat(c||Array.prototype.slice.call(s))}var Lg="right-scroll-bar-position",Dg="width-before-scroll-bar",M8="with-scroll-bars-hidden",_8="--removed-body-scroll-bar-size";function A0(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function P8(t,s){var n=C.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=s,n.facade}var k8=typeof window<"u"?C.useLayoutEffect:C.useEffect,z2=new WeakMap;function H8(t,s){var n=P8(null,function(r){return t.forEach(function(o){return A0(o,r)})});return k8(function(){var r=z2.get(n);if(r){var o=new Set(r),c=new Set(t),p=n.current;o.forEach(function(f){c.has(f)||A0(f,null)}),c.forEach(function(f){o.has(f)||A0(f,p)})}z2.set(n,t)},[t]),n}function K8(t){return t}function z8(t,s){s===void 0&&(s=K8);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var p=s(c,r);return n.push(p),function(){n=n.filter(function(f){return f!==p})}},assignSyncMedium:function(c){for(r=!0;n.length;){var p=n;n=[],p.forEach(c)}n={push:function(f){return c(f)},filter:function(){return n}}},assignMedium:function(c){r=!0;var p=[];if(n.length){var f=n;n=[],f.forEach(c),p=n}var A=function(){var l=p;p=[],l.forEach(c)},h=function(){return Promise.resolve().then(A)};h(),n={push:function(l){p.push(l),h()},filter:function(l){return p=p.filter(l),n}}}};return o}function G8(t){t===void 0&&(t={});var s=z8(null);return s.options=hA({async:!0,ssr:!1},t),s}var s4=function(t){var s=t.sideCar,n=t4(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,hA({},n))};s4.isSideCarExport=!0;function V8(t,s){return t.useMedium(s),s4}var n4=G8(),d0=function(){},My=C.forwardRef(function(t,s){var n=C.useRef(null),r=C.useState({onScrollCapture:d0,onWheelCapture:d0,onTouchMoveCapture:d0}),o=r[0],c=r[1],p=t.forwardProps,f=t.children,A=t.className,h=t.removeScrollBar,l=t.enabled,g=t.shards,v=t.sideCar,m=t.noIsolation,N=t.inert,w=t.allowPinchZoom,E=t.as,F=E===void 0?"div":E,M=t.gapMode,k=t4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),K=v,G=H8([n,s]),ee=hA(hA({},k),o);return C.createElement(C.Fragment,null,l&&C.createElement(K,{sideCar:n4,removeScrollBar:h,shards:g,noIsolation:m,inert:N,setCallbacks:c,allowPinchZoom:!!w,lockRef:n,gapMode:M}),p?C.cloneElement(C.Children.only(f),hA(hA({},ee),{ref:G})):C.createElement(F,hA({},ee,{className:A,ref:G}),f))});My.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};My.classNames={fullWidth:Dg,zeroRight:Lg};var $8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function q8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=$8();return s&&t.setAttribute("nonce",s),t}function W8(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function Y8(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var X8=function(){var t=0,s=null;return{add:function(n){t==0&&(s=q8())&&(W8(s,n),Y8(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},J8=function(){var t=X8();return function(s,n){C.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},r4=function(){var t=J8(),s=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return s},Z8={left:0,top:0,right:0,gap:0},u0=function(t){return parseInt(t||"",10)||0},ek=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],o=s[t==="padding"?"paddingRight":"marginRight"];return[u0(n),u0(r),u0(o)]},tk=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Z8;var s=ek(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},sk=r4(),sf="data-scroll-locked",nk=function(t,s,n,r){var o=t.left,c=t.top,p=t.right,f=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(M8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(f,"px ").concat(r,`;
  }
  body[`).concat(sf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(f,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Lg,` {
    right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(Dg,` {
    margin-right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(Lg," .").concat(Lg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dg," .").concat(Dg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(sf,`] {
    `).concat(_8,": ").concat(f,`px;
  }
`)},G2=function(){var t=parseInt(document.body.getAttribute(sf)||"0",10);return isFinite(t)?t:0},rk=function(){C.useEffect(function(){return document.body.setAttribute(sf,(G2()+1).toString()),function(){var t=G2()-1;t<=0?document.body.removeAttribute(sf):document.body.setAttribute(sf,t.toString())}},[])},ak=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;rk();var c=C.useMemo(function(){return tk(o)},[o]);return C.createElement(sk,{styles:nk(c,!s,o,n?"":"!important")})},Fv=!1;if(typeof window<"u")try{var fg=Object.defineProperty({},"passive",{get:function(){return Fv=!0,!0}});window.addEventListener("test",fg,fg),window.removeEventListener("test",fg,fg)}catch{Fv=!1}var Mh=Fv?{passive:!1}:!1,ik=function(t){return t.tagName==="TEXTAREA"},a4=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!ik(t)&&n[s]==="visible")},ok=function(t){return a4(t,"overflowY")},lk=function(t){return a4(t,"overflowX")},V2=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=i4(t,r);if(o){var c=o4(t,r),p=c[1],f=c[2];if(p>f)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ck=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},Ak=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},i4=function(t,s){return t==="v"?ok(s):lk(s)},o4=function(t,s){return t==="v"?ck(s):Ak(s)},dk=function(t,s){return t==="h"&&s==="rtl"?-1:1},uk=function(t,s,n,r,o){var c=dk(t,window.getComputedStyle(s).direction),p=c*r,f=n.target,A=s.contains(f),h=!1,l=p>0,g=0,v=0;do{var m=o4(t,f),N=m[0],w=m[1],E=m[2],F=w-E-c*N;(N||F)&&i4(t,f)&&(g+=F,v+=N),f instanceof ShadowRoot?f=f.host:f=f.parentNode}while(!A&&f!==document.body||A&&(s.contains(f)||s===f));return(l&&Math.abs(g)<1||!l&&Math.abs(v)<1)&&(h=!0),h},pg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$2=function(t){return[t.deltaX,t.deltaY]},q2=function(t){return t&&"current"in t?t.current:t},hk=function(t,s){return t[0]===s[0]&&t[1]===s[1]},fk=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},pk=0,_h=[];function mk(t){var s=C.useRef([]),n=C.useRef([0,0]),r=C.useRef(),o=C.useState(pk++)[0],c=C.useState(r4)[0],p=C.useRef(t);C.useEffect(function(){p.current=t},[t]),C.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var w=Q8([t.lockRef.current],(t.shards||[]).map(q2),!0).filter(Boolean);return w.forEach(function(E){return E.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),w.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var f=C.useCallback(function(w,E){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!p.current.allowPinchZoom;var F=pg(w),M=n.current,k="deltaX"in w?w.deltaX:M[0]-F[0],K="deltaY"in w?w.deltaY:M[1]-F[1],G,ee=w.target,V=Math.abs(k)>Math.abs(K)?"h":"v";if("touches"in w&&V==="h"&&ee.type==="range")return!1;var X=V2(V,ee);if(!X)return!0;if(X?G=V:(G=V==="v"?"h":"v",X=V2(V,ee)),!X)return!1;if(!r.current&&"changedTouches"in w&&(k||K)&&(r.current=G),!G)return!0;var J=r.current||G;return uk(J,E,w,J==="h"?k:K)},[]),A=C.useCallback(function(w){var E=w;if(!(!_h.length||_h[_h.length-1]!==c)){var F="deltaY"in E?$2(E):pg(E),M=s.current.filter(function(G){return G.name===E.type&&(G.target===E.target||E.target===G.shadowParent)&&hk(G.delta,F)})[0];if(M&&M.should){E.cancelable&&E.preventDefault();return}if(!M){var k=(p.current.shards||[]).map(q2).filter(Boolean).filter(function(G){return G.contains(E.target)}),K=k.length>0?f(E,k[0]):!p.current.noIsolation;K&&E.cancelable&&E.preventDefault()}}},[]),h=C.useCallback(function(w,E,F,M){var k={name:w,delta:E,target:F,should:M,shadowParent:gk(F)};s.current.push(k),setTimeout(function(){s.current=s.current.filter(function(K){return K!==k})},1)},[]),l=C.useCallback(function(w){n.current=pg(w),r.current=void 0},[]),g=C.useCallback(function(w){h(w.type,$2(w),w.target,f(w,t.lockRef.current))},[]),v=C.useCallback(function(w){h(w.type,pg(w),w.target,f(w,t.lockRef.current))},[]);C.useEffect(function(){return _h.push(c),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",A,Mh),document.addEventListener("touchmove",A,Mh),document.addEventListener("touchstart",l,Mh),function(){_h=_h.filter(function(w){return w!==c}),document.removeEventListener("wheel",A,Mh),document.removeEventListener("touchmove",A,Mh),document.removeEventListener("touchstart",l,Mh)}},[]);var m=t.removeScrollBar,N=t.inert;return C.createElement(C.Fragment,null,N?C.createElement(c,{styles:fk(o)}):null,m?C.createElement(ak,{gapMode:t.gapMode}):null)}function gk(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const yk=V8(n4,mk);var o1=C.forwardRef(function(t,s){return C.createElement(My,hA({},t,{ref:s,sideCar:yk}))});o1.classNames=My.classNames;var xk=[" ","Enter","ArrowUp","ArrowDown"],vk=[" ","Enter"],Zu="Select",[_y,Py,bk]=oE(Zu),[vf]=uc(Zu,[bk,Ny]),ky=Ny(),[jk,su]=vf(Zu),[wk,Sk]=vf(Zu),l4=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:o,onOpenChange:c,value:p,defaultValue:f,onValueChange:A,dir:h,name:l,autoComplete:g,disabled:v,required:m,form:N}=t,w=ky(s),[E,F]=C.useState(null),[M,k]=C.useState(null),[K,G]=C.useState(!1),ee=Oy(h),[V,X]=K2({prop:r,defaultProp:o??!1,onChange:c,caller:Zu}),[J,he]=K2({prop:p,defaultProp:f,onChange:A,caller:Zu}),q=C.useRef(null),ie=E?N||!!E.closest("form"):!0,[Ae,ce]=C.useState(new Set),oe=Array.from(Ae).map(ne=>ne.props.value).join(";");return e.jsx(GL,{...w,children:e.jsxs(jk,{required:m,scope:s,trigger:E,onTriggerChange:F,valueNode:M,onValueNodeChange:k,valueNodeHasChildren:K,onValueNodeHasChildrenChange:G,contentId:$d(),value:J,onValueChange:he,open:V,onOpenChange:X,dir:ee,triggerPointerDownPosRef:q,disabled:v,children:[e.jsx(_y.Provider,{scope:s,children:e.jsx(wk,{scope:t.__scopeSelect,onNativeOptionAdd:C.useCallback(ne=>{ce(re=>new Set(re).add(ne))},[]),onNativeOptionRemove:C.useCallback(ne=>{ce(re=>{const se=new Set(re);return se.delete(ne),se})},[]),children:n})}),ie?e.jsxs(R4,{"aria-hidden":!0,required:m,tabIndex:-1,name:l,autoComplete:g,value:J,onChange:ne=>he(ne.target.value),disabled:v,form:N,children:[J===void 0?e.jsx("option",{value:""}):null,Array.from(Ae)]},oe):null]})})};l4.displayName=Zu;var c4="SelectTrigger",A4=C.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,c=ky(n),p=su(c4,n),f=p.disabled||r,A=Fr(s,p.onTriggerChange),h=Py(n),l=C.useRef("touch"),[g,v,m]=U4(w=>{const E=h().filter(k=>!k.disabled),F=E.find(k=>k.value===p.value),M=L4(E,w,F);M!==void 0&&p.onValueChange(M.value)}),N=w=>{f||(p.onOpenChange(!0),m()),w&&(p.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return e.jsx(dC,{asChild:!0,...c,children:e.jsx(sr.button,{type:"button",role:"combobox","aria-controls":p.contentId,"aria-expanded":p.open,"aria-required":p.required,"aria-autocomplete":"none",dir:p.dir,"data-state":p.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":O4(p.value)?"":void 0,...o,ref:A,onClick:po(o.onClick,w=>{w.currentTarget.focus(),l.current!=="mouse"&&N(w)}),onPointerDown:po(o.onPointerDown,w=>{l.current=w.pointerType;const E=w.target;E.hasPointerCapture(w.pointerId)&&E.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(N(w),w.preventDefault())}),onKeyDown:po(o.onKeyDown,w=>{const E=g.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&v(w.key),!(E&&w.key===" ")&&xk.includes(w.key)&&(N(),w.preventDefault())})})})});A4.displayName=c4;var d4="SelectValue",u4=C.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:o,children:c,placeholder:p="",...f}=t,A=su(d4,n),{onValueNodeHasChildrenChange:h}=A,l=c!==void 0,g=Fr(s,A.onValueNodeChange);return Pa(()=>{h(l)},[h,l]),e.jsx(sr.span,{...f,ref:g,style:{pointerEvents:"none"},children:O4(A.value)?e.jsx(e.Fragment,{children:p}):c})});u4.displayName=d4;var Bk="SelectIcon",h4=C.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...o}=t;return e.jsx(sr.span,{"aria-hidden":!0,...o,ref:s,children:r||""})});h4.displayName=Bk;var Nk="SelectPortal",f4=t=>e.jsx(Cy,{asChild:!0,...t});f4.displayName=Nk;var eh="SelectContent",p4=C.forwardRef((t,s)=>{const n=su(eh,t.__scopeSelect),[r,o]=C.useState();if(Pa(()=>{o(new DocumentFragment)},[]),!n.open){const c=r;return c?rh.createPortal(e.jsx(m4,{scope:t.__scopeSelect,children:e.jsx(_y.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(g4,{...t,ref:s})});p4.displayName=eh;var Rc=10,[m4,nu]=vf(eh),Ck="SelectContentImpl",Ek=B8("SelectContent.RemoveScroll"),g4=C.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:c,onPointerDownOutside:p,side:f,sideOffset:A,align:h,alignOffset:l,arrowPadding:g,collisionBoundary:v,collisionPadding:m,sticky:N,hideWhenDetached:w,avoidCollisions:E,...F}=t,M=su(eh,n),[k,K]=C.useState(null),[G,ee]=C.useState(null),V=Fr(s,Ne=>K(Ne)),[X,J]=C.useState(null),[he,q]=C.useState(null),ie=Py(n),[Ae,ce]=C.useState(!1),oe=C.useRef(!1);C.useEffect(()=>{if(k)return e4(k)},[k]),XE();const ne=C.useCallback(Ne=>{const[ye,...we]=ie().map(ve=>ve.ref.current),[Te]=we.slice(-1),qe=document.activeElement;for(const ve of Ne)if(ve===qe||(ve?.scrollIntoView({block:"nearest"}),ve===ye&&G&&(G.scrollTop=0),ve===Te&&G&&(G.scrollTop=G.scrollHeight),ve?.focus(),document.activeElement!==qe))return},[ie,G]),re=C.useCallback(()=>ne([X,k]),[ne,X,k]);C.useEffect(()=>{Ae&&re()},[Ae,re]);const{onOpenChange:se,triggerPointerDownPosRef:je}=M;C.useEffect(()=>{if(k){let Ne={x:0,y:0};const ye=Te=>{Ne={x:Math.abs(Math.round(Te.pageX)-(je.current?.x??0)),y:Math.abs(Math.round(Te.pageY)-(je.current?.y??0))}},we=Te=>{Ne.x<=10&&Ne.y<=10?Te.preventDefault():k.contains(Te.target)||se(!1),document.removeEventListener("pointermove",ye),je.current=null};return je.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",we,{capture:!0})}}},[k,se,je]),C.useEffect(()=>{const Ne=()=>se(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[se]);const[De,ge]=U4(Ne=>{const ye=ie().filter(qe=>!qe.disabled),we=ye.find(qe=>qe.ref.current===document.activeElement),Te=L4(ye,Ne,we);Te&&setTimeout(()=>Te.ref.current.focus())}),Z=C.useCallback((Ne,ye,we)=>{const Te=!oe.current&&!we;(M.value!==void 0&&M.value===ye||Te)&&(J(Ne),Te&&(oe.current=!0))},[M.value]),fe=C.useCallback(()=>k?.focus(),[k]),ue=C.useCallback((Ne,ye,we)=>{const Te=!oe.current&&!we;(M.value!==void 0&&M.value===ye||Te)&&q(Ne)},[M.value]),pe=r==="popper"?Iv:y4,Ce=pe===Iv?{side:f,sideOffset:A,align:h,alignOffset:l,arrowPadding:g,collisionBoundary:v,collisionPadding:m,sticky:N,hideWhenDetached:w,avoidCollisions:E}:{};return e.jsx(m4,{scope:n,content:k,viewport:G,onViewportChange:ee,itemRefCallback:Z,selectedItem:X,onItemLeave:fe,itemTextRefCallback:ue,focusSelectedItem:re,selectedItemText:he,position:r,isPositioned:Ae,searchRef:De,children:e.jsx(o1,{as:Ek,allowPinchZoom:!0,children:e.jsx(i1,{asChild:!0,trapped:M.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:po(o,Ne=>{M.trigger?.focus({preventScroll:!0}),Ne.preventDefault()}),children:e.jsx(by,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:e.jsx(pe,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:Ne=>Ne.preventDefault(),...F,...Ce,onPlaced:()=>ce(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...F.style},onKeyDown:po(F.onKeyDown,Ne=>{const ye=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!ye&&Ne.key.length===1&&ge(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let Te=ie().filter(qe=>!qe.disabled).map(qe=>qe.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const qe=Ne.target,ve=Te.indexOf(qe);Te=Te.slice(ve+1)}setTimeout(()=>ne(Te)),Ne.preventDefault()}})})})})})})});g4.displayName=Ck;var Tk="SelectItemAlignedPosition",y4=C.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,c=su(eh,n),p=nu(eh,n),[f,A]=C.useState(null),[h,l]=C.useState(null),g=Fr(s,V=>l(V)),v=Py(n),m=C.useRef(!1),N=C.useRef(!0),{viewport:w,selectedItem:E,selectedItemText:F,focusSelectedItem:M}=p,k=C.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&h&&w&&E&&F){const V=c.trigger.getBoundingClientRect(),X=h.getBoundingClientRect(),J=c.valueNode.getBoundingClientRect(),he=F.getBoundingClientRect();if(c.dir!=="rtl"){const qe=he.left-X.left,ve=J.left-qe,Ge=V.left-ve,at=V.width+Ge,Se=Math.max(at,X.width),vt=window.innerWidth-Rc,ht=Q2(ve,[Rc,Math.max(Rc,vt-Se)]);f.style.minWidth=at+"px",f.style.left=ht+"px"}else{const qe=X.right-he.right,ve=window.innerWidth-J.right-qe,Ge=window.innerWidth-V.right-ve,at=V.width+Ge,Se=Math.max(at,X.width),vt=window.innerWidth-Rc,ht=Q2(ve,[Rc,Math.max(Rc,vt-Se)]);f.style.minWidth=at+"px",f.style.right=ht+"px"}const q=v(),ie=window.innerHeight-Rc*2,Ae=w.scrollHeight,ce=window.getComputedStyle(h),oe=parseInt(ce.borderTopWidth,10),ne=parseInt(ce.paddingTop,10),re=parseInt(ce.borderBottomWidth,10),se=parseInt(ce.paddingBottom,10),je=oe+ne+Ae+se+re,De=Math.min(E.offsetHeight*5,je),ge=window.getComputedStyle(w),Z=parseInt(ge.paddingTop,10),fe=parseInt(ge.paddingBottom,10),ue=V.top+V.height/2-Rc,pe=ie-ue,Ce=E.offsetHeight/2,Ne=E.offsetTop+Ce,ye=oe+ne+Ne,we=je-ye;if(ye<=ue){const qe=q.length>0&&E===q[q.length-1].ref.current;f.style.bottom="0px";const ve=h.clientHeight-w.offsetTop-w.offsetHeight,Ge=Math.max(pe,Ce+(qe?fe:0)+ve+re),at=ye+Ge;f.style.height=at+"px"}else{const qe=q.length>0&&E===q[0].ref.current;f.style.top="0px";const Ge=Math.max(ue,oe+w.offsetTop+(qe?Z:0)+Ce)+we;f.style.height=Ge+"px",w.scrollTop=ye-ue+w.offsetTop}f.style.margin=`${Rc}px 0`,f.style.minHeight=De+"px",f.style.maxHeight=ie+"px",r?.(),requestAnimationFrame(()=>m.current=!0)}},[v,c.trigger,c.valueNode,f,h,w,E,F,c.dir,r]);Pa(()=>k(),[k]);const[K,G]=C.useState();Pa(()=>{h&&G(window.getComputedStyle(h).zIndex)},[h]);const ee=C.useCallback(V=>{V&&N.current===!0&&(k(),M?.(),N.current=!1)},[k,M]);return e.jsx(Ik,{scope:n,contentWrapper:f,shouldExpandOnScrollRef:m,onScrollButtonChange:ee,children:e.jsx("div",{ref:A,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:K},children:e.jsx(sr.div,{...o,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});y4.displayName=Tk;var Fk="SelectPopperPosition",Iv=C.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Rc,...c}=t,p=ky(n);return e.jsx(uC,{...p,...c,ref:s,align:r,collisionPadding:o,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Iv.displayName=Fk;var[Ik,l1]=vf(eh,{}),Rv="SelectViewport",x4=C.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...o}=t,c=nu(Rv,n),p=l1(Rv,n),f=Fr(s,c.onViewportChange),A=C.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(_y.Slot,{scope:n,children:e.jsx(sr.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:po(o.onScroll,h=>{const l=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=p;if(v?.current&&g){const m=Math.abs(A.current-l.scrollTop);if(m>0){const N=window.innerHeight-Rc*2,w=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),F=Math.max(w,E);if(F<N){const M=F+m,k=Math.min(N,M),K=M-k;g.style.height=k+"px",g.style.bottom==="0px"&&(l.scrollTop=K>0?K:0,g.style.justifyContent="flex-end")}}}A.current=l.scrollTop})})})]})});x4.displayName=Rv;var v4="SelectGroup",[Rk,Ok]=vf(v4),Uk=C.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=$d();return e.jsx(Rk,{scope:n,id:o,children:e.jsx(sr.div,{role:"group","aria-labelledby":o,...r,ref:s})})});Uk.displayName=v4;var b4="SelectLabel",j4=C.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=Ok(b4,n);return e.jsx(sr.div,{id:o.id,...r,ref:s})});j4.displayName=b4;var iy="SelectItem",[Lk,w4]=vf(iy),S4=C.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:c,...p}=t,f=su(iy,n),A=nu(iy,n),h=f.value===r,[l,g]=C.useState(c??""),[v,m]=C.useState(!1),N=Fr(s,M=>A.itemRefCallback?.(M,r,o)),w=$d(),E=C.useRef("touch"),F=()=>{o||(f.onValueChange(r),f.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Lk,{scope:n,value:r,disabled:o,textId:w,isSelected:h,onItemTextChange:C.useCallback(M=>{g(k=>k||(M?.textContent??"").trim())},[]),children:e.jsx(_y.ItemSlot,{scope:n,value:r,disabled:o,textValue:l,children:e.jsx(sr.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...p,ref:N,onFocus:po(p.onFocus,()=>m(!0)),onBlur:po(p.onBlur,()=>m(!1)),onClick:po(p.onClick,()=>{E.current!=="mouse"&&F()}),onPointerUp:po(p.onPointerUp,()=>{E.current==="mouse"&&F()}),onPointerDown:po(p.onPointerDown,M=>{E.current=M.pointerType}),onPointerMove:po(p.onPointerMove,M=>{E.current=M.pointerType,o?A.onItemLeave?.():E.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:po(p.onPointerLeave,M=>{M.currentTarget===document.activeElement&&A.onItemLeave?.()}),onKeyDown:po(p.onKeyDown,M=>{A.searchRef?.current!==""&&M.key===" "||(vk.includes(M.key)&&F(),M.key===" "&&M.preventDefault())})})})})});S4.displayName=iy;var Bp="SelectItemText",B4=C.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:o,...c}=t,p=su(Bp,n),f=nu(Bp,n),A=w4(Bp,n),h=Sk(Bp,n),[l,g]=C.useState(null),v=Fr(s,F=>g(F),A.onItemTextChange,F=>f.itemTextRefCallback?.(F,A.value,A.disabled)),m=l?.textContent,N=C.useMemo(()=>e.jsx("option",{value:A.value,disabled:A.disabled,children:m},A.value),[A.disabled,A.value,m]),{onNativeOptionAdd:w,onNativeOptionRemove:E}=h;return Pa(()=>(w(N),()=>E(N)),[w,E,N]),e.jsxs(e.Fragment,{children:[e.jsx(sr.span,{id:A.textId,...c,ref:v}),A.isSelected&&p.valueNode&&!p.valueNodeHasChildren?rh.createPortal(c.children,p.valueNode):null]})});B4.displayName=Bp;var N4="SelectItemIndicator",C4=C.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return w4(N4,n).isSelected?e.jsx(sr.span,{"aria-hidden":!0,...r,ref:s}):null});C4.displayName=N4;var Ov="SelectScrollUpButton",E4=C.forwardRef((t,s)=>{const n=nu(Ov,t.__scopeSelect),r=l1(Ov,t.__scopeSelect),[o,c]=C.useState(!1),p=Fr(s,r.onScrollButtonChange);return Pa(()=>{if(n.viewport&&n.isPositioned){let f=function(){const h=A.scrollTop>0;c(h)};const A=n.viewport;return f(),A.addEventListener("scroll",f),()=>A.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),o?e.jsx(F4,{...t,ref:p,onAutoScroll:()=>{const{viewport:f,selectedItem:A}=n;f&&A&&(f.scrollTop=f.scrollTop-A.offsetHeight)}}):null});E4.displayName=Ov;var Uv="SelectScrollDownButton",T4=C.forwardRef((t,s)=>{const n=nu(Uv,t.__scopeSelect),r=l1(Uv,t.__scopeSelect),[o,c]=C.useState(!1),p=Fr(s,r.onScrollButtonChange);return Pa(()=>{if(n.viewport&&n.isPositioned){let f=function(){const h=A.scrollHeight-A.clientHeight,l=Math.ceil(A.scrollTop)<h;c(l)};const A=n.viewport;return f(),A.addEventListener("scroll",f),()=>A.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),o?e.jsx(F4,{...t,ref:p,onAutoScroll:()=>{const{viewport:f,selectedItem:A}=n;f&&A&&(f.scrollTop=f.scrollTop+A.offsetHeight)}}):null});T4.displayName=Uv;var F4=C.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,c=nu("SelectScrollButton",n),p=C.useRef(null),f=Py(n),A=C.useCallback(()=>{p.current!==null&&(window.clearInterval(p.current),p.current=null)},[]);return C.useEffect(()=>()=>A(),[A]),Pa(()=>{f().find(l=>l.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[f]),e.jsx(sr.div,{"aria-hidden":!0,...o,ref:s,style:{flexShrink:0,...o.style},onPointerDown:po(o.onPointerDown,()=>{p.current===null&&(p.current=window.setInterval(r,50))}),onPointerMove:po(o.onPointerMove,()=>{c.onItemLeave?.(),p.current===null&&(p.current=window.setInterval(r,50))}),onPointerLeave:po(o.onPointerLeave,()=>{A()})})}),Dk="SelectSeparator",I4=C.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(sr.div,{"aria-hidden":!0,...r,ref:s})});I4.displayName=Dk;var Lv="SelectArrow",Qk=C.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,o=ky(n),c=su(Lv,n),p=nu(Lv,n);return c.open&&p.position==="popper"?e.jsx(hC,{...o,...r,ref:s}):null});Qk.displayName=Lv;var Mk="SelectBubbleInput",R4=C.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const o=C.useRef(null),c=Fr(r,o),p=t1(s);return C.useEffect(()=>{const f=o.current;if(!f)return;const A=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(A,"value").set;if(p!==s&&l){const g=new Event("change",{bubbles:!0});l.call(f,s),f.dispatchEvent(g)}},[p,s]),e.jsx(sr.select,{...n,style:{...fC,...n.style},ref:c,defaultValue:s})});R4.displayName=Mk;function O4(t){return t===""||t===void 0}function U4(t){const s=Po(t),n=C.useRef(""),r=C.useRef(0),o=C.useCallback(p=>{const f=n.current+p;s(f),(function A(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>A(""),1e3))})(f)},[s]),c=C.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,c]}function L4(t,s,n){const o=s.length>1&&Array.from(s).every(h=>h===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let p=_k(t,Math.max(c,0));o.length===1&&(p=p.filter(h=>h!==n));const A=p.find(h=>h.textValue.toLowerCase().startsWith(o.toLowerCase()));return A!==n?A:void 0}function _k(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var Pk=l4,D4=A4,kk=u4,Hk=h4,Kk=f4,Q4=p4,zk=x4,M4=j4,_4=S4,Gk=B4,Vk=C4,P4=E4,k4=T4,H4=I4;const Lr=Pk,Dr=kk,Er=C.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(D4,{ref:r,className:Xs("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx(Hk,{asChild:!0,children:e.jsx(vN,{className:"h-4 w-4 opacity-50"})})]}));Er.displayName=D4.displayName;const K4=C.forwardRef(({className:t,...s},n)=>e.jsx(P4,{ref:n,className:Xs("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(M3,{className:"h-4 w-4"})}));K4.displayName=P4.displayName;const z4=C.forwardRef(({className:t,...s},n)=>e.jsx(k4,{ref:n,className:Xs("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(vN,{className:"h-4 w-4"})}));z4.displayName=k4.displayName;const Tr=C.forwardRef(({className:t,children:s,position:n="popper",...r},o)=>e.jsx(Kk,{children:e.jsxs(Q4,{ref:o,className:Xs("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(K4,{}),e.jsx(zk,{className:Xs("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(z4,{})]})}));Tr.displayName=Q4.displayName;const $k=C.forwardRef(({className:t,...s},n)=>e.jsx(M4,{ref:n,className:Xs("px-2 py-1.5 text-sm font-semibold",t),...s}));$k.displayName=M4.displayName;const wr=C.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(_4,{ref:r,className:Xs("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Vk,{children:e.jsx(ob,{className:"h-4 w-4"})})}),e.jsx(Gk,{children:s})]}));wr.displayName=_4.displayName;const qk=C.forwardRef(({className:t,...s},n)=>e.jsx(H4,{ref:n,className:Xs("-mx-1 my-1 h-px bg-muted",t),...s}));qk.displayName=H4.displayName;function Rp(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}var Wk=td[" useInsertionEffect ".trim().toString()]||Pa;function Yk({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[o,c,p]=Xk({defaultProp:s,onChange:n}),f=t!==void 0,A=f?t:o;{const l=C.useRef(t!==void 0);C.useEffect(()=>{const g=l.current;g!==f&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=f},[f,r])}const h=C.useCallback(l=>{if(f){const g=Jk(l)?l(t):l;g!==t&&p.current?.(g)}else c(l)},[f,t,c,p]);return[A,h]}function Xk({defaultProp:t,onChange:s}){const[n,r]=C.useState(t),o=C.useRef(n),c=C.useRef(s);return Wk(()=>{c.current=s},[s]),C.useEffect(()=>{o.current!==n&&(c.current?.(n),o.current=n)},[n,o]),[n,r,c]}function Jk(t){return typeof t=="function"}function Zk(t){const s=eH(t),n=C.forwardRef((r,o)=>{const{children:c,...p}=r,f=C.Children.toArray(c),A=f.find(sH);if(A){const h=A.props.children,l=f.map(g=>g===A?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return e.jsx(s,{...p,ref:o,children:C.isValidElement(h)?C.cloneElement(h,void 0,l):null})}return e.jsx(s,{...p,ref:o,children:c})});return n.displayName=`${t}.Slot`,n}function eH(t){const s=C.forwardRef((n,r)=>{const{children:o,...c}=n;if(C.isValidElement(o)){const p=rH(o),f=nH(c,o.props);return o.type!==C.Fragment&&(f.ref=r?ah(r,p):p),C.cloneElement(o,f)}return C.Children.count(o)>1?C.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var tH=Symbol("radix.slottable");function sH(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===tH}function nH(t,s){const n={...s};for(const r in s){const o=t[r],c=s[r];/^on[A-Z]/.test(r)?o&&c?n[r]=(...f)=>{const A=c(...f);return o(...f),A}:o&&(n[r]=o):r==="style"?n[r]={...o,...c}:r==="className"&&(n[r]=[o,c].filter(Boolean).join(" "))}return{...t,...n}}function rH(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Hy="Dialog",[G4]=uc(Hy),[aH,Mc]=G4(Hy),V4=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:o,onOpenChange:c,modal:p=!0}=t,f=C.useRef(null),A=C.useRef(null),[h,l]=Yk({prop:r,defaultProp:o??!1,onChange:c,caller:Hy});return e.jsx(aH,{scope:s,triggerRef:f,contentRef:A,contentId:$d(),titleId:$d(),descriptionId:$d(),open:h,onOpenChange:l,onOpenToggle:C.useCallback(()=>l(g=>!g),[l]),modal:p,children:n})};V4.displayName=Hy;var $4="DialogTrigger",q4=C.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Mc($4,n),c=Fr(s,o.triggerRef);return e.jsx(sr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":d1(o.open),...r,ref:c,onClick:Rp(t.onClick,o.onOpenToggle)})});q4.displayName=$4;var c1="DialogPortal",[iH,W4]=G4(c1,{forceMount:void 0}),Y4=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:o}=t,c=Mc(c1,s);return e.jsx(iH,{scope:s,forceMount:n,children:C.Children.map(r,p=>e.jsx(sd,{present:n||c.open,children:e.jsx(Cy,{asChild:!0,container:o,children:p})}))})};Y4.displayName=c1;var oy="DialogOverlay",X4=C.forwardRef((t,s)=>{const n=W4(oy,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,c=Mc(oy,t.__scopeDialog);return c.modal?e.jsx(sd,{present:r||c.open,children:e.jsx(lH,{...o,ref:s})}):null});X4.displayName=oy;var oH=Zk("DialogOverlay.RemoveScroll"),lH=C.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Mc(oy,n);return e.jsx(o1,{as:oH,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(sr.div,{"data-state":d1(o.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),th="DialogContent",J4=C.forwardRef((t,s)=>{const n=W4(th,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,c=Mc(th,t.__scopeDialog);return e.jsx(sd,{present:r||c.open,children:c.modal?e.jsx(cH,{...o,ref:s}):e.jsx(AH,{...o,ref:s})})});J4.displayName=th;var cH=C.forwardRef((t,s)=>{const n=Mc(th,t.__scopeDialog),r=C.useRef(null),o=Fr(s,n.contentRef,r);return C.useEffect(()=>{const c=r.current;if(c)return e4(c)},[]),e.jsx(Z4,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Rp(t.onCloseAutoFocus,c=>{c.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Rp(t.onPointerDownOutside,c=>{const p=c.detail.originalEvent,f=p.button===0&&p.ctrlKey===!0;(p.button===2||f)&&c.preventDefault()}),onFocusOutside:Rp(t.onFocusOutside,c=>c.preventDefault())})}),AH=C.forwardRef((t,s)=>{const n=Mc(th,t.__scopeDialog),r=C.useRef(!1),o=C.useRef(!1);return e.jsx(Z4,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(r.current||n.triggerRef.current?.focus(),c.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(r.current=!0,c.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const p=c.target;n.triggerRef.current?.contains(p)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&o.current&&c.preventDefault()}})}),Z4=C.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:c,...p}=t,f=Mc(th,n),A=C.useRef(null),h=Fr(s,A);return XE(),e.jsxs(e.Fragment,{children:[e.jsx(i1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:c,children:e.jsx(by,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":d1(f.open),...p,ref:h,onDismiss:()=>f.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(dH,{titleId:f.titleId}),e.jsx(hH,{contentRef:A,descriptionId:f.descriptionId})]})]})}),A1="DialogTitle",eT=C.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Mc(A1,n);return e.jsx(sr.h2,{id:o.titleId,...r,ref:s})});eT.displayName=A1;var tT="DialogDescription",sT=C.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Mc(tT,n);return e.jsx(sr.p,{id:o.descriptionId,...r,ref:s})});sT.displayName=tT;var nT="DialogClose",rT=C.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,o=Mc(nT,n);return e.jsx(sr.button,{type:"button",...r,ref:s,onClick:Rp(t.onClick,()=>o.onOpenChange(!1))})});rT.displayName=nT;function d1(t){return t?"open":"closed"}var aT="DialogTitleWarning",[Xz,iT]=OR(aT,{contentName:th,titleName:A1,docsSlug:"dialog"}),dH=({titleId:t})=>{const s=iT(aT),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return C.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},uH="DialogDescriptionWarning",hH=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${iT(uH).contentName}}.`;return C.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");s&&o&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},fH=V4,pH=q4,mH=Y4,oT=X4,lT=J4,cT=eT,AT=sT,gH=rT;const Jh=fH,h0=pH,yH=mH,dT=C.forwardRef(({className:t,...s},n)=>e.jsx(oT,{ref:n,className:Xs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));dT.displayName=oT.displayName;const Hu=C.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(yH,{children:[e.jsx(dT,{}),e.jsxs(lT,{ref:r,className:Xs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(gH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(lb,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hu.displayName=lT.displayName;const Ku=({className:t,...s})=>e.jsx("div",{className:Xs("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Ku.displayName="DialogHeader";const zu=C.forwardRef(({className:t,...s},n)=>e.jsx(cT,{ref:n,className:Xs("text-lg font-semibold leading-none tracking-tight",t),...s}));zu.displayName=cT.displayName;const xH=C.forwardRef(({className:t,...s},n)=>e.jsx(AT,{ref:n,className:Xs("text-sm text-muted-foreground",t),...s}));xH.displayName=AT.displayName;const KA=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),vH=["pcs","kg","meter","sqft","cum","litre","set","nos"],bH=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}];function Dv(){const{toast:t}=Ai(),{shops:s,materials:n,addShop:r,addMaterial:o,user:c,approvalRequests:p,supportMessages:f,submitShopForApproval:A,submitMaterialForApproval:h,approveShop:l,rejectShop:g,deleteShop:v,deleteMaterial:m,addSupportMessage:N,deleteMessage:w}=ci(),{materialApprovalRequests:E,approveMaterial:F,rejectMaterial:M}=ci(),[k,K]=C.useState(""),[G,ee]=C.useState(null),[V,X]=C.useState([]),[J,he]=C.useState([]),[q,ie]=C.useState(null),[Ae,ce]=C.useState(""),[oe,ne]=C.useState([]);C.useEffect(()=>{(async()=>{try{const be=await fetch("/api/categories");if(be.ok){const xe=await be.json();xe?.categories&&X(xe.categories)}}catch(be){console.warn("load categories failed",be)}})()},[]),C.useEffect(()=>{(async()=>{try{const be=await fetch("/api/subcategories-admin");if(be.ok){const xe=await be.json();xe?.subcategories&&ne(xe.subcategories)}}catch(be){console.warn("load subcategories failed",be)}})()},[]),C.useEffect(()=>{(async()=>{try{const be=await fetch("/api/products");if(be.ok){const xe=await be.json();xe?.products&&ue(xe.products)}}catch(be){console.warn("load products failed",be)}})()},[]);const[re,se]=C.useState(""),[je,De]=C.useState(""),[ge,Z]=C.useState(""),[fe,ue]=C.useState([]),[pe,Ce]=C.useState({name:"",subcategory:""}),[Ne,ye]=C.useState(null),[we,Te]=C.useState(""),[qe,ve]=C.useState(""),[Ge,at]=C.useState(""),Se=async()=>{if(!re.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}if(V.includes(re)){t({title:"Error",description:"This category already exists",variant:"destructive"});return}try{const be=await no("/categories",{name:re});X(xe=>[...xe,re]),t({title:"Success",description:`Category "${re}" created`}),se("")}catch(be){console.error("add category error",be),t({title:"Error",description:be?.message||"Failed to create category",variant:"destructive"})}},vt=async()=>{if(!je.trim()){t({title:"Error",description:"Sub-category name is required",variant:"destructive"});return}if(!ge){t({title:"Error",description:"Please select a category first",variant:"destructive"});return}try{const be=await no("/subcategories",{name:je,category:ge}),xe={id:Math.random().toString(),name:je,category:ge,createdAt:new Date().toISOString()};ne(lt=>[...lt,xe]),t({title:"Success",description:`Sub-category "${je}" created under ${ge}`}),De("")}catch(be){console.error("add subcategory error",be),t({title:"Error",description:be?.message||"Failed to create subcategory",variant:"destructive"})}},ht=be=>oe.filter(xe=>xe.category===be),pt=async()=>{if(!pe.name.trim()){t({title:"Error",description:"Product name is required",variant:"destructive"});return}if(!pe.subcategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}try{const be=await no("/products",pe),xe=be.product||be;ue(lt=>[...lt,xe]),t({title:"Success",description:`Product "${pe.name}" created`}),Ce({name:"",subcategory:""})}catch(be){console.error("add product error",be),t({title:"Error",description:be?.message||"Failed to create product",variant:"destructive"})}},Ze=async()=>{if(!Ne?.name?.trim()){t({title:"Error",description:"Product name is required",variant:"destructive"});return}if(!Ne?.subcategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}try{const xe=await(await nt(`/products/${Ne.id}`,{method:"PUT",body:JSON.stringify(Ne)})).json();ue(lt=>lt.map(Je=>Je.id===Ne.id?xe.product||xe:Je)),t({title:"Success",description:`Product "${Ne.name}" updated`}),ye(null)}catch(be){console.error("update product error",be),t({title:"Error",description:be?.message||"Failed to update product",variant:"destructive"})}},Ht=async be=>{if(window.confirm("Delete this product? This cannot be undone."))try{await nt(`/products/${be}`,{method:"DELETE"}),ue(xe=>xe.filter(lt=>lt.id!==be)),t({title:"Success",description:"Product deleted"})}catch(xe){console.error("delete product error",xe),t({title:"Error",description:xe?.message||"Failed to delete product",variant:"destructive"})}},[At,Ct]=C.useState([]);C.useEffect(()=>{(async()=>{try{const be=await fetch("/api/material-templates");if(be.ok){const xe=await be.json();Ct(xe?.templates||[])}}catch(be){console.warn("load master materials failed",be),Ct([])}})()},[]);const[It,Wt]=C.useState(()=>[]),[Es,Ss]=C.useState(()=>[]),[_s,$e]=C.useState(""),[ke,it]=C.useState("grid"),[tt,Jt]=C.useState(""),[Qt,ss]=C.useState(""),dt=Es.filter(be=>{if(!tt)return!0;const xe=tt.toLowerCase();return(be.name||"").toLowerCase().includes(xe)||(be.location||"").toLowerCase().includes(xe)||(be.city||"").toLowerCase().includes(xe)}),qt=It.filter(be=>{if(!Qt)return!0;const xe=Qt.toLowerCase();return(be.name||"").toLowerCase().includes(xe)||(be.code||"").toLowerCase().includes(xe)}),[Vt,vs]=C.useState([]),[ns,js]=C.useState([]),[ln,ys]=C.useState([]),[gt,Dt]=C.useState([]);C.useEffect(()=>{(async()=>{try{const xe=await nt("/material-submissions-pending-approval");if(xe.ok){const Je=((await xe.json()).submissions||[]).map(fs=>({id:fs.submission.id,status:"pending",source:"submission",material:{id:fs.submission.id,name:fs.submission.template_name||"Supplier Material",code:fs.submission.template_code||"",rate:fs.submission.rate,unit:fs.submission.unit,category:"",subCategory:fs.submission.subcategory,brandName:fs.submission.brandname,modelNumber:fs.submission.modelnumber,technicalSpecification:fs.submission.technicalspecification},submittedBy:fs.submission.shop_name||"Supplier",submittedAt:fs.submission.created_at,templateId:fs.submission.template_id,shopId:fs.submission.shop_id}));Dt(Je)}}catch(xe){console.warn("Failed to load supplier material submissions",xe)}})()},[]),C.useEffect(()=>{js(p||[])},[p]),C.useEffect(()=>{(async()=>{try{const xe=await fetch("/api/shops-pending-approval");if(xe.ok){const lt=await xe.json();if(lt?.shops){const Je=lt.shops.map(fs=>({id:fs.id,shop:fs.shop||fs,status:fs.status||"pending",submittedBy:fs.submittedBy||"Unknown",submittedAt:fs.submittedAt||new Date().toISOString()}));js(Je)}}}catch(xe){console.warn("Failed to load shop approvals from API",xe)}})()},[]),C.useEffect(()=>{const be=[...E||[],...gt];vs(be)},[E,gt]),C.useEffect(()=>{(async()=>{try{const xe=await fetch("/api/materials-pending-approval");if(xe.ok){const lt=await xe.json();if(lt?.materials){const fs=[...lt.materials.map(wn=>({id:wn.id,material:wn.material||wn,status:wn.status||"pending",submittedBy:wn.submittedBy||"Unknown",submittedAt:wn.submittedAt||new Date().toISOString()})),...gt];vs(fs)}}}catch(xe){console.warn("Failed to load material approvals from API",xe)}})()},[gt]),C.useEffect(()=>{Wt(n||[])},[n]),C.useEffect(()=>{Ss(s||[])},[s]);const[xt,rs]=C.useState({name:"",code:""});C.useEffect(()=>{if(xt.name){const be=xt.name.substring(0,3).toUpperCase()+"-"+Math.floor(1e3+Math.random()*9e3);rs(xe=>({...xe,code:be}))}},[xt.name]);const ps=async()=>{if(!xt.name.trim()){t({title:"Error",description:"Material Name is required",variant:"destructive"});return}try{const be={name:xt.name.trim(),code:xt.code},xe=await no("/material-templates",be),lt=xe.template||xe;Ct(Je=>[...Je,lt]),t({title:"Success",description:"Master material created. Suppliers can now use this."}),rs({name:"",code:""})}catch(be){console.error("create master material error",be),t({title:"Error",description:be?.message||"Failed to create master material",variant:"destructive"})}},[yn,is]=C.useState(""),[Fs,Ns]=C.useState({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:""}),Nn=be=>{Rt(be.id),Ns({name:be.name,code:be.code,rate:be.rate,unit:be.unit,category:be.category||"",subCategory:be.subCategory||"",product:be.product||"",brandName:be.brandName||"",modelNumber:be.modelNumber||"",technicalSpecification:be.technicalSpecification||"",dimensions:be.dimensions||"",finish:be.finish||"",metalType:be.metalType||""})},Cs=async()=>{if(St)try{try{const be=await nt(`/materials/${St}`,{method:"PUT",body:JSON.stringify(Fs)});if(be.ok){const xe=await be.json(),lt=xe?.material||xe;Wt(Je=>Je.map(fs=>fs.id===St?{...fs,...lt}:fs))}else{try{const xe=await be.text();console.warn("[handleUpdateMaterial] server responded non-ok",be.status,xe)}catch{console.warn("[handleUpdateMaterial] server responded non-ok",be.status)}Wt(xe=>xe.map(lt=>lt.id===St?{...lt,...Fs}:lt))}}catch(be){console.warn("[handleUpdateMaterial] server update failed, applying locally",be),Wt(xe=>xe.map(lt=>lt.id===St?{...lt,...Fs}:lt))}t({title:"Updated",description:"Material details updated"}),Rt(null),Ns({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:""})}catch{t({title:"Error",description:"Failed to update material",variant:"destructive"})}},[zt,os]=C.useState({name:"",location:"",city:"",state:"",country:"",pincode:"",phoneCountryCode:"+91",gstNo:"",rating:5}),[Ps,Ye]=C.useState(null),[St,Rt]=C.useState(null),[us,As]=C.useState(""),[as,bs]=C.useState(""),[cs,Us]=C.useState(""),an=()=>{if(!zt.name||!zt.phoneCountryCode||!zt.city||!zt.state||!zt.country||!zt.pincode){t({title:"Error",description:"All fields are required (GST is optional)",variant:"destructive"});return}(async()=>{try{let be=null;if(typeof A=="function"?be=await A({...zt}):console.warn("[handleAddShop] submitShopForApproval missing from useData; falling back to local save"),be&&be.id){const xe={id:be.id,shop:be,submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};js(lt=>[xe,...lt]),ls("approvals"),t({title:"Success",description:"Shop submitted for approval (server)"})}else{const xe={id:Math.random().toString(),shop:{...zt},submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};js(lt=>[xe,...lt]),ls("approvals"),t({title:"Saved Locally",description:"Shop saved locally; will sync when server is available"})}}catch(be){console.warn("submit shop failed",be);const xe=be?.message||String(be),lt={id:Math.random().toString(),shop:{...zt},submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};js(Je=>[lt,...Je]),ls("approvals"),xe.includes("401")||/unauthori/i.test(xe)?t({title:"Saved Locally (Unauthorized)",description:"You are not logged in as admin  please log in to submit to server.",variant:"destructive"}):t({title:"Saved Locally",description:`Shop saved locally; server submit failed: ${xe}`,variant:"destructive"})}finally{os({name:"",location:"",city:"",phoneCountryCode:"+91",state:"",country:"",pincode:"",gstNo:""}),Ye(null)}})()},Mr=be=>{if(Ye(be.id),os({name:be.name,location:be.location,city:be.city,state:be.state,country:be.country,pincode:be.pincode,phoneCountryCode:be.phoneCountryCode||"+91",gstNo:be.gstNo||"",rating:be.rating||5}),ls("shops"),typeof window<"u"){const xe=new URL(window.location.href);xe.searchParams.set("tab","shops"),window.history.replaceState({},"",xe.toString())}},Un=async()=>{if(Ps)try{try{await no(`/shops/${Ps}`,zt)}catch(be){console.warn("[handleUpdateShop] server update failed, applying locally",be)}Ss(be=>be.map(xe=>xe.id===Ps?{...xe,...zt}:xe)),t({title:"Updated",description:"Shop details updated"}),Ye(null),os({name:"",location:"",city:"",phoneCountryCode:"+91",state:"",country:"",pincode:"",gstNo:""})}catch{t({title:"Error",description:"Failed to update shop",variant:"destructive"})}},Ks=be=>{(async()=>{try{const xe=be?.shop?.id;if(!xe){t({title:"Cannot Approve",description:"This shop is saved locally and has not been submitted to the server.",variant:"destructive"});return}await l?.(xe),js(lt=>lt.filter(Je=>Je.id!==be.id)),t({title:"Approved",description:"Shop has been approved and added to the system"})}catch{t({title:"Error",description:"Failed to approve shop",variant:"destructive"})}})()},Pn=be=>{if(!k.trim()){t({title:"Error",description:"Please provide a rejection reason",variant:"destructive"});return}(async()=>{try{const xe=be?.shop?.id;if(!xe){js(lt=>lt.filter(Je=>Je.id!==be.id)),ee(null),K(""),t({title:"Removed",description:"Local shop request removed"});return}await g?.(xe,k),js(lt=>lt.filter(Je=>Je.id!==be.id)),ee(null),K(""),t({title:"Rejected",description:"Shop has been rejected"})}catch{t({title:"Error",description:"Failed to reject shop",variant:"destructive"})}})()},nr=be=>{(async()=>{try{const xe=Vt.find(lt=>lt.id===be)||gt.find(lt=>lt.id===be);xe&&xe.source==="submission"?(await no(`/material-submissions/${be}/approve`,{}),Dt(lt=>lt.filter(Je=>Je.id!==be)),vs(lt=>lt.filter(Je=>Je.id!==be)),t({title:"Approved",description:"Supplier submission approved and material added"})):(await F?.(be),vs(lt=>lt.filter(Je=>Je.id!==be)),t({title:"Approved",description:"Material has been approved and added to the system"}))}catch{t({title:"Error",description:"Failed to approve material",variant:"destructive"})}})()},Yn=be=>{(async()=>{try{const xe=Vt.find(lt=>lt.id===be)||gt.find(lt=>lt.id===be);xe&&xe.source==="submission"?(await no(`/material-submissions/${be}/reject`,{reason:k||"Rejected by admin"}),Dt(lt=>lt.filter(Je=>Je.id!==be)),vs(lt=>lt.filter(Je=>Je.id!==be)),ee(null),K(""),t({title:"Rejected",description:"Supplier submission rejected"})):(await M?.(be,"Rejected by admin"),vs(lt=>lt.filter(Je=>Je.id!==be)),t({title:"Rejected",description:"Material has been rejected"}))}catch{t({title:"Error",description:"Failed to reject material",variant:"destructive"})}})()},dn=()=>{if(!us||!as){t({title:"Error",description:"Sender name and message are required",variant:"destructive"});return}(async()=>{try{await N?.(as,us,cs),t({title:"Request Sent",description:"Message sent to Admin & Software Team."}),As(""),bs(""),Us("")}catch{t({title:"Error",description:"Failed to send message",variant:"destructive"})}})()},vn=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",jn=c?.role==="admin"||c?.role==="software_team"||c?.role==="supplier"||c?.role==="purchase_team";c?.role==="admin"||c?.role==="supplier"||c?.role,c?.role==="supplier"||c?.role;const Jn=c?.role==="admin"||c?.role==="software_team",Zr=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",Ir=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",Vn=c?.role==="admin"||c?.role==="software_team",Ts=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",[,Ls]=el(),ts=()=>{if(typeof window<"u"){const be=new URLSearchParams(window.location.search).get("tab");if(be)return be}return"dashboard"},[Qs,ls]=C.useState(ts());return C.useEffect(()=>{ls(ts())},[Ls]),C.useEffect(()=>{const be=()=>ls(ts());window.addEventListener("popstate",be);const xe=history.pushState,lt=history.replaceState;return history.pushState=function(...Je){const fs=xe.apply(this,Je);return window.dispatchEvent(new PopStateEvent("popstate")),fs},history.replaceState=function(...Je){const fs=lt.apply(this,Je);return window.dispatchEvent(new PopStateEvent("popstate")),fs},be(),()=>{window.removeEventListener("popstate",be),history.pushState=xe,history.replaceState=lt}},[]),e.jsx(ni,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading",children:c?.role==="supplier"?"Supplier Portal":c?.role==="purchase_team"?"Purchase Team Dashboard":"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your inventory and settings"})]}),Qs==="dashboard"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(Vs,{children:[e.jsx(ta,{className:"pb-3",children:e.jsx(sa,{className:"text-sm font-medium text-muted-foreground",children:"Total Shops"})}),e.jsx(fn,{children:e.jsx("div",{className:"text-3xl font-bold",children:s.length})})]}),e.jsxs(Vs,{children:[e.jsx(ta,{className:"pb-3",children:e.jsx(sa,{className:"text-sm font-medium text-muted-foreground",children:"Total Materials"})}),e.jsx(fn,{children:e.jsx("div",{className:"text-3xl font-bold",children:n.length})})]})]}),(Jn||c?.role==="purchase_team")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"All Shops"}),e.jsx(ei,{className:"text-sm",children:"List of shops"})]}),e.jsxs(fn,{className:"space-y-2",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Ve,{value:tt,onChange:be=>Jt(be.target.value),placeholder:"Search shops..."})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:dt.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No shops available"}):dt.map(be=>e.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:be.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[be.location,", ",be.city]})]}),e.jsx("div",{className:"flex items-center gap-2",children:Vn&&e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:"sm",onClick:()=>Mr(be),children:"Edit"}),e.jsx(Ie,{size:"sm",onClick:()=>Ss(xe=>xe.map(lt=>lt.id===be.id?{...lt,disabled:!lt.disabled}:lt)),children:be.disabled?"Enable":"Disable"}),e.jsx(Ie,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{window.confirm(`Delete shop "${be.name}"? This cannot be undone.`)&&v(be.id).then(()=>{Ss(xe=>xe.filter(lt=>lt.id!==be.id)),t({title:"Deleted",description:`${be.name} removed`})}).catch(xe=>{t({title:"Error",description:`Failed to delete ${be.name}`,variant:"destructive"})})},children:e.jsx(uA,{className:"h-4 w-4"})})]})})]},be.id))})]})]}),e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"All Materials"}),e.jsx(ei,{className:"text-sm",children:"List of materials"})]}),e.jsxs(fn,{className:"space-y-2",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Ve,{value:Qt,onChange:be=>ss(be.target.value),placeholder:"Search materials..."})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:qt.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No materials available"}):qt.map(be=>e.jsx("div",{className:"p-2 border-b",children:St===be.id?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Name"}),e.jsx(Ve,{value:Fs.name||"",onChange:xe=>Ns({...Fs,name:xe.target.value})})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Code"}),e.jsx(Ve,{value:Fs.code||"",onChange:xe=>Ns({...Fs,code:xe.target.value})})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Rate"}),e.jsx(Ve,{type:"number",value:Fs.rate||"",onChange:xe=>Ns({...Fs,rate:parseFloat(xe.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Unit"}),e.jsxs(Lr,{value:Fs.unit||"",onValueChange:xe=>Ns({...Fs,unit:xe}),children:[e.jsx(Er,{children:e.jsx(Dr,{})}),e.jsx(Tr,{children:vH.map(xe=>e.jsx(wr,{value:xe,children:xe},xe))})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Category"}),e.jsxs(Lr,{value:Fs.category||"",onValueChange:xe=>Ns({...Fs,category:xe,subCategory:""}),children:[e.jsx(Er,{children:e.jsx(Dr,{})}),e.jsx(Tr,{children:V.map(xe=>e.jsx(wr,{value:xe,children:xe},xe))})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Sub Category"}),e.jsxs(Lr,{value:Fs.subCategory||"",onValueChange:xe=>Ns({...Fs,subCategory:xe}),children:[e.jsx(Er,{children:e.jsx(Dr,{})}),e.jsx(Tr,{children:ht(Fs.category||"").map(xe=>e.jsx(wr,{value:xe.name,children:xe.name},xe.id))})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Product"}),e.jsxs(Lr,{value:Fs.product||"",onValueChange:xe=>Ns({...Fs,product:xe}),children:[e.jsx(Er,{children:e.jsx(Dr,{})}),e.jsx(Tr,{children:fe.filter(xe=>xe.subcategory===Fs.subCategory).map(xe=>e.jsxs(wr,{value:xe.name,children:[xe.name," ","(Subcategory: ",xe.subcategory_name,")"]},xe.id))})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Brand Name"}),e.jsx(Ve,{value:Fs.brandName||"",onChange:xe=>Ns({...Fs,brandName:xe.target.value})})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Model Number"}),e.jsx(Ve,{value:Fs.modelNumber||"",onChange:xe=>Ns({...Fs,modelNumber:xe.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Technical Specification"}),e.jsx(Ml,{value:Fs.technicalSpecification||"",onChange:xe=>Ns({...Fs,technicalSpecification:xe.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{size:"sm",onClick:Cs,children:"Save Changes"}),e.jsx(Ie,{size:"sm",variant:"ghost",onClick:()=>{Rt(null),Ns({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:""})},children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:be.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[be.code,"  ",be.rate,"/",be.unit]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{size:"sm",onClick:()=>Wt(xe=>xe.map(lt=>lt.id===be.id?{...lt,disabled:!lt.disabled}:lt)),children:be.disabled?"Enable":"Disable"}),e.jsx(Ie,{size:"sm",onClick:()=>Nn(be),children:"Edit"}),Vn&&e.jsx(Ie,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{window.confirm(`Delete material "${be.name}"? This cannot be undone.`)&&m(be.id).then(()=>{Wt(xe=>xe.filter(lt=>lt.id!==be.id)),t({title:"Deleted",description:`${be.name} removed`})}).catch(xe=>{t({title:"Error",description:`Failed to delete ${be.name}`,variant:"destructive"})})},children:e.jsx(uA,{className:"h-4 w-4"})})]})]})},be.id))})]})]})]}),c?.role==="supplier"&&e.jsx("div",{className:"space-y-4",children:e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Available  Materials"}),e.jsx(ei,{className:"text-sm",children:"Select a material "})]}),e.jsxs(fn,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{value:typeof _s<"u"?_s:"",onChange:be=>$e(be.target.value),placeholder:"Search templates..."}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[e.jsx(Ie,{size:"sm",variant:ke==="grid"?void 0:"ghost",onClick:()=>it("grid"),children:"Grid"}),e.jsx(Ie,{size:"sm",variant:ke==="list"?void 0:"ghost",onClick:()=>it("list"),children:"List"})]})]}),e.jsx("div",{})]}),At.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No master materials yet"}):e.jsx("div",{className:"space-y-2",children:At.map(be=>e.jsxs("div",{className:"p-2 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[be.name," ",e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:be.code})]}),e.jsx(Ra,{href:"/admin/dashboard?tab=materials",children:e.jsx("span",{className:"text-sm text-sidebar-primary",children:"Use"})})]},be.id))})]})]})})]}),e.jsxs(p8,{value:Qs,onValueChange:be=>{if(ls(be),typeof window<"u"){const xe=new URL(window.location.href);xe.searchParams.set("tab",be),window.history.replaceState({},"",xe.toString())}},className:"w-full",children:[Zr&&e.jsxs(Hd,{value:"create-product",className:"space-y-6 mt-4",children:[e.jsxs(Vs,{className:"border-purple-200 bg-purple-50",children:[e.jsx(ta,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(sa,{className:"text-purple-900",children:"Create Categories"}),e.jsx(ei,{className:"text-purple-800",children:"Add new product categories"})]}),Ir&&e.jsxs(Jh,{children:[e.jsx(h0,{asChild:!0,children:e.jsxs(Ie,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(VA,{className:"h-4 w-4 mr-2"})," Add Category"]})}),e.jsxs(Hu,{children:[e.jsx(Ku,{children:e.jsx(zu,{children:"Add New Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Category Name ",e.jsx(KA,{})]}),e.jsx(Ve,{value:re,onChange:be=>se(be.target.value),placeholder:"e.g. Flooring, Roofing, Doors"})]}),e.jsxs(Ie,{onClick:Se,className:"w-full bg-purple-600 hover:bg-purple-700",children:[e.jsx(VA,{className:"h-4 w-4 mr-2"})," Add Category"]})]})]})]})]})}),e.jsxs(fn,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(Ve,{value:we,onChange:be=>Te(be.target.value),placeholder:"Search categories..."})}),e.jsx("div",{className:"space-y-3",children:V.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No categories created yet"}):V.filter(be=>be.toLowerCase().includes(we.toLowerCase())).map((be,xe)=>{const lt=ht(be);return e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-purple-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gd,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:be}),lt.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",lt.length," subcategories)"]})]})]}),Ir&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{size:"sm",variant:"outline",onClick:()=>{ie(be),ce(be)},children:"Edit"}),e.jsx(Ie,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete category "${be}" and its subcategories? This cannot be undone.`))try{await nt(`/categories/${encodeURIComponent(be)}`,{method:"DELETE"}),X(Je=>Je.filter(fs=>fs!==be)),ne(Je=>Je.filter(fs=>fs.category!==be)),t({title:"Deleted",description:`Category ${be} removed`})}catch(Je){console.error("delete category error",Je),t({title:"Error",description:"Failed to delete category",variant:"destructive"})}},children:e.jsx(uA,{className:"h-4 w-4"})})]}),q===be&&e.jsx("div",{className:"mt-3 p-3 bg-gray-100 rounded border col-span-full",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ve,{value:Ae,onChange:Je=>ce(Je.target.value),placeholder:"Category name",className:"text-sm"}),e.jsx(Ie,{size:"sm",onClick:async()=>{const Je=q,fs=Ae.trim();if(!fs){t({title:"Error",description:"Category name cannot be empty",variant:"destructive"});return}try{await nt(`/categories/${encodeURIComponent(Je)}`,{method:"PUT",body:JSON.stringify({name:fs})}),X(wn=>wn.map(zn=>zn===Je?fs:zn)),ne(wn=>wn.map(zn=>zn.category===Je?{...zn,category:fs}:zn)),ie(null),ce(""),t({title:"Success",description:`Category updated to ${fs}`})}catch(wn){console.error("update category error",wn),t({title:"Error",description:"Failed to update category",variant:"destructive"})}},children:"Save"}),e.jsx(Ie,{size:"sm",variant:"ghost",onClick:()=>{ie(null),ce("")},children:"Cancel"})]})})]})},xe)})})]})]}),e.jsxs(Vs,{className:"border-green-200 bg-green-50",children:[e.jsx(ta,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(sa,{className:"text-green-900",children:"Create Subcategories"}),e.jsx(ei,{className:"text-green-800",children:"Add subcategories to your categories"})]}),Ir&&e.jsxs(Jh,{children:[e.jsx(h0,{asChild:!0,children:e.jsxs(Ie,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(VA,{className:"h-4 w-4 mr-2"})," Add Subcategory"]})}),e.jsxs(Hu,{children:[e.jsx(Ku,{children:e.jsx(zu,{children:"Add New Subcategory"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Select Category ",e.jsx(KA,{})]}),e.jsxs(Lr,{value:ge,onValueChange:Z,children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:"Choose a category..."})}),e.jsx(Tr,{className:"max-h-64",children:V.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No categories available"}):V.map(be=>e.jsx(wr,{value:be,children:be},be))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Subcategory Name ",e.jsx(KA,{})]}),e.jsx(Ve,{value:je,onChange:be=>De(be.target.value),placeholder:"e.g. Commercial, Residential"})]}),e.jsxs(Ie,{onClick:vt,className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(VA,{className:"h-4 w-4 mr-2"})," Add Subcategory"]})]})]})]})]})}),e.jsxs(fn,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(Ve,{value:qe,onChange:be=>ve(be.target.value),placeholder:"Search subcategories..."})}),e.jsx("div",{className:"space-y-3",children:oe.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No subcategories created yet"}):oe.filter(be=>be.name.toLowerCase().includes(qe.toLowerCase())).map(be=>e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-green-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vy,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:be.name}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(Category: ",be.category,")"]})]})]}),Ir&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{size:"sm",variant:"outline",onClick:()=>{ie(be.id),ce(be.name)},children:"Edit"}),e.jsx(Ie,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete subcategory "${be.name}"? This cannot be undone.`))try{(await nt(`/subcategories/${be.id}`,{method:"DELETE"})).ok?(ne(lt=>lt.filter(Je=>Je.id!==be.id)),t({title:"Deleted",description:`Subcategory ${be.name} removed`})):t({title:"Error",description:"Failed to delete subcategory",variant:"destructive"})}catch(xe){console.error("delete subcategory error",xe),t({title:"Error",description:"Failed to delete subcategory",variant:"destructive"})}},children:e.jsx(uA,{className:"h-4 w-4"})})]}),q===be.id&&e.jsx("div",{className:"mt-3 p-3 bg-gray-100 rounded border col-span-full",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ve,{value:Ae,onChange:xe=>ce(xe.target.value),placeholder:"Subcategory name",className:"text-sm"}),e.jsx(Ie,{size:"sm",onClick:async()=>{const xe=Ae.trim();if(!xe){t({title:"Error",description:"Subcategory name cannot be empty",variant:"destructive"});return}try{(await nt(`/subcategories/${be.id}`,{method:"PUT",body:JSON.stringify({name:xe,category:be.category})})).ok&&(ne(Je=>Je.map(fs=>fs.id===be.id?{...fs,name:xe}:fs)),ie(null),ce(""),t({title:"Success",description:`Subcategory updated to ${xe}`}))}catch(lt){console.error("update subcategory error",lt),t({title:"Error",description:"Failed to update subcategory",variant:"destructive"})}},children:"Save"}),e.jsx(Ie,{size:"sm",variant:"ghost",onClick:()=>{ie(null),ce("")},children:"Cancel"})]})})]})},be.id))})]})]}),e.jsxs(Vs,{className:"border-blue-200 bg-blue-50",children:[e.jsx(ta,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(sa,{className:"text-blue-900",children:"Create Products"}),e.jsx(ei,{className:"text-blue-800",children:"Add new products and assign subcategories"})]}),Ir&&e.jsxs(Jh,{children:[e.jsx(h0,{asChild:!0,children:e.jsxs(Ie,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(VA,{className:"h-4 w-4 mr-2"})," Add Product"]})}),e.jsxs(Hu,{children:[e.jsx(Ku,{children:e.jsx(zu,{children:"Add New Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Product Name ",e.jsx(KA,{})]}),e.jsx(Ve,{value:pe.name,onChange:be=>Ce(xe=>({...xe,name:be.target.value})),placeholder:"e.g. Ceramic Tiles, Wooden Door"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Select Subcategory ",e.jsx(KA,{})]}),e.jsxs(Lr,{value:pe.subcategory,onValueChange:be=>Ce(xe=>({...xe,subcategory:be})),children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:"Choose a subcategory..."})}),e.jsx(Tr,{className:"max-h-64",children:oe.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No subcategories available"}):oe.map(be=>e.jsxs(wr,{value:be.name,children:[be.name," ",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",be.category,")"]})]},be.id))})]})]}),e.jsxs(Ie,{onClick:pt,className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(VA,{className:"h-4 w-4 mr-2"})," Add Product"]})]})]})]})]})}),e.jsxs(fn,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(Ve,{value:Ge,onChange:be=>at(be.target.value),placeholder:"Search products..."})}),e.jsx("div",{className:"space-y-3",children:fe.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No products created yet"}):fe.filter(be=>be.name.toLowerCase().includes(Ge.toLowerCase())).map(be=>e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-blue-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Gd,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium block",children:be.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Subcategories: ",be.subcategory||"-"]})]})]}),Ir&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{size:"sm",variant:"outline",onClick:()=>{ye(be)},children:"Edit"}),e.jsx(Ie,{size:"sm",variant:"destructive",onClick:()=>Ht(be.id),children:e.jsx(uA,{className:"h-4 w-4"})})]})]})},be.id))})]})]}),Ne&&e.jsx(Jh,{open:!!Ne,onOpenChange:be=>!be&&ye(null),children:e.jsxs(Hu,{children:[e.jsx(Ku,{children:e.jsx(zu,{children:"Edit Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Product Name ",e.jsx(KA,{})]}),e.jsx(Ve,{value:Ne.name,onChange:be=>ye(xe=>({...xe,name:be.target.value})),placeholder:"e.g. Ceramic Tiles, Wooden Door"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Select Subcategory ",e.jsx(KA,{})]}),e.jsxs(Lr,{value:Ne.subcategory,onValueChange:be=>ye(xe=>({...xe,subcategory:be})),children:[e.jsx(Er,{className:"max-h-64 overflow-y-auto",children:e.jsx(Dr,{placeholder:"Select subcategory"})}),e.jsx(Tr,{className:"max-h-64",children:oe.map(be=>e.jsxs(wr,{value:be.name,children:[be.name," (",be.category,")"]},be.id))})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(Ie,{variant:"outline",onClick:()=>ye(null),children:"Cancel"}),e.jsx(Ie,{onClick:()=>{Ne.name.trim()&&Ne.subcategory?(Ze(),ye(null)):t({title:"Error",description:"Please fill in all fields",variant:"destructive"})},className:"bg-blue-600 hover:bg-blue-700",children:"Save Changes"})]})]})]})})]}),e.jsxs(Hd,{value:"materials",className:"space-y-4 mt-4",children:[(Jn||c?.role==="purchase_team")&&e.jsxs(Vs,{className:"border-blue-200 bg-blue-50",children:[e.jsxs(ta,{children:[e.jsxs(sa,{className:"text-blue-900",children:[e.jsx(Gd,{className:"inline-block mr-2 h-4 w-4 text-blue-900"})," Create Material"]}),e.jsx(ei,{className:"text-blue-800",children:"Add new material templates for suppliers to use"})]}),e.jsxs(fn,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Material Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{value:xt.name,onChange:be=>rs({...xt,name:be.target.value}),placeholder:"Enter Item name"}),xt.name&&At.some(be=>be.name.toLowerCase().trim()===xt.name.toLowerCase().trim())&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" This material name already exists"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Item Code (Auto)"}),e.jsx(Ve,{value:xt.code,disabled:!0,className:"bg-muted"}),xt.code&&At.some(be=>be.code===xt.code)&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" This item code already exists"})]})]}),e.jsxs(Ie,{onClick:ps,disabled:!xt.name.trim()||At.some(be=>be.name.toLowerCase().trim()===xt.name.toLowerCase().trim())||At.some(be=>be.code===xt.code),className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(VA,{className:"mr-2 h-4 w-4"})," Create Material"]})]})]}),(Jn||c?.role==="purchase_team")&&e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Created Material Templates"}),e.jsx(ei,{children:"Manage all material templates created for suppliers"}),e.jsx("div",{className:"mt-4",children:e.jsx(Ve,{placeholder:"Search materials...",value:_s,onChange:be=>$e(be.target.value),className:"max-w-sm"})})]}),e.jsx(fn,{children:At.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No material templates created yet. Create one above."}):e.jsx("div",{className:"space-y-2",children:At.filter(be=>(be.name+" "+be.code+" "+(be.category||"")).toLowerCase().includes(_s.toLowerCase())).slice(0,12).map(be=>e.jsxs("div",{className:"p-2 border rounded flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:St===be.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{value:Fs.name,onChange:xe=>Ns({...Fs,name:xe.target.value}),placeholder:"Enter material name",className:"max-w-xs"}),e.jsx(Ie,{size:"sm",onClick:async()=>{if(!Fs.name.trim()){t({title:"Error",description:"Material name is required",variant:"destructive"});return}try{if(!(await nt(`/material-templates/${be.id}`,{method:"PUT",body:JSON.stringify({name:Fs.name})})).ok)throw new Error("update failed");Ct(lt=>lt.map(Je=>Je.id===be.id?{...Je,name:Fs.name}:Je)),Rt(null),t({title:"Success",description:"Material name updated"})}catch(xe){console.error("update error",xe),t({title:"Error",description:"Failed to update material",variant:"destructive"})}},children:"Save"}),e.jsx(Ie,{size:"sm",variant:"ghost",onClick:()=>Rt(null),children:"Cancel"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:be.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[be.code," ",be.category&&e.jsxs("span",{className:"ml-2 text-[11px] text-gray-500",children:[" ",be.category]})]})]})}),St!==be.id&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{size:"sm",onClick:()=>{Rt(be.id),Ns({...Fs,name:be.name})},children:"Edit"}),e.jsx(Ie,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete "${be.name}"? This cannot be undone.`))try{console.log("[DELETE template]",be.id,be.name);const xe=await nt(`/material-templates/${be.id}`,{method:"DELETE"});if(console.log("[DELETE response]",xe.status,xe.ok),!xe.ok){const lt=await xe.json();throw new Error(lt.message||"Failed to delete")}Ct(lt=>lt.filter(Je=>Je.id!==be.id)),t({title:"Success",description:"Material deleted"})}catch(xe){console.error("delete error",xe),t({title:"Error",description:xe instanceof Error?xe.message:"Failed to delete material",variant:"destructive"})}},children:"Delete"})]})]},be.id))})})]})]}),e.jsx(Hd,{value:"shops",className:"space-y-4 mt-4",children:(Jn||c?.role==="purchase_team")&&e.jsxs(Vs,{children:[e.jsx(ta,{children:e.jsx(sa,{children:"Add New Shop"})}),e.jsxs(fn,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Shop Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{value:zt.name,onChange:be=>os({...zt,name:be.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{value:zt.location,onChange:be=>os({...zt,location:be.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{value:zt.city,onChange:be=>os({...zt,city:be.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Lr,{value:zt.phoneCountryCode||"+91",onValueChange:be=>os({...zt,phoneCountryCode:be}),children:[e.jsx(Er,{className:"w-28",children:e.jsx(Dr,{placeholder:"+91"})}),e.jsx(Tr,{children:bH.map(be=>e.jsx(wr,{value:be.code,children:be.code},be.code))})]}),e.jsx(Ve,{value:zt.contactNumber||"",onChange:be=>os({...zt,contactNumber:be.target.value}),placeholder:"Enter phone number",type:"tel"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["State ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{value:zt.state,onChange:be=>os({...zt,state:be.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{value:zt.country,onChange:be=>os({...zt,country:be.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Pincode / Zipcode ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{value:zt.pincode,onChange:be=>os({...zt,pincode:be.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"GST No (Optional)"}),e.jsx(Ve,{value:zt.gstNo,onChange:be=>os({...zt,gstNo:be.target.value}),placeholder:"29ABCDE1234F1Z5"})]})]}),e.jsx(Ie,{onClick:Ps?Un:an,children:Ps?"Save Changes":"Add Shop"})]})]})}),jn&&e.jsx(Hd,{value:"approvals",className:"space-y-4 mt-4",children:e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Shop Approval Requests"}),e.jsx(ei,{children:"Review and approve/reject new shop submissions"})]}),e.jsx(fn,{className:"space-y-4",children:ns.filter(be=>be.status==="pending").length===0?e.jsx("p",{className:"text-muted-foreground",children:"No pending approval requests"}):ns.filter(be=>be.status==="pending").map(be=>e.jsx(Vs,{className:"border-border/50",children:e.jsxs(fn,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:be.shop.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by: ",be.submittedBy," at"," ",new Date(be.submittedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Location"}),e.jsx("p",{children:be.shop.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"City"}),e.jsx("p",{children:be.shop.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"State"}),e.jsx("p",{children:be.shop.state})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Country"}),e.jsx("p",{children:be.shop.country})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Pincode"}),e.jsx("p",{children:be.shop.pincode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Phone"}),e.jsxs("p",{children:[be.shop.phoneCountryCode,be.shop.contactNumber]})]}),be.shop.gstNo&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"GST No"}),e.jsx("p",{children:be.shop.gstNo})]})]}),Ts&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{size:"sm",onClick:()=>Ks(be),className:"gap-2",disabled:!be?.shop?.id,children:[e.jsx(_l,{className:"h-4 w-4"})," Approve"]}),G===be.id?e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx(Ve,{placeholder:"Reason...",value:k,onChange:xe=>K(xe.target.value),className:"text-sm"}),e.jsx(Ie,{size:"sm",onClick:()=>Pn(be.id),children:"Confirm"}),e.jsx(Ie,{size:"sm",variant:"ghost",onClick:()=>ee(null),children:"Cancel"})]}):e.jsxs(Ie,{size:"sm",variant:"outline",onClick:()=>ee(be.id),className:"gap-2",children:[e.jsx(Vg,{className:"h-4 w-4"})," Reject"]})]})]})},be.id))}),ns.filter(be=>be.status!=="pending").length>0&&e.jsxs(Vs,{children:[e.jsx(ta,{children:e.jsx(sa,{className:"text-base",children:"Processed Requests"})}),e.jsx(fn,{className:"space-y-3",children:ns.filter(be=>be.status!=="pending").map(be=>e.jsxs("div",{className:"flex justify-between items-start p-3 bg-muted/50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:be.shop.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:be.submittedBy})]}),e.jsx("div",{className:"text-right",children:e.jsx(qA,{variant:be.status==="approved"?"default":"destructive",children:be.status==="approved"?"LA":be.status.charAt(0).toUpperCase()+be.status.slice(1)})})]},be.id))})]})]})}),(Jn||c?.role==="purchase_team")&&e.jsx(Hd,{value:"material-approvals",className:"space-y-4 mt-4",children:e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Material Approval Requests"}),e.jsx(ei,{children:"Review and approve/reject new material submissions"})]}),e.jsx(fn,{className:"space-y-4",children:Vt.filter(be=>be.status==="pending").length===0?e.jsx("p",{className:"text-muted-foreground",children:"No pending material approvals"}):Vt.filter(be=>be.status==="pending").map(be=>e.jsx(Vs,{className:"border-border/50",children:e.jsxs(fn,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:be.material.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by: ",be.submittedBy," at"," ",new Date(be.submittedAt).toLocaleDateString()]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Code"}),e.jsx("p",{children:be.material.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Rate"}),e.jsxs("p",{children:["",be.material.rate]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Unit"}),e.jsx("p",{children:be.material.unit})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Category"}),e.jsx("p",{children:be.material.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Sub Category"}),e.jsx("p",{children:be.material.subCategory})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Brand"}),e.jsx("p",{children:be.material.brandName})]})]})]}),Ts&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{size:"sm",onClick:()=>nr(be.id),className:"gap-2",disabled:!be?.material?.id,children:[e.jsx(_l,{className:"h-4 w-4"})," Approve"]}),G===be.id?e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx(Ve,{placeholder:"Reason...",value:k,onChange:xe=>K(xe.target.value),className:"text-sm"}),e.jsx(Ie,{size:"sm",onClick:()=>Yn(be.id),children:"Confirm"}),e.jsx(Ie,{size:"sm",variant:"ghost",onClick:()=>ee(null),children:"Cancel"})]}):e.jsxs(Ie,{size:"sm",variant:"outline",onClick:()=>ee(be.id),className:"gap-2",children:[e.jsx(Vg,{className:"h-4 w-4"})," Reject"]})]})]})},be.id))}),Vt.filter(be=>be.status!=="pending").length>0&&e.jsxs(Vs,{children:[e.jsx(ta,{children:e.jsx(sa,{className:"text-base",children:"Processed Requests"})}),e.jsx(fn,{className:"space-y-3",children:Vt.filter(be=>be.status!=="pending").map(be=>e.jsxs("div",{className:"flex justify-between items-start p-3 bg-muted/50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:be.material.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:be.submittedBy})]}),e.jsx("div",{className:"text-right",children:e.jsx(qA,{variant:be.status==="approved"?"default":"destructive",children:be.status==="approved"?"LA":be.status.charAt(0).toUpperCase()+be.status.slice(1)})})]},be.id))})]})]})}),vn&&e.jsx(Hd,{value:"messages",className:"space-y-4 mt-4",children:e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Support Messages"}),e.jsx(ei,{children:"Messages from suppliers and users sent to Admin & Software Team"})]}),e.jsx(fn,{className:"space-y-4",children:(f||[]).length===0?e.jsx("p",{className:"text-muted-foreground",children:"No messages yet"}):(f||[]).map(be=>e.jsx(Vs,{className:"border-border/50",children:e.jsxs(fn,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:be.sender_name||be.sentBy}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(be.sent_at||be.sentAt).toLocaleString()}),be.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),be.info]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[!be.is_read&&e.jsx(qA,{variant:"default",children:"New"}),Vn&&e.jsx(Ie,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await w?.(be.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(uA,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:be.message})]})},be.id))})]})}),e.jsx(Hd,{value:"support",className:"space-y-4 mt-4",children:e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Technical Support"}),e.jsx(ei,{children:"Request new categories or report issues to the software team."})]}),e.jsxs(fn,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Your Name ",e.jsx(KA,{})]}),e.jsx(Ve,{placeholder:"Enter your name...",value:as,onChange:be=>bs(be.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Additional Information (Optional)"}),e.jsx(Ml,{placeholder:"Any additional context or details...",className:"min-h-[80px]",value:cs,onChange:be=>Us(be.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Message / Request ",e.jsx(KA,{})]}),e.jsx(Ml,{placeholder:"I need a new category for 'Smart Home Devices'...",className:"min-h-[150px]",value:us,onChange:be=>As(be.target.value),"data-testid":"textarea-support-message"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded text-sm text-blue-700 dark:text-blue-300",children:" This message will be sent to Admin & Software Team"}),e.jsxs(Ie,{onClick:dn,"data-testid":"button-send-support",children:[e.jsx(af,{className:"mr-2 h-4 w-4"})," Send Request"]}),ln.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No messages yet"}):ln.map(be=>e.jsx(Vs,{className:"border-border/50",children:e.jsxs(fn,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold",children:["You (",as,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(be.sent_at||be.sentAt).toLocaleString()}),be.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),be.info]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[!be.is_read&&e.jsx(qA,{variant:"default",children:"Unread"}),Vn&&e.jsx(Ie,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await w?.(be.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(uA,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:be.message})]})},be.id))]})]})})]})]})})}const jH=["pcs","kg","meter","sqft","cum","litre","set","nos"],Ph=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function uT(){const{toast:t}=Ai(),{user:s,addSupportMessage:n,deleteMessage:r,supportMessages:o}=ci(),[c,p]=C.useState("templates"),[f,A]=C.useState(""),[h,l]=C.useState(""),[g,v]=C.useState(""),[m,N]=C.useState([]),[w,E]=C.useState(!0),[F,M]=C.useState(""),[k,K]=C.useState([]),[G,ee]=C.useState([]),[V,X]=C.useState([]),[J,he]=C.useState(!1),[q,ie]=C.useState(null),[Ae,ce]=C.useState([]),[oe,ne]=C.useState(""),[re,se]=C.useState(!1),[je,De]=C.useState({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""});C.useEffect(()=>{ge(),Z(),fe(),pe()},[]);const ge=async()=>{try{const we=localStorage.getItem("authToken");console.log("[SupplierMaterials] loadMaterialTemplates token?",!!we);const qe=await(await fetch("/api/material-templates",{headers:we?{Authorization:`Bearer ${we}`}:{}})).json();N(qe.templates||[])}catch(we){console.error("Error loading templates:",we),t({title:"Error",description:"Failed to load material templates",variant:"destructive"})}finally{E(!1)}},Z=async()=>{try{const Te=await(await fetch("/api/shops")).json();ce(Te.shops||[])}catch(we){console.error("Error loading shops:",we),t({title:"Error",description:"Failed to load shops",variant:"destructive"})}},fe=async()=>{try{he(!0);const Te=await(await fetch("/api/material-categories")).json();K(Te.categories||[])}catch(we){console.error("Error loading categories:",we)}finally{he(!1)}},ue=async we=>{if(!we){ee([]);return}try{const qe=await(await fetch(`/api/material-subcategories/${encodeURIComponent(we)}`)).json();ee(qe.subcategories||[])}catch(Te){console.error("Error loading subcategories:",Te),ee([])}},pe=async()=>{try{const Te=await(await fetch("/api/products")).json();X(Te.products||[])}catch(we){console.error("Error loading products:",we),X([])}},Ce=we=>{ie(we),De({rate:"",unit:"",brandname:"",modelnumber:"",category:we.category||"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),ne(""),we.category&&ue(we.category),setTimeout(()=>{const Te=document.getElementById("material-form");Te&&Te.scrollIntoView({behavior:"smooth",block:"start"})},100)},Ne=async we=>{if(we.preventDefault(),!q||!oe){t({title:"Error",description:"Please select a template and shop",variant:"destructive"});return}if(!je.rate||!je.unit||!je.category){t({title:"Error",description:"Rate, unit, and category are required",variant:"destructive"});return}se(!0);try{const Te=localStorage.getItem("authToken");console.log("[SupplierMaterials] submit token?",!!Te);const qe={"Content-Type":"application/json"};Te&&(qe.Authorization=`Bearer ${Te}`);const ve=await fetch("/api/material-submissions",{method:"POST",headers:qe,body:JSON.stringify({template_id:q.id,shop_id:oe,...je})});if(!ve.ok){const at=await ve.text();throw console.error("submit material failed",ve.status,at),ve.status===401?new Error("Unauthorized: please log in"):ve.status===403?new Error("Forbidden: your account lacks supplier role"):new Error(`Failed to submit material (${ve.status}): ${at}`)}const Ge=await ve.json();t({title:"Success",description:"Material submitted for approval"}),ie(null),De({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),ne("")}catch(Te){console.error("Error submitting material:",Te),t({title:"Error",description:"Failed to submit material",variant:"destructive"})}finally{se(!1)}},ye=()=>{if(!g||!f){t({title:"Error",description:"Sender name and message are required",variant:"destructive"});return}(async()=>{try{await n?.(f,g,h),t({title:"Request Sent",description:"Message sent to Admin & Software Team."}),v(""),A(""),l("")}catch{t({title:"Error",description:"Failed to send message",variant:"destructive"})}})()};return e.jsx(ni,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Management"}),e.jsx("p",{className:"text-gray-600",children:"Select from available material templates and add your details"})]}),e.jsxs("div",{className:"grid gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Gd,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Available Material Templates"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ve,{value:F,onChange:we=>M(we.target.value),placeholder:"Search templates..."})}),e.jsx("div",{})]}),w?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx($g,{className:"w-6 h-6 animate-spin"})}):m.length===0?e.jsx(Vs,{children:e.jsx(fn,{className:"pt-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"No material templates available yet"})})}):e.jsx("div",{className:"space-y-2",children:m.filter(we=>(we.name+" "+we.code+" "+(we.category||"")).toLowerCase().includes(F.toLowerCase())).slice(0,12).map(we=>e.jsxs("div",{className:"p-2 border rounded flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:we.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[we.code," ",we.category&&e.jsxs("span",{className:"ml-2 text-[11px] text-gray-500",children:[" ",we.category]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ie,{size:"sm",onClick:()=>Ce(we),children:"Select"})})]},we.id))})]}),q&&e.jsxs(Vs,{id:"material-form",className:"bg-blue-50 border-blue-200 scroll-mt-20",children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Submit Material Details"}),e.jsxs(ei,{children:["Completing submission for: ",e.jsx("strong",{children:q.name})," (",q.code,")"]})]}),e.jsx(fn,{children:e.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(Xe,{children:["Shop ",e.jsx(Ph,{})]}),e.jsxs(Lr,{value:oe,onValueChange:ne,children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:"Select a shop"})}),e.jsx(Tr,{children:Ae.map(we=>e.jsx(wr,{value:we.id,children:we.name},we.id))})]})]}),e.jsxs("div",{children:[e.jsxs(Xe,{children:["Rate ",e.jsx(Ph,{})]}),e.jsx(Ve,{type:"number",step:"0.01",placeholder:"Enter rate",value:je.rate,onChange:we=>De({...je,rate:we.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(Xe,{children:["Unit ",e.jsx(Ph,{})]}),e.jsxs(Lr,{value:je.unit,onValueChange:we=>De({...je,unit:we}),children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:"Select unit"})}),e.jsx(Tr,{children:jH.map(we=>e.jsx(wr,{value:we,children:we},we))})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Brand Name"}),e.jsx(Ve,{placeholder:"Enter brand name",value:je.brandname,onChange:we=>De({...je,brandname:we.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Model Number"}),e.jsx(Ve,{placeholder:"Enter model number",value:je.modelnumber,onChange:we=>De({...je,modelnumber:we.target.value})})]}),e.jsxs("div",{children:[e.jsxs(Xe,{children:["Category ",e.jsx(Ph,{})]}),e.jsxs(Lr,{value:je.category,onValueChange:we=>{De({...je,category:we,subcategory:""}),ue(we)},children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:"Select category"})}),e.jsx(Tr,{children:k.map(we=>e.jsx(wr,{value:we,children:we},we))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Subcategory"}),e.jsxs(Lr,{value:je.subcategory,onValueChange:we=>De({...je,subcategory:we,product:""}),disabled:!je.category||G.length===0,children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:G.length===0?"No subcategories available":"Select subcategory"})}),e.jsx(Tr,{children:G.map(we=>e.jsx(wr,{value:we,children:we},we))})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Product"}),e.jsxs(Lr,{value:je.product,onValueChange:we=>De({...je,product:we}),disabled:!je.subcategory||V.length===0,children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:V.length===0?"No products available":"Select product"})}),e.jsx(Tr,{children:V.filter(we=>we.subcategory===je.subcategory).map(we=>e.jsxs(wr,{value:we.name,children:[we.name," ","(Subcategory: ",we.subcategory_name,")"]},we.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Technical Specification"}),e.jsx(Ml,{placeholder:"Enter technical specifications",value:je.technicalspecification,onChange:we=>De({...je,technicalspecification:we.target.value}),rows:4})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Dimensions"}),e.jsx(Ve,{placeholder:"Enter dimensions",value:je.dimensions,onChange:we=>De({...je,dimensions:we.target.value})})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Finish Type"}),e.jsx(Ve,{placeholder:"e.g., matte, glossy, satin",value:je.finishtype,onChange:we=>De({...je,finishtype:we.target.value})})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Metal Type"}),e.jsx(Ve,{placeholder:"e.g., steel, copper, aluminum",value:je.metaltype,onChange:we=>De({...je,metaltype:we.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{type:"submit",disabled:re,className:"gap-2",children:[re?e.jsx($g,{className:"w-4 h-4 animate-spin"}):e.jsx(VA,{className:"w-4 h-4"}),"Submit for Approval"]}),e.jsx(Ie,{type:"button",variant:"outline",onClick:()=>ie(null),children:"Cancel"})]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(af,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-2xl font-semibold",children:"Technical Support"})]}),e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsx(sa,{children:"Send Message to Admin & Software Team"}),e.jsx(ei,{children:"Request new categories or report issues"})]}),e.jsxs(fn,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Your Name ",e.jsx(Ph,{})]}),e.jsx(Ve,{placeholder:"Enter your name...",value:f,onChange:we=>A(we.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Additional Information (Optional)"}),e.jsx(Ml,{placeholder:"Any additional context or details...",className:"min-h-[80px]",value:h,onChange:we=>l(we.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Message / Request ",e.jsx(Ph,{})]}),e.jsx(Ml,{placeholder:"I need a new category for 'Smart Home Devices'...",className:"min-h-[150px]",value:g,onChange:we=>v(we.target.value)})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded text-sm text-blue-700 dark:text-blue-300",children:" This message will be sent to Admin & Software Team"}),e.jsxs(Ie,{onClick:ye,children:[e.jsx(af,{className:"mr-2 h-4 w-4"})," Send Request"]}),(o||[]).filter(we=>we.sender_name===f).length===0?e.jsx("p",{className:"text-muted-foreground text-sm mt-4",children:"No messages sent yet"}):e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("p",{className:"font-semibold text-sm",children:"Your Sent Messages:"}),(o||[]).filter(we=>we.sender_name===f).map(we=>e.jsx(Vs,{className:"border-border/50",children:e.jsxs(fn,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sent: ",new Date(we.sent_at||we.sentAt).toLocaleString()]}),we.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),we.info]})]}),s?.role==="supplier"&&e.jsx(Ie,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await r?.(we.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(uA,{className:"h-4 w-4 text-red-500"})})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:we.message})]})},we.id))]})]})]})]})]})]})})}function wH(){const{toast:t}=Ai(),{addSupportMessage:s,deleteMessage:n,supportMessages:r,user:o}=ci(),[c,p]=C.useState(!1),[f,A]=C.useState(""),[h,l]=C.useState(""),[g,v]=C.useState(""),m=()=>{if(!g||!f){t({title:"Error",description:"Name and message are required",variant:"destructive"});return}(async()=>{try{await s?.(f,g,h),t({title:"Request Sent",description:"Message sent to Admin & Software Team."}),v(""),A(""),l(""),p(!1)}catch{t({title:"Error",description:"Failed to send message",variant:"destructive"})}})()},N=[{title:"Civil Wall",desc:"Brick walls & partitions",href:"/estimators/civil-wall",icon:lc},{title:"Doors",desc:"Door frames & shutters",href:"/estimators/doors",icon:lc},{title:"Flooring",desc:"Tiles & wooden floors",href:"/estimators/flooring",icon:lc},{title:"Electrical",desc:"Wiring & lighting",href:"/estimators/electrical",icon:Wg},{title:"Plumbing",desc:"Pipes & fixtures",href:"/estimators/plumbing",icon:lc},{title:"Fire-Fighting",desc:"Safety systems",href:"/estimators/fire-fighting",icon:Wg}];return e.jsx(ni,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold font-heading",children:"Estimator Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Select an estimator to calculate material requirements"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(w=>e.jsx(Ra,{href:w.href,children:e.jsxs(Vs,{className:"group cursor-pointer hover:border-primary hover:shadow-lg transition-all",children:[e.jsxs(ta,{children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:e.jsx(w.icon,{className:"h-5 w-5 text-primary"})}),e.jsx(sa,{children:w.title}),e.jsx(ei,{children:w.desc})]}),e.jsx(fn,{children:e.jsxs(Ie,{variant:"ghost",className:"w-full justify-between group-hover:translate-x-1 transition-transform",children:["Get Started ",e.jsx(E3,{className:"h-4 w-4"})]})})]})},w.href))}),e.jsxs(Vs,{className:"mt-8",children:[e.jsx(ta,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(af,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx(sa,{children:"Technical Support"}),e.jsx(ei,{children:"Send a message to the admin team"})]})]}),e.jsx(Ie,{variant:"outline",onClick:()=>p(!c),children:c?"Cancel":"Send Message"})]})}),c&&e.jsxs(fn,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Your Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{placeholder:"Enter your name...",value:f,onChange:w=>A(w.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Additional Information (Optional)"}),e.jsx(Ml,{placeholder:"Any additional context...",className:"min-h-[80px]",value:h,onChange:w=>l(w.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ml,{placeholder:"Describe your issue or request...",className:"min-h-[150px]",value:g,onChange:w=>v(w.target.value)})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded text-sm text-blue-700 dark:text-blue-300",children:" This message will be sent to Admin & Software Team"}),e.jsxs(Ie,{onClick:m,children:[e.jsx(af,{className:"mr-2 h-4 w-4"})," Send Request"]})]}),(r||[]).filter(w=>w.sender_name===f&&w.sender_name).length>0&&e.jsxs(fn,{className:"space-y-3 border-t pt-4",children:[e.jsx("p",{className:"font-semibold text-sm",children:"Your Messages:"}),(r||[]).filter(w=>w.sender_name===f&&w.sender_name).map(w=>e.jsx(Vs,{className:"border-border/50",children:e.jsxs(fn,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sent: ",new Date(w.sent_at||w.sentAt).toLocaleString()]}),w.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),w.info]})]}),e.jsx(Ie,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await n?.(w.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(uA,{className:"h-4 w-4 text-red-500"})})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:w.message})]})},w.id))]})]})]})})}function SH(){const{user:t}=ci(),[,s]=el();return C.useEffect(()=>{if(!t){s("/");return}switch(t.role){case"admin":s("/admin/dashboard");break;case"software_team":s("/software/dashboard");break;case"purchase_team":s("/purchase/dashboard");break;case"supplier":s("/supplier/dashboard");break}},[t,s]),t?t.role==="admin"||t.role==="software_team"?e.jsx(Dv,{}):t.role==="supplier"?e.jsx(uT,{}):t.role==="purchase_team"?e.jsx(Dv,{}):e.jsx(wH,{}):null}function BH(){const[,t]=el(),{user:s}=ci();return C.useEffect(()=>{if(!s||s.role!=="software_team"){t("/");return}t("/admin/dashboard")},[s,t]),null}function NH(){const[,t]=el(),{user:s}=ci();return C.useEffect(()=>{if(!s||s.role!=="purchase_team"){t("/");return}t("/admin/dashboard")},[s,t]),null}function CH(){const[,t]=el(),{user:s}=ci();return C.useEffect(()=>{if(!s||s.role!=="supplier"){t("/");return}t("/supplier/materials")},[s,t]),null}function W2(){const[t,s]=C.useState([]),[n,r]=C.useState(!0),[o,c]=C.useState(null),p=(g,v)=>{c({type:g,text:v}),window.setTimeout(()=>c(null),2500)},f=async()=>{try{const v=(await Xo("/api/admin/pending-suppliers"))?.suppliers||[];s(m=>{const N=new Map(m.map(E=>[E.id,E])),w=[];for(const E of v){const F=N.get(E.id);w.push({...E,uiStatus:F?.uiStatus&&F.uiStatus!=="pending"?F.uiStatus:"pending",busy:!1})}for(const E of m)!v.find(F=>F.id===E.id)&&(E.uiStatus==="accepted"||E.uiStatus==="rejected")&&w.push(E);return w.sort((E,F)=>new Date(F.created_at).getTime()-new Date(E.created_at).getTime()),w})}catch(g){console.error("Failed to load suppliers",g),p("error",g?.message||"Failed to load suppliers")}finally{r(!1)}};C.useEffect(()=>{f();const g=window.setInterval(f,2e4);return()=>window.clearInterval(g)},[]);const A=C.useMemo(()=>t.filter(g=>g.uiStatus==="pending").length,[t]),h=async g=>{s(v=>v.map(m=>m.id===g?{...m,uiStatus:"accepted",busy:!0}:m));try{await no(`/api/admin/suppliers/${g}/approve`,{}),p("success","Supplier accepted.")}catch(v){s(m=>m.map(N=>N.id===g?{...N,uiStatus:"pending"}:N)),p("error",v?.message||"Approve failed")}finally{s(v=>v.map(m=>m.id===g?{...m,busy:!1}:m)),f()}},l=async g=>{s(v=>v.map(m=>m.id===g?{...m,uiStatus:"rejected",busy:!0}:m));try{await no(`/api/admin/suppliers/${g}/reject`,{reason:"Rejected by admin"}),p("success","Supplier rejected.")}catch(v){s(m=>m.map(N=>N.id===g?{...N,uiStatus:"pending"}:N)),p("error",v?.message||"Reject failed")}finally{s(v=>v.map(m=>m.id===g?{...m,busy:!1}:m)),f()}};return e.jsx("div",{className:"min-h-[calc(100vh-60px)]",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-white",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(hs.div,{className:"absolute -top-40 -left-40 h-[520px] w-[520px] rounded-full blur-3xl opacity-30",style:{background:"radial-gradient(circle at center, #2563eb 0%, rgba(37,99,235,0) 60%)"},animate:{x:[0,40,0],y:[0,25,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(hs.div,{className:"absolute -bottom-40 -right-40 h-[520px] w-[520px] rounded-full blur-3xl opacity-25",style:{background:"radial-gradient(circle at center, #60a5fa 0%, rgba(96,165,250,0) 60%)"},animate:{x:[0,-35,0],y:[0,-20,0]},transition:{duration:9,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"relative px-6 py-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-slate-900",children:"Supplier Approval"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Review new supplier requests and approve or reject with a single click."}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 text-sm text-blue-700",children:[e.jsx("span",{className:"font-semibold",children:A}),e.jsx("span",{children:"Pending"})]})]}),e.jsx(gl,{children:o&&e.jsx(hs.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:`mt-4 rounded-xl border px-4 py-3 text-sm ${o.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:o.text})})]}),e.jsx("div",{className:"relative px-6 pb-8",children:n?e.jsxs("div",{className:"space-y-3",children:[e.jsx(f0,{}),e.jsx(f0,{}),e.jsx(f0,{})]}):t.length===0?e.jsxs(Vs,{className:"p-6",children:[e.jsx("div",{className:"text-slate-700 font-semibold",children:"No pending suppliers"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"All supplier requests have been processed."})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(gl,{initial:!1,children:t.map(g=>e.jsx(hs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.18},children:e.jsxs(Vs,{className:"p-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900 truncate",children:g.username}),e.jsx(EH,{status:g.uiStatus})]}),e.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:["Requested on"," ",new Date(g.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{onClick:()=>h(g.id),disabled:g.uiStatus!=="pending"||!!g.busy,className:"bg-gradient-to-r from-blue-600 to-sky-500 hover:from-blue-700 hover:to-sky-600",children:g.busy&&g.uiStatus==="accepted"?"Accepting":"Approve"}),e.jsx(Ie,{variant:"destructive",onClick:()=>l(g.id),disabled:g.uiStatus!=="pending"||!!g.busy,children:g.busy&&g.uiStatus==="rejected"?"Rejecting":"Reject"})]})]})},g.id))})})})]})})}function EH({status:t}){return t==="accepted"?e.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:"Accepted"}):t==="rejected"?e.jsx("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-2 py-0.5 text-xs font-semibold text-rose-700",children:"Rejected"}):e.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-2 py-0.5 text-xs font-semibold text-blue-700",children:"Pending"})}function f0(){return e.jsx(Vs,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-48 rounded bg-slate-200 animate-pulse"}),e.jsx("div",{className:"mt-2 h-3 w-64 rounded bg-slate-200 animate-pulse"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-9 w-24 rounded bg-slate-200 animate-pulse"}),e.jsx("div",{className:"h-9 w-24 rounded bg-slate-200 animate-pulse"})]})]})})}function TH(){const{toast:t}=Ai(),[s,n]=C.useState([]),[r,o]=C.useState(!0),[c,p]=C.useState(null),[f,A]=C.useState(null),[h,l]=C.useState("");C.useEffect(()=>{g()},[]);const g=async()=>{try{o(!0);const N=localStorage.getItem("authToken"),w=await fetch("/api/material-submissions-pending-approval",{headers:N?{Authorization:`Bearer ${N}`}:{}});if(!w.ok)throw new Error("Failed to load submissions");const E=await w.json();n(E.submissions.map(F=>F.submission)||[])}catch(N){console.error("Error loading submissions:",N),t({title:"Error",description:"Failed to load material submissions",variant:"destructive"})}finally{o(!1)}},v=async N=>{p(N);try{const w=localStorage.getItem("authToken");if(!(await fetch(`/api/material-submissions/${N}/approve`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:w?`Bearer ${w}`:void 0}})).ok)throw new Error("Failed to approve submission");t({title:"Success",description:"Material submission approved"}),g()}catch(w){console.error("Error approving submission:",w),t({title:"Error",description:"Failed to approve submission",variant:"destructive"})}finally{p(null)}},m=async N=>{if(!h.trim()){t({title:"Error",description:"Please provide a rejection reason",variant:"destructive"});return}A(N);try{const w=localStorage.getItem("authToken");if(!(await fetch(`/api/material-submissions/${N}/reject`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:w?`Bearer ${w}`:void 0},body:JSON.stringify({reason:h})})).ok)throw new Error("Failed to reject submission");t({title:"Success",description:"Material submission rejected"}),l(""),g()}catch(w){console.error("Error rejecting submission:",w),t({title:"Error",description:"Failed to reject submission",variant:"destructive"})}finally{A(null)}};return e.jsx(ni,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Submission Approvals"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve supplier material submissions"})]}),r?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx($g,{className:"w-8 h-8 animate-spin"})}):s.length===0?e.jsx(Vs,{children:e.jsx(fn,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-gray-500 py-12",children:[e.jsx(_l,{className:"w-12 h-12 mx-auto mb-4 text-green-600"}),e.jsx("p",{children:"No pending material submissions"})]})})}):e.jsx("div",{className:"space-y-4",children:s.map(N=>e.jsx(Vs,{className:"border-l-4 border-l-yellow-500",children:e.jsxs(fn,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Material"}),e.jsx("p",{className:"font-semibold text-lg",children:N.template_name}),e.jsx("p",{className:"text-sm text-gray-500",children:N.template_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supplier Shop"}),e.jsx("p",{className:"font-semibold",children:N.shop_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rate"}),e.jsxs("p",{className:"font-semibold",children:["",Number(N.rate).toFixed(2)," / ",N.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Submitted"}),e.jsx("p",{className:"font-semibold",children:new Date(N.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 pb-6 border-b",children:[N.brandname&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Brand"}),e.jsx("p",{className:"font-semibold",children:N.brandname})]}),N.modelnumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Model Number"}),e.jsx("p",{className:"font-semibold",children:N.modelnumber})]}),N.subcategory&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Subcategory"}),e.jsx("p",{className:"font-semibold",children:N.subcategory})]})]}),N.technicalspecification&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Technical Specification"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm",children:N.technicalspecification})]}),f===N.id&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded",children:[e.jsxs(Xe,{className:"text-red-900 font-semibold",children:["Rejection Reason ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(Ml,{placeholder:"Explain why this submission is being rejected",value:h,onChange:w=>l(w.target.value),rows:4,className:"mt-2"})]}),e.jsx("div",{className:"flex gap-2",children:f===N.id?e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{onClick:()=>m(N.id),variant:"destructive",disabled:!h.trim(),className:"gap-2",children:[e.jsx(Vg,{className:"w-4 h-4"}),"Confirm Rejection"]}),e.jsx(Ie,{onClick:()=>{A(null),l("")},variant:"outline",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{onClick:()=>v(N.id),disabled:c===N.id,className:"gap-2 bg-green-600 hover:bg-green-700",children:[c===N.id?e.jsx($g,{className:"w-4 h-4 animate-spin"}):e.jsx(_l,{className:"w-4 h-4"}),"Approve"]}),e.jsxs(Ie,{onClick:()=>A(N.id),variant:"outline",className:"gap-2",children:[e.jsx(Vg,{className:"w-4 h-4"}),"Reject"]})]})})]})},N.id))})]})})}const FH="modulepreload",IH=function(t){return"/"+t},Y2={},Uc=function(s,n,r){let o=Promise.resolve();if(n&&n.length>0){let A=function(h){return Promise.all(h.map(l=>Promise.resolve(l).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),f=p?.nonce||p?.getAttribute("nonce");o=A(n.map(h=>{if(h=IH(h),h in Y2)return;Y2[h]=!0;const l=h.endsWith(".css"),g=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=l?"stylesheet":FH,l||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),l)return new Promise((m,N)=>{v.addEventListener("load",m),v.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(p){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=p,window.dispatchEvent(f),!f.defaultPrevented)throw p}return o.then(p=>{for(const f of p||[])f.status==="rejected"&&c(f.reason);return s().catch(c)})};var p0={exports:{}};function Aa(t){"@babel/helpers - typeof";return Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Aa(t)}var Qc=Uint8Array,Dl=Uint16Array,u1=Int32Array,h1=new Qc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f1=new Qc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),X2=new Qc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hT=function(t,s){for(var n=new Dl(31),r=0;r<31;++r)n[r]=s+=1<<t[r-1];for(var o=new u1(n[30]),r=1;r<30;++r)for(var c=n[r];c<n[r+1];++c)o[c]=c-n[r]<<5|r;return{b:n,r:o}},fT=hT(h1,2),RH=fT.b,Qv=fT.r;RH[28]=258,Qv[258]=28;var OH=hT(f1,0),J2=OH.r,Mv=new Dl(32768);for(var _a=0;_a<32768;++_a){var _d=(_a&43690)>>1|(_a&21845)<<1;_d=(_d&52428)>>2|(_d&13107)<<2,_d=(_d&61680)>>4|(_d&3855)<<4,Mv[_a]=((_d&65280)>>8|(_d&255)<<8)>>1}var Op=(function(t,s,n){for(var r=t.length,o=0,c=new Dl(s);o<r;++o)t[o]&&++c[t[o]-1];var p=new Dl(s);for(o=1;o<s;++o)p[o]=p[o-1]+c[o-1]<<1;var f;if(n){f=new Dl(1<<s);var A=15-s;for(o=0;o<r;++o)if(t[o])for(var h=o<<4|t[o],l=s-t[o],g=p[t[o]-1]++<<l,v=g|(1<<l)-1;g<=v;++g)f[Mv[g]>>A]=h}else for(f=new Dl(r),o=0;o<r;++o)t[o]&&(f[o]=Mv[p[t[o]-1]++]>>15-t[o]);return f}),sh=new Qc(288);for(var _a=0;_a<144;++_a)sh[_a]=8;for(var _a=144;_a<256;++_a)sh[_a]=9;for(var _a=256;_a<280;++_a)sh[_a]=7;for(var _a=280;_a<288;++_a)sh[_a]=8;var ly=new Qc(32);for(var _a=0;_a<32;++_a)ly[_a]=5;var UH=Op(sh,9,0),LH=Op(ly,5,0),pT=function(t){return(t+7)/8|0},DH=function(t,s,n){return(n==null||n>t.length)&&(n=t.length),new Qc(t.subarray(s,n))},zA=function(t,s,n){n<<=s&7;var r=s/8|0;t[r]|=n,t[r+1]|=n>>8},mp=function(t,s,n){n<<=s&7;var r=s/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},m0=function(t,s){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var o=n.length,c=n.slice();if(!o)return{t:gT,l:0};if(o==1){var p=new Qc(n[0].s+1);return p[n[0].s]=1,{t:p,l:1}}n.sort(function(G,ee){return G.f-ee.f}),n.push({s:-1,f:25001});var f=n[0],A=n[1],h=0,l=1,g=2;for(n[0]={s:-1,f:f.f+A.f,l:f,r:A};l!=o-1;)f=n[n[h].f<n[g].f?h++:g++],A=n[h!=l&&n[h].f<n[g].f?h++:g++],n[l++]={s:-1,f:f.f+A.f,l:f,r:A};for(var v=c[0].s,r=1;r<o;++r)c[r].s>v&&(v=c[r].s);var m=new Dl(v+1),N=_v(n[l-1],m,0);if(N>s){var r=0,w=0,E=N-s,F=1<<E;for(c.sort(function(ee,V){return m[V.s]-m[ee.s]||ee.f-V.f});r<o;++r){var M=c[r].s;if(m[M]>s)w+=F-(1<<N-m[M]),m[M]=s;else break}for(w>>=E;w>0;){var k=c[r].s;m[k]<s?w-=1<<s-m[k]++-1:++r}for(;r>=0&&w;--r){var K=c[r].s;m[K]==s&&(--m[K],++w)}N=s}return{t:new Qc(m),l:N}},_v=function(t,s,n){return t.s==-1?Math.max(_v(t.l,s,n+1),_v(t.r,s,n+1)):s[t.s]=n},Z2=function(t){for(var s=t.length;s&&!t[--s];);for(var n=new Dl(++s),r=0,o=t[0],c=1,p=function(A){n[r++]=A},f=1;f<=s;++f)if(t[f]==o&&f!=s)++c;else{if(!o&&c>2){for(;c>138;c-=138)p(32754);c>2&&(p(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(p(o),--c;c>6;c-=6)p(8304);c>2&&(p(c-3<<5|8208),c=0)}for(;c--;)p(o);c=1,o=t[f]}return{c:n.subarray(0,r),n:s}},gp=function(t,s){for(var n=0,r=0;r<s.length;++r)n+=t[r]*s[r];return n},mT=function(t,s,n){var r=n.length,o=pT(s+2);t[o]=r&255,t[o+1]=r>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var c=0;c<r;++c)t[o+c+4]=n[c];return(o+4+r)*8},eS=function(t,s,n,r,o,c,p,f,A,h,l){zA(s,l++,n),++o[256];for(var g=m0(o,15),v=g.t,m=g.l,N=m0(c,15),w=N.t,E=N.l,F=Z2(v),M=F.c,k=F.n,K=Z2(w),G=K.c,ee=K.n,V=new Dl(19),X=0;X<M.length;++X)++V[M[X]&31];for(var X=0;X<G.length;++X)++V[G[X]&31];for(var J=m0(V,7),he=J.t,q=J.l,ie=19;ie>4&&!he[X2[ie-1]];--ie);var Ae=h+5<<3,ce=gp(o,sh)+gp(c,ly)+p,oe=gp(o,v)+gp(c,w)+p+14+3*ie+gp(V,he)+2*V[16]+3*V[17]+7*V[18];if(A>=0&&Ae<=ce&&Ae<=oe)return mT(s,l,t.subarray(A,A+h));var ne,re,se,je;if(zA(s,l,1+(oe<ce)),l+=2,oe<ce){ne=Op(v,m,0),re=v,se=Op(w,E,0),je=w;var De=Op(he,q,0);zA(s,l,k-257),zA(s,l+5,ee-1),zA(s,l+10,ie-4),l+=14;for(var X=0;X<ie;++X)zA(s,l+3*X,he[X2[X]]);l+=3*ie;for(var ge=[M,G],Z=0;Z<2;++Z)for(var fe=ge[Z],X=0;X<fe.length;++X){var ue=fe[X]&31;zA(s,l,De[ue]),l+=he[ue],ue>15&&(zA(s,l,fe[X]>>5&127),l+=fe[X]>>12)}}else ne=UH,re=sh,se=LH,je=ly;for(var X=0;X<f;++X){var pe=r[X];if(pe>255){var ue=pe>>18&31;mp(s,l,ne[ue+257]),l+=re[ue+257],ue>7&&(zA(s,l,pe>>23&31),l+=h1[ue]);var Ce=pe&31;mp(s,l,se[Ce]),l+=je[Ce],Ce>3&&(mp(s,l,pe>>5&8191),l+=f1[Ce])}else mp(s,l,ne[pe]),l+=re[pe]}return mp(s,l,ne[256]),l+re[256]},QH=new u1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gT=new Qc(0),MH=function(t,s,n,r,o,c){var p=c.z||t.length,f=new Qc(r+p+5*(1+Math.ceil(p/7e3))+o),A=f.subarray(r,f.length-o),h=c.l,l=(c.r||0)&7;if(s){l&&(A[0]=c.r>>3);for(var g=QH[s-1],v=g>>13,m=g&8191,N=(1<<n)-1,w=c.p||new Dl(32768),E=c.h||new Dl(N+1),F=Math.ceil(n/3),M=2*F,k=function(at){return(t[at]^t[at+1]<<F^t[at+2]<<M)&N},K=new u1(25e3),G=new Dl(288),ee=new Dl(32),V=0,X=0,J=c.i||0,he=0,q=c.w||0,ie=0;J+2<p;++J){var Ae=k(J),ce=J&32767,oe=E[Ae];if(w[ce]=oe,E[Ae]=ce,q<=J){var ne=p-J;if((V>7e3||he>24576)&&(ne>423||!h)){l=eS(t,A,0,K,G,ee,X,he,ie,J-ie,l),he=V=X=0,ie=J;for(var re=0;re<286;++re)G[re]=0;for(var re=0;re<30;++re)ee[re]=0}var se=2,je=0,De=m,ge=ce-oe&32767;if(ne>2&&Ae==k(J-ge))for(var Z=Math.min(v,ne)-1,fe=Math.min(32767,J),ue=Math.min(258,ne);ge<=fe&&--De&&ce!=oe;){if(t[J+se]==t[J+se-ge]){for(var pe=0;pe<ue&&t[J+pe]==t[J+pe-ge];++pe);if(pe>se){if(se=pe,je=ge,pe>Z)break;for(var Ce=Math.min(ge,pe-2),Ne=0,re=0;re<Ce;++re){var ye=J-ge+re&32767,we=w[ye],Te=ye-we&32767;Te>Ne&&(Ne=Te,oe=ye)}}}ce=oe,oe=w[ce],ge+=ce-oe&32767}if(je){K[he++]=268435456|Qv[se]<<18|J2[je];var qe=Qv[se]&31,ve=J2[je]&31;X+=h1[qe]+f1[ve],++G[257+qe],++ee[ve],q=J+se,++V}else K[he++]=t[J],++G[t[J]]}}for(J=Math.max(J,q);J<p;++J)K[he++]=t[J],++G[t[J]];l=eS(t,A,h,K,G,ee,X,he,ie,J-ie,l),h||(c.r=l&7|A[l/8|0]<<3,l-=7,c.h=E,c.p=w,c.i=J,c.w=q)}else{for(var J=c.w||0;J<p+h;J+=65535){var Ge=J+65535;Ge>=p&&(A[l/8|0]=h,Ge=p),l=mT(A,l+1,t.subarray(J,Ge))}c.i=p}return DH(f,0,r+pT(l)+o)},yT=function(){var t=1,s=0;return{p:function(n){for(var r=t,o=s,c=n.length|0,p=0;p!=c;){for(var f=Math.min(p+2655,c);p<f;++p)o+=r+=n[p];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}t=r,s=o},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},_H=function(t,s,n,r,o){if(!o&&(o={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),p=new Qc(c.length+t.length);p.set(c),p.set(t,c.length),t=p,o.w=c.length}return MH(t,s.level==null?6:s.level,s.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,n,r,o)},xT=function(t,s,n){for(;n;++s)t[s]=n,n>>>=8},PH=function(t,s){var n=s.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var o=yT();o.p(s.dictionary),xT(t,2,o.d())}};function Pv(t,s){s||(s={});var n=yT();n.p(t);var r=_H(t,s,s.dictionary?6:2,4);return PH(r,s),xT(r,r.length-4,n.d()),r}var kH=typeof TextDecoder<"u"&&new TextDecoder,HH=0;try{kH.decode(gT,{stream:!0}),HH=1}catch{}function KH(t){if(Array.isArray(t))return t}function zH(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,c,p,f=[],A=!0,h=!1;try{if(c=(n=n.call(t)).next,s!==0)for(;!(A=(r=c.call(n)).done)&&(f.push(r.value),f.length!==s);A=!0);}catch(l){h=!0,o=l}finally{try{if(!A&&n.return!=null&&(p=n.return(),Object(p)!==p))return}finally{if(h)throw o}}return f}}function tS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=Array(s);n<s;n++)r[n]=t[n];return r}function GH(t,s){if(t){if(typeof t=="string")return tS(t,s);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tS(t,s):void 0}}function VH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sS(t,s){return KH(t)||zH(t,s)||GH(t,s)||VH()}function nS(t,s="utf8"){return new TextDecoder(s).decode(t)}const $H=new TextEncoder;function qH(t){return $H.encode(t)}const WH=1024*8,YH=(()=>{const t=new Uint8Array(4),s=new Uint32Array(t.buffer);return!((s[0]=1)&t[0])})(),g0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class p1{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(s=WH,n={}){let r=!1;typeof s=="number"?s=new ArrayBuffer(s):(r=!0,this.lastWrittenByte=s.byteLength);const o=n.offset?n.offset>>>0:0,c=s.byteLength-o;let p=o;(ArrayBuffer.isView(s)||s instanceof p1)&&(s.byteLength!==s.buffer.byteLength&&(p=s.byteOffset+o),s=s.buffer),r?this.lastWrittenByte=c:this.lastWrittenByte=0,this.buffer=s,this.length=c,this.byteLength=c,this.byteOffset=p,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,p,c),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const r=(this.offset+s)*2,o=new Uint8Array(r);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,n){const r=g0[n].BYTES_PER_ELEMENT*s,o=this.byteOffset+this.offset,c=this.buffer.slice(o,o+r);if(this.littleEndian===YH&&n!=="uint8"&&n!=="int8"){const f=new Uint8Array(this.buffer.slice(o,o+r));f.reverse();const A=new g0[n](f.buffer);return this.offset+=r,A.reverse(),A}const p=new g0[n](c);return this.offset+=r,p}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let n="";for(let r=0;r<s;r++)n+=this.readChar();return n}readUtf8(s=1){return nS(this.readBytes(s))}decodeText(s=1,n="utf8"){return nS(this.readBytes(s),n)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let n=0;n<s.length;n++)this._data.setUint8(this.offset++,s[n]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let n=0;n<s.length;n++)this.writeUint8(s.charCodeAt(n));return this}writeUtf8(s){return this.writeBytes(qH(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function bf(t){let s=t.length;for(;--s>=0;)t[s]=0}const XH=3,JH=258,vT=29,ZH=256,e7=ZH+1+vT,bT=30,t7=512,s7=new Array((e7+2)*2);bf(s7);const n7=new Array(bT*2);bf(n7);const r7=new Array(t7);bf(r7);const a7=new Array(JH-XH+1);bf(a7);const i7=new Array(vT);bf(i7);const o7=new Array(bT);bf(o7);const l7=(t,s,n,r)=>{let o=t&65535|0,c=t>>>16&65535|0,p=0;for(;n!==0;){p=n>2e3?2e3:n,n-=p;do o=o+s[r++]|0,c=c+o|0;while(--p);o%=65521,c%=65521}return o|c<<16|0};var kv=l7;const c7=()=>{let t,s=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;s[n]=t}return s},A7=new Uint32Array(c7()),d7=(t,s,n,r)=>{const o=A7,c=r+n;t^=-1;for(let p=r;p<c;p++)t=t>>>8^o[(t^s[p])&255];return t^-1};var AA=d7,Hv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jT={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const u7=(t,s)=>Object.prototype.hasOwnProperty.call(t,s);var h7=function(t){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const n=s.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)u7(n,r)&&(t[r]=n[r])}}return t},f7=t=>{let s=0;for(let r=0,o=t.length;r<o;r++)s+=t[r].length;const n=new Uint8Array(s);for(let r=0,o=0,c=t.length;r<c;r++){let p=t[r];n.set(p,o),o+=p.length}return n},wT={assign:h7,flattenChunks:f7};let ST=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ST=!1}const Yp=new Uint8Array(256);for(let t=0;t<256;t++)Yp[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Yp[254]=Yp[254]=1;var p7=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let s,n,r,o,c,p=t.length,f=0;for(o=0;o<p;o++)n=t.charCodeAt(o),(n&64512)===55296&&o+1<p&&(r=t.charCodeAt(o+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),o++)),f+=n<128?1:n<2048?2:n<65536?3:4;for(s=new Uint8Array(f),c=0,o=0;c<f;o++)n=t.charCodeAt(o),(n&64512)===55296&&o+1<p&&(r=t.charCodeAt(o+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?s[c++]=n:n<2048?(s[c++]=192|n>>>6,s[c++]=128|n&63):n<65536?(s[c++]=224|n>>>12,s[c++]=128|n>>>6&63,s[c++]=128|n&63):(s[c++]=240|n>>>18,s[c++]=128|n>>>12&63,s[c++]=128|n>>>6&63,s[c++]=128|n&63);return s};const m7=(t,s)=>{if(s<65534&&t.subarray&&ST)return String.fromCharCode.apply(null,t.length===s?t:t.subarray(0,s));let n="";for(let r=0;r<s;r++)n+=String.fromCharCode(t[r]);return n};var g7=(t,s)=>{const n=s||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,s));let r,o;const c=new Array(n*2);for(o=0,r=0;r<n;){let p=t[r++];if(p<128){c[o++]=p;continue}let f=Yp[p];if(f>4){c[o++]=65533,r+=f-1;continue}for(p&=f===2?31:f===3?15:7;f>1&&r<n;)p=p<<6|t[r++]&63,f--;if(f>1){c[o++]=65533;continue}p<65536?c[o++]=p:(p-=65536,c[o++]=55296|p>>10&1023,c[o++]=56320|p&1023)}return m7(c,o)},y7=(t,s)=>{s=s||t.length,s>t.length&&(s=t.length);let n=s-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?s:n+Yp[t[n]]>s?n:s},Kv={string2buf:p7,buf2string:g7,utf8border:y7};function x7(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var v7=x7;const mg=16209,b7=16191;var j7=function(s,n){let r,o,c,p,f,A,h,l,g,v,m,N,w,E,F,M,k,K,G,ee,V,X,J,he;const q=s.state;r=s.next_in,J=s.input,o=r+(s.avail_in-5),c=s.next_out,he=s.output,p=c-(n-s.avail_out),f=c+(s.avail_out-257),A=q.dmax,h=q.wsize,l=q.whave,g=q.wnext,v=q.window,m=q.hold,N=q.bits,w=q.lencode,E=q.distcode,F=(1<<q.lenbits)-1,M=(1<<q.distbits)-1;e:do{N<15&&(m+=J[r++]<<N,N+=8,m+=J[r++]<<N,N+=8),k=w[m&F];t:for(;;){if(K=k>>>24,m>>>=K,N-=K,K=k>>>16&255,K===0)he[c++]=k&65535;else if(K&16){G=k&65535,K&=15,K&&(N<K&&(m+=J[r++]<<N,N+=8),G+=m&(1<<K)-1,m>>>=K,N-=K),N<15&&(m+=J[r++]<<N,N+=8,m+=J[r++]<<N,N+=8),k=E[m&M];s:for(;;){if(K=k>>>24,m>>>=K,N-=K,K=k>>>16&255,K&16){if(ee=k&65535,K&=15,N<K&&(m+=J[r++]<<N,N+=8,N<K&&(m+=J[r++]<<N,N+=8)),ee+=m&(1<<K)-1,ee>A){s.msg="invalid distance too far back",q.mode=mg;break e}if(m>>>=K,N-=K,K=c-p,ee>K){if(K=ee-K,K>l&&q.sane){s.msg="invalid distance too far back",q.mode=mg;break e}if(V=0,X=v,g===0){if(V+=h-K,K<G){G-=K;do he[c++]=v[V++];while(--K);V=c-ee,X=he}}else if(g<K){if(V+=h+g-K,K-=g,K<G){G-=K;do he[c++]=v[V++];while(--K);if(V=0,g<G){K=g,G-=K;do he[c++]=v[V++];while(--K);V=c-ee,X=he}}}else if(V+=g-K,K<G){G-=K;do he[c++]=v[V++];while(--K);V=c-ee,X=he}for(;G>2;)he[c++]=X[V++],he[c++]=X[V++],he[c++]=X[V++],G-=3;G&&(he[c++]=X[V++],G>1&&(he[c++]=X[V++]))}else{V=c-ee;do he[c++]=he[V++],he[c++]=he[V++],he[c++]=he[V++],G-=3;while(G>2);G&&(he[c++]=he[V++],G>1&&(he[c++]=he[V++]))}}else if((K&64)===0){k=E[(k&65535)+(m&(1<<K)-1)];continue s}else{s.msg="invalid distance code",q.mode=mg;break e}break}}else if((K&64)===0){k=w[(k&65535)+(m&(1<<K)-1)];continue t}else if(K&32){q.mode=b7;break e}else{s.msg="invalid literal/length code",q.mode=mg;break e}break}}while(r<o&&c<f);G=N>>3,r-=G,N-=G<<3,m&=(1<<N)-1,s.next_in=r,s.next_out=c,s.avail_in=r<o?5+(o-r):5-(r-o),s.avail_out=c<f?257+(f-c):257-(c-f),q.hold=m,q.bits=N};const kh=15,rS=852,aS=592,iS=0,y0=1,oS=2,w7=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),S7=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),B7=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),N7=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),C7=(t,s,n,r,o,c,p,f)=>{const A=f.bits;let h=0,l=0,g=0,v=0,m=0,N=0,w=0,E=0,F=0,M=0,k,K,G,ee,V,X=null,J;const he=new Uint16Array(kh+1),q=new Uint16Array(kh+1);let ie=null,Ae,ce,oe;for(h=0;h<=kh;h++)he[h]=0;for(l=0;l<r;l++)he[s[n+l]]++;for(m=A,v=kh;v>=1&&he[v]===0;v--);if(m>v&&(m=v),v===0)return o[c++]=1<<24|64<<16|0,o[c++]=1<<24|64<<16|0,f.bits=1,0;for(g=1;g<v&&he[g]===0;g++);for(m<g&&(m=g),E=1,h=1;h<=kh;h++)if(E<<=1,E-=he[h],E<0)return-1;if(E>0&&(t===iS||v!==1))return-1;for(q[1]=0,h=1;h<kh;h++)q[h+1]=q[h]+he[h];for(l=0;l<r;l++)s[n+l]!==0&&(p[q[s[n+l]]++]=l);if(t===iS?(X=ie=p,J=20):t===y0?(X=w7,ie=S7,J=257):(X=B7,ie=N7,J=0),M=0,l=0,h=g,V=c,N=m,w=0,G=-1,F=1<<m,ee=F-1,t===y0&&F>rS||t===oS&&F>aS)return 1;for(;;){Ae=h-w,p[l]+1<J?(ce=0,oe=p[l]):p[l]>=J?(ce=ie[p[l]-J],oe=X[p[l]-J]):(ce=96,oe=0),k=1<<h-w,K=1<<N,g=K;do K-=k,o[V+(M>>w)+K]=Ae<<24|ce<<16|oe|0;while(K!==0);for(k=1<<h-1;M&k;)k>>=1;if(k!==0?(M&=k-1,M+=k):M=0,l++,--he[h]===0){if(h===v)break;h=s[n+p[l]]}if(h>m&&(M&ee)!==G){for(w===0&&(w=m),V+=g,N=h-w,E=1<<N;N+w<v&&(E-=he[N+w],!(E<=0));)N++,E<<=1;if(F+=1<<N,t===y0&&F>rS||t===oS&&F>aS)return 1;G=M&ee,o[G]=m<<24|N<<16|V-c|0}}return M!==0&&(o[V+M]=h-w<<24|64<<16|0),f.bits=m,0};var Up=C7;const E7=0,BT=1,NT=2,{Z_FINISH:lS,Z_BLOCK:T7,Z_TREES:gg,Z_OK:nh,Z_STREAM_END:F7,Z_NEED_DICT:I7,Z_STREAM_ERROR:dc,Z_DATA_ERROR:CT,Z_MEM_ERROR:ET,Z_BUF_ERROR:R7,Z_DEFLATED:cS}=jT,Ky=16180,AS=16181,dS=16182,uS=16183,hS=16184,fS=16185,pS=16186,mS=16187,gS=16188,yS=16189,cy=16190,GA=16191,x0=16192,xS=16193,v0=16194,vS=16195,bS=16196,jS=16197,wS=16198,yg=16199,xg=16200,SS=16201,BS=16202,NS=16203,CS=16204,ES=16205,b0=16206,TS=16207,FS=16208,Za=16209,TT=16210,FT=16211,O7=852,U7=592,L7=15,D7=L7,IS=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Q7(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ih=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.mode<Ky||s.mode>FT?1:0},IT=t=>{if(ih(t))return dc;const s=t.state;return t.total_in=t.total_out=s.total=0,t.msg="",s.wrap&&(t.adler=s.wrap&1),s.mode=Ky,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(O7),s.distcode=s.distdyn=new Int32Array(U7),s.sane=1,s.back=-1,nh},RT=t=>{if(ih(t))return dc;const s=t.state;return s.wsize=0,s.whave=0,s.wnext=0,IT(t)},OT=(t,s)=>{let n;if(ih(t))return dc;const r=t.state;return s<0?(n=0,s=-s):(n=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?dc:(r.window!==null&&r.wbits!==s&&(r.window=null),r.wrap=n,r.wbits=s,RT(t))},UT=(t,s)=>{if(!t)return dc;const n=new Q7;t.state=n,n.strm=t,n.window=null,n.mode=Ky;const r=OT(t,s);return r!==nh&&(t.state=null),r},M7=t=>UT(t,D7);let RS=!0,j0,w0;const _7=t=>{if(RS){j0=new Int32Array(512),w0=new Int32Array(32);let s=0;for(;s<144;)t.lens[s++]=8;for(;s<256;)t.lens[s++]=9;for(;s<280;)t.lens[s++]=7;for(;s<288;)t.lens[s++]=8;for(Up(BT,t.lens,0,288,j0,0,t.work,{bits:9}),s=0;s<32;)t.lens[s++]=5;Up(NT,t.lens,0,32,w0,0,t.work,{bits:5}),RS=!1}t.lencode=j0,t.lenbits=9,t.distcode=w0,t.distbits=5},LT=(t,s,n,r)=>{let o;const c=t.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),r>=c.wsize?(c.window.set(s.subarray(n-c.wsize,n),0),c.wnext=0,c.whave=c.wsize):(o=c.wsize-c.wnext,o>r&&(o=r),c.window.set(s.subarray(n-r,n-r+o),c.wnext),r-=o,r?(c.window.set(s.subarray(n-r,n),0),c.wnext=r,c.whave=c.wsize):(c.wnext+=o,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=o))),0},P7=(t,s)=>{let n,r,o,c,p,f,A,h,l,g,v,m,N,w,E=0,F,M,k,K,G,ee,V,X;const J=new Uint8Array(4);let he,q;const ie=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ih(t)||!t.output||!t.input&&t.avail_in!==0)return dc;n=t.state,n.mode===GA&&(n.mode=x0),p=t.next_out,o=t.output,A=t.avail_out,c=t.next_in,r=t.input,f=t.avail_in,h=n.hold,l=n.bits,g=f,v=A,X=nh;e:for(;;)switch(n.mode){case Ky:if(n.wrap===0){n.mode=x0;break}for(;l<16;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(n.wrap&2&&h===35615){n.wbits===0&&(n.wbits=15),n.check=0,J[0]=h&255,J[1]=h>>>8&255,n.check=AA(n.check,J,2,0),h=0,l=0,n.mode=AS;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((h&255)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=Za;break}if((h&15)!==cS){t.msg="unknown compression method",n.mode=Za;break}if(h>>>=4,l-=4,V=(h&15)+8,n.wbits===0&&(n.wbits=V),V>15||V>n.wbits){t.msg="invalid window size",n.mode=Za;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=h&512?yS:GA,h=0,l=0;break;case AS:for(;l<16;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(n.flags=h,(n.flags&255)!==cS){t.msg="unknown compression method",n.mode=Za;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Za;break}n.head&&(n.head.text=h>>8&1),n.flags&512&&n.wrap&4&&(J[0]=h&255,J[1]=h>>>8&255,n.check=AA(n.check,J,2,0)),h=0,l=0,n.mode=dS;case dS:for(;l<32;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}n.head&&(n.head.time=h),n.flags&512&&n.wrap&4&&(J[0]=h&255,J[1]=h>>>8&255,J[2]=h>>>16&255,J[3]=h>>>24&255,n.check=AA(n.check,J,4,0)),h=0,l=0,n.mode=uS;case uS:for(;l<16;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}n.head&&(n.head.xflags=h&255,n.head.os=h>>8),n.flags&512&&n.wrap&4&&(J[0]=h&255,J[1]=h>>>8&255,n.check=AA(n.check,J,2,0)),h=0,l=0,n.mode=hS;case hS:if(n.flags&1024){for(;l<16;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}n.length=h,n.head&&(n.head.extra_len=h),n.flags&512&&n.wrap&4&&(J[0]=h&255,J[1]=h>>>8&255,n.check=AA(n.check,J,2,0)),h=0,l=0}else n.head&&(n.head.extra=null);n.mode=fS;case fS:if(n.flags&1024&&(m=n.length,m>f&&(m=f),m&&(n.head&&(V=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(c,c+m),V)),n.flags&512&&n.wrap&4&&(n.check=AA(n.check,r,m,c)),f-=m,c+=m,n.length-=m),n.length))break e;n.length=0,n.mode=pS;case pS:if(n.flags&2048){if(f===0)break e;m=0;do V=r[c+m++],n.head&&V&&n.length<65536&&(n.head.name+=String.fromCharCode(V));while(V&&m<f);if(n.flags&512&&n.wrap&4&&(n.check=AA(n.check,r,m,c)),f-=m,c+=m,V)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=mS;case mS:if(n.flags&4096){if(f===0)break e;m=0;do V=r[c+m++],n.head&&V&&n.length<65536&&(n.head.comment+=String.fromCharCode(V));while(V&&m<f);if(n.flags&512&&n.wrap&4&&(n.check=AA(n.check,r,m,c)),f-=m,c+=m,V)break e}else n.head&&(n.head.comment=null);n.mode=gS;case gS:if(n.flags&512){for(;l<16;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(n.wrap&4&&h!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Za;break}h=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=GA;break;case yS:for(;l<32;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}t.adler=n.check=IS(h),h=0,l=0,n.mode=cy;case cy:if(n.havedict===0)return t.next_out=p,t.avail_out=A,t.next_in=c,t.avail_in=f,n.hold=h,n.bits=l,I7;t.adler=n.check=1,n.mode=GA;case GA:if(s===T7||s===gg)break e;case x0:if(n.last){h>>>=l&7,l-=l&7,n.mode=b0;break}for(;l<3;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}switch(n.last=h&1,h>>>=1,l-=1,h&3){case 0:n.mode=xS;break;case 1:if(_7(n),n.mode=yg,s===gg){h>>>=2,l-=2;break e}break;case 2:n.mode=bS;break;case 3:t.msg="invalid block type",n.mode=Za}h>>>=2,l-=2;break;case xS:for(h>>>=l&7,l-=l&7;l<32;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if((h&65535)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Za;break}if(n.length=h&65535,h=0,l=0,n.mode=v0,s===gg)break e;case v0:n.mode=vS;case vS:if(m=n.length,m){if(m>f&&(m=f),m>A&&(m=A),m===0)break e;o.set(r.subarray(c,c+m),p),f-=m,c+=m,A-=m,p+=m,n.length-=m;break}n.mode=GA;break;case bS:for(;l<14;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(n.nlen=(h&31)+257,h>>>=5,l-=5,n.ndist=(h&31)+1,h>>>=5,l-=5,n.ncode=(h&15)+4,h>>>=4,l-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Za;break}n.have=0,n.mode=jS;case jS:for(;n.have<n.ncode;){for(;l<3;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}n.lens[ie[n.have++]]=h&7,h>>>=3,l-=3}for(;n.have<19;)n.lens[ie[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,he={bits:n.lenbits},X=Up(E7,n.lens,0,19,n.lencode,0,n.work,he),n.lenbits=he.bits,X){t.msg="invalid code lengths set",n.mode=Za;break}n.have=0,n.mode=wS;case wS:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[h&(1<<n.lenbits)-1],F=E>>>24,M=E>>>16&255,k=E&65535,!(F<=l);){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(k<16)h>>>=F,l-=F,n.lens[n.have++]=k;else{if(k===16){for(q=F+2;l<q;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(h>>>=F,l-=F,n.have===0){t.msg="invalid bit length repeat",n.mode=Za;break}V=n.lens[n.have-1],m=3+(h&3),h>>>=2,l-=2}else if(k===17){for(q=F+3;l<q;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}h>>>=F,l-=F,V=0,m=3+(h&7),h>>>=3,l-=3}else{for(q=F+7;l<q;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}h>>>=F,l-=F,V=0,m=11+(h&127),h>>>=7,l-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Za;break}for(;m--;)n.lens[n.have++]=V}}if(n.mode===Za)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Za;break}if(n.lenbits=9,he={bits:n.lenbits},X=Up(BT,n.lens,0,n.nlen,n.lencode,0,n.work,he),n.lenbits=he.bits,X){t.msg="invalid literal/lengths set",n.mode=Za;break}if(n.distbits=6,n.distcode=n.distdyn,he={bits:n.distbits},X=Up(NT,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,he),n.distbits=he.bits,X){t.msg="invalid distances set",n.mode=Za;break}if(n.mode=yg,s===gg)break e;case yg:n.mode=xg;case xg:if(f>=6&&A>=258){t.next_out=p,t.avail_out=A,t.next_in=c,t.avail_in=f,n.hold=h,n.bits=l,j7(t,v),p=t.next_out,o=t.output,A=t.avail_out,c=t.next_in,r=t.input,f=t.avail_in,h=n.hold,l=n.bits,n.mode===GA&&(n.back=-1);break}for(n.back=0;E=n.lencode[h&(1<<n.lenbits)-1],F=E>>>24,M=E>>>16&255,k=E&65535,!(F<=l);){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(M&&(M&240)===0){for(K=F,G=M,ee=k;E=n.lencode[ee+((h&(1<<K+G)-1)>>K)],F=E>>>24,M=E>>>16&255,k=E&65535,!(K+F<=l);){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}h>>>=K,l-=K,n.back+=K}if(h>>>=F,l-=F,n.back+=F,n.length=k,M===0){n.mode=ES;break}if(M&32){n.back=-1,n.mode=GA;break}if(M&64){t.msg="invalid literal/length code",n.mode=Za;break}n.extra=M&15,n.mode=SS;case SS:if(n.extra){for(q=n.extra;l<q;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=BS;case BS:for(;E=n.distcode[h&(1<<n.distbits)-1],F=E>>>24,M=E>>>16&255,k=E&65535,!(F<=l);){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if((M&240)===0){for(K=F,G=M,ee=k;E=n.distcode[ee+((h&(1<<K+G)-1)>>K)],F=E>>>24,M=E>>>16&255,k=E&65535,!(K+F<=l);){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}h>>>=K,l-=K,n.back+=K}if(h>>>=F,l-=F,n.back+=F,M&64){t.msg="invalid distance code",n.mode=Za;break}n.offset=k,n.extra=M&15,n.mode=NS;case NS:if(n.extra){for(q=n.extra;l<q;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Za;break}n.mode=CS;case CS:if(A===0)break e;if(m=v-A,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Za;break}m>n.wnext?(m-=n.wnext,N=n.wsize-m):N=n.wnext-m,m>n.length&&(m=n.length),w=n.window}else w=o,N=p-n.offset,m=n.length;m>A&&(m=A),A-=m,n.length-=m;do o[p++]=w[N++];while(--m);n.length===0&&(n.mode=xg);break;case ES:if(A===0)break e;o[p++]=n.length,A--,n.mode=xg;break;case b0:if(n.wrap){for(;l<32;){if(f===0)break e;f--,h|=r[c++]<<l,l+=8}if(v-=A,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?AA(n.check,o,v,p-v):kv(n.check,o,v,p-v)),v=A,n.wrap&4&&(n.flags?h:IS(h))!==n.check){t.msg="incorrect data check",n.mode=Za;break}h=0,l=0}n.mode=TS;case TS:if(n.wrap&&n.flags){for(;l<32;){if(f===0)break e;f--,h+=r[c++]<<l,l+=8}if(n.wrap&4&&h!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Za;break}h=0,l=0}n.mode=FS;case FS:X=F7;break e;case Za:X=CT;break e;case TT:return ET;case FT:default:return dc}return t.next_out=p,t.avail_out=A,t.next_in=c,t.avail_in=f,n.hold=h,n.bits=l,(n.wsize||v!==t.avail_out&&n.mode<Za&&(n.mode<b0||s!==lS))&&LT(t,t.output,t.next_out,v-t.avail_out),g-=t.avail_in,v-=t.avail_out,t.total_in+=g,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?AA(n.check,o,v,t.next_out-v):kv(n.check,o,v,t.next_out-v)),t.data_type=n.bits+(n.last?64:0)+(n.mode===GA?128:0)+(n.mode===yg||n.mode===v0?256:0),(g===0&&v===0||s===lS)&&X===nh&&(X=R7),X},k7=t=>{if(ih(t))return dc;let s=t.state;return s.window&&(s.window=null),t.state=null,nh},H7=(t,s)=>{if(ih(t))return dc;const n=t.state;return(n.wrap&2)===0?dc:(n.head=s,s.done=!1,nh)},K7=(t,s)=>{const n=s.length;let r,o,c;return ih(t)||(r=t.state,r.wrap!==0&&r.mode!==cy)?dc:r.mode===cy&&(o=1,o=kv(o,s,n,0),o!==r.check)?CT:(c=LT(t,s,n,n),c?(r.mode=TT,ET):(r.havedict=1,nh))};var z7=RT,G7=OT,V7=IT,$7=M7,q7=UT,W7=P7,Y7=k7,X7=H7,J7=K7,Z7="pako inflate (from Nodeca project)",$A={inflateReset:z7,inflateReset2:G7,inflateResetKeep:V7,inflateInit:$7,inflateInit2:q7,inflate:W7,inflateEnd:Y7,inflateGetHeader:X7,inflateSetDictionary:J7,inflateInfo:Z7};function e9(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var t9=e9;const DT=Object.prototype.toString,{Z_NO_FLUSH:s9,Z_FINISH:n9,Z_OK:Xp,Z_STREAM_END:S0,Z_NEED_DICT:B0,Z_STREAM_ERROR:r9,Z_DATA_ERROR:OS,Z_MEM_ERROR:a9}=jT;function im(t){this.options=wT.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(t&&t.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15)===0&&(s.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v7,this.strm.avail_out=0;let n=$A.inflateInit2(this.strm,s.windowBits);if(n!==Xp)throw new Error(Hv[n]);if(this.header=new t9,$A.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=Kv.string2buf(s.dictionary):DT.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(n=$A.inflateSetDictionary(this.strm,s.dictionary),n!==Xp)))throw new Error(Hv[n])}im.prototype.push=function(t,s){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let c,p,f;if(this.ended)return!1;for(s===~~s?p=s:p=s===!0?n9:s9,DT.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),c=$A.inflate(n,p),c===B0&&o&&(c=$A.inflateSetDictionary(n,o),c===Xp?c=$A.inflate(n,p):c===OS&&(c=B0));n.avail_in>0&&c===S0&&n.state.wrap>0&&t[n.next_in]!==0;)$A.inflateReset(n),c=$A.inflate(n,p);switch(c){case r9:case OS:case B0:case a9:return this.onEnd(c),this.ended=!0,!1}if(f=n.avail_out,n.next_out&&(n.avail_out===0||c===S0))if(this.options.to==="string"){let A=Kv.utf8border(n.output,n.next_out),h=n.next_out-A,l=Kv.buf2string(n.output,A);n.next_out=h,n.avail_out=r-h,h&&n.output.set(n.output.subarray(A,A+h),0),this.onData(l)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(c===Xp&&f===0)){if(c===S0)return c=$A.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};im.prototype.onData=function(t){this.chunks.push(t)};im.prototype.onEnd=function(t){t===Xp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wT.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function i9(t,s){const n=new im(s);if(n.push(t),n.err)throw n.msg||Hv[n.err];return n.result}var o9=im,l9=i9,c9={Inflate:o9,inflate:l9};const{Inflate:A9,inflate:d9}=c9;var US=A9,u9=d9;const QT=[];for(let t=0;t<256;t++){let s=t;for(let n=0;n<8;n++)s&1?s=3988292384^s>>>1:s=s>>>1;QT[t]=s}const LS=4294967295;function h9(t,s,n){let r=t;for(let o=0;o<n;o++)r=QT[(r^s[o])&255]^r>>>8;return r}function f9(t,s){return(h9(LS,t,s)^LS)>>>0}function DS(t,s,n){const r=t.readUint32(),o=f9(new Uint8Array(t.buffer,t.byteOffset+t.offset-s-4,s),s);if(o!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${o}`)}function MT(t,s,n){for(let r=0;r<n;r++)s[r]=t[r]}function _T(t,s,n,r){let o=0;for(;o<r;o++)s[o]=t[o];for(;o<n;o++)s[o]=t[o]+s[o-r]&255}function PT(t,s,n,r){let o=0;if(n.length===0)for(;o<r;o++)s[o]=t[o];else for(;o<r;o++)s[o]=t[o]+n[o]&255}function kT(t,s,n,r,o){let c=0;if(n.length===0){for(;c<o;c++)s[c]=t[c];for(;c<r;c++)s[c]=t[c]+(s[c-o]>>1)&255}else{for(;c<o;c++)s[c]=t[c]+(n[c]>>1)&255;for(;c<r;c++)s[c]=t[c]+(s[c-o]+n[c]>>1)&255}}function HT(t,s,n,r,o){let c=0;if(n.length===0){for(;c<o;c++)s[c]=t[c];for(;c<r;c++)s[c]=t[c]+s[c-o]&255}else{for(;c<o;c++)s[c]=t[c]+n[c]&255;for(;c<r;c++)s[c]=t[c]+p9(s[c-o],n[c],n[c-o])&255}}function p9(t,s,n){const r=t+s-n,o=Math.abs(r-t),c=Math.abs(r-s),p=Math.abs(r-n);return o<=c&&o<=p?t:c<=p?s:n}function m9(t,s,n,r,o,c){switch(t){case 0:MT(s,n,o);break;case 1:_T(s,n,o,c);break;case 2:PT(s,n,r,o);break;case 3:kT(s,n,r,o,c);break;case 4:HT(s,n,r,o,c);break;default:throw new Error(`Unsupported filter: ${t}`)}}const g9=new Uint16Array([255]),y9=new Uint8Array(g9.buffer),x9=y9[0]===255;function v9(t){const{data:s,width:n,height:r,channels:o,depth:c}=t,p=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],f=Math.ceil(c/8)*o,A=new Uint8Array(r*n*f);let h=0;for(let l=0;l<7;l++){const g=p[l],v=Math.ceil((n-g.x)/g.xStep),m=Math.ceil((r-g.y)/g.yStep);if(v<=0||m<=0)continue;const N=v*f,w=new Uint8Array(N);for(let E=0;E<m;E++){const F=s[h++],M=s.subarray(h,h+N);h+=N;const k=new Uint8Array(N);m9(F,M,k,w,N,f),w.set(k);for(let K=0;K<v;K++){const G=g.x+K*g.xStep,ee=g.y+E*g.yStep;if(!(G>=n||ee>=r))for(let V=0;V<f;V++)A[(ee*n+G)*f+V]=k[K*f+V]}}}if(c===16){const l=new Uint16Array(A.buffer);if(x9)for(let g=0;g<l.length;g++)l[g]=b9(l[g]);return l}else return A}function b9(t){return(t&255)<<8|t>>8&255}const j9=new Uint16Array([255]),w9=new Uint8Array(j9.buffer),S9=w9[0]===255,B9=new Uint8Array(0);function QS(t){const{data:s,width:n,height:r,channels:o,depth:c}=t,p=Math.ceil(c/8)*o,f=Math.ceil(c/8*o*n),A=new Uint8Array(r*f);let h=B9,l=0,g,v;for(let m=0;m<r;m++){switch(g=s.subarray(l+1,l+1+f),v=A.subarray(m*f,(m+1)*f),s[l]){case 0:MT(g,v,f);break;case 1:_T(g,v,f,p);break;case 2:PT(g,v,h,f);break;case 3:kT(g,v,h,f,p);break;case 4:HT(g,v,h,f,p);break;default:throw new Error(`Unsupported filter: ${s[l]}`)}h=v,l+=f+1}if(c===16){const m=new Uint16Array(A.buffer);if(S9)for(let N=0;N<m.length;N++)m[N]=N9(m[N]);return m}else return A}function N9(t){return(t&255)<<8|t>>8&255}const Qg=Uint8Array.of(137,80,78,71,13,10,26,10);function MS(t){if(!C9(t.readBytes(Qg.length)))throw new Error("wrong PNG signature")}function C9(t){if(t.length<Qg.length)return!1;for(let s=0;s<Qg.length;s++)if(t[s]!==Qg[s])return!1;return!0}const E9="tEXt",T9=0,KT=new TextDecoder("latin1");function F9(t){if(R9(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const I9=/^[\u0000-\u00FF]*$/;function R9(t){if(!I9.test(t))throw new Error("invalid latin1 text")}function O9(t,s,n){const r=zT(s);t[r]=U9(s,n-r.length-1)}function zT(t){for(t.mark();t.readByte()!==T9;);const s=t.offset;t.reset();const n=KT.decode(t.readBytes(s-t.offset-1));return t.skip(1),F9(n),n}function U9(t,s){return KT.decode(t.readBytes(s))}const Ol={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},N0={UNKNOWN:-1,DEFLATE:0},_S={UNKNOWN:-1,ADAPTIVE:0},C0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},vg={NONE:0,BACKGROUND:1,PREVIOUS:2},E0={SOURCE:0,OVER:1};class L9 extends p1{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(s,n={}){super(s);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new US,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=N0.UNKNOWN,this._filterMethod=_S.UNKNOWN,this._interlaceMethod=C0.UNKNOWN,this._colorType=Ol.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(MS(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeChunk(s,n)}return this.decodeImage(),this._png}decodeApng(){for(MS(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(s,n)}return this.decodeApngImage(),this._apng}decodeChunk(s,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case E9:O9(this._png.text,this,s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?DS(this,s+4,n):this.skip(4)}decodeApngChunk(s,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(s);break;default:this.decodeChunk(s,n),this.offset=r+s;break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?DS(this,s+4,n):this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=D9(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case Ol.GREYSCALE:r=1;break;case Ol.TRUECOLOUR:r=3;break;case Ol.INDEXED_COLOUR:r=1;break;case Ol.GREYSCALE_ALPHA:r=2;break;case Ol.TRUECOLOUR_ALPHA:r=4;break;case Ol.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==N0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const s={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(s)}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const n=s/3;this._hasPalette=!0;const r=[];this._palette=r;for(let o=0;o<n;o++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._writingDataChunks=!0;const n=s,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodeFDAT(s){this._writingDataChunks=!0;let n=s,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodetRNS(s){switch(this._colorType){case Ol.GREYSCALE:case Ol.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let n=0;n<s/2;n++)this._transparency[n]=this.readUint16();break}case Ol.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let n=0;for(;n<s;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ol.UNKNOWN:case Ol.GREYSCALE_ALPHA:case Ol.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){const n=zT(this),r=this.readUint8();if(r!==N0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const o=this.readBytes(s-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:u9(o)}}decodepHYs(){const s=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:s,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let s=0;s<this._numberOfFrames;s++){const n={sequenceNumber:this._frames[s].sequenceNumber,delayNumber:this._frames[s].delayNumber,delayDenominator:this._frames[s].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(s);if(r){if(r.data=QS({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),s===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const o=this._apng.frames.at(s-1);this.disposeFrame(r,o,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(s,n,r){switch(s.disposeOp){case vg.NONE:break;case vg.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let c=0;c<this._png.width;c++){const p=(o*s.width+c)*this._png.channels;for(let f=0;f<this._png.channels;f++)r.data[p+f]=0}break;case vg.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(s,n){const r=1<<this._png.depth,o=(c,p)=>{const f=((c+n.yOffset)*this._png.width+n.xOffset+p)*this._png.channels,A=(c*n.width+p)*this._png.channels;return{index:f,frameIndex:A}};switch(n.blendOp){case E0.SOURCE:for(let c=0;c<n.height;c++)for(let p=0;p<n.width;p++){const{index:f,frameIndex:A}=o(c,p);for(let h=0;h<this._png.channels;h++)s.data[f+h]=n.data[A+h]}break;case E0.OVER:for(let c=0;c<n.height;c++)for(let p=0;p<n.width;p++){const{index:f,frameIndex:A}=o(c,p);for(let h=0;h<this._png.channels;h++){const l=n.data[A+this._png.channels-1]/r,g=h%(this._png.channels-1)===0?1:n.data[A+h],v=Math.floor(l*g+(1-l)*s.data[f+h]);s.data[f+h]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==_S.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===C0.NO_INTERLACE)this._png.data=QS({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===C0.ADAM7)this._png.data=v9({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const s=this._inflator.result,n=this._frames.at(-1);n?n.data=s:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:vg.NONE,blendOp:E0.SOURCE,data:s}),this._inflator=new US,this._writingDataChunks=!1}}function D9(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var PS;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(PS||(PS={}));function Q9(t,s){return new L9(t,s).decode()}var Dn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function T0(){Dn.console&&typeof Dn.console.log=="function"&&Dn.console.log.apply(Dn.console,arguments)}var Ba={log:T0,warn:function(t){Dn.console&&(typeof Dn.console.warn=="function"?Dn.console.warn.apply(Dn.console,arguments):T0.call(null,arguments))},error:function(t){Dn.console&&(typeof Dn.console.error=="function"?Dn.console.error.apply(Dn.console,arguments):T0(t))}};function F0(t,s,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){_u(r.response,s,n)},r.onerror=function(){Ba.error("could not download file")},r.send()}function kS(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function bg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var _u=Dn.saveAs||((typeof window>"u"?"undefined":Aa(window))!=="object"||window!==Dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,n){var r=Dn.URL||Dn.webkitURL,o=document.createElement("a");s=s||t.name||"download",o.download=s,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?kS(o.href)?F0(t,s,n):bg(o,o.target="_blank"):bg(o)):(o.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){bg(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,n){if(s=s||t.name||"download",typeof t=="string")if(kS(t))F0(t,s,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){bg(r)})}else navigator.msSaveOrOpenBlob((function(o,c){return c===void 0?c={autoBom:!1}:Aa(c)!=="object"&&(Ba.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(t,n),s)}:function(t,s,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return F0(t,s,n);var o=t.type==="application/octet-stream",c=/constructor/i.test(Dn.HTMLElement)||Dn.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||o&&c)&&(typeof FileReader>"u"?"undefined":Aa(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var l=f.result;l=p?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=l:location=l,r=null},f.readAsDataURL(t)}else{var A=Dn.URL||Dn.webkitURL,h=A.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){A.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function GT(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,c=n[r].process,p=o.exec(t);p&&(s=c(p),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),A=this.g.toString(16),h=this.b.toString(16);return f.length==1&&(f="0"+f),A.length==1&&(A="0"+A),h.length==1&&(h="0"+h),"#"+f+A+h}}var Mg=Dn.atob.bind(Dn),HS=Dn.btoa.bind(Dn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function I0(t,s){var n=t[0],r=t[1],o=t[2],c=t[3];n=Uo(n,r,o,c,s[0],7,-680876936),c=Uo(c,n,r,o,s[1],12,-389564586),o=Uo(o,c,n,r,s[2],17,606105819),r=Uo(r,o,c,n,s[3],22,-1044525330),n=Uo(n,r,o,c,s[4],7,-176418897),c=Uo(c,n,r,o,s[5],12,1200080426),o=Uo(o,c,n,r,s[6],17,-1473231341),r=Uo(r,o,c,n,s[7],22,-45705983),n=Uo(n,r,o,c,s[8],7,1770035416),c=Uo(c,n,r,o,s[9],12,-1958414417),o=Uo(o,c,n,r,s[10],17,-42063),r=Uo(r,o,c,n,s[11],22,-1990404162),n=Uo(n,r,o,c,s[12],7,1804603682),c=Uo(c,n,r,o,s[13],12,-40341101),o=Uo(o,c,n,r,s[14],17,-1502002290),n=Lo(n,r=Uo(r,o,c,n,s[15],22,1236535329),o,c,s[1],5,-165796510),c=Lo(c,n,r,o,s[6],9,-1069501632),o=Lo(o,c,n,r,s[11],14,643717713),r=Lo(r,o,c,n,s[0],20,-373897302),n=Lo(n,r,o,c,s[5],5,-701558691),c=Lo(c,n,r,o,s[10],9,38016083),o=Lo(o,c,n,r,s[15],14,-660478335),r=Lo(r,o,c,n,s[4],20,-405537848),n=Lo(n,r,o,c,s[9],5,568446438),c=Lo(c,n,r,o,s[14],9,-1019803690),o=Lo(o,c,n,r,s[3],14,-187363961),r=Lo(r,o,c,n,s[8],20,1163531501),n=Lo(n,r,o,c,s[13],5,-1444681467),c=Lo(c,n,r,o,s[2],9,-51403784),o=Lo(o,c,n,r,s[7],14,1735328473),n=Do(n,r=Lo(r,o,c,n,s[12],20,-1926607734),o,c,s[5],4,-378558),c=Do(c,n,r,o,s[8],11,-2022574463),o=Do(o,c,n,r,s[11],16,1839030562),r=Do(r,o,c,n,s[14],23,-35309556),n=Do(n,r,o,c,s[1],4,-1530992060),c=Do(c,n,r,o,s[4],11,1272893353),o=Do(o,c,n,r,s[7],16,-155497632),r=Do(r,o,c,n,s[10],23,-1094730640),n=Do(n,r,o,c,s[13],4,681279174),c=Do(c,n,r,o,s[0],11,-358537222),o=Do(o,c,n,r,s[3],16,-722521979),r=Do(r,o,c,n,s[6],23,76029189),n=Do(n,r,o,c,s[9],4,-640364487),c=Do(c,n,r,o,s[12],11,-421815835),o=Do(o,c,n,r,s[15],16,530742520),n=Qo(n,r=Do(r,o,c,n,s[2],23,-995338651),o,c,s[0],6,-198630844),c=Qo(c,n,r,o,s[7],10,1126891415),o=Qo(o,c,n,r,s[14],15,-1416354905),r=Qo(r,o,c,n,s[5],21,-57434055),n=Qo(n,r,o,c,s[12],6,1700485571),c=Qo(c,n,r,o,s[3],10,-1894986606),o=Qo(o,c,n,r,s[10],15,-1051523),r=Qo(r,o,c,n,s[1],21,-2054922799),n=Qo(n,r,o,c,s[8],6,1873313359),c=Qo(c,n,r,o,s[15],10,-30611744),o=Qo(o,c,n,r,s[6],15,-1560198380),r=Qo(r,o,c,n,s[13],21,1309151649),n=Qo(n,r,o,c,s[4],6,-145523070),c=Qo(c,n,r,o,s[11],10,-1120210379),o=Qo(o,c,n,r,s[2],15,718787259),r=Qo(r,o,c,n,s[9],21,-343485551),t[0]=Vd(n,t[0]),t[1]=Vd(r,t[1]),t[2]=Vd(o,t[2]),t[3]=Vd(c,t[3])}function zy(t,s,n,r,o,c){return s=Vd(Vd(s,t),Vd(r,c)),Vd(s<<o|s>>>32-o,n)}function Uo(t,s,n,r,o,c,p){return zy(s&n|~s&r,t,s,o,c,p)}function Lo(t,s,n,r,o,c,p){return zy(s&r|n&~r,t,s,o,c,p)}function Do(t,s,n,r,o,c,p){return zy(s^n^r,t,s,o,c,p)}function Qo(t,s,n,r,o,c,p){return zy(n^(s|~r),t,s,o,c,p)}function VT(t){var s,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)I0(r,M9(t.substring(s-64,s)));t=t.substring(s-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)o[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(o[s>>2]|=128<<(s%4<<3),s>55)for(I0(r,o),s=0;s<16;s++)o[s]=0;return o[14]=8*n,I0(r,o),r}function M9(t){var s,n=[];for(s=0;s<64;s+=4)n[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return n}var KS="0123456789abcdef".split("");function _9(t){for(var s="",n=0;n<4;n++)s+=KS[t>>8*n+4&15]+KS[t>>8*n&15];return s}function P9(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function zv(t){return VT(t).map(P9).join("")}var k9=(function(t){for(var s=0;s<t.length;s++)t[s]=_9(t[s]);return t.join("")})(VT("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vd(t,s){if(k9){var n=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(n>>16)<<16|65535&n}return t+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Gv(t,s){var n,r,o,c;if(t!==n){for(var p=(o=t,c=1+(256/t.length|0),new Array(c+1).join(o)),f=[],A=0;A<256;A++)f[A]=A;var h=0;for(A=0;A<256;A++){var l=f[A];h=(h+l+p.charCodeAt(A))%256,f[A]=f[h],f[h]=l}n=t,r=f}else f=r;var g=s.length,v=0,m=0,N="";for(A=0;A<g;A++)m=(m+(l=f[v=(v+1)%256]))%256,f[v]=f[m],f[m]=l,p=f[(f[v]+f[m])%256],N+=String.fromCharCode(s.charCodeAt(A)^p);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var zS={print:4,modify:8,copy:16,"annot-forms":32};function zh(t,s,n,r){this.v=1,this.r=2;var o=192;t.forEach(function(f){if(zS.perm!==void 0)throw new Error("Invalid permission: "+f);o+=zS[f]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var c=(s+this.padding).substr(0,32),p=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,p),this.P=-(1+(255^o)),this.encryptionKey=zv(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Gv(this.encryptionKey,this.padding)}function Gh(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",n=t.length,r=0;r<n;r++){var o=t.charCodeAt(r);s+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):t[r]}return s}function GS(t){if(Aa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(n)||(s[n]={});var c=Math.random().toString(35);return s[n][c]=[r,!!o],c},this.unsubscribe=function(n){for(var r in s)if(s[r][n])return delete s[r][n],Object.keys(s[r]).length===0&&delete s[r],!0;return!1},this.publish=function(n){if(s.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var c in s[n]){var p=s[n][c];try{p[0].apply(t,r)}catch(f){Dn.console&&Ba.error("jsPDF PubSub Error",f.message,f)}p[1]&&o.push(c)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function Jp(t){if(!(this instanceof Jp))return new Jp(t);var s="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&s.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function $T(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function zd(t,s,n,r,o){if(!(this instanceof zd))return new zd(t,s,n,r,o);this.type=t==="axial"?2:3,this.coords=s,this.colors=n,$T.call(this,r,o)}function Gu(t,s,n,r,o){if(!(this instanceof Gu))return new Gu(t,s,n,r,o);this.boundingBox=t,this.xStep=s,this.yStep=n,this.stream="",this.cloneIndex=0,$T.call(this,r,o)}function hn(t){var s,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],c=arguments[3],p=[],f=1,A=16,h="S",l=null;Aa(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,o=t.format||o,c=t.compress||t.compressPdf||c,(l=t.encryption||null)!==null&&(l.userPassword=l.userPassword||"",l.ownerPassword=l.ownerPassword||"",l.userPermissions=l.userPermissions||[]),f=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),h=t.defaultPathOperation||"S"),p=t.filters||(c===!0?["FlateEncode"]:p),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=GS;var N="1.3",w=m.__private__.getPdfVersion=function(){return N};m.__private__.setPdfVersion=function(z){N=z};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return E};var F=m.__private__.getPageFormat=function(z){return E[z]};o=o||"a4";var M="compat",k="advanced",K=M;function G(){this.saveGraphicsState(),Se(new is(it,0,0,-it,0,gs()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),h="n",K=k}function ee(){this.restoreGraphicsState(),h="S",K=M}var V=m.__private__.combineFontStyleAndFontWeight=function(z,me){if(z=="bold"&&me=="normal"||z=="bold"&&me==400||z=="normal"&&me=="italic"||z=="bold"&&me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return me&&(z=me==400||me==="normal"?z==="italic"?"italic":"normal":me!=700&&me!=="bold"||z!=="normal"?(me==700?"bold":me)+""+z:"bold"),z};m.advancedAPI=function(z){var me=K===M;return me&&G.call(this),typeof z!="function"||(z(this),me&&ee.call(this)),this},m.compatAPI=function(z){var me=K===k;return me&&ee.call(this),typeof z!="function"||(z(this),me&&G.call(this)),this},m.isAdvancedAPI=function(){return K===k};var X,J=function(z){if(K!==k)throw new Error(z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},he=m.roundToPrecision=m.__private__.roundToPrecision=function(z,me){var Qe=s||me;if(isNaN(z)||isNaN(Qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return z.toFixed(Qe).replace(/0+$/,"")};X=m.hpf=m.__private__.hpf=typeof A=="number"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return he(z,A)}:A==="smart"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return he(z,z>-1&&z<1?16:5)}:function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return he(z,16)};var q=m.f2=m.__private__.f2=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f2");return he(z,2)},ie=m.__private__.f3=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f3");return he(z,3)},Ae=m.scale=m.__private__.scale=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.scale");return K===M?z*it:K===k?z:void 0},ce=function(z){return Ae((function(me){return K===M?gs()-me:K===k?me:void 0})(z))};m.__private__.setPrecision=m.setPrecision=function(z){typeof parseInt(z,10)=="number"&&(s=parseInt(z,10))};var oe,ne="00000000000000000000000000000000",re=m.__private__.getFileId=function(){return ne},se=m.__private__.setFileId=function(z){return ne=z!==void 0&&/^[a-fA-F0-9]{32}$/.test(z)?z.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),l!==null&&(wn=new zh(l.userPermissions,l.userPassword,l.ownerPassword,ne)),ne};m.setFileId=function(z){return se(z),this},m.getFileId=function(){return re()};var je=m.__private__.convertDateToPDFDate=function(z){var me=z.getTimezoneOffset(),Qe=me<0?"+":"-",We=Math.floor(Math.abs(me/60)),ut=Math.abs(me%60),_t=[Qe,ue(We),"'",ue(ut),"'"].join("");return["D:",z.getFullYear(),ue(z.getMonth()+1),ue(z.getDate()),ue(z.getHours()),ue(z.getMinutes()),ue(z.getSeconds()),_t].join("")},De=m.__private__.convertPDFDateToDate=function(z){var me=parseInt(z.substr(2,4),10),Qe=parseInt(z.substr(6,2),10)-1,We=parseInt(z.substr(8,2),10),ut=parseInt(z.substr(10,2),10),_t=parseInt(z.substr(12,2),10),es=parseInt(z.substr(14,2),10);return new Date(me,Qe,We,ut,_t,es,0)},ge=m.__private__.setCreationDate=function(z){var me;if(z===void 0&&(z=new Date),z instanceof Date)me=je(z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");me=z}return oe=me},Z=m.__private__.getCreationDate=function(z){var me=oe;return z==="jsDate"&&(me=De(oe)),me};m.setCreationDate=function(z){return ge(z),this},m.getCreationDate=function(z){return Z(z)};var fe,ue=m.__private__.padd2=function(z){return("0"+parseInt(z)).slice(-2)},pe=m.__private__.padd2Hex=function(z){return("00"+(z=z.toString())).substr(z.length)},Ce=0,Ne=[],ye=[],we=0,Te=[],qe=[],ve=!1,Ge=ye;m.__private__.setCustomOutputDestination=function(z){ve=!0,Ge=z};var at=function(z){ve||(Ge=z)};m.__private__.resetCustomOutputDestination=function(){ve=!1,Ge=ye};var Se=m.__private__.out=function(z){return z=z.toString(),we+=z.length+1,Ge.push(z),Ge},vt=m.__private__.write=function(z){return Se(arguments.length===1?z.toString():Array.prototype.join.call(arguments," "))},ht=m.__private__.getArrayBuffer=function(z){for(var me=z.length,Qe=new ArrayBuffer(me),We=new Uint8Array(Qe);me--;)We[me]=z.charCodeAt(me);return Qe},pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return pt};var Ze=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(z){return Ze=K===k?z/it:z,this};var Ht,At=m.__private__.getFontSize=m.getFontSize=function(){return K===M?Ze:Ze*it},Ct=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(z){return Ct=z,this},m.__private__.getR2L=m.getR2L=function(){return Ct};var It,Wt=m.__private__.setZoomMode=function(z){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(z))Ht=z;else if(isNaN(z)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+z+'" is not recognized.');Ht=z}else Ht=parseInt(z,10)};m.__private__.getZoomMode=function(){return Ht};var Es,Ss=m.__private__.setPageMode=function(z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+z+'" is not recognized.');It=z};m.__private__.getPageMode=function(){return It};var _s=m.__private__.setLayoutMode=function(z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+z+'" is not recognized.');Es=z};m.__private__.getLayoutMode=function(){return Es},m.__private__.setDisplayMode=m.setDisplayMode=function(z,me,Qe){return Wt(z),_s(me),Ss(Qe),this};var $e={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(z){if(Object.keys($e).indexOf(z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return $e[z]},m.__private__.getDocumentProperties=function(){return $e},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(z){for(var me in $e)$e.hasOwnProperty(me)&&z[me]&&($e[me]=z[me]);return this},m.__private__.setDocumentProperty=function(z,me){if(Object.keys($e).indexOf(z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return $e[z]=me};var ke,it,tt,Jt,Qt,ss={},dt={},qt=[],Vt={},vs={},ns={},js={},ln=null,ys=0,gt=[],Dt=new GS(m),xt=t.hotfixes||[],rs={},ps={},yn=[],is=function z(me,Qe,We,ut,_t,es){if(!(this instanceof z))return new z(me,Qe,We,ut,_t,es);isNaN(me)&&(me=1),isNaN(Qe)&&(Qe=0),isNaN(We)&&(We=0),isNaN(ut)&&(ut=1),isNaN(_t)&&(_t=0),isNaN(es)&&(es=0),this._matrix=[me,Qe,We,ut,_t,es]};Object.defineProperty(is.prototype,"sx",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(is.prototype,"shy",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(is.prototype,"shx",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(is.prototype,"sy",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(is.prototype,"tx",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(is.prototype,"ty",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(is.prototype,"a",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(is.prototype,"b",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(is.prototype,"c",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(is.prototype,"d",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(is.prototype,"e",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(is.prototype,"f",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(is.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(is.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(is.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(is.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),is.prototype.join=function(z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(X).join(z)},is.prototype.multiply=function(z){var me=z.sx*this.sx+z.shy*this.shx,Qe=z.sx*this.shy+z.shy*this.sy,We=z.shx*this.sx+z.sy*this.shx,ut=z.shx*this.shy+z.sy*this.sy,_t=z.tx*this.sx+z.ty*this.shx+this.tx,es=z.tx*this.shy+z.ty*this.sy+this.ty;return new is(me,Qe,We,ut,_t,es)},is.prototype.decompose=function(){var z=this.sx,me=this.shy,Qe=this.shx,We=this.sy,ut=this.tx,_t=this.ty,es=Math.sqrt(z*z+me*me),Gs=(z/=es)*Qe+(me/=es)*We;Qe-=z*Gs,We-=me*Gs;var rn=Math.sqrt(Qe*Qe+We*We);return Gs/=rn,z*(We/=rn)<me*(Qe/=rn)&&(z=-z,me=-me,Gs=-Gs,es=-es),{scale:new is(es,0,0,rn,0,0),translate:new is(1,0,0,1,ut,_t),rotate:new is(z,me,-me,z,0,0),skew:new is(1,0,Gs,1,0,0)}},is.prototype.toString=function(z){return this.join(" ")},is.prototype.inversed=function(){var z=this.sx,me=this.shy,Qe=this.shx,We=this.sy,ut=this.tx,_t=this.ty,es=1/(z*We-me*Qe),Gs=We*es,rn=-me*es,Cn=-Qe*es,_n=z*es;return new is(Gs,rn,Cn,_n,-Gs*ut-Cn*_t,-rn*ut-_n*_t)},is.prototype.applyToPoint=function(z){var me=z.x*this.sx+z.y*this.shx+this.tx,Qe=z.x*this.shy+z.y*this.sy+this.ty;return new B(me,Qe)},is.prototype.applyToRectangle=function(z){var me=this.applyToPoint(z),Qe=this.applyToPoint(new B(z.x+z.w,z.y+z.h));return new D(me.x,me.y,Qe.x-me.x,Qe.y-me.y)},is.prototype.clone=function(){var z=this.sx,me=this.shy,Qe=this.shx,We=this.sy,ut=this.tx,_t=this.ty;return new is(z,me,Qe,We,ut,_t)},m.Matrix=is;var Fs=m.matrixMult=function(z,me){return me.multiply(z)},Ns=new is(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Ns;var Nn=function(z,me){if(!vs[z]){var Qe=(me instanceof zd?"Sh":"P")+(Object.keys(Vt).length+1).toString(10);me.id=Qe,vs[z]=Qe,Vt[Qe]=me,Dt.publish("addPattern",me)}};m.ShadingPattern=zd,m.TilingPattern=Gu,m.addShadingPattern=function(z,me){return J("addShadingPattern()"),Nn(z,me),this},m.beginTilingPattern=function(z){J("beginTilingPattern()"),$(z.boundingBox[0],z.boundingBox[1],z.boundingBox[2]-z.boundingBox[0],z.boundingBox[3]-z.boundingBox[1],z.matrix)},m.endTilingPattern=function(z,me){J("endTilingPattern()"),me.stream=qe[fe].join(`
`),Nn(z,me),Dt.publish("endTilingPattern",me),yn.pop().restore()};var Cs,zt=m.__private__.newObject=function(){var z=os();return Ps(z,!0),z},os=m.__private__.newObjectDeferred=function(){return Ce++,Ne[Ce]=function(){return we},Ce},Ps=function(z,me){return me=typeof me=="boolean"&&me,Ne[z]=we,me&&Se(z+" 0 obj"),z},Ye=m.__private__.newAdditionalObject=function(){var z={objId:os(),content:""};return Te.push(z),z},St=os(),Rt=os(),us=m.__private__.decodeColorString=function(z){var me=z.split(" ");if(me.length!==2||me[1]!=="g"&&me[1]!=="G")me.length!==5||me[4]!=="k"&&me[4]!=="K"||(me=[(1-me[0])*(1-me[3]),(1-me[1])*(1-me[3]),(1-me[2])*(1-me[3]),"r"]);else{var Qe=parseFloat(me[0]);me=[Qe,Qe,Qe,"r"]}for(var We="#",ut=0;ut<3;ut++)We+=("0"+Math.floor(255*parseFloat(me[ut])).toString(16)).slice(-2);return We},As=m.__private__.encodeColorString=function(z){var me;typeof z=="string"&&(z={ch1:z});var Qe=z.ch1,We=z.ch2,ut=z.ch3,_t=z.ch4,es=z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Qe=="string"&&Qe.charAt(0)!=="#"){var Gs=new GT(Qe);if(Gs.ok)Qe=Gs.toHex();else if(!/^\d*\.?\d*$/.test(Qe))throw new Error('Invalid color "'+Qe+'" passed to jsPDF.encodeColorString.')}if(typeof Qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Qe)&&(Qe="#"+Qe[1]+Qe[1]+Qe[2]+Qe[2]+Qe[3]+Qe[3]),typeof Qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Qe)){var rn=parseInt(Qe.substr(1),16);Qe=rn>>16&255,We=rn>>8&255,ut=255&rn}if(We===void 0||_t===void 0&&Qe===We&&We===ut)me=typeof Qe=="string"?Qe+" "+es[0]:z.precision===2?q(Qe/255)+" "+es[0]:ie(Qe/255)+" "+es[0];else if(_t===void 0||Aa(_t)==="object"){if(_t&&!isNaN(_t.a)&&_t.a===0)return["1.","1.","1.",es[1]].join(" ");me=typeof Qe=="string"?[Qe,We,ut,es[1]].join(" "):z.precision===2?[q(Qe/255),q(We/255),q(ut/255),es[1]].join(" "):[ie(Qe/255),ie(We/255),ie(ut/255),es[1]].join(" ")}else me=typeof Qe=="string"?[Qe,We,ut,_t,es[2]].join(" "):z.precision===2?[q(Qe),q(We),q(ut),q(_t),es[2]].join(" "):[ie(Qe),ie(We),ie(ut),ie(_t),es[2]].join(" ");return me},as=m.__private__.getFilters=function(){return p},bs=m.__private__.putStream=function(z){var me=(z=z||{}).data||"",Qe=z.filters||as(),We=z.alreadyAppliedFilters||[],ut=z.addLength1||!1,_t=me.length,es=z.objectId,Gs=function(ri){return ri};if(l!==null&&es===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");l!==null&&(Gs=wn.encryptor(es,0));var rn={};Qe===!0&&(Qe=["FlateEncode"]);var Cn=z.additionalKeyValues||[],_n=(rn=hn.API.processDataByFilters!==void 0?hn.API.processDataByFilters(me,Qe):{data:me,reverseChain:[]}).reverseChain+(Array.isArray(We)?We.join(" "):We.toString());if(rn.data.length!==0&&(Cn.push({key:"Length",value:rn.data.length}),ut===!0&&Cn.push({key:"Length1",value:_t})),_n.length!=0)if(_n.split("/").length-1==1)Cn.push({key:"Filter",value:_n});else{Cn.push({key:"Filter",value:"["+_n+"]"});for(var yr=0;yr<Cn.length;yr+=1)if(Cn[yr].key==="DecodeParms"){for(var ga=[],Ua=0;Ua<rn.reverseChain.split("/").length-1;Ua+=1)ga.push("null");ga.push(Cn[yr].value),Cn[yr].value="["+ga.join(" ")+"]"}}Se("<<");for(var _r=0;_r<Cn.length;_r++)Se("/"+Cn[_r].key+" "+Cn[_r].value);Se(">>"),rn.data.length!==0&&(Se("stream"),Se(Gs(rn.data)),Se("endstream"))},cs=m.__private__.putPage=function(z){var me=z.number,Qe=z.data,We=z.objId,ut=z.contentsObjId;Ps(We,!0),Se("<</Type /Page"),Se("/Parent "+z.rootDictionaryObjId+" 0 R"),Se("/Resources "+z.resourceDictionaryObjId+" 0 R"),Se("/MediaBox ["+parseFloat(X(z.mediaBox.bottomLeftX))+" "+parseFloat(X(z.mediaBox.bottomLeftY))+" "+X(z.mediaBox.topRightX)+" "+X(z.mediaBox.topRightY)+"]"),z.cropBox!==null&&Se("/CropBox ["+X(z.cropBox.bottomLeftX)+" "+X(z.cropBox.bottomLeftY)+" "+X(z.cropBox.topRightX)+" "+X(z.cropBox.topRightY)+"]"),z.bleedBox!==null&&Se("/BleedBox ["+X(z.bleedBox.bottomLeftX)+" "+X(z.bleedBox.bottomLeftY)+" "+X(z.bleedBox.topRightX)+" "+X(z.bleedBox.topRightY)+"]"),z.trimBox!==null&&Se("/TrimBox ["+X(z.trimBox.bottomLeftX)+" "+X(z.trimBox.bottomLeftY)+" "+X(z.trimBox.topRightX)+" "+X(z.trimBox.topRightY)+"]"),z.artBox!==null&&Se("/ArtBox ["+X(z.artBox.bottomLeftX)+" "+X(z.artBox.bottomLeftY)+" "+X(z.artBox.topRightX)+" "+X(z.artBox.topRightY)+"]"),typeof z.userUnit=="number"&&z.userUnit!==1&&Se("/UserUnit "+z.userUnit),Dt.publish("putPage",{objId:We,pageContext:gt[me],pageNumber:me,page:Qe}),Se("/Contents "+ut+" 0 R"),Se(">>"),Se("endobj");var _t=Qe.join(`
`);return K===k&&(_t+=`
Q`),Ps(ut,!0),bs({data:_t,filters:as(),objectId:ut}),Se("endobj"),We},Us=m.__private__.putPages=function(){var z,me,Qe=[];for(z=1;z<=ys;z++)gt[z].objId=os(),gt[z].contentsObjId=os();for(z=1;z<=ys;z++)Qe.push(cs({number:z,data:qe[z],objId:gt[z].objId,contentsObjId:gt[z].contentsObjId,mediaBox:gt[z].mediaBox,cropBox:gt[z].cropBox,bleedBox:gt[z].bleedBox,trimBox:gt[z].trimBox,artBox:gt[z].artBox,userUnit:gt[z].userUnit,rootDictionaryObjId:St,resourceDictionaryObjId:Rt}));Ps(St,!0),Se("<</Type /Pages");var We="/Kids [";for(me=0;me<ys;me++)We+=Qe[me]+" 0 R ";Se(We+"]"),Se("/Count "+ys),Se(">>"),Se("endobj"),Dt.publish("postPutPages")},an=function(z){Dt.publish("putFont",{font:z,out:Se,newObject:zt,putStream:bs}),z.isAlreadyPutted!==!0&&(z.objectNumber=zt(),Se("<<"),Se("/Type /Font"),Se("/BaseFont /"+Gh(z.postScriptName)),Se("/Subtype /Type1"),typeof z.encoding=="string"&&Se("/Encoding /"+z.encoding),Se("/FirstChar 32"),Se("/LastChar 255"),Se(">>"),Se("endobj"))},Mr=function(z){z.objectNumber=zt();var me=[];me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Form"}),me.push({key:"BBox",value:"["+[X(z.x),X(z.y),X(z.x+z.width),X(z.y+z.height)].join(" ")+"]"}),me.push({key:"Matrix",value:"["+z.matrix.toString()+"]"});var Qe=z.pages[1].join(`
`);bs({data:Qe,additionalKeyValues:me,objectId:z.objectNumber}),Se("endobj")},Un=function(z,me){me||(me=21);var Qe=zt(),We=(function(es,Gs){var rn,Cn=[],_n=1/(Gs-1);for(rn=0;rn<1;rn+=_n)Cn.push(rn);if(Cn.push(1),es[0].offset!=0){var yr={offset:0,color:es[0].color};es.unshift(yr)}if(es[es.length-1].offset!=1){var ga={offset:1,color:es[es.length-1].color};es.push(ga)}for(var Ua="",_r=0,ri=0;ri<Cn.length;ri++){for(rn=Cn[ri];rn>es[_r+1].offset;)_r++;var za=es[_r].offset,ji=(rn-za)/(es[_r+1].offset-za),xl=es[_r].color,ko=es[_r+1].color;Ua+=pe(Math.round((1-ji)*xl[0]+ji*ko[0]).toString(16))+pe(Math.round((1-ji)*xl[1]+ji*ko[1]).toString(16))+pe(Math.round((1-ji)*xl[2]+ji*ko[2]).toString(16))}return Ua.trim()})(z.colors,me),ut=[];ut.push({key:"FunctionType",value:"0"}),ut.push({key:"Domain",value:"[0.0 1.0]"}),ut.push({key:"Size",value:"["+me+"]"}),ut.push({key:"BitsPerSample",value:"8"}),ut.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),bs({data:We,additionalKeyValues:ut,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Qe}),Se("endobj"),z.objectNumber=zt(),Se("<< /ShadingType "+z.type),Se("/ColorSpace /DeviceRGB");var _t="/Coords ["+X(parseFloat(z.coords[0]))+" "+X(parseFloat(z.coords[1]))+" ";z.type===2?_t+=X(parseFloat(z.coords[2]))+" "+X(parseFloat(z.coords[3])):_t+=X(parseFloat(z.coords[2]))+" "+X(parseFloat(z.coords[3]))+" "+X(parseFloat(z.coords[4]))+" "+X(parseFloat(z.coords[5])),Se(_t+="]"),z.matrix&&Se("/Matrix ["+z.matrix.toString()+"]"),Se("/Function "+Qe+" 0 R"),Se("/Extend [true true]"),Se(">>"),Se("endobj")},Ks=function(z,me){var Qe=os(),We=zt();me.push({resourcesOid:Qe,objectOid:We}),z.objectNumber=We;var ut=[];ut.push({key:"Type",value:"/Pattern"}),ut.push({key:"PatternType",value:"1"}),ut.push({key:"PaintType",value:"1"}),ut.push({key:"TilingType",value:"1"}),ut.push({key:"BBox",value:"["+z.boundingBox.map(X).join(" ")+"]"}),ut.push({key:"XStep",value:X(z.xStep)}),ut.push({key:"YStep",value:X(z.yStep)}),ut.push({key:"Resources",value:Qe+" 0 R"}),z.matrix&&ut.push({key:"Matrix",value:"["+z.matrix.toString()+"]"}),bs({data:z.stream,additionalKeyValues:ut,objectId:z.objectNumber}),Se("endobj")},Pn=function(z){for(var me in z.objectNumber=zt(),Se("<<"),z)switch(me){case"opacity":Se("/ca "+q(z[me]));break;case"stroke-opacity":Se("/CA "+q(z[me]))}Se(">>"),Se("endobj")},nr=function(z){Ps(z.resourcesOid,!0),Se("<<"),Se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var me in Se("/Font <<"),ss)ss.hasOwnProperty(me)&&(g===!1||g===!0&&v.hasOwnProperty(me))&&Se("/"+me+" "+ss[me].objectNumber+" 0 R");Se(">>")})(),(function(){if(Object.keys(Vt).length>0){for(var me in Se("/Shading <<"),Vt)Vt.hasOwnProperty(me)&&Vt[me]instanceof zd&&Vt[me].objectNumber>=0&&Se("/"+me+" "+Vt[me].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),Se(">>")}})(),(function(me){if(Object.keys(Vt).length>0){for(var Qe in Se("/Pattern <<"),Vt)Vt.hasOwnProperty(Qe)&&Vt[Qe]instanceof m.TilingPattern&&Vt[Qe].objectNumber>=0&&Vt[Qe].objectNumber<me&&Se("/"+Qe+" "+Vt[Qe].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),Se(">>")}})(z.objectOid),(function(){if(Object.keys(ns).length>0){var me;for(me in Se("/ExtGState <<"),ns)ns.hasOwnProperty(me)&&ns[me].objectNumber>=0&&Se("/"+me+" "+ns[me].objectNumber+" 0 R");Dt.publish("putGStateDict"),Se(">>")}})(),(function(){for(var me in Se("/XObject <<"),rs)rs.hasOwnProperty(me)&&rs[me].objectNumber>=0&&Se("/"+me+" "+rs[me].objectNumber+" 0 R");Dt.publish("putXobjectDict"),Se(">>")})(),Se(">>"),Se("endobj")},Yn=function(z){dt[z.fontName]=dt[z.fontName]||{},dt[z.fontName][z.fontStyle]=z.id},dn=function(z,me,Qe,We,ut){var _t={id:"F"+(Object.keys(ss).length+1).toString(10),postScriptName:z,fontName:me,fontStyle:Qe,encoding:We,isStandardFont:ut||!1,metadata:{}};return Dt.publish("addFont",{font:_t,instance:this}),ss[_t.id]=_t,Yn(_t),_t.id},vn=m.__private__.pdfEscape=m.pdfEscape=function(z,me){return(function(Qe,We){var ut,_t,es,Gs,rn,Cn,_n,yr,ga;if(es=(We=We||{}).sourceEncoding||"Unicode",rn=We.outputEncoding,(We.autoencode||rn)&&ss[ke].metadata&&ss[ke].metadata[es]&&ss[ke].metadata[es].encoding&&(Gs=ss[ke].metadata[es].encoding,!rn&&ss[ke].encoding&&(rn=ss[ke].encoding),!rn&&Gs.codePages&&(rn=Gs.codePages[0]),typeof rn=="string"&&(rn=Gs[rn]),rn)){for(_n=!1,Cn=[],ut=0,_t=Qe.length;ut<_t;ut++)(yr=rn[Qe.charCodeAt(ut)])?Cn.push(String.fromCharCode(yr)):Cn.push(Qe[ut]),Cn[ut].charCodeAt(0)>>8&&(_n=!0);Qe=Cn.join("")}for(ut=Qe.length;_n===void 0&&ut!==0;)Qe.charCodeAt(ut-1)>>8&&(_n=!0),ut--;if(!_n)return Qe;for(Cn=We.noBOM?[]:[254,255],ut=0,_t=Qe.length;ut<_t;ut++){if((ga=(yr=Qe.charCodeAt(ut))>>8)>>8)throw new Error("Character at position "+ut+" of string '"+Qe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Cn.push(ga),Cn.push(yr-(ga<<8))}return String.fromCharCode.apply(void 0,Cn)})(z,me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jn=m.__private__.beginPage=function(z){qe[++ys]=[],gt[ys]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(z[0]),topRightY:Number(z[1])}},Ir(ys),at(qe[fe])},Jn=function(z,me){var Qe,We,ut;switch(n=me||n,typeof z=="string"&&(Qe=F(z.toLowerCase()),Array.isArray(Qe)&&(We=Qe[0],ut=Qe[1])),Array.isArray(z)&&(We=z[0]*it,ut=z[1]*it),isNaN(We)&&(We=o[0],ut=o[1]),(We>14400||ut>14400)&&(Ba.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),We=Math.min(14400,We),ut=Math.min(14400,ut)),o=[We,ut],n.substr(0,1)){case"l":ut>We&&(o=[ut,We]);break;case"p":We>ut&&(o=[ut,We])}jn(o),ms(qs),Se(Zn),b!==0&&Se(b+" J"),S!==0&&Se(S+" j"),Dt.publish("addPage",{pageNumber:ys})},Zr=function(z){z>0&&z<=ys&&(qe.splice(z,1),gt.splice(z,1),ys--,fe>ys&&(fe=ys),this.setPage(fe))},Ir=function(z){z>0&&z<=ys&&(fe=z)},Vn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return qe.length-1},Ts=function(z,me,Qe){var We,ut=void 0;return Qe=Qe||{},z=z!==void 0?z:ss[ke].fontName,me=me!==void 0?me:ss[ke].fontStyle,We=z.toLowerCase(),dt[We]!==void 0&&dt[We][me]!==void 0?ut=dt[We][me]:dt[z]!==void 0&&dt[z][me]!==void 0?ut=dt[z][me]:Qe.disableWarning===!1&&Ba.warn("Unable to look up font label for font '"+z+"', '"+me+"'. Refer to getFontList() for available fonts."),ut||Qe.noFallback||(ut=dt.times[me])==null&&(ut=dt.times.normal),ut},Ls=m.__private__.putInfo=function(){var z=zt(),me=function(We){return We};for(var Qe in l!==null&&(me=wn.encryptor(z,0)),Se("<<"),Se("/Producer ("+vn(me("jsPDF "+hn.version))+")"),$e)$e.hasOwnProperty(Qe)&&$e[Qe]&&Se("/"+Qe.substr(0,1).toUpperCase()+Qe.substr(1)+" ("+vn(me($e[Qe]))+")");Se("/CreationDate ("+vn(me(oe))+")"),Se(">>"),Se("endobj")},ts=m.__private__.putCatalog=function(z){var me=(z=z||{}).rootDictionaryObjId||St;switch(zt(),Se("<<"),Se("/Type /Catalog"),Se("/Pages "+me+" 0 R"),Ht||(Ht="fullwidth"),Ht){case"fullwidth":Se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Se("/OpenAction [3 0 R /Fit]");break;case"original":Se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Qe=""+Ht;Qe.substr(Qe.length-1)==="%"&&(Ht=parseInt(Ht)/100),typeof Ht=="number"&&Se("/OpenAction [3 0 R /XYZ null null "+q(Ht)+"]")}switch(Es||(Es="continuous"),Es){case"continuous":Se("/PageLayout /OneColumn");break;case"single":Se("/PageLayout /SinglePage");break;case"two":case"twoleft":Se("/PageLayout /TwoColumnLeft");break;case"tworight":Se("/PageLayout /TwoColumnRight")}It&&Se("/PageMode /"+It),Dt.publish("putCatalog"),Se(">>"),Se("endobj")},Qs=m.__private__.putTrailer=function(){Se("trailer"),Se("<<"),Se("/Size "+(Ce+1)),Se("/Root "+Ce+" 0 R"),Se("/Info "+(Ce-1)+" 0 R"),l!==null&&Se("/Encrypt "+wn.oid+" 0 R"),Se("/ID [ <"+ne+"> <"+ne+"> ]"),Se(">>")},ls=m.__private__.putHeader=function(){Se("%PDF-"+N),Se("%")},be=m.__private__.putXRef=function(){var z="0000000000";Se("xref"),Se("0 "+(Ce+1)),Se("0000000000 65535 f ");for(var me=1;me<=Ce;me++)typeof Ne[me]=="function"?Se((z+Ne[me]()).slice(-10)+" 00000 n "):Ne[me]!==void 0?Se((z+Ne[me]).slice(-10)+" 00000 n "):Se("0000000000 00000 n ")},xe=m.__private__.buildDocument=function(){var z;Ce=0,we=0,ye=[],Ne=[],Te=[],St=os(),Rt=os(),at(ye),Dt.publish("buildDocument"),ls(),Us(),(function(){Dt.publish("putAdditionalObjects");for(var Qe=0;Qe<Te.length;Qe++){var We=Te[Qe];Ps(We.objId,!0),Se(We.content),Se("endobj")}Dt.publish("postPutAdditionalObjects")})(),z=[],(function(){for(var Qe in ss)ss.hasOwnProperty(Qe)&&(g===!1||g===!0&&v.hasOwnProperty(Qe))&&an(ss[Qe])})(),(function(){var Qe;for(Qe in ns)ns.hasOwnProperty(Qe)&&Pn(ns[Qe])})(),(function(){for(var Qe in rs)rs.hasOwnProperty(Qe)&&Mr(rs[Qe])})(),(function(Qe){var We;for(We in Vt)Vt.hasOwnProperty(We)&&(Vt[We]instanceof zd?Un(Vt[We]):Vt[We]instanceof Gu&&Ks(Vt[We],Qe))})(z),Dt.publish("putResources"),z.forEach(nr),nr({resourcesOid:Rt,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources"),l!==null&&(wn.oid=zt(),Se("<<"),Se("/Filter /Standard"),Se("/V "+wn.v),Se("/R "+wn.r),Se("/U <"+wn.toHexString(wn.U)+">"),Se("/O <"+wn.toHexString(wn.O)+">"),Se("/P "+wn.P),Se(">>"),Se("endobj")),Ls(),ts();var me=we;return be(),Qs(),Se("startxref"),Se(""+me),Se("%%EOF"),at(qe[fe]),ye.join(`
`)},lt=m.__private__.getBlob=function(z){return new Blob([ht(z)],{type:"application/pdf"})},Je=m.output=m.__private__.output=(Cs=function(z,me){switch(typeof(me=me||{})=="string"?me={filename:me}:me.filename=me.filename||"generated.pdf",z){case void 0:return xe();case"save":m.save(me.filename);break;case"arraybuffer":return ht(xe());case"blob":return lt(xe());case"bloburi":case"bloburl":if(Dn.URL!==void 0&&typeof Dn.URL.createObjectURL=="function")return Dn.URL&&Dn.URL.createObjectURL(lt(xe()))||void 0;Ba.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Qe="",We=xe();try{Qe=HS(We)}catch{Qe=HS(unescape(encodeURIComponent(We)))}return"data:application/pdf;filename="+me.filename+";base64,"+Qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dn)==="[object Window]"){var ut="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';me.pdfObjectUrl&&(ut=me.pdfObjectUrl,_t="");var es='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ut+'"'+_t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(me)+");<\/script></body></html>",Gs=Dn.open();return Gs!==null&&Gs.document.write(es),Gs}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dn)==="[object Window]"){var rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+me.filename+'" width="500px" height="400px" /></body></html>',Cn=Dn.open();if(Cn!==null){Cn.document.write(rn);var _n=this;Cn.document.documentElement.querySelector("#pdfViewer").onload=function(){Cn.document.title=me.filename,Cn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_n.output("bloburl"))}}return Cn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",me)+'"></iframe></body></html>',ga=Dn.open();if(ga!==null&&(ga.document.write(yr),ga.document.title=me.filename),ga||typeof safari>"u")return ga;break;case"datauri":case"dataurl":return Dn.document.location.href=this.output("datauristring",me);default:return null}},Cs.foo=function(){try{return Cs.apply(this,arguments)}catch(Qe){var z=Qe.stack||"";~z.indexOf(" at ")&&(z=z.split(" at ")[1]);var me="Error in function "+z.split(`
`)[0].split("<")[0]+": "+Qe.message;if(!Dn.console)throw new Error(me);Dn.console.error(me,Qe),Dn.alert&&alert(me)}},Cs.foo.bar=Cs,Cs.foo),fs=function(z){return Array.isArray(xt)===!0&&xt.indexOf(z)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=fs("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var wn=null;ge(),se();var zn=m.__private__.getPageInfo=m.getPageInfo=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[z].objId,pageNumber:z,pageContext:gt[z]}},di=m.__private__.getPageInfoByObjId=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var me in gt)if(gt[me].objId===z)break;return zn(me)},Oi=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:gt[fe].objId,pageNumber:fe,pageContext:gt[fe]}};m.addPage=function(){return Jn.apply(this,arguments),this},m.setPage=function(){return Ir.apply(this,arguments),at.call(this,qe[fe]),this},m.insertPage=function(z){return this.addPage(),this.movePage(fe,z),this},m.movePage=function(z,me){var Qe,We;if(z>me){Qe=qe[z],We=gt[z];for(var ut=z;ut>me;ut--)qe[ut]=qe[ut-1],gt[ut]=gt[ut-1];qe[me]=Qe,gt[me]=We,this.setPage(me)}else if(z<me){Qe=qe[z],We=gt[z];for(var _t=z;_t<me;_t++)qe[_t]=qe[_t+1],gt[_t]=gt[_t+1];qe[me]=Qe,gt[me]=We,this.setPage(me)}return this},m.deletePage=function(){return Zr.apply(this,arguments),this},m.__private__.text=m.text=function(z,me,Qe,We,ut){var _t,es,Gs,rn,Cn,_n,yr,ga,Ua,_r=(We=We||{}).scope||this;if(typeof z=="number"&&typeof me=="number"&&(typeof Qe=="string"||Array.isArray(Qe))){var ri=Qe;Qe=me,me=z,z=ri}if(arguments[3]instanceof is==0?(Gs=arguments[4],rn=arguments[5],Aa(yr=arguments[3])==="object"&&yr!==null||(typeof Gs=="string"&&(rn=Gs,Gs=null),typeof yr=="string"&&(rn=yr,yr=null),typeof yr=="number"&&(Gs=yr,yr=null),We={flags:yr,angle:Gs,align:rn})):(J("The transform parameter of text() with a Matrix value"),Ua=ut),isNaN(me)||isNaN(Qe)||z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(z.length===0)return _r;var za,ji="",xl=typeof We.lineHeightFactor=="number"?We.lineHeightFactor:ks,ko=_r.internal.scaleFactor;function vl(Br){return Br=Br.split("	").join(Array(We.TabLen||9).join(" ")),vn(Br,yr)}function SA(Br){for(var xr,ea=Br.concat(),Or=[],$o=ea.length;$o--;)typeof(xr=ea.shift())=="string"?Or.push(xr):Array.isArray(Br)&&(xr.length===1||xr[1]===void 0&&xr[2]===void 0)?Or.push(xr[0]):Or.push([xr[0],xr[1],xr[2]]);return Or}function kc(Br,xr){var ea;if(typeof Br=="string")ea=xr(Br)[0];else if(Array.isArray(Br)){for(var Or,$o,qo=Br.concat(),gc=[],Kl=qo.length;Kl--;)typeof(Or=qo.shift())=="string"?gc.push(xr(Or)[0]):Array.isArray(Or)&&typeof Or[0]=="string"&&($o=xr(Or[0],Or[1],Or[2]),gc.push([$o[0],$o[1],$o[2]]));ea=gc}return ea}var mo=!1,go=!0;if(typeof z=="string")mo=!0;else if(Array.isArray(z)){var Pl=z.concat();es=[];for(var ro,ya=Pl.length;ya--;)(typeof(ro=Pl.shift())!="string"||Array.isArray(ro)&&typeof ro[0]!="string")&&(go=!1);mo=go}if(mo===!1)throw new Error('Type of text must be string or Array. "'+z+'" is not recognized.');typeof z=="string"&&(z=z.match(/[\r?\n]/)?z.split(/\r\n|\r|\n/g):[z]);var rr=Ze/_r.internal.scaleFactor,kl=rr*(xl-1);switch(We.baseline){case"bottom":Qe-=kl;break;case"top":Qe+=rr-kl;break;case"hanging":Qe+=rr-2*kl;break;case"middle":Qe+=rr/2-kl}if((_n=We.maxWidth||0)>0&&(typeof z=="string"?z=_r.splitTextToSize(z,_n):Object.prototype.toString.call(z)==="[object Array]"&&(z=z.reduce(function(Br,xr){return Br.concat(_r.splitTextToSize(xr,_n))},[]))),_t={text:z,x:me,y:Qe,options:We,mutex:{pdfEscape:vn,activeFontKey:ke,fonts:ss,activeFontSize:Ze}},Dt.publish("preProcessText",_t),z=_t.text,Gs=(We=_t.options).angle,Ua instanceof is==0&&Gs&&typeof Gs=="number"){Gs*=Math.PI/180,We.rotationDirection===0&&(Gs=-Gs),K===k&&(Gs=-Gs);var Hl=Math.cos(Gs),Ho=Math.sin(Gs);Ua=new is(Hl,Ho,-Ho,Hl,0,0)}else Gs&&Gs instanceof is&&(Ua=Gs);K!==k||Ua||(Ua=Ns),(Cn=We.charSpace||j)!==void 0&&(ji+=X(Ae(Cn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ga=We.horizontalScale)!==void 0&&(ji+=X(100*ga)+` Tz
`),We.lang;var Ga=-1,fi=We.renderingMode!==void 0?We.renderingMode:We.stroke,Hc=_r.internal.getCurrentPageInfo().pageContext;switch(fi){case 0:case!1:case"fill":Ga=0;break;case 1:case!0:case"stroke":Ga=1;break;case 2:case"fillThenStroke":Ga=2;break;case 3:case"invisible":Ga=3;break;case 4:case"fillAndAddForClipping":Ga=4;break;case 5:case"strokeAndAddPathForClipping":Ga=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ga=6;break;case 7:case"addToPathForClipping":Ga=7}var yo=Hc.usedRenderingMode!==void 0?Hc.usedRenderingMode:-1;Ga!==-1?ji+=Ga+` Tr
`:yo!==-1&&(ji+=`0 Tr
`),Ga!==-1&&(Hc.usedRenderingMode=Ga),rn=We.align||"left";var Sr,xo=Ze*xl,na=_r.internal.pageSize.getWidth(),hc=ss[ke];Cn=We.charSpace||j,_n=We.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},We.flags);var pi=[],vo=function(Br){return _r.getStringUnitWidth(Br,{font:hc,charSpace:Cn,fontSize:Ze,doKerning:!1})*Ze/ko};if(Object.prototype.toString.call(z)==="[object Array]"){var Gn;es=SA(z),rn!=="left"&&(Sr=es.map(vo));var Li,Ko=0;if(rn==="right"){me-=Sr[0],z=[],ya=es.length;for(var zo=0;zo<ya;zo++)zo===0?(Li=Ca(me),Gn=on(Qe)):(Li=Ae(Ko-Sr[zo]),Gn=-xo),z.push([es[zo],Li,Gn]),Ko=Sr[zo]}else if(rn==="center"){me-=Sr[0]/2,z=[],ya=es.length;for(var tl=0;tl<ya;tl++)tl===0?(Li=Ca(me),Gn=on(Qe)):(Li=Ae((Ko-Sr[tl])/2),Gn=-xo),z.push([es[tl],Li,Gn]),Ko=Sr[tl]}else if(rn==="left"){z=[],ya=es.length;for(var bl=0;bl<ya;bl++)z.push(es[bl])}else if(rn==="justify"&&hc.encoding==="Identity-H"){z=[],ya=es.length,_n=_n!==0?_n:na;for(var fc=0,Ea=0;Ea<ya;Ea++)if(Gn=Ea===0?on(Qe):-xo,Li=Ea===0?Ca(me):fc,Ea<ya-1){var Gi=Ae((_n-Sr[Ea])/(es[Ea].split(" ").length-1)),wi=es[Ea].split(" ");z.push([wi[0]+" ",Li,Gn]),fc=0;for(var Si=1;Si<wi.length;Si++){var lr=(vo(wi[Si-1]+" "+wi[Si])-vo(wi[Si]))*ko+Gi;Si==wi.length-1?z.push([wi[Si],lr,0]):z.push([wi[Si]+" ",lr,0]),fc-=lr}}else z.push([es[Ea],Li,Gn]);z.push(["",fc,0])}else{if(rn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(z=[],ya=es.length,_n=_n!==0?_n:na,Ea=0;Ea<ya;Ea++){Gn=Ea===0?on(Qe):-xo,Li=Ea===0?Ca(me):0;var Di=es[Ea].split(" ").length-1,pc=Di>0?(_n-Sr[Ea])/Di:0;Ea<ya-1?pi.push(X(Ae(pc))):pi.push(0),z.push([es[Ea],Li,Gn])}}}(typeof We.R2L=="boolean"?We.R2L:Ct)===!0&&(z=kc(z,function(Br,xr,ea){return[Br.split("").reverse().join(""),xr,ea]})),_t={text:z,x:me,y:Qe,options:We,mutex:{pdfEscape:vn,activeFontKey:ke,fonts:ss,activeFontSize:Ze}},Dt.publish("postProcessText",_t),z=_t.text,za=_t.mutex.isHex||!1;var mc=ss[ke].encoding;mc!=="WinAnsiEncoding"&&mc!=="StandardEncoding"||(z=kc(z,function(Br,xr,ea){return[vl(Br),xr,ea]})),es=SA(z),z=[];for(var Go,sl,nl,Vo=Array.isArray(es[0])?1:0,La="",jl=function(Br,xr,ea){var Or="";return ea instanceof is?(ea=typeof We.angle=="number"?Fs(ea,new is(1,0,0,1,Br,xr)):Fs(new is(1,0,0,1,Br,xr),ea),K===k&&(ea=Fs(new is(1,0,0,-1,0,0),ea)),Or=ea.join(" ")+` Tm
`):Or=X(Br)+" "+X(xr)+` Td
`,Or},Qi=0;Qi<es.length;Qi++){switch(La="",Vo){case 1:nl=(za?"<":"(")+es[Qi][0]+(za?">":")"),Go=parseFloat(es[Qi][1]),sl=parseFloat(es[Qi][2]);break;case 0:nl=(za?"<":"(")+es[Qi]+(za?">":")"),Go=Ca(me),sl=on(Qe)}pi!==void 0&&pi[Qi]!==void 0&&(La=pi[Qi]+` Tw
`),Qi===0?z.push(La+jl(Go,sl,Ua)+nl):Vo===0?z.push(La+nl):Vo===1&&z.push(La+jl(Go,sl,Ua)+nl)}z=Vo===0?z.join(` Tj
T* `):z.join(` Tj
`),z+=` Tj
`;var Vi=`BT
/`;return Vi+=ke+" "+Ze+` Tf
`,Vi+=X(Ze*xl)+` TL
`,Vi+=ma+`
`,Vi+=ji,Vi+=z,Se(Vi+="ET"),v[ke]=!0,_r};var ka=m.__private__.clip=m.clip=function(z){return Se(z==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return ka("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Se("n"),this};var Rr=m.__private__.isValidStyle=function(z){var me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(z)!==-1&&(me=!0),me};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(z){return Rr(z)&&(h=z),this};var Ha=m.__private__.getStyle=m.getStyle=function(z){var me=h;switch(z){case"D":case"S":me="S";break;case"F":me="f";break;case"FD":case"DF":me="B";break;case"f":case"f*":case"B":case"B*":me=z}return me},Na=m.close=function(){return Se("h"),this};m.stroke=function(){return Se("S"),this},m.fill=function(z){return $r("f",z),this},m.fillEvenOdd=function(z){return $r("f*",z),this},m.fillStroke=function(z){return $r("B",z),this},m.fillStrokeEvenOdd=function(z){return $r("B*",z),this};var $r=function(z,me){Aa(me)==="object"?Ui(me,z):Se(z)},Oa=function(z){z===null||K===k&&z===void 0||(z=Ha(z),Se(z))};function vi(z,me,Qe,We,ut){var _t=new Gu(me||this.boundingBox,Qe||this.xStep,We||this.yStep,this.gState,ut||this.matrix);_t.stream=this.stream;var es=z+"$$"+this.cloneIndex+++"$$";return Nn(es,_t),_t}var Ui=function(z,me){var Qe=vs[z.key],We=Vt[Qe];if(We instanceof zd)Se("q"),Se(bi(me)),We.gState&&m.setGState(We.gState),Se(z.matrix.toString()+" cm"),Se("/"+Qe+" sh"),Se("Q");else if(We instanceof Gu){var ut=new is(1,0,0,-1,0,gs());z.matrix&&(ut=ut.multiply(z.matrix||Ns),Qe=vi.call(We,z.key,z.boundingBox,z.xStep,z.yStep,ut).id),Se("q"),Se("/Pattern cs"),Se("/"+Qe+" scn"),We.gState&&m.setGState(We.gState),Se(me),Se("Q")}},bi=function(z){switch(z){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ui=m.moveTo=function(z,me){return Se(X(Ae(z))+" "+X(ce(me))+" m"),this},hi=m.lineTo=function(z,me){return Se(X(Ae(z))+" "+X(ce(me))+" l"),this},tn=m.curveTo=function(z,me,Qe,We,ut,_t){return Se([X(Ae(z)),X(ce(me)),X(Ae(Qe)),X(ce(We)),X(Ae(ut)),X(ce(_t)),"c"].join(" ")),this};m.__private__.line=m.line=function(z,me,Qe,We,ut){if(isNaN(z)||isNaN(me)||isNaN(Qe)||isNaN(We)||!Rr(ut))throw new Error("Invalid arguments passed to jsPDF.line");return K===M?this.lines([[Qe-z,We-me]],z,me,[1,1],ut||"S"):this.lines([[Qe-z,We-me]],z,me,[1,1]).stroke()},m.__private__.lines=m.lines=function(z,me,Qe,We,ut,_t){var es,Gs,rn,Cn,_n,yr,ga,Ua,_r,ri,za,ji;if(typeof z=="number"&&(ji=Qe,Qe=me,me=z,z=ji),We=We||[1,1],_t=_t||!1,isNaN(me)||isNaN(Qe)||!Array.isArray(z)||!Array.isArray(We)||!Rr(ut)||typeof _t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ui(me,Qe),es=We[0],Gs=We[1],Cn=z.length,ri=me,za=Qe,rn=0;rn<Cn;rn++)(_n=z[rn]).length===2?(ri=_n[0]*es+ri,za=_n[1]*Gs+za,hi(ri,za)):(yr=_n[0]*es+ri,ga=_n[1]*Gs+za,Ua=_n[2]*es+ri,_r=_n[3]*Gs+za,ri=_n[4]*es+ri,za=_n[5]*Gs+za,tn(yr,ga,Ua,_r,ri,za));return _t&&Na(),Oa(ut),this},m.path=function(z){for(var me=0;me<z.length;me++){var Qe=z[me],We=Qe.c;switch(Qe.op){case"m":ui(We[0],We[1]);break;case"l":hi(We[0],We[1]);break;case"c":tn.apply(this,We);break;case"h":Na()}}return this},m.__private__.rect=m.rect=function(z,me,Qe,We,ut){if(isNaN(z)||isNaN(me)||isNaN(Qe)||isNaN(We)||!Rr(ut))throw new Error("Invalid arguments passed to jsPDF.rect");return K===M&&(We=-We),Se([X(Ae(z)),X(ce(me)),X(Ae(Qe)),X(Ae(We)),"re"].join(" ")),Oa(ut),this},m.__private__.triangle=m.triangle=function(z,me,Qe,We,ut,_t,es){if(isNaN(z)||isNaN(me)||isNaN(Qe)||isNaN(We)||isNaN(ut)||isNaN(_t)||!Rr(es))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Qe-z,We-me],[ut-Qe,_t-We],[z-ut,me-_t]],z,me,[1,1],es,!0),this},m.__private__.roundedRect=m.roundedRect=function(z,me,Qe,We,ut,_t,es){if(isNaN(z)||isNaN(me)||isNaN(Qe)||isNaN(We)||isNaN(ut)||isNaN(_t)||!Rr(es))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gs=4/3*(Math.SQRT2-1);return ut=Math.min(ut,.5*Qe),_t=Math.min(_t,.5*We),this.lines([[Qe-2*ut,0],[ut*Gs,0,ut,_t-_t*Gs,ut,_t],[0,We-2*_t],[0,_t*Gs,-ut*Gs,_t,-ut,_t],[2*ut-Qe,0],[-ut*Gs,0,-ut,-_t*Gs,-ut,-_t],[0,2*_t-We],[0,-_t*Gs,ut*Gs,-_t,ut,-_t]],z+ut,me,[1,1],es,!0),this},m.__private__.ellipse=m.ellipse=function(z,me,Qe,We,ut){if(isNaN(z)||isNaN(me)||isNaN(Qe)||isNaN(We)||!Rr(ut))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _t=4/3*(Math.SQRT2-1)*Qe,es=4/3*(Math.SQRT2-1)*We;return ui(z+Qe,me),tn(z+Qe,me-es,z+_t,me-We,z,me-We),tn(z-_t,me-We,z-Qe,me-es,z-Qe,me),tn(z-Qe,me+es,z-_t,me+We,z,me+We),tn(z+_t,me+We,z+Qe,me+es,z+Qe,me),Oa(ut),this},m.__private__.circle=m.circle=function(z,me,Qe,We){if(isNaN(z)||isNaN(me)||isNaN(Qe)||!Rr(We))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(z,me,Qe,Qe,We)},m.setFont=function(z,me,Qe){return Qe&&(me=V(me,Qe)),ke=Ts(z,me,{disableWarning:!1}),this};var sn=m.__private__.getFont=m.getFont=function(){return ss[Ts.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var z,me,Qe={};for(z in dt)if(dt.hasOwnProperty(z))for(me in Qe[z]=[],dt[z])dt[z].hasOwnProperty(me)&&Qe[z].push(me);return Qe},m.addFont=function(z,me,Qe,We,ut){var _t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_t.indexOf(arguments[3])!==-1?ut=arguments[3]:arguments[3]&&_t.indexOf(arguments[3])==-1&&(Qe=V(Qe,We)),dn.call(this,z,me,Qe,ut=ut||"Identity-H")};var ks,qs=t.lineWidth||.200025,Js=m.__private__.getLineWidth=m.getLineWidth=function(){return qs},ms=m.__private__.setLineWidth=m.setLineWidth=function(z){return qs=z,Se(X(Ae(z))+" w"),this};m.__private__.setLineDash=hn.API.setLineDash=hn.API.setLineDashPattern=function(z,me){if(z=z||[],me=me||0,isNaN(me)||!Array.isArray(z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return z=z.map(function(Qe){return X(Ae(Qe))}).join(" "),me=X(Ae(me)),Se("["+z+"] "+me+" d"),this};var $n=m.__private__.getLineHeight=m.getLineHeight=function(){return Ze*ks};m.__private__.getLineHeight=m.getLineHeight=function(){return Ze*ks};var qr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(z){return typeof(z=z||1.15)=="number"&&(ks=z),this},Ka=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ks};qr(t.lineHeight);var Ca=m.__private__.getHorizontalCoordinate=function(z){return Ae(z)},on=m.__private__.getVerticalCoordinate=function(z){return K===k?z:gt[fe].mediaBox.topRightY-gt[fe].mediaBox.bottomLeftY-Ae(z)},Bn=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(z){return X(Ca(z))},Fn=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(z){return X(on(z))},Zn=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return us(Zn)},m.__private__.setStrokeColor=m.setDrawColor=function(z,me,Qe,We){return Zn=As({ch1:z,ch2:me,ch3:Qe,ch4:We,pdfColorType:"draw",precision:2}),Se(Zn),this};var pa=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return us(pa)},m.__private__.setFillColor=m.setFillColor=function(z,me,Qe,We){return pa=As({ch1:z,ch2:me,ch3:Qe,ch4:We,pdfColorType:"fill",precision:2}),Se(pa),this};var ma=t.textColor||"0 g",x=m.__private__.getTextColor=m.getTextColor=function(){return us(ma)};m.__private__.setTextColor=m.setTextColor=function(z,me,Qe,We){return ma=As({ch1:z,ch2:me,ch3:Qe,ch4:We,pdfColorType:"text",precision:3}),this};var j=t.charSpace,u=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(j||0)};m.__private__.setCharSpace=m.setCharSpace=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return j=z,this};var b=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(z){var me=m.CapJoinStyles[z];if(me===void 0)throw new Error("Line cap style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return b=me,Se(me+" J"),this};var S=0;m.__private__.setLineJoin=m.setLineJoin=function(z){var me=m.CapJoinStyles[z];if(me===void 0)throw new Error("Line join style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return S=me,Se(me+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(z){if(z=z||0,isNaN(z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Se(X(Ae(z))+" M"),this},m.GState=Jp,m.setGState=function(z){(z=typeof z=="string"?ns[js[z]]:R(null,z)).equals(ln)||(Se("/"+z.id+" gs"),ln=z)};var R=function(z,me){if(!z||!js[z]){var Qe=!1;for(var We in ns)if(ns.hasOwnProperty(We)&&ns[We].equals(me)){Qe=!0;break}if(Qe)me=ns[We];else{var ut="GS"+(Object.keys(ns).length+1).toString(10);ns[ut]=me,me.id=ut}return z&&(js[z]=me.id),Dt.publish("addGState",me),me}};m.addGState=function(z,me){return R(z,me),this},m.saveGraphicsState=function(){return Se("q"),qt.push({key:ke,size:Ze,color:ma}),this},m.restoreGraphicsState=function(){Se("Q");var z=qt.pop();return ke=z.key,Ze=z.size,ma=z.color,ln=null,this},m.setCurrentTransformationMatrix=function(z){return Se(z.toString()+" cm"),this},m.comment=function(z){return Se("#"+z),this};var B=function(z,me){var Qe=z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Qe},set:function(_t){isNaN(_t)||(Qe=parseFloat(_t))}});var We=me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return We},set:function(_t){isNaN(_t)||(We=parseFloat(_t))}});var ut="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ut},set:function(_t){ut=_t.toString()}}),this},D=function(z,me,Qe,We){B.call(this,z,me),this.type="rect";var ut=Qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ut},set:function(es){isNaN(es)||(ut=parseFloat(es))}});var _t=We||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _t},set:function(es){isNaN(es)||(_t=parseFloat(es))}}),this},Q=function(){this.page=ys,this.currentPage=fe,this.pages=qe.slice(0),this.pagesContext=gt.slice(0),this.x=tt,this.y=Jt,this.matrix=Qt,this.width=Ue(fe),this.height=st(fe),this.outputDestination=Ge,this.id="",this.objectNumber=-1};Q.prototype.restore=function(){ys=this.page,fe=this.currentPage,gt=this.pagesContext,qe=this.pages,tt=this.x,Jt=this.y,Qt=this.matrix,He(fe,this.width),Bt(fe,this.height),Ge=this.outputDestination};var $=function(z,me,Qe,We,ut){yn.push(new Q),ys=fe=0,qe=[],tt=z,Jt=me,Qt=ut,jn([Qe,We])};for(var te in m.beginFormObject=function(z,me,Qe,We,ut){return $(z,me,Qe,We,ut),this},m.endFormObject=function(z){return(function(me){if(ps[me])yn.pop().restore();else{var Qe=new Q,We="Xo"+(Object.keys(rs).length+1).toString(10);Qe.id=We,ps[me]=We,rs[We]=Qe,Dt.publish("addFormObject",Qe),yn.pop().restore()}})(z),this},m.doFormObject=function(z,me){var Qe=rs[ps[z]];return Se("q"),Se(me.toString()+" cm"),Se("/"+Qe.id+" Do"),Se("Q"),this},m.getFormObject=function(z){var me=rs[ps[z]];return{x:me.x,y:me.y,width:me.width,height:me.height,matrix:me.matrix}},m.save=function(z,me){return z=z||"generated.pdf",(me=me||{}).returnPromise=me.returnPromise||!1,me.returnPromise===!1?(_u(lt(xe()),z),typeof _u.unload=="function"&&Dn.setTimeout&&setTimeout(_u.unload,911),this):new Promise(function(Qe,We){try{var ut=_u(lt(xe()),z);typeof _u.unload=="function"&&Dn.setTimeout&&setTimeout(_u.unload,911),Qe(ut)}catch(_t){We(_t.message)}})},hn.API)hn.API.hasOwnProperty(te)&&(te==="events"&&hn.API.events.length?(function(z,me){var Qe,We,ut;for(ut=me.length-1;ut!==-1;ut--)Qe=me[ut][0],We=me[ut][1],z.subscribe.apply(z,[Qe].concat(typeof We=="function"?[We]:We))})(Dt,hn.API.events):m[te]=hn.API[te]);function Ue(z){return gt[z].mediaBox.topRightX-gt[z].mediaBox.bottomLeftX}function He(z,me){gt[z].mediaBox.topRightX=me+gt[z].mediaBox.bottomLeftX}function st(z){return gt[z].mediaBox.topRightY-gt[z].mediaBox.bottomLeftY}function Bt(z,me){gt[z].mediaBox.topRightY=me+gt[z].mediaBox.bottomLeftY}var Lt=m.getPageWidth=function(z){return Ue(z=z||fe)/it},$t=m.setPageWidth=function(z,me){He(z,me*it)},gs=m.getPageHeight=function(z){return st(z=z||fe)/it},nn=m.setPageHeight=function(z,me){Bt(z,me*it)};return m.internal={pdfEscape:vn,getStyle:Ha,getFont:sn,getFontSize:At,getCharSpace:u,getTextColor:x,getLineHeight:$n,getLineHeightFactor:Ka,getLineWidth:Js,write:vt,getHorizontalCoordinate:Ca,getVerticalCoordinate:on,getCoordinateString:Bn,getVerticalCoordinateString:Fn,collections:{},newObject:zt,newAdditionalObject:Ye,newObjectDeferred:os,newObjectDeferredBegin:Ps,getFilters:as,putStream:bs,events:Dt,scaleFactor:it,pageSize:{getWidth:function(){return Lt(fe)},setWidth:function(z){$t(fe,z)},getHeight:function(){return gs(fe)},setHeight:function(z){nn(fe,z)}},encryptionOptions:l,encryption:wn,getEncryptor:function(z){return l!==null?wn.encryptor(z,0):function(me){return me}},output:Je,getNumberOfPages:Vn,get pages(){return qe},out:Se,f2:q,f3:ie,getPageInfo:zn,getPageInfoByObjId:di,getCurrentPageInfo:Oi,getPDFVersion:w,Point:B,Rectangle:D,Matrix:is,hasHotfix:fs},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Lt(fe)},set:function(z){$t(fe,z)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return gs(fe)},set:function(z){nn(fe,z)},enumerable:!0,configurable:!0}),(function(z){for(var me=0,Qe=pt.length;me<Qe;me++){var We=dn.call(this,z[me][0],z[me][1],z[me][2],pt[me][3],!0);g===!1&&(v[We]=!0);var ut=z[me][0].split("-");Yn({id:We,fontName:ut[0],fontStyle:ut[1]||""})}Dt.publish("addFonts",{fonts:ss,dictionary:dt})}).call(m,pt),ke="F1",Jn(o,n),Dt.publish("initialized"),m}zh.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},zh.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zh.prototype.hexToBytes=function(t){for(var s=[],n=0;n<t.length;n+=2)s.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return s.join("")},zh.prototype.processOwnerPassword=function(t,s){return Gv(zv(s).substr(0,5),t)},zh.prototype.encryptor=function(t,s){var n=zv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(r){return Gv(n,r)}},Jp.prototype.equals=function(t){var s,n="id,objectNumber,equals";if(!t||Aa(t)!==Aa(this))return!1;var r=0;for(s in this)if(!(n.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;r++}for(s in t)t.hasOwnProperty(s)&&n.indexOf(s)<0&&r--;return r===0},hn.API={events:[]},hn.version="3.0.4";var yi=hn.API,m1=1,oh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hh=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kn=function(t){return t.toFixed(2)},Pd=function(t){return t.toFixed(5)};yi.__acroform__={};var yl=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},VS=function(t){return t*m1},dA=function(t){var s=new WT,n=Ys.internal.getHeight(t)||0,r=Ys.internal.getWidth(t)||0;return s.BBox=[0,0,Number(Kn(r)),Number(Kn(n))],s},H9=yi.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<s},K9=yi.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<s)},z9=yi.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},Fi=yi.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return z9(t,s-1)},Ii=yi.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return H9(t,s-1)},Ri=yi.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return K9(t,s-1)},G9=yi.__acroform__.calculateCoordinates=function(t,s){var n=s.internal.getHorizontalCoordinate,r=s.internal.getVerticalCoordinate,o=t[0],c=t[1],p=t[2],f=t[3],A={};return A.lowerLeft_X=n(o)||0,A.lowerLeft_Y=r(c+f)||0,A.upperRight_X=n(o+p)||0,A.upperRight_Y=r(c)||0,[Number(Kn(A.lowerLeft_X)),Number(Kn(A.lowerLeft_Y)),Number(Kn(A.upperRight_X)),Number(Kn(A.upperRight_Y))]},V9=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],n=t._V||t.DV,r=Vv(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+o+" "+Kn(r.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(r.text),s.push("ET"),s.push("Q"),s.push("EMC");var c=dA(t);return c.scope=t.scope,c.stream=s.join(`
`),c}},Vv=function(t,s){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},o=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");o=t.multiline?o.map(function(q){return q.split(`
`)}):o.map(function(q){return[q]});var c=n,p=Ys.internal.getHeight(t)||0;p=p<0?-p:p;var f=Ys.internal.getWidth(t)||0;f=f<0?-f:f;var A=function(q,ie,Ae){if(q+1<o.length){var ce=ie+" "+o[q+1][0];return jg(ce,t,Ae).width<=f-4}return!1};c++;e:for(;c>0;){s="",c--;var h,l,g=jg("3",t,c).height,v=t.multiline?p-c:(p-g)/2,m=v+=2,N=0,w=0,E=0;if(c<=0){s=`(...) Tj
`,s+="% Width of Text: "+jg(s,t,c=12).width+", FieldWidth:"+f+`
`;break}for(var F="",M=0,k=0;k<o.length;k++)if(o.hasOwnProperty(k)){var K=!1;if(o[k].length!==1&&E!==o[k].length-1){if((g+2)*(M+2)+2>p)continue e;F+=o[k][E],K=!0,w=k,k--}else{F=(F+=o[k][E]+" ").substr(F.length-1)==" "?F.substr(0,F.length-1):F;var G=parseInt(k),ee=A(G,F,c),V=k>=o.length-1;if(ee&&!V){F+=" ",E=0;continue}if(ee||V){if(V)w=G;else if(t.multiline&&(g+2)*(M+2)+2>p)continue e}else{if(!t.multiline||(g+2)*(M+2)+2>p)continue e;w=G}}for(var X="",J=N;J<=w;J++){var he=o[J];if(t.multiline){if(J===w){X+=he[E]+" ",E=(E+1)%he.length;continue}if(J===N){X+=he[he.length-1]+" ";continue}}X+=he[0]+" "}switch(X=X.substr(X.length-1)==" "?X.substr(0,X.length-1):X,l=jg(X,t,c).width,t.textAlign){case"right":h=f-l-2;break;case"center":h=(f-l)/2;break;default:h=2}s+=Kn(h)+" "+Kn(m)+` Td
`,s+="("+oh(X)+`) Tj
`,s+=-Kn(h)+` 0 Td
`,m=-(c+2),l=0,N=K?w:w+1,M++,F=""}break}return r.text=s,r.fontSize=c,r},jg=function(t,s,n){var r=s.scope.internal.getFont(s.fontName,s.fontStyle),o=s.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:s.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},$9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},q9=function(t,s){var n={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(n)},W9=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(_c.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify($9)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");m1=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new YT,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var c=r[o];c.objId=void 0,c.hasAnnotation&&q9(c,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,o){var c=!r;for(var p in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(p)){var f=r[p],A=[],h=f.Rect;if(f.Rect&&(f.Rect=G9(f.Rect,o)),o.internal.newObjectDeferredBegin(f.objId,!0),f.DA=Ys.createDefaultAppearanceStream(f),Aa(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(A=f.getKeyValueListForStream()),f.Rect=h,f.hasAppearanceStream&&!f.appearanceStreamContent){var l=V9(f);A.push({key:"AP",value:"<</N "+l+">>"}),o.internal.acroformPlugin.xForms.push(l)}if(f.appearanceStreamContent){var g="";for(var v in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(v)){var m=f.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var p in m)if(m.hasOwnProperty(p)){var N=m[p];typeof N=="function"&&(N=N.call(o,f)),g+="/"+p+" "+N+" ",o.internal.acroformPlugin.xForms.indexOf(N)>=0||o.internal.acroformPlugin.xForms.push(N)}}else typeof(N=m)=="function"&&(N=N.call(o,f)),g+="/"+p+" "+N,o.internal.acroformPlugin.xForms.indexOf(N)>=0||o.internal.acroformPlugin.xForms.push(N);g+=">>"}A.push({key:"AP",value:`<<
`+g+">>"})}o.internal.putStream({additionalKeyValues:A,objectId:f.objId}),o.internal.out("endobj")}c&&(function(w,E){for(var F in w)if(w.hasOwnProperty(F)){var M=F,k=w[F];E.internal.newObjectDeferredBegin(k.objId,!0),Aa(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete w[M]}})(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},qT=yi.__acroform__.arrayToPdfArray=function(t,s,n){var r=function(p){return p};if(Array.isArray(t)){for(var o="[",c=0;c<t.length;c++)switch(c!==0&&(o+=" "),Aa(t[c])){case"boolean":case"number":case"object":o+=t[c].toString();break;case"string":t[c].substr(0,1)!=="/"?(s!==void 0&&n&&(r=n.internal.getEncryptor(s)),o+="("+oh(r(t[c].toString()))+")"):o+=t[c].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},R0=function(t,s,n){var r=function(o){return o};return s!==void 0&&n&&(r=n.internal.getEncryptor(s)),(t=t||"").toString(),"("+oh(r(t))+")"},pA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pA.prototype.toString=function(){return this.objId+" 0 R"},pA.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},pA.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var n in s)if(Object.getOwnPropertyDescriptor(this,s[n]).configurable===!1){var r=s[n],o=this[r];o&&(Array.isArray(o)?t.push({key:r,value:qT(o,this.objId,this.scope)}):o instanceof pA?(o.scope=this.scope,t.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:r,value:o}))}return t};var WT=function(){pA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};yl(WT,pA);var YT=function(){pA.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+oh(n(t))+")"}},set:function(n){t=n}})};yl(YT,pA);var _c=function t(){pA.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute F supplied.');s=F}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fi(s,3)},set:function(F){F?this.F=Ii(s,3):this.F=Ri(s,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute Ff supplied.');n=F}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(F){r=F!==void 0?F:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(F){r[0]=F}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(F){r[1]=F}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(F){r[2]=F}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(F){r[3]=F}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(F){switch(F){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=F;break;default:throw new Error('Invalid value "'+F+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Ay)return;c="FieldObject"+t.FieldNum++}var F=function(M){return M};return this.scope&&(F=this.scope.internal.getEncryptor(this.objId)),"("+oh(F(c))+")"},set:function(F){c=F.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(F){c=F}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function(F){p=F}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(F){f=F}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(F){A=F}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/m1:h},set:function(F){h=F}});var l="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return l},set:function(F){l=F}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Ay||this instanceof Wd))return R0(g,this.objId,this.scope)},set:function(F){F=F.toString(),g=F}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Zi==0?R0(v,this.objId,this.scope):v},set:function(F){F=F.toString(),v=this instanceof Zi==0?F.substr(0,1)==="("?Hh(F.substr(1,F.length-2)):Hh(F):F}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zi==1?Hh(v.substr(1,v.length-1)):v},set:function(F){F=F.toString(),v=this instanceof Zi==1?"/"+F:F}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(F){this.V=F}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Zi==0?R0(m,this.objId,this.scope):m},set:function(F){F=F.toString(),m=this instanceof Zi==0?F.substr(0,1)==="("?Hh(F.substr(1,F.length-2)):Hh(F):F}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zi==1?Hh(m.substr(1,m.length-1)):m},set:function(F){F=F.toString(),m=this instanceof Zi==1?"/"+F:F}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(F){F=!!F,w=F}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(F){N=F}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,1)},set:function(F){F?this.Ff=Ii(this.Ff,1):this.Ff=Ri(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,2)},set:function(F){F?this.Ff=Ii(this.Ff,2):this.Ff=Ri(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,3)},set:function(F){F?this.Ff=Ii(this.Ff,3):this.Ff=Ri(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(F){if([0,1,2].indexOf(F)===-1)throw new Error('Invalid value "'+F+'" for attribute Q supplied.');E=F}}),Object.defineProperty(this,"textAlign",{get:function(){var F;switch(E){case 0:default:F="left";break;case 1:F="center";break;case 2:F="right"}return F},configurable:!0,enumerable:!0,set:function(F){switch(F){case"right":case 2:E=2;break;case"center":case 1:E=1;break;default:E=0}}})};yl(_c,pA);var qu=function(){_c.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return qT(s,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=(function(c,p,f){f||(f=1);for(var A,h=[];A=p.exec(c);)h.push(A[f]);return h})(r,/\((.*?)\)/g)),s=o}}),this.getOptions=function(){return s},this.setOptions=function(n){s=n,this.sort&&s.sort()},this.addOption=function(n){n=(n=n||"").toString(),s.push(n),this.sort&&s.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();s.indexOf(n)!==-1&&(s.splice(s.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,18)},set:function(n){n?this.Ff=Ii(this.Ff,18):this.Ff=Ri(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ii(this.Ff,19):this.Ff=Ri(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,20)},set:function(n){n?(this.Ff=Ii(this.Ff,20),s.sort()):this.Ff=Ri(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,22)},set:function(n){n?this.Ff=Ii(this.Ff,22):this.Ff=Ri(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,23)},set:function(n){n?this.Ff=Ii(this.Ff,23):this.Ff=Ri(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,27)},set:function(n){n?this.Ff=Ii(this.Ff,27):this.Ff=Ri(this.Ff,27)}}),this.hasAppearanceStream=!1};yl(qu,_c);var Wu=function(){qu.call(this),this.fontName="helvetica",this.combo=!1};yl(Wu,qu);var Yu=function(){Wu.call(this),this.combo=!0};yl(Yu,Wu);var Lp=function(){Yu.call(this),this.edit=!0};yl(Lp,Yu);var Zi=function(){_c.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,15)},set:function(n){n?this.Ff=Ii(this.Ff,15):this.Ff=Ri(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,16)},set:function(n){n?this.Ff=Ii(this.Ff,16):this.Ff=Ri(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,17)},set:function(n){n?this.Ff=Ii(this.Ff,17):this.Ff=Ri(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,26)},set:function(n){n?this.Ff=Ii(this.Ff,26):this.Ff=Ri(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(c){return c};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var r,o=[];for(r in o.push("<<"),s)o.push("/"+r+" ("+oh(n(s[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){Aa(n)==="object"&&(s=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(n){typeof n=="string"&&(s.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};yl(Zi,_c);var Dp=function(){Zi.call(this),this.pushButton=!0};yl(Dp,Zi);var Xu=function(){Zi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};yl(Xu,Zi);var Ay=function(){var t,s;_c.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(o){s=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var c,p=[];for(c in p.push("<<"),r)p.push("/"+c+" ("+oh(o(r[c]))+")");return p.push(">>"),p.join(`
`)},set:function(o){Aa(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ys.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yl(Ay,_c),Xu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var n=this.Kids[s];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Xu.prototype.createOption=function(t){var s=new Ay;return s.Parent=this,s.optionName=t,this.Kids.push(s),Y9.call(this.scope,s),s};var Qp=function(){Zi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ys.CheckBox.createAppearanceStream()};yl(Qp,Zi);var Wd=function(){_c.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,13)},set:function(s){s?this.Ff=Ii(this.Ff,13):this.Ff=Ri(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,21)},set:function(s){s?this.Ff=Ii(this.Ff,21):this.Ff=Ri(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,23)},set:function(s){s?this.Ff=Ii(this.Ff,23):this.Ff=Ri(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,24)},set:function(s){s?this.Ff=Ii(this.Ff,24):this.Ff=Ri(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,25)},set:function(s){s?this.Ff=Ii(this.Ff,25):this.Ff=Ri(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,26)},set:function(s){s?this.Ff=Ii(this.Ff,26):this.Ff=Ri(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yl(Wd,_c);var Mp=function(){Wd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,14)},set:function(t){t?this.Ff=Ii(this.Ff,14):this.Ff=Ri(this.Ff,14)}}),this.password=!0};yl(Mp,Wd);var Ys={CheckBox:{createAppearanceStream:function(){return{N:{On:Ys.CheckBox.YesNormal},D:{On:Ys.CheckBox.YesPushDown,Off:Ys.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=dA(t);s.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),c=Vv(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Kn(Ys.internal.getWidth(t))+" "+Kn(Ys.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Kn(c.fontSize)+" Tf "+o),n.push("BT"),n.push(c.text),n.push("ET"),n.push("Q"),n.push("EMC"),s.stream=n.join(`
`),s},YesNormal:function(t){var s=dA(t);s.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=[],c=Ys.internal.getHeight(t),p=Ys.internal.getWidth(t),f=Vv(t,t.caption);return o.push("1 g"),o.push("0 0 "+Kn(p)+" "+Kn(c)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Kn(p-1)+" "+Kn(c-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Kn(f.fontSize)+" Tf "+r),o.push(f.text),o.push("ET"),o.push("Q"),s.stream=o.join(`
`),s},OffPushDown:function(t){var s=dA(t);s.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kn(Ys.internal.getWidth(t))+" "+Kn(Ys.internal.getHeight(t))+" re"),n.push("f"),s.stream=n.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:Ys.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=Ys.RadioButton.Circle.YesNormal,s.D[t]=Ys.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=dA(t);s.scope=t.scope;var n=[],r=Ys.internal.getWidth(t)<=Ys.internal.getHeight(t)?Ys.internal.getWidth(t)/4:Ys.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Ys.internal.Bezier_C,c=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Pd(Ys.internal.getWidth(t)/2)+" "+Pd(Ys.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),n.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),n.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),n.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(t){var s=dA(t);s.scope=t.scope;var n=[],r=Ys.internal.getWidth(t)<=Ys.internal.getHeight(t)?Ys.internal.getWidth(t)/4:Ys.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),c=Number((o*Ys.internal.Bezier_C).toFixed(5)),p=Number((r*Ys.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pd(Ys.internal.getWidth(t)/2)+" "+Pd(Ys.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+c+" "+c+" "+o+" 0 "+o+" c"),n.push("-"+c+" "+o+" -"+o+" "+c+" -"+o+" 0 c"),n.push("-"+o+" -"+c+" -"+c+" -"+o+" 0 -"+o+" c"),n.push(c+" -"+o+" "+o+" -"+c+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Pd(Ys.internal.getWidth(t)/2)+" "+Pd(Ys.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+p+" "+p+" "+r+" 0 "+r+" c"),n.push("-"+p+" "+r+" -"+r+" "+p+" -"+r+" 0 c"),n.push("-"+r+" -"+p+" -"+p+" -"+r+" 0 -"+r+" c"),n.push(p+" -"+r+" "+r+" -"+p+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},OffPushDown:function(t){var s=dA(t);s.scope=t.scope;var n=[],r=Ys.internal.getWidth(t)<=Ys.internal.getHeight(t)?Ys.internal.getWidth(t)/4:Ys.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),c=Number((o*Ys.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pd(Ys.internal.getWidth(t)/2)+" "+Pd(Ys.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+c+" "+c+" "+o+" 0 "+o+" c"),n.push("-"+c+" "+o+" -"+o+" "+c+" -"+o+" 0 c"),n.push("-"+o+" -"+c+" -"+c+" -"+o+" 0 -"+o+" c"),n.push(c+" -"+o+" "+o+" -"+c+" "+o+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:Ys.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=Ys.RadioButton.Cross.YesNormal,s.D[t]=Ys.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=dA(t);s.scope=t.scope;var n=[],r=Ys.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Kn(Ys.internal.getWidth(t)-2)+" "+Kn(Ys.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Kn(r.x1.x)+" "+Kn(r.x1.y)+" m"),n.push(Kn(r.x2.x)+" "+Kn(r.x2.y)+" l"),n.push(Kn(r.x4.x)+" "+Kn(r.x4.y)+" m"),n.push(Kn(r.x3.x)+" "+Kn(r.x3.y)+" l"),n.push("s"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(t){var s=dA(t);s.scope=t.scope;var n=Ys.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Kn(Ys.internal.getWidth(t))+" "+Kn(Ys.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Kn(Ys.internal.getWidth(t)-2)+" "+Kn(Ys.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Kn(n.x1.x)+" "+Kn(n.x1.y)+" m"),r.push(Kn(n.x2.x)+" "+Kn(n.x2.y)+" l"),r.push(Kn(n.x4.x)+" "+Kn(n.x4.y)+" m"),r.push(Kn(n.x3.x)+" "+Kn(n.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=dA(t);s.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kn(Ys.internal.getWidth(t))+" "+Kn(Ys.internal.getHeight(t))+" re"),n.push("f"),s.stream=n.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+n}};Ys.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=Ys.internal.getWidth(t),n=Ys.internal.getHeight(t),r=Math.min(s,n);return{x1:{x:(s-r)/2,y:(n-r)/2+r},x2:{x:(s-r)/2+r,y:(n-r)/2},x3:{x:(s-r)/2,y:(n-r)/2},x4:{x:(s-r)/2+r,y:(n-r)/2+r}}}},Ys.internal.getWidth=function(t){var s=0;return Aa(t)==="object"&&(s=VS(t.Rect[2])),s},Ys.internal.getHeight=function(t){var s=0;return Aa(t)==="object"&&(s=VS(t.Rect[3])),s};var Y9=yi.addField=function(t){if(W9(this,t),!(t instanceof _c))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};yi.AcroFormChoiceField=qu,yi.AcroFormListBox=Wu,yi.AcroFormComboBox=Yu,yi.AcroFormEditBox=Lp,yi.AcroFormButton=Zi,yi.AcroFormPushButton=Dp,yi.AcroFormRadioButton=Xu,yi.AcroFormCheckBox=Qp,yi.AcroFormTextField=Wd,yi.AcroFormPasswordField=Mp,yi.AcroFormAppearance=Ys,yi.AcroForm={ChoiceField:qu,ListBox:Wu,ComboBox:Yu,EditBox:Lp,Button:Zi,PushButton:Dp,RadioButton:Xu,CheckBox:Qp,TextField:Wd,PasswordField:Mp,Appearance:Ys},hn.AcroForm={ChoiceField:qu,ListBox:Wu,ComboBox:Yu,EditBox:Lp,Button:Zi,PushButton:Dp,RadioButton:Xu,CheckBox:Qp,TextField:Wd,PasswordField:Mp,Appearance:Ys};var X9=hn.AcroForm;function XT(t){return t.reduce(function(s,n,r){return s[n]=r,s},{})}(function(t){var s="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=t.__addimage__.getImageFileTypeByImageData=function(q,ie){var Ae,ce,oe,ne,re,se=n;if((ie=ie||n)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(ee(q))for(re in r)for(oe=r[re],Ae=0;Ae<oe.length;Ae+=1){for(ne=!0,ce=0;ce<oe[Ae].length;ce+=1)if(oe[Ae][ce]!==void 0&&oe[Ae][ce]!==q[ce]){ne=!1;break}if(ne===!0){se=re;break}}else for(re in r)for(oe=r[re],Ae=0;Ae<oe.length;Ae+=1){for(ne=!0,ce=0;ce<oe[Ae].length;ce+=1)if(oe[Ae][ce]!==void 0&&oe[Ae][ce]!==q.charCodeAt(ce)){ne=!1;break}if(ne===!0){se=re;break}}return se===n&&ie!==n&&(se=ie),se},c=function q(ie){for(var Ae=this.internal.write,ce=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);ie.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:ie.width}),ne.push({key:"Height",value:ie.height}),ie.colorSpace===F.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ie.palette.length/3-1)+" "+("sMask"in ie&&ie.sMask!==void 0?ie.objectId+2:ie.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+ie.colorSpace}),ie.colorSpace===F.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:ie.bitsPerComponent}),"decodeParameters"in ie&&ie.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+ie.decodeParameters+">>"}),"transparency"in ie&&Array.isArray(ie.transparency)&&ie.transparency.length>0){for(var re="",se=0,je=ie.transparency.length;se<je;se++)re+=ie.transparency[se]+" "+ie.transparency[se]+" ";ne.push({key:"Mask",value:"["+re+"]"})}ie.sMask!==void 0&&ne.push({key:"SMask",value:ie.objectId+1+" 0 R"});var De=ie.filter!==void 0?["/"+ie.filter]:void 0;if(ce({data:ie.data,additionalKeyValues:ne,alreadyAppliedFilters:De,objectId:ie.objectId}),Ae("endobj"),"sMask"in ie&&ie.sMask!==void 0){var ge,Z=(ge=ie.sMaskBitsPerComponent)!==null&&ge!==void 0?ge:ie.bitsPerComponent,fe={width:ie.width,height:ie.height,colorSpace:"DeviceGray",bitsPerComponent:Z,data:ie.sMask};"filter"in ie&&(fe.decodeParameters="/Predictor ".concat(ie.predictor," /Colors 1 /BitsPerComponent ").concat(Z," /Columns ").concat(ie.width),fe.filter=ie.filter),q.call(this,fe)}if(ie.colorSpace===F.INDEXED){var ue=this.internal.newObject();ce({data:X(new Uint8Array(ie.palette)),objectId:ue}),Ae("endobj")}},p=function(){var q=this.internal.collections[s+"images"];for(var ie in q)c.call(this,q[ie])},f=function(){var q,ie=this.internal.collections[s+"images"],Ae=this.internal.write;for(var ce in ie)Ae("/I"+(q=ie[ce]).index,q.objectId,"0","R")},A=function(){this.internal.collections[s+"images"]||(this.internal.collections[s+"images"]={},this.internal.events.subscribe("putResources",p),this.internal.events.subscribe("putXobjectDict",f))},h=function(){var q=this.internal.collections[s+"images"];return A.call(this),q},l=function(){return Object.keys(this.internal.collections[s+"images"]).length},g=function(q){return typeof t["process"+q.toUpperCase()]=="function"},v=function(q){return Aa(q)==="object"&&q.nodeType===1},m=function(q,ie){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var Ae=""+q.getAttribute("src");if(Ae.indexOf("data:image/")===0)return Mg(unescape(Ae).split("base64,").pop());var ce=t.loadFile(Ae,!0);if(ce!==void 0)return ce}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var oe;switch(ie){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;default:oe="image/jpeg"}return Mg(q.toDataURL(oe,1).split("base64,").pop())}},N=function(q){var ie=this.internal.collections[s+"images"];if(ie){for(var Ae in ie)if(q===ie[Ae].alias)return ie[Ae]}},w=function(q,ie,Ae){return q||ie||(q=-96,ie=-96),q<0&&(q=-1*Ae.width*72/q/this.internal.scaleFactor),ie<0&&(ie=-1*Ae.height*72/ie/this.internal.scaleFactor),q===0&&(q=ie*Ae.width/Ae.height),ie===0&&(ie=q*Ae.height/Ae.width),[q,ie]},E=function(q,ie,Ae,ce,oe,ne){var re=w.call(this,Ae,ce,oe),se=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,De=h.call(this);if(Ae=re[0],ce=re[1],De[oe.index]=oe,ne){ne*=Math.PI/180;var ge=Math.cos(ne),Z=Math.sin(ne),fe=function(pe){return pe.toFixed(4)},ue=[fe(ge),fe(Z),fe(-1*Z),fe(ge),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,se(q),je(ie+ce),"cm"].join(" ")),this.internal.write(ue.join(" ")),this.internal.write([se(Ae),"0","0",se(ce),"0","0","cm"].join(" "))):this.internal.write([se(Ae),"0","0",se(ce),se(q),je(ie+ce),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},F=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(q){var ie,Ae,ce=0;if(typeof q=="string")for(Ae=q.length,ie=0;ie<Ae;ie++)ce=(ce<<5)-ce+q.charCodeAt(ie),ce|=0;else if(ee(q))for(Ae=q.byteLength/2,ie=0;ie<Ae;ie++)ce=(ce<<5)-ce+q[ie],ce|=0;return ce},K=t.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var ie=!0;return q.length===0&&(ie=!1),q.length%4!=0&&(ie=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(ie=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(ie=!1),ie},G=t.__addimage__.extractImageFromDataUrl=function(q){if(q==null||!(q=q.trim()).startsWith("data:"))return null;var ie=q.indexOf(",");return ie<0?null:q.substring(0,ie).trim().endsWith("base64")?q.substring(ie+1):null};t.__addimage__.isArrayBuffer=function(q){return q instanceof ArrayBuffer};var ee=t.__addimage__.isArrayBufferView=function(q){return q instanceof Int8Array||q instanceof Uint8Array||q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array},V=t.__addimage__.binaryStringToUint8Array=function(q){for(var ie=q.length,Ae=new Uint8Array(ie),ce=0;ce<ie;ce++)Ae[ce]=q.charCodeAt(ce);return Ae},X=t.__addimage__.arrayBufferToBinaryString=function(q){for(var ie="",Ae=ee(q)?q:new Uint8Array(q),ce=0;ce<Ae.length;ce+=8192)ie+=String.fromCharCode.apply(null,Ae.subarray(ce,ce+8192));return ie};t.addImage=function(){var q,ie,Ae,ce,oe,ne,re,se,je;if(typeof arguments[1]=="number"?(ie=n,Ae=arguments[1],ce=arguments[2],oe=arguments[3],ne=arguments[4],re=arguments[5],se=arguments[6],je=arguments[7]):(ie=arguments[1],Ae=arguments[2],ce=arguments[3],oe=arguments[4],ne=arguments[5],re=arguments[6],se=arguments[7],je=arguments[8]),Aa(q=arguments[0])==="object"&&!v(q)&&"imageData"in q){var De=q;q=De.imageData,ie=De.format||ie||n,Ae=De.x||Ae||0,ce=De.y||ce||0,oe=De.w||De.width||oe,ne=De.h||De.height||ne,re=De.alias||re,se=De.compression||se,je=De.rotation||De.angle||je}var ge=this.internal.getFilters();if(se===void 0&&ge.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(Ae)||isNaN(ce))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var Z=J.call(this,q,ie,re,se);return E.call(this,Ae,ce,oe,ne,Z,je),this};var J=function(q,ie,Ae,ce){var oe,ne,re;if(typeof q=="string"&&o(q)===n){q=unescape(q);var se=he(q,!1);(se!==""||(se=t.loadFile(q,!0))!==void 0)&&(q=se)}if(v(q)&&(q=m(q,ie)),ie=o(q,ie),!g(ie))throw new Error("addImage does not support files of type '"+ie+"', please ensure that a plugin for '"+ie+"' support is added.");if(((re=Ae)==null||re.length===0)&&(Ae=(function(je){return typeof je=="string"||ee(je)?k(je):ee(je.data)?k(je.data):null})(q)),(oe=N.call(this,Ae))||(q instanceof Uint8Array||ie==="RGBA"||(ne=q,q=V(q)),oe=this["process"+ie.toUpperCase()](q,l.call(this),Ae,(function(je){return je&&typeof je=="string"&&(je=je.toUpperCase()),je in t.image_compression?je:M.NONE})(ce),ne)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},he=t.__addimage__.convertBase64ToBinaryString=function(q,ie){ie=typeof ie!="boolean"||ie;var Ae,ce="";if(typeof q=="string"){var oe;Ae=(oe=G(q))!==null&&oe!==void 0?oe:q;try{ce=Mg(Ae)}catch(ne){if(ie)throw K(Ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ce};t.getImageProperties=function(q){var ie,Ae,ce="";if(v(q)&&(q=m(q)),typeof q=="string"&&o(q)===n&&((ce=he(q,!1))===""&&(ce=t.loadFile(q)||""),q=ce),Ae=o(q),!g(Ae))throw new Error("addImage does not support files of type '"+Ae+"', please ensure that a plugin for '"+Ae+"' support is added.");if(q instanceof Uint8Array||(q=V(q)),!(ie=this["process"+Ae.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return ie.fileType=Ae,ie}})(hn.API),(function(t){var s=function(n){if(n!==void 0&&n!="")return!0};hn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,o,c,p=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,l=!1,g=0;g<h.length&&!l;g++)switch((r=h[g]).type){case"link":(s(r.options.url)||s(r.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(l!=0){this.internal.write("/Annots [");for(var v=0;v<h.length;v++){r=h[v];var m=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),F=this.internal.getEncryptor(w.objId),M=r.title||"Note";c="<</Type /Annot /Subtype /Text "+(o="/Rect ["+p(r.bounds.x)+" "+f(r.bounds.y+r.bounds.h)+" "+p(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y)+"] ")+"/Contents ("+m(F(r.contents))+")",c+=" /Popup "+E.objId+" 0 R",c+=" /P "+A.objId+" 0 R",c+=" /T ("+m(F(M))+") >>",w.content=c;var k=w.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+p(r.bounds.x+30)+" "+f(r.bounds.y+r.bounds.h)+" "+p(r.bounds.x+r.bounds.w+30)+" "+f(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(c+=" /Open true"),c+=" >>",E.content=c,this.internal.write(w.objId,"0 R",E.objId,"0 R");break;case"freetext":o="/Rect ["+p(r.bounds.x)+" "+f(r.bounds.y)+" "+p(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y+r.bounds.h)+"] ";var K=r.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+m(N(r.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(r.options.name){var G=this.annotations._nameMap[r.options.name];r.options.pageNumber=G.page,r.options.top=G.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",c="",r.options.url)c="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+m(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,c+=" /FitV "+r.options.left+"]";break;default:var ee=f(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),c+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,o,c,p){var f=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:A(n),y:h(r),w:A(n+o),h:h(r+c)},options:p,type:"link"})},t.textWithLink=function(n,r,o,c){var p,f,A=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){f=c.maxWidth;var l=this.splitTextToSize(n,f).length;p=Math.ceil(h*l)}else f=A,p=h;return this.text(n,r,o,c),o+=.2*h,c.align==="center"&&(r-=A/2),c.align==="right"&&(r-=A),this.link(r,o-h,f,p,c),A},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(hn.API),(function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var c=t.__arabicParser__.isInArabicSubstitutionA=function(w){return s[w.charCodeAt(0)]!==void 0},p=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},f=t.__arabicParser__.isArabicEndLetter=function(w){return p(w)&&c(w)&&s[w.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(w){return p(w)&&o.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return p(w)&&c(w)&&s[w.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return p(w)&&c(w)&&s[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return p(w)&&c(w)&&s[w.charCodeAt(0)].length>=3};var l=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return p(w)&&c(w)&&s[w.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(w){var E=0,F=n,M="",k=0;for(E=0;E<w.length;E+=1)F[w.charCodeAt(E)]!==void 0?(k++,typeof(F=F[w.charCodeAt(E)])=="number"&&(M+=String.fromCharCode(F),F=n,k=0),E===w.length-1&&(F=n,M+=w.charAt(E-(k-1)),E-=k-1,k=0)):(F=n,M+=w.charAt(E-k),E-=k,k=0);return M};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(w,E,F){return p(w)?c(w)===!1?-1:!h(w)||!p(E)&&!p(F)||!p(F)&&f(E)||f(w)&&!p(E)||f(w)&&A(E)||f(w)&&f(E)?0:l(w)&&p(E)&&!f(E)&&p(F)&&h(F)?3:f(w)||!p(F)?1:2:-1},m=function(w){var E=0,F=0,M=0,k="",K="",G="",ee=(w=w||"").split("\\s+"),V=[];for(E=0;E<ee.length;E+=1){for(V.push(""),F=0;F<ee[E].length;F+=1)k=ee[E][F],K=ee[E][F-1],G=ee[E][F+1],p(k)?(M=v(k,K,G),V[E]+=M!==-1?String.fromCharCode(s[k.charCodeAt(0)][M]):k):V[E]+=k;V[E]=g(V[E])}return V.join(" ")},N=t.__arabicParser__.processArabic=t.processArabic=function(){var w,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,F=[];if(Array.isArray(E)){var M=0;for(F=[],M=0;M<E.length;M+=1)Array.isArray(E[M])?F.push([m(E[M][0]),E[M][1],E[M][2]]):F.push([m(E[M])]);w=F}else w=m(E);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",N])})(hn.API),hn.API.autoPrint=function(t){var s;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})),this},(function(t){var s=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(f){n=f}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(f){r=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(f){o=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(f){c=f}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(f){p=f}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])})(hn.API),(function(t){var s={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(w){A=w}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var l=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(w){N=w}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return r.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,h){r.call(this);var l=(h=h||{}).fontSize||this.getFontSize(),g=h.font||this.getFont(),v=h.scaleFactor||this.internal.scaleFactor,m=0,N=0,w=0,E=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var F=h.maxWidth;F>0?typeof A=="string"?A=this.splitTextToSize(A,F):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(k,K){return k.concat(E.splitTextToSize(K,F))},[])):A=Array.isArray(A)?A:[A];for(var M=0;M<A.length;M++)m<(w=this.getStringUnitWidth(A[M],{font:g})*l)&&(m=w);return m!==0&&(N=A.length),{w:m/=v,h:Math.max((N*l*this.getLineHeightFactor()-l*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var A=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new c(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=t.cell=function(){var A;A=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var h=this.internal.__cell__.lastCell,l=this.internal.__cell__.padding,g=this.internal.__cell__.margins||s,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===A.lineNumber?(A.x=(h.x||0)+(h.width||0),A.y=h.y||0):h.y+h.height+A.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=g.top,m&&v&&(this.printHeaderRow(A.lineNumber,!0),A.y+=v[0].height)):A.y=h.y+h.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,n===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-l,A.y+l,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+l,{align:"center",baseline:"top",maxWidth:A.width-l-l}):this.text(A.text,A.x+l,A.y+l,{align:"left",baseline:"top",maxWidth:A.width-l-l})),this.internal.__cell__.lastCell=A,this};t.table=function(A,h,l,g,v){if(r.call(this),!l)throw new Error("No data for PDF table.");var m,N,w,E,F=[],M=[],k=[],K={},G={},ee=[],V=[],X=(v=v||{}).autoSize||!1,J=v.printHeaders!==!1,he=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,q=v.margins||Object.assign({width:this.getPageWidth()},s),ie=typeof v.padding=="number"?v.padding:3,Ae=v.headerBackgroundColor||"#c8c8c8",ce=v.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=ie,this.internal.__cell__.headerBackgroundColor=Ae,this.internal.__cell__.headerTextColor=ce,this.setFontSize(he),g==null)M=F=Object.keys(l[0]),k=F.map(function(){return"left"});else if(Array.isArray(g)&&Aa(g[0])==="object")for(F=g.map(function(De){return De.name}),M=g.map(function(De){return De.prompt||De.name||""}),k=g.map(function(De){return De.align||"left"}),m=0;m<g.length;m+=1)G[g[m].name]=.7499990551181103*g[m].width;else Array.isArray(g)&&typeof g[0]=="string"&&(M=F=g,k=F.map(function(){return"left"}));if(X||Array.isArray(g)&&typeof g[0]=="string")for(m=0;m<F.length;m+=1){for(K[E=F[m]]=l.map(function(De){return De[E]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(M[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=K[E],this.setFont(void 0,"normal"),w=0;w<N.length;w+=1)ee.push(this.getTextDimensions(N[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[E]=Math.max.apply(null,ee)+ie+ie,ee=[]}if(J){var oe={};for(m=0;m<F.length;m+=1)oe[F[m]]={},oe[F[m]].text=M[m],oe[F[m]].align=k[m];var ne=f.call(this,oe,G);V=F.map(function(De){return new c(A,h,G[De],ne,oe[De].text,void 0,oe[De].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var re=g.reduce(function(De,ge){return De[ge.name]=ge.align,De},{});for(m=0;m<l.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:l[m]},this);var se=f.call(this,l[m],G);for(w=0;w<F.length;w+=1){var je=l[m][F[w]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:w,data:je},this),p.call(this,new c(A,h,G[F[w]],se,je,m+2,re[F[w]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=h,this};var f=function(A,h){var l=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(A).map(function(m){var N=A[m];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,h[m]-l-l)},this).map(function(m){return this.getLineHeightFactor()*m.length*g/v+l+l},this).reduce(function(m,N){return Math.max(m,N)},0)};t.setTableHeaderRow=function(A){r.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var l;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){l=this.internal.__cell__.tableHeaderRow[m].clone(),h&&(l.y=this.internal.__cell__.margins.top||0,v.push(l)),l.lineNumber=A;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,l),this.setTextColor(N)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}})(hn.API);var JT={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ZT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$v=XT(ZT),eF=[100,200,300,400,500,600,700,800,900],J9=XT(eF);function O0(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(c){return JT[c=c||"normal"]?c:"normal"})(t.style),r=(function(c){return c?typeof c=="number"?c>=100&&c<=900&&c%100==0?c:400:/^\d00$/.test(c)?parseInt(c):c==="bold"?700:400:400})(t.weight),o=(function(c){return typeof $v[c=c||"normal"]=="number"?c:"normal"})(t.stretch);return{family:s,style:n,weight:r,stretch:o,src:t.src||[],ref:t.ref||{name:s,style:[o,n,r].join(" ")}}}function $S(t,s,n,r){var o;for(o=n;o>=0&&o<s.length;o+=r)if(t[s[o]])return t[s[o]];for(o=n;o>=0&&o<s.length;o-=r)if(t[s[o]])return t[s[o]]}var Z9={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function WS(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function YS(t){return t.trimLeft()}function eK(t,s){for(var n=0;n<t.length;){if(t.charAt(n)===s)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function tK(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var wg,XS,JS,Kh,Sg,ZS,eB,tB,U0=["times"];function sB(t,s,n,r,o){var c=4,p=rB;switch(o){case hn.API.image_compression.FAST:c=1,p=nB;break;case hn.API.image_compression.MEDIUM:c=6,p=aB;break;case hn.API.image_compression.SLOW:c=9,p=iB}t=(function(A,h,l,g){for(var v,m=A.length/h,N=new Uint8Array(A.length+m),w=[sK,nB,rB,aB,iB],E=0;E<m;E+=1){var F=E*h,M=A.subarray(F,F+h);if(g)N.set(g(M,l,v),F+E);else{for(var k=w.length,K=[],G=0;G<k;G+=1)K[G]=w[G](M,l,v);var ee=rK(K.concat());N.set(K[ee],F+E)}v=M}return N})(t,s,Math.ceil(n*r/8),p);var f=Pv(t,{level:c});return hn.API.__addimage__.arrayBufferToBinaryString(f)}function sK(t){var s=Array.apply([],t);return s.unshift(0),s}function nB(t,s){var n=t.length,r=[];r[0]=1;for(var o=0;o<n;o+=1){var c=t[o-s]||0;r[o+1]=t[o]-c+256&255}return r}function rB(t,s,n){var r=t.length,o=[];o[0]=2;for(var c=0;c<r;c+=1){var p=n&&n[c]||0;o[c+1]=t[c]-p+256&255}return o}function aB(t,s,n){var r=t.length,o=[];o[0]=3;for(var c=0;c<r;c+=1){var p=t[c-s]||0,f=n&&n[c]||0;o[c+1]=t[c]+256-(p+f>>>1)&255}return o}function iB(t,s,n){var r=t.length,o=[];o[0]=4;for(var c=0;c<r;c+=1){var p=nK(t[c-s]||0,n&&n[c]||0,n&&n[c-s]||0);o[c+1]=t[c]-p+256&255}return o}function nK(t,s,n){if(t===s&&s===n)return t;var r=Math.abs(s-n),o=Math.abs(t-n),c=Math.abs(t+s-n-n);return r<=o&&r<=c?t:o<=c?s:n}function rK(t){var s=t.map(function(n){return n.reduce(function(r,o){return r+Math.abs(o)},0)});return s.indexOf(Math.min.apply(null,s))}function L0(t,s,n){var r=s*n,o=Math.floor(r/8),c=16-(r-8*o+n),p=(1<<n)-1;return tF(t,o)>>c&p}function oB(t,s,n,r){var o=n*r,c=Math.floor(o/8),p=16-(o-8*c+r),f=(1<<r)-1,A=(s&f)<<p;(function(h,l,g){if(l+1<h.byteLength)h.setUint16(l,g,!1);else{var v=g>>8&255;h.setUint8(l,v)}})(t,c,tF(t,c)&~(f<<p)&65535|A)}function tF(t,s){return s+1<t.byteLength?t.getUint16(s,!1):t.getUint8(s)<<8}function aK(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[s++]|t[s++]<<8,r=t[s++]|t[s++]<<8,o=t[s++],c=o>>7,p=1<<1+(7&o);t[s++],t[s++];var f=null,A=null;c&&(f=s,A=p,s+=3*p);var h=!0,l=[],g=0,v=null,m=0,N=null;for(this.width=n,this.height=r;h&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,N=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((q=t[s++])>=0))throw Error("Invalid block size");if(q===0)break;s+=q}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[s++];g=t[s++]|t[s++]<<8,v=t[s++],1&w||(v=null),m=w>>2&7,s++;break;case 254:for(;;){if(!((q=t[s++])>=0))throw Error("Invalid block size");if(q===0)break;s+=q}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var E=t[s++]|t[s++]<<8,F=t[s++]|t[s++]<<8,M=t[s++]|t[s++]<<8,k=t[s++]|t[s++]<<8,K=t[s++],G=K>>6&1,ee=1<<1+(7&K),V=f,X=A,J=!1;K>>7&&(J=!0,V=s,X=ee,s+=3*ee);var he=s;for(s++;;){var q;if(!((q=t[s++])>=0))throw Error("Invalid block size");if(q===0)break;s+=q}l.push({x:E,y:F,width:M,height:k,has_local_palette:J,palette_offset:V,palette_size:X,data_offset:he,data_length:s-he,transparent_index:v,interlaced:!!G,delay:g,disposal:m});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return N},this.frameInfo=function(ie){if(ie<0||ie>=l.length)throw new Error("Frame index out of range.");return l[ie]},this.decodeAndBlitFrameBGRA=function(ie,Ae){var ce=this.frameInfo(ie),oe=ce.width*ce.height,ne=new Uint8Array(oe);lB(t,ce.data_offset,ne,oe);var re=ce.palette_offset,se=ce.transparent_index;se===null&&(se=256);var je=ce.width,De=n-je,ge=je,Z=4*(ce.y*n+ce.x),fe=4*((ce.y+ce.height)*n+ce.x),ue=Z,pe=4*De;ce.interlaced===!0&&(pe+=4*n*7);for(var Ce=8,Ne=0,ye=ne.length;Ne<ye;++Ne){var we=ne[Ne];if(ge===0&&(ge=je,(ue+=pe)>=fe&&(pe=4*De+4*n*(Ce-1),ue=Z+(je+De)*(Ce<<1),Ce>>=1)),we===se)ue+=4;else{var Te=t[re+3*we],qe=t[re+3*we+1],ve=t[re+3*we+2];Ae[ue++]=ve,Ae[ue++]=qe,Ae[ue++]=Te,Ae[ue++]=255}--ge}},this.decodeAndBlitFrameRGBA=function(ie,Ae){var ce=this.frameInfo(ie),oe=ce.width*ce.height,ne=new Uint8Array(oe);lB(t,ce.data_offset,ne,oe);var re=ce.palette_offset,se=ce.transparent_index;se===null&&(se=256);var je=ce.width,De=n-je,ge=je,Z=4*(ce.y*n+ce.x),fe=4*((ce.y+ce.height)*n+ce.x),ue=Z,pe=4*De;ce.interlaced===!0&&(pe+=4*n*7);for(var Ce=8,Ne=0,ye=ne.length;Ne<ye;++Ne){var we=ne[Ne];if(ge===0&&(ge=je,(ue+=pe)>=fe&&(pe=4*De+4*n*(Ce-1),ue=Z+(je+De)*(Ce<<1),Ce>>=1)),we===se)ue+=4;else{var Te=t[re+3*we],qe=t[re+3*we+1],ve=t[re+3*we+2];Ae[ue++]=Te,Ae[ue++]=qe,Ae[ue++]=ve,Ae[ue++]=255}--ge}}}function lB(t,s,n,r){for(var o=t[s++],c=1<<o,p=c+1,f=p+1,A=o+1,h=(1<<A)-1,l=0,g=0,v=0,m=t[s++],N=new Int32Array(4096),w=null;;){for(;l<16&&m!==0;)g|=t[s++]<<l,l+=8,m===1?m=t[s++]:--m;if(l<A)break;var E=g&h;if(g>>=A,l-=A,E!==c){if(E===p)break;for(var F=E<f?E:w,M=0,k=F;k>c;)k=N[k]>>8,++M;var K=k;if(v+M+(F!==E?1:0)>r)return void Ba.log("Warning, gif stream longer than expected.");n[v++]=K;var G=v+=M;for(F!==E&&(n[v++]=K),k=F;M--;)k=N[k],n[--G]=255&k,k>>=8;w!==null&&f<4096&&(N[f++]=w<<8|K,f>=h+1&&A<12&&(++A,h=h<<1|1)),w=E}else f=p+1,h=(1<<(A=o+1))-1,w=null}return v!==r&&Ba.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function D0(t){var s,n,r,o,c,p=Math.floor,f=new Array(64),A=new Array(64),h=new Array(64),l=new Array(64),g=new Array(65535),v=new Array(65535),m=new Array(64),N=new Array(64),w=[],E=0,F=7,M=new Array(64),k=new Array(64),K=new Array(64),G=new Array(256),ee=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],X=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ie=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ae=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(Z,fe){for(var ue=0,pe=0,Ce=new Array,Ne=1;Ne<=16;Ne++){for(var ye=1;ye<=Z[Ne];ye++)Ce[fe[pe]]=[],Ce[fe[pe]][0]=ue,Ce[fe[pe]][1]=Ne,pe++,ue++;ue*=2}return Ce}function re(Z){for(var fe=Z[0],ue=Z[1]-1;ue>=0;)fe&1<<ue&&(E|=1<<F),ue--,--F<0&&(E==255?(se(255),se(0)):se(E),F=7,E=0)}function se(Z){w.push(Z)}function je(Z){se(Z>>8&255),se(255&Z)}function De(Z,fe,ue,pe,Ce){for(var Ne,ye=Ce[0],we=Ce[240],Te=(function(Ze,Ht){var At,Ct,It,Wt,Es,Ss,_s,$e,ke,it,tt=0;for(ke=0;ke<8;++ke){At=Ze[tt],Ct=Ze[tt+1],It=Ze[tt+2],Wt=Ze[tt+3],Es=Ze[tt+4],Ss=Ze[tt+5],_s=Ze[tt+6];var Jt=At+($e=Ze[tt+7]),Qt=At-$e,ss=Ct+_s,dt=Ct-_s,qt=It+Ss,Vt=It-Ss,vs=Wt+Es,ns=Wt-Es,js=Jt+vs,ln=Jt-vs,ys=ss+qt,gt=ss-qt;Ze[tt]=js+ys,Ze[tt+4]=js-ys;var Dt=.707106781*(gt+ln);Ze[tt+2]=ln+Dt,Ze[tt+6]=ln-Dt;var xt=.382683433*((js=ns+Vt)-(gt=dt+Qt)),rs=.5411961*js+xt,ps=1.306562965*gt+xt,yn=.707106781*(ys=Vt+dt),is=Qt+yn,Fs=Qt-yn;Ze[tt+5]=Fs+rs,Ze[tt+3]=Fs-rs,Ze[tt+1]=is+ps,Ze[tt+7]=is-ps,tt+=8}for(tt=0,ke=0;ke<8;++ke){At=Ze[tt],Ct=Ze[tt+8],It=Ze[tt+16],Wt=Ze[tt+24],Es=Ze[tt+32],Ss=Ze[tt+40],_s=Ze[tt+48];var Ns=At+($e=Ze[tt+56]),Nn=At-$e,Cs=Ct+_s,zt=Ct-_s,os=It+Ss,Ps=It-Ss,Ye=Wt+Es,St=Wt-Es,Rt=Ns+Ye,us=Ns-Ye,As=Cs+os,as=Cs-os;Ze[tt]=Rt+As,Ze[tt+32]=Rt-As;var bs=.707106781*(as+us);Ze[tt+16]=us+bs,Ze[tt+48]=us-bs;var cs=.382683433*((Rt=St+Ps)-(as=zt+Nn)),Us=.5411961*Rt+cs,an=1.306562965*as+cs,Mr=.707106781*(As=Ps+zt),Un=Nn+Mr,Ks=Nn-Mr;Ze[tt+40]=Ks+Us,Ze[tt+24]=Ks-Us,Ze[tt+8]=Un+an,Ze[tt+56]=Un-an,tt++}for(ke=0;ke<64;++ke)it=Ze[ke]*Ht[ke],m[ke]=it>0?it+.5|0:it-.5|0;return m})(Z,fe),qe=0;qe<64;++qe)N[V[qe]]=Te[qe];var ve=N[0]-ue;ue=N[0],ve==0?re(pe[0]):(re(pe[v[Ne=32767+ve]]),re(g[Ne]));for(var Ge=63;Ge>0&&N[Ge]==0;)Ge--;if(Ge==0)return re(ye),ue;for(var at,Se=1;Se<=Ge;){for(var vt=Se;N[Se]==0&&Se<=Ge;)++Se;var ht=Se-vt;if(ht>=16){at=ht>>4;for(var pt=1;pt<=at;++pt)re(we);ht&=15}Ne=32767+N[Se],re(Ce[(ht<<4)+v[Ne]]),re(g[Ne]),Se++}return Ge!=63&&re(ye),ue}function ge(Z){Z=Math.min(Math.max(Z,1),100),c!=Z&&((function(fe){for(var ue=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var Ce=p((ue[pe]*fe+50)/100);Ce=Math.min(Math.max(Ce,1),255),f[V[pe]]=Ce}for(var Ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var we=p((Ne[ye]*fe+50)/100);we=Math.min(Math.max(we,1),255),A[V[ye]]=we}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,ve=0;ve<8;ve++)for(var Ge=0;Ge<8;Ge++)h[qe]=1/(f[V[qe]]*Te[ve]*Te[Ge]*8),l[qe]=1/(A[V[qe]]*Te[ve]*Te[Ge]*8),qe++})(Z<50?Math.floor(5e3/Z):Math.floor(200-2*Z)),c=Z)}this.encode=function(Z,fe){fe&&ge(fe),w=new Array,E=0,F=7,je(65496),je(65504),je(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),je(1),je(1),se(0),se(0),(function(){je(65499),je(132),se(0);for(var Ct=0;Ct<64;Ct++)se(f[Ct]);se(1);for(var It=0;It<64;It++)se(A[It])})(),(function(Ct,It){je(65472),je(17),se(8),je(It),je(Ct),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)})(Z.width,Z.height),(function(){je(65476),je(418),se(0);for(var Ct=0;Ct<16;Ct++)se(X[Ct+1]);for(var It=0;It<=11;It++)se(J[It]);se(16);for(var Wt=0;Wt<16;Wt++)se(he[Wt+1]);for(var Es=0;Es<=161;Es++)se(q[Es]);se(1);for(var Ss=0;Ss<16;Ss++)se(ie[Ss+1]);for(var _s=0;_s<=11;_s++)se(Ae[_s]);se(17);for(var $e=0;$e<16;$e++)se(ce[$e+1]);for(var ke=0;ke<=161;ke++)se(oe[ke])})(),je(65498),je(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var ue=0,pe=0,Ce=0;E=0,F=7,this.encode.displayName="_encode_";for(var Ne,ye,we,Te,qe,ve,Ge,at,Se,vt=Z.data,ht=Z.width,pt=Z.height,Ze=4*ht,Ht=0;Ht<pt;){for(Ne=0;Ne<Ze;){for(qe=Ze*Ht+Ne,Ge=-1,at=0,Se=0;Se<64;Se++)ve=qe+(at=Se>>3)*Ze+(Ge=4*(7&Se)),Ht+at>=pt&&(ve-=Ze*(Ht+1+at-pt)),Ne+Ge>=Ze&&(ve-=Ne+Ge-Ze+4),ye=vt[ve++],we=vt[ve++],Te=vt[ve++],M[Se]=(ee[ye]+ee[we+256|0]+ee[Te+512|0]>>16)-128,k[Se]=(ee[ye+768|0]+ee[we+1024|0]+ee[Te+1280|0]>>16)-128,K[Se]=(ee[ye+1280|0]+ee[we+1536|0]+ee[Te+1792|0]>>16)-128;ue=De(M,h,ue,s,r),pe=De(k,l,pe,n,o),Ce=De(K,l,Ce,n,o),Ne+=32}Ht+=8}if(F>=0){var At=[];At[1]=F+1,At[0]=(1<<F+1)-1,re(At)}return je(65497),new Uint8Array(w)},t=t||50,(function(){for(var Z=String.fromCharCode,fe=0;fe<256;fe++)G[fe]=Z(fe)})(),s=ne(X,J),n=ne(ie,Ae),r=ne(he,q),o=ne(ce,oe),(function(){for(var Z=1,fe=2,ue=1;ue<=15;ue++){for(var pe=Z;pe<fe;pe++)v[32767+pe]=ue,g[32767+pe]=[],g[32767+pe][1]=ue,g[32767+pe][0]=pe;for(var Ce=-(fe-1);Ce<=-Z;Ce++)v[32767+Ce]=ue,g[32767+Ce]=[],g[32767+Ce][1]=ue,g[32767+Ce][0]=fe-1+Ce;Z<<=1,fe<<=1}})(),(function(){for(var Z=0;Z<256;Z++)ee[Z]=19595*Z,ee[Z+256|0]=38470*Z,ee[Z+512|0]=7471*Z+32768,ee[Z+768|0]=-11059*Z,ee[Z+1024|0]=-21709*Z,ee[Z+1280|0]=32768*Z+8421375,ee[Z+1536|0]=-27439*Z,ee[Z+1792|0]=-5329*Z})(),ge(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Fc(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cB(t){function s(J){if(!J)throw Error("assert :P")}function n(J,he,q){for(var ie=0;4>ie;ie++)if(J[he+ie]!=q.charCodeAt(ie))return!0;return!1}function r(J,he,q,ie,Ae){for(var ce=0;ce<Ae;ce++)J[he+ce]=q[ie+ce]}function o(J,he,q,ie){for(var Ae=0;Ae<ie;Ae++)J[he+Ae]=q}function c(J){return new Int32Array(J)}function p(J,he){for(var q=[],ie=0;ie<J;ie++)q.push(new he);return q}function f(J,he){var q=[];return(function ie(Ae,ce,oe){for(var ne=oe[ce],re=0;re<ne&&(Ae.push(oe.length>ce+1?[]:new he),!(oe.length<ce+1));re++)ie(Ae[re],ce+1,oe)})(q,0,J),q}var A=function(){var J=this;function he(I,P){for(var W=1<<P-1>>>0;I&W;)W>>>=1;return W?(I&W-1)+W:I}function q(I,P,W,ae,Be){s(!(ae%W));do I[P+(ae-=W)]=Be;while(0<ae)}function ie(I,P,W,ae,Be){if(s(2328>=Be),512>=Be)var Fe=c(512);else if((Fe=c(Be))==null)return 0;return(function(Re,Le,Me,ze,ot,Nt){var Ke,ft,mt=Le,Pt=1<<Me,wt=c(16),Mt=c(16);for(s(ot!=0),s(ze!=null),s(Re!=null),s(0<Me),ft=0;ft<ot;++ft){if(15<ze[ft])return 0;++wt[ze[ft]]}if(wt[0]==ot)return 0;for(Mt[1]=0,Ke=1;15>Ke;++Ke){if(wt[Ke]>1<<Ke)return 0;Mt[Ke+1]=Mt[Ke]+wt[Ke]}for(ft=0;ft<ot;++ft)Ke=ze[ft],0<ze[ft]&&(Nt[Mt[Ke]++]=ft);if(Mt[15]==1)return(ze=new Ae).g=0,ze.value=Nt[0],q(Re,mt,1,Pt,ze),Pt;var Gt,ds=-1,Xt=Pt-1,$s=0,Ds=1,In=1,zs=1<<Me;for(ft=0,Ke=1,ot=2;Ke<=Me;++Ke,ot<<=1){if(Ds+=In<<=1,0>(In-=wt[Ke]))return 0;for(;0<wt[Ke];--wt[Ke])(ze=new Ae).g=Ke,ze.value=Nt[ft++],q(Re,mt+$s,ot,zs,ze),$s=he($s,Ke)}for(Ke=Me+1,ot=2;15>=Ke;++Ke,ot<<=1){if(Ds+=In<<=1,0>(In-=wt[Ke]))return 0;for(;0<wt[Ke];--wt[Ke]){if(ze=new Ae,($s&Xt)!=ds){for(mt+=zs,Gt=1<<(ds=Ke)-Me;15>ds&&!(0>=(Gt-=wt[ds]));)++ds,Gt<<=1;Pt+=zs=1<<(Gt=ds-Me),Re[Le+(ds=$s&Xt)].g=Gt+Me,Re[Le+ds].value=mt-Le-ds}ze.g=Ke-Me,ze.value=Nt[ft++],q(Re,mt+($s>>Me),ot,zs,ze),$s=he($s,Ke)}}return Ds!=2*Mt[15]-1?0:Pt})(I,P,W,ae,Be,Fe)}function Ae(){this.value=this.g=0}function ce(){this.value=this.g=0}function oe(){this.G=p(5,Ae),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(vo,ce)}function ne(I,P,W,ae){s(I!=null),s(P!=null),s(2147483648>ae),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=P,I.pa=W,I.Jd=P,I.Yc=W+ae,I.Zc=4<=ae?W+ae-4+1:W,ye(I)}function re(I,P){for(var W=0;0<P--;)W|=Te(I,128)<<P;return W}function se(I,P){var W=re(I,P);return we(I)?-W:W}function je(I,P,W,ae){var Be,Fe=0;for(s(I!=null),s(P!=null),s(4294967288>ae),I.Sb=ae,I.Ra=0,I.u=0,I.h=0,4<ae&&(ae=4),Be=0;Be<ae;++Be)Fe+=P[W+Be]<<8*Be;I.Ra=Fe,I.bb=ae,I.oa=P,I.pa=W}function De(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<Ko-8>>>0,++I.bb,I.u-=8;pe(I)&&(I.h=1,I.u=0)}function ge(I,P){if(s(0<=P),!I.h&&P<=Li){var W=ue(I)&Gn[P];return I.u+=P,De(I),W}return I.h=1,I.u=0}function Z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function fe(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ue(I){return I.Ra>>>(I.u&Ko-1)>>>0}function pe(I){return s(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>Ko}function Ce(I,P){I.u=P,I.h=pe(I)}function Ne(I){I.u>=zo&&(s(I.u>=zo),De(I))}function ye(I){s(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(s(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function we(I){return re(I,1)}function Te(I,P){var W=I.Ca;0>I.b&&ye(I);var ae=I.b,Be=W*P>>>8,Fe=(I.I>>>ae>Be)+0;for(Fe?(W-=Be,I.I-=Be+1<<ae>>>0):W=Be+1,ae=W,Be=0;256<=ae;)Be+=8,ae>>=8;return ae=7^Be+tl[ae],I.b-=ae,I.Ca=(W<<ae)-1,Fe}function qe(I,P,W){I[P+0]=W>>24&255,I[P+1]=W>>16&255,I[P+2]=W>>8&255,I[P+3]=255&W}function ve(I,P){return I[P+0]|I[P+1]<<8}function Ge(I,P){return ve(I,P)|I[P+2]<<16}function at(I,P){return ve(I,P)|ve(I,P+2)<<16}function Se(I,P){var W=1<<P;return s(I!=null),s(0<P),I.X=c(W),I.X==null?0:(I.Mb=32-P,I.Xa=P,1)}function vt(I,P){s(I!=null),s(P!=null),s(I.Xa==P.Xa),r(P.X,0,I.X,0,1<<P.Xa)}function ht(){this.X=[],this.Xa=this.Mb=0}function pt(I,P,W,ae){s(W!=null),s(ae!=null);var Be=W[0],Fe=ae[0];return Be==0&&(Be=(I*Fe+P/2)/P),Fe==0&&(Fe=(P*Be+I/2)/I),0>=Be||0>=Fe?0:(W[0]=Be,ae[0]=Fe,1)}function Ze(I,P){return I+(1<<P)-1>>>P}function Ht(I,P){return((4278255360&I)+(4278255360&P)>>>0&4278255360)+((16711935&I)+(16711935&P)>>>0&16711935)>>>0}function At(I,P){J[P]=function(W,ae,Be,Fe,Re,Le,Me){var ze;for(ze=0;ze<Re;++ze){var ot=J[I](Le[Me+ze-1],Be,Fe+ze);Le[Me+ze]=Ht(W[ae+ze],ot)}}}function Ct(){this.ud=this.hd=this.jd=0}function It(I,P){return((4278124286&(I^P))>>>1)+(I&P)>>>0}function Wt(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function Es(I,P){return Wt(I+(I-P+.5>>1))}function Ss(I,P,W){return Math.abs(P-W)-Math.abs(I-W)}function _s(I,P,W,ae,Be,Fe,Re){for(ae=Fe[Re-1],W=0;W<Be;++W)Fe[Re+W]=ae=Ht(I[P+W],ae)}function $e(I,P,W,ae,Be){var Fe;for(Fe=0;Fe<W;++Fe){var Re=I[P+Fe],Le=Re>>8&255,Me=16711935&(Me=(Me=16711935&Re)+((Le<<16)+Le));ae[Be+Fe]=(4278255360&Re)+Me>>>0}}function ke(I,P){P.jd=255&I,P.hd=I>>8&255,P.ud=I>>16&255}function it(I,P,W,ae,Be,Fe){var Re;for(Re=0;Re<ae;++Re){var Le=P[W+Re],Me=Le>>>8,ze=Le,ot=255&(ot=(ot=Le>>>16)+((I.jd<<24>>24)*(Me<<24>>24)>>>5));ze=255&(ze=(ze+=(I.hd<<24>>24)*(Me<<24>>24)>>>5)+((I.ud<<24>>24)*(ot<<24>>24)>>>5)),Be[Fe+Re]=(4278255360&Le)+(ot<<16)+ze}}function tt(I,P,W,ae,Be){J[P]=function(Fe,Re,Le,Me,ze,ot,Nt,Ke,ft){for(Me=Nt;Me<Ke;++Me)for(Nt=0;Nt<ft;++Nt)ze[ot++]=Be(Le[ae(Fe[Re++])])},J[I]=function(Fe,Re,Le,Me,ze,ot,Nt){var Ke=8>>Fe.b,ft=Fe.Ea,mt=Fe.K[0],Pt=Fe.w;if(8>Ke)for(Fe=(1<<Fe.b)-1,Pt=(1<<Ke)-1;Re<Le;++Re){var wt,Mt=0;for(wt=0;wt<ft;++wt)wt&Fe||(Mt=ae(Me[ze++])),ot[Nt++]=Be(mt[Mt&Pt]),Mt>>=Ke}else J["VP8LMapColor"+W](Me,ze,mt,Pt,ot,Nt,Re,Le,ft)}}function Jt(I,P,W,ae,Be){for(W=P+W;P<W;){var Fe=I[P++];ae[Be++]=Fe>>16&255,ae[Be++]=Fe>>8&255,ae[Be++]=255&Fe}}function Qt(I,P,W,ae,Be){for(W=P+W;P<W;){var Fe=I[P++];ae[Be++]=Fe>>16&255,ae[Be++]=Fe>>8&255,ae[Be++]=255&Fe,ae[Be++]=Fe>>24&255}}function ss(I,P,W,ae,Be){for(W=P+W;P<W;){var Fe=(Re=I[P++])>>16&240|Re>>12&15,Re=240&Re|Re>>28&15;ae[Be++]=Fe,ae[Be++]=Re}}function dt(I,P,W,ae,Be){for(W=P+W;P<W;){var Fe=(Re=I[P++])>>16&248|Re>>13&7,Re=Re>>5&224|Re>>3&31;ae[Be++]=Fe,ae[Be++]=Re}}function qt(I,P,W,ae,Be){for(W=P+W;P<W;){var Fe=I[P++];ae[Be++]=255&Fe,ae[Be++]=Fe>>8&255,ae[Be++]=Fe>>16&255}}function Vt(I,P,W,ae,Be,Fe){if(Fe==0)for(W=P+W;P<W;)qe(ae,((Fe=I[P++])[0]>>24|Fe[1]>>8&65280|Fe[2]<<8&16711680|Fe[3]<<24)>>>0),Be+=32;else r(ae,Be,I,P,W)}function vs(I,P){J[P][0]=J[I+"0"],J[P][1]=J[I+"1"],J[P][2]=J[I+"2"],J[P][3]=J[I+"3"],J[P][4]=J[I+"4"],J[P][5]=J[I+"5"],J[P][6]=J[I+"6"],J[P][7]=J[I+"7"],J[P][8]=J[I+"8"],J[P][9]=J[I+"9"],J[P][10]=J[I+"10"],J[P][11]=J[I+"11"],J[P][12]=J[I+"12"],J[P][13]=J[I+"13"],J[P][14]=J[I+"0"],J[P][15]=J[I+"0"]}function ns(I){return I==EA||I==ld||I==zc||I==xc}function js(){this.eb=[],this.size=this.A=this.fb=0}function ln(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ys(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new js,this.f.kb=new ln,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function xt(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function rs(I,P){var W=I.T,ae=P.ba.f.RGBA,Be=ae.eb,Fe=ae.fb+I.ka*ae.A,Re=Ci[P.ba.S],Le=I.y,Me=I.O,ze=I.f,ot=I.N,Nt=I.ea,Ke=I.W,ft=P.cc,mt=P.dc,Pt=P.Mc,wt=P.Nc,Mt=I.ka,Gt=I.ka+I.T,ds=I.U,Xt=ds+1>>1;for(Mt==0?Re(Le,Me,null,null,ze,ot,Nt,Ke,ze,ot,Nt,Ke,Be,Fe,null,null,ds):(Re(P.ec,P.fc,Le,Me,ft,mt,Pt,wt,ze,ot,Nt,Ke,Be,Fe-ae.A,Be,Fe,ds),++W);Mt+2<Gt;Mt+=2)ft=ze,mt=ot,Pt=Nt,wt=Ke,ot+=I.Rc,Ke+=I.Rc,Fe+=2*ae.A,Re(Le,(Me+=2*I.fa)-I.fa,Le,Me,ft,mt,Pt,wt,ze,ot,Nt,Ke,Be,Fe-ae.A,Be,Fe,ds);return Me+=I.fa,I.j+Gt<I.o?(r(P.ec,P.fc,Le,Me,ds),r(P.cc,P.dc,ze,ot,Xt),r(P.Mc,P.Nc,Nt,Ke,Xt),W--):1&Gt||Re(Le,Me,null,null,ze,ot,Nt,Ke,ze,ot,Nt,Ke,Be,Fe+ae.A,null,null,ds),W}function ps(I,P,W){var ae=I.F,Be=[I.J];if(ae!=null){var Fe=I.U,Re=P.ba.S,Le=Re==CA||Re==zc;P=P.ba.f.RGBA;var Me=[0],ze=I.ka;Me[0]=I.T,I.Kb&&(ze==0?--Me[0]:(--ze,Be[0]-=I.width),I.j+I.ka+I.T==I.o&&(Me[0]=I.o-I.j-ze));var ot=P.eb;ze=P.fb+ze*P.A,I=Kc(ae,Be[0],I.width,Fe,Me,ot,ze+(Le?0:3),P.A),s(W==Me),I&&ns(Re)&&zl(ot,ze,Le,Fe,Me,P.A)}return 0}function yn(I){var P=I.ma,W=P.ba.S,ae=11>W,Be=W==_i||W==bo||W==CA||W==Sl||W==12||ns(W);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!na(P.Oa,I,Be?11:12))return 0;if(Be&&ns(W)&&SA(),I.da)alert("todo:use_scaling");else{if(ae){if(P.Ib=xt,I.Kb){if(W=I.U+1>>1,P.memory=c(I.U+2*W),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+I.U,P.Mc=P.cc,P.Nc=P.dc+W,P.Ib=rs,SA()}}else alert("todo:EmitYUV");Be&&(P.Jb=ps,ae&&ko())}if(ae&&!Jl){for(I=0;256>I;++I)Ei[I]=89858*(I-128)+Vc>>No,Sf[I]=-22014*(I-128)+Vc,Ah[I]=-45773*(I-128),hd[I]=113618*(I-128)+Vc>>No;for(I=ll;I<Xl;++I)P=76283*(I-16)+Vc>>No,Bf[I-ll]=Ls(P,255),Nf[I-ll]=Ls(P+8>>4,15);Jl=1}return 1}function is(I){var P=I.ma,W=I.U,ae=I.T;return s(!(1&I.ka)),0>=W||0>=ae?0:(W=P.Ib(I,P),P.Jb!=null&&P.Jb(I,P,W),P.Dc+=W,1)}function Fs(I){I.ma.memory=null}function Ns(I,P,W,ae){return ge(I,8)!=47?0:(P[0]=ge(I,14)+1,W[0]=ge(I,14)+1,ae[0]=ge(I,1),ge(I,3)!=0?0:!I.h)}function Nn(I,P){if(4>I)return I+1;var W=I-2>>1;return(2+(1&I)<<W)+ge(P,W)+1}function Cs(I,P){return 120<P?P-120:1<=(W=((W=wo[P-1])>>4)*I+(8-(15&W)))?W:1;var W}function zt(I,P,W){var ae=ue(W),Be=I[P+=255&ae].g-8;return 0<Be&&(Ce(W,W.u+8),ae=ue(W),P+=I[P].value,P+=ae&(1<<Be)-1),Ce(W,W.u+I[P].g),I[P].value}function os(I,P,W){return W.g+=I.g,W.value+=I.value<<P>>>0,s(8>=W.g),I.g}function Ps(I,P,W){var ae=I.xc;return s((P=ae==0?0:I.vc[I.md*(W>>ae)+(P>>ae)])<I.Wb),I.Ya[P]}function Ye(I,P,W,ae){var Be=I.ab,Fe=I.c*P,Re=I.C;P=Re+P;var Le=W,Me=ae;for(ae=I.Ta,W=I.Ua;0<Be--;){var ze=I.gc[Be],ot=Re,Nt=P,Ke=Le,ft=Me,mt=(Me=ae,Le=W,ze.Ea);switch(s(ot<Nt),s(Nt<=ze.nc),ze.hc){case 2:Ea(Ke,ft,(Nt-ot)*mt,Me,Le);break;case 0:var Pt=ot,wt=Nt,Mt=Me,Gt=Le,ds=(zs=ze).Ea;Pt==0&&(bl(Ke,ft,null,null,1,Mt,Gt),_s(Ke,ft+1,0,0,ds-1,Mt,Gt+1),ft+=ds,Gt+=ds,++Pt);for(var Xt=1<<zs.b,$s=Xt-1,Ds=Ze(ds,zs.b),In=zs.K,zs=zs.w+(Pt>>zs.b)*Ds;Pt<wt;){var er=In,aa=zs,Ln=1;for(fc(Ke,ft,Mt,Gt-ds,1,Mt,Gt);Ln<ds;){var Ot=(Ln&~$s)+Xt;Ot>ds&&(Ot=ds),(0,Di[er[aa++]>>8&15])(Ke,ft+ +Ln,Mt,Gt+Ln-ds,Ot-Ln,Mt,Gt+Ln),Ln=Ot}ft+=ds,Gt+=ds,++Pt&$s||(zs+=Ds)}Nt!=ze.nc&&r(Me,Le-mt,Me,Le+(Nt-ot-1)*mt,mt);break;case 1:for(mt=Ke,wt=ft,ds=(Ke=ze.Ea)-(Gt=Ke&~(Mt=(ft=1<<ze.b)-1)),Pt=Ze(Ke,ze.b),Xt=ze.K,ze=ze.w+(ot>>ze.b)*Pt;ot<Nt;){for($s=Xt,Ds=ze,In=new Ct,zs=wt+Gt,er=wt+Ke;wt<zs;)ke($s[Ds++],In),pc(In,mt,wt,ft,Me,Le),wt+=ft,Le+=ft;wt<er&&(ke($s[Ds++],In),pc(In,mt,wt,ds,Me,Le),wt+=ds,Le+=ds),++ot&Mt||(ze+=Pt)}break;case 3:if(Ke==Me&&ft==Le&&0<ze.b){for(wt=Me,Ke=mt=Le+(Nt-ot)*mt-(Gt=(Nt-ot)*Ze(ze.Ea,ze.b)),ft=Me,Mt=Le,Pt=[],Gt=(ds=Gt)-1;0<=Gt;--Gt)Pt[Gt]=ft[Mt+Gt];for(Gt=ds-1;0<=Gt;--Gt)wt[Ke+Gt]=Pt[Gt];Gi(ze,ot,Nt,Me,mt,Me,Le)}else Gi(ze,ot,Nt,Ke,ft,Me,Le)}Le=ae,Me=W}Me!=W&&r(ae,W,Le,Me,Fe)}function St(I,P){var W=I.V,ae=I.Ba+I.c*I.C,Be=P-I.C;if(s(P<=I.l.o),s(16>=Be),0<Be){var Fe=I.l,Re=I.Ta,Le=I.Ua,Me=Fe.width;if(Ye(I,Be,W,ae),Be=Le=[Le],s((W=I.C)<(ae=P)),s(Fe.v<Fe.va),ae>Fe.o&&(ae=Fe.o),W<Fe.j){var ze=Fe.j-W;W=Fe.j,Be[0]+=ze*Me}if(W>=ae?W=0:(Be[0]+=4*Fe.v,Fe.ka=W-Fe.j,Fe.U=Fe.va-Fe.v,Fe.T=ae-W,W=1),W){if(Le=Le[0],11>(W=I.ca).S){var ot=W.f.RGBA,Nt=(ae=W.S,Be=Fe.U,Fe=Fe.T,ze=ot.eb,ot.A),Ke=Fe;for(ot=ot.fb+I.Ma*ot.A;0<Ke--;){var ft=Re,mt=Le,Pt=Be,wt=ze,Mt=ot;switch(ae){case od:mc(ft,mt,Pt,wt,Mt);break;case _i:Go(ft,mt,Pt,wt,Mt);break;case EA:Go(ft,mt,Pt,wt,Mt),zl(wt,Mt,0,Pt,1,0);break;case wl:Vo(ft,mt,Pt,wt,Mt);break;case bo:Vt(ft,mt,Pt,wt,Mt,1);break;case ld:Vt(ft,mt,Pt,wt,Mt,1),zl(wt,Mt,0,Pt,1,0);break;case CA:Vt(ft,mt,Pt,wt,Mt,0);break;case zc:Vt(ft,mt,Pt,wt,Mt,0),zl(wt,Mt,1,Pt,1,0);break;case Sl:sl(ft,mt,Pt,wt,Mt);break;case xc:sl(ft,mt,Pt,wt,Mt),ao(wt,Mt,Pt,1,0);break;case Gl:nl(ft,mt,Pt,wt,Mt);break;default:s(0)}Le+=Me,ot+=Nt}I.Ma+=Fe}else alert("todo:EmitRescaledRowsYUVA");s(I.Ma<=W.height)}}I.C=P,s(I.C<=I.i)}function Rt(I){var P;if(0<I.ua)return 0;for(P=0;P<I.Wb;++P){var W=I.Ya[P].G,ae=I.Ya[P].H;if(0<W[1][ae[1]+0].g||0<W[2][ae[2]+0].g||0<W[3][ae[3]+0].g)return 0}return 1}function us(I,P,W,ae,Be,Fe){if(I.Z!=0){var Re=I.qd,Le=I.rd;for(s(il[I.Z]!=null);P<W;++P)il[I.Z](Re,Le,ae,Be,ae,Be,Fe),Re=ae,Le=Be,Be+=Fe;I.qd=Re,I.rd=Le}}function As(I,P){var W=I.l.ma,ae=W.Z==0||W.Z==1?I.l.j:I.C;if(ae=I.C<ae?ae:I.C,s(P<=I.l.o),P>ae){var Be=I.l.width,Fe=W.ca,Re=W.tb+Be*ae,Le=I.V,Me=I.Ba+I.c*ae,ze=I.gc;s(I.ab==1),s(ze[0].hc==3),Si(ze[0],ae,P,Le,Me,Fe,Re),us(W,ae,P,Fe,Re,Be)}I.C=I.Ma=P}function as(I,P,W,ae,Be,Fe,Re){var Le=I.$/ae,Me=I.$%ae,ze=I.m,ot=I.s,Nt=W+I.$,Ke=Nt;Be=W+ae*Be;var ft=W+ae*Fe,mt=280+ot.ua,Pt=I.Pb?Le:16777216,wt=0<ot.ua?ot.Wa:null,Mt=ot.wc,Gt=Nt<ft?Ps(ot,Me,Le):null;s(I.C<Fe),s(ft<=Be);var ds=!1;e:for(;;){for(;ds||Nt<ft;){var Xt=0;if(Le>=Pt){var $s=Nt-W;s((Pt=I).Pb),Pt.wd=Pt.m,Pt.xd=$s,0<Pt.s.ua&&vt(Pt.s.Wa,Pt.s.vb),Pt=Le+$l}if(Me&Mt||(Gt=Ps(ot,Me,Le)),s(Gt!=null),Gt.Qb&&(P[Nt]=Gt.qb,ds=!0),!ds)if(Ne(ze),Gt.jc){Xt=ze,$s=P;var Ds=Nt,In=Gt.pd[ue(Xt)&vo-1];s(Gt.jc),256>In.g?(Ce(Xt,Xt.u+In.g),$s[Ds]=In.value,Xt=0):(Ce(Xt,Xt.u+In.g-256),s(256<=In.value),Xt=In.value),Xt==0&&(ds=!0)}else Xt=zt(Gt.G[0],Gt.H[0],ze);if(ze.h)break;if(ds||256>Xt){if(!ds)if(Gt.nd)P[Nt]=(Gt.qb|Xt<<8)>>>0;else{if(Ne(ze),ds=zt(Gt.G[1],Gt.H[1],ze),Ne(ze),$s=zt(Gt.G[2],Gt.H[2],ze),Ds=zt(Gt.G[3],Gt.H[3],ze),ze.h)break;P[Nt]=(Ds<<24|ds<<16|Xt<<8|$s)>>>0}if(ds=!1,++Nt,++Me>=ae&&(Me=0,++Le,Re!=null&&Le<=Fe&&!(Le%16)&&Re(I,Le),wt!=null))for(;Ke<Nt;)Xt=P[Ke++],wt.X[(506832829*Xt&4294967295)>>>wt.Mb]=Xt}else if(280>Xt){if(Xt=Nn(Xt-256,ze),$s=zt(Gt.G[4],Gt.H[4],ze),Ne(ze),$s=Cs(ae,$s=Nn($s,ze)),ze.h)break;if(Nt-W<$s||Be-Nt<Xt)break e;for(Ds=0;Ds<Xt;++Ds)P[Nt+Ds]=P[Nt+Ds-$s];for(Nt+=Xt,Me+=Xt;Me>=ae;)Me-=ae,++Le,Re!=null&&Le<=Fe&&!(Le%16)&&Re(I,Le);if(s(Nt<=Be),Me&Mt&&(Gt=Ps(ot,Me,Le)),wt!=null)for(;Ke<Nt;)Xt=P[Ke++],wt.X[(506832829*Xt&4294967295)>>>wt.Mb]=Xt}else{if(!(Xt<mt))break e;for(ds=Xt-280,s(wt!=null);Ke<Nt;)Xt=P[Ke++],wt.X[(506832829*Xt&4294967295)>>>wt.Mb]=Xt;Xt=Nt,s(!(ds>>>($s=wt).Xa)),P[Xt]=$s.X[ds],ds=!0}ds||s(ze.h==pe(ze))}if(I.Pb&&ze.h&&Nt<Be)s(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&vt(I.s.vb,I.s.Wa);else{if(ze.h)break e;Re?.(I,Le>Fe?Fe:Le),I.a=0,I.$=Nt-W}return 1}return I.a=3,0}function bs(I){s(I!=null),I.vc=null,I.yc=null,I.Ya=null;var P=I.Wa;P!=null&&(P.X=null),I.vb=null,s(I!=null)}function cs(){var I=new Cn;return I==null?null:(I.a=0,I.xb=Au,vs("Predictor","VP8LPredictors"),vs("Predictor","VP8LPredictors_C"),vs("PredictorAdd","VP8LPredictorsAdd"),vs("PredictorAdd","VP8LPredictorsAdd_C"),Ea=$e,pc=it,mc=Jt,Go=Qt,sl=ss,nl=dt,Vo=qt,J.VP8LMapColor32b=wi,J.VP8LMapColor8b=lr,I)}function Us(I,P,W,ae,Be){var Fe=1,Re=[I],Le=[P],Me=ae.m,ze=ae.s,ot=null,Nt=0;e:for(;;){if(W)for(;Fe&&ge(Me,1);){var Ke=Re,ft=Le,mt=ae,Pt=1,wt=mt.m,Mt=mt.gc[mt.ab],Gt=ge(wt,2);if(mt.Oc&1<<Gt)Fe=0;else{switch(mt.Oc|=1<<Gt,Mt.hc=Gt,Mt.Ea=Ke[0],Mt.nc=ft[0],Mt.K=[null],++mt.ab,s(4>=mt.ab),Gt){case 0:case 1:Mt.b=ge(wt,3)+2,Pt=Us(Ze(Mt.Ea,Mt.b),Ze(Mt.nc,Mt.b),0,mt,Mt.K),Mt.K=Mt.K[0];break;case 3:var ds,Xt=ge(wt,8)+1,$s=16<Xt?0:4<Xt?1:2<Xt?2:3;if(Ke[0]=Ze(Mt.Ea,$s),Mt.b=$s,ds=Pt=Us(Xt,1,0,mt,Mt.K)){var Ds,In=Xt,zs=Mt,er=1<<(8>>zs.b),aa=c(er);if(aa==null)ds=0;else{var Ln=zs.K[0],Ot=zs.w;for(aa[0]=zs.K[0][0],Ds=1;Ds<1*In;++Ds)aa[Ds]=Ht(Ln[Ot+Ds],aa[Ds-1]);for(;Ds<4*er;++Ds)aa[Ds]=0;zs.K[0]=null,zs.K[0]=aa,ds=1}}Pt=ds;break;case 2:break;default:s(0)}Fe=Pt}}if(Re=Re[0],Le=Le[0],Fe&&ge(Me,1)&&!(Fe=1<=(Nt=ge(Me,4))&&11>=Nt)){ae.a=3;break e}var ws;if(ws=Fe)t:{var xa,xn,Sn,Pr=ae,Va=Re,Qa=Le,kr=Nt,$a=W,Pi=Pr.m,qa=Pr.s,Rn=[null],cr=1,ia=0,Ur=So[kr];s:for(;;){if($a&&ge(Pi,1)){var Wa=ge(Pi,3)+2,va=Ze(Va,Wa),Ar=Ze(Qa,Wa),Ma=va*Ar;if(!Us(va,Ar,0,Pr,Rn))break s;for(Rn=Rn[0],qa.xc=Wa,xa=0;xa<Ma;++xa){var Hr=Rn[xa]>>8&65535;Rn[xa]=Hr,Hr>=cr&&(cr=Hr+1)}}if(Pi.h)break s;for(xn=0;5>xn;++xn){var Ya=vc[xn];!xn&&0<kr&&(Ya+=1<<kr),ia<Ya&&(ia=Ya)}var Xa=p(cr*Ur,Ae),Wr=cr,vr=p(Wr,oe);if(vr==null)var ki=null;else s(65536>=Wr),ki=vr;var Fa=c(ia);if(ki==null||Fa==null||Xa==null){Pr.a=1;break s}var pn=Xa;for(xa=Sn=0;xa<cr;++xa){var mn=ki[xa],Nr=mn.G,to=mn.H,lo=0,Wi=1,ba=0;for(xn=0;5>xn;++xn){Ya=vc[xn],Nr[xn]=pn,to[xn]=Sn,!xn&&0<kr&&(Ya+=1<<kr);r:{var Zl,cl=Ya,Wc=Pr,Yr=Fa,pd=pn,du=Sn,IA=0,Wo=Wc.m,uu=ge(Wo,1);if(o(Yr,0,0,cl),uu){var md=ge(Wo,1)+1,gd=ge(Wo,1),RA=ge(Wo,gd==0?1:8);Yr[RA]=1,md==2&&(Yr[RA=ge(Wo,8)]=1);var ai=1}else{var da=c(19),OA=ge(Wo,4)+4;if(19<OA){Wc.a=3;var ec=0;break r}for(Zl=0;Zl<OA;++Zl)da[Vl[Zl]]=ge(Wo,3);var Yc=void 0,mi=void 0,Co=Wc,yd=da,Xc=cl,xd=Yr,vd=0,Nl=Co.m,hu=8,fu=p(128,Ae);n:for(;ie(fu,0,7,yd,19);){if(ge(Nl,1)){var dh=2+2*ge(Nl,3);if((Yc=2+ge(Nl,dh))>Xc)break n}else Yc=Xc;for(mi=0;mi<Xc&&Yc--;){Ne(Nl);var pu=fu[0+(127&ue(Nl))];Ce(Nl,Nl.u+pu.g);var Cl=pu.value;if(16>Cl)xd[mi++]=Cl,Cl!=0&&(hu=Cl);else{var uh=Cl==16,bd=Cl-16,mu=Gc[bd],ii=ge(Nl,jo[bd])+mu;if(mi+ii>Xc)break n;for(var Jc=uh?hu:0;0<ii--;)xd[mi++]=Jc}}vd=1;break n}vd||(Co.a=3),ai=vd}(ai=ai&&!Wo.h)&&(IA=ie(pd,du,8,Yr,cl)),ai&&IA!=0?ec=IA:(Wc.a=3,ec=0)}if(ec==0)break s;if(Wi&&cd[xn]==1&&(Wi=pn[Sn].g==0),lo+=pn[Sn].g,Sn+=ec,3>=xn){var jc,jd=Fa[0];for(jc=1;jc<Ya;++jc)Fa[jc]>jd&&(jd=Fa[jc]);ba+=jd}}if(mn.nd=Wi,mn.Qb=0,Wi&&(mn.qb=(Nr[3][to[3]+0].value<<24|Nr[1][to[1]+0].value<<16|Nr[2][to[2]+0].value)>>>0,lo==0&&256>Nr[0][to[0]+0].value&&(mn.Qb=1,mn.qb+=Nr[0][to[0]+0].value<<8)),mn.jc=!mn.Qb&&6>ba,mn.jc){var Zc,Eo=mn;for(Zc=0;Zc<vo;++Zc){var El=Zc,Tl=Eo.pd[El],wd=Eo.G[0][Eo.H[0]+El];256<=wd.value?(Tl.g=wd.g+256,Tl.value=wd.value):(Tl.g=0,Tl.value=0,El>>=os(wd,8,Tl),El>>=os(Eo.G[1][Eo.H[1]+El],16,Tl),El>>=os(Eo.G[2][Eo.H[2]+El],0,Tl),os(Eo.G[3][Eo.H[3]+El],24,Tl))}}}qa.vc=Rn,qa.Wb=cr,qa.Ya=ki,qa.yc=Xa,ws=1;break t}ws=0}if(!(Fe=ws)){ae.a=3;break e}if(0<Nt){if(ze.ua=1<<Nt,!Se(ze.Wa,Nt)){ae.a=1,Fe=0;break e}}else ze.ua=0;var Sd=ae,wc=Re,hh=Le,eA=Sd.s,tA=eA.xc;if(Sd.c=wc,Sd.i=hh,eA.md=Ze(wc,tA),eA.wc=tA==0?-1:(1<<tA)-1,W){ae.xb=ql;break e}if((ot=c(Re*Le))==null){ae.a=1,Fe=0;break e}Fe=(Fe=as(ae,ot,0,Re,Le,Le,null))&&!Me.h;break e}return Fe?(Be!=null?Be[0]=ot:(s(ot==null),s(W)),ae.$=0,W||bs(ze)):bs(ze),Fe}function an(I,P){var W=I.c*I.i,ae=W+P+16*P;return s(I.c<=P),I.V=c(ae),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+W+P,1)}function Mr(I,P){var W=I.C,ae=P-W,Be=I.V,Fe=I.Ba+I.c*W;for(s(P<=I.l.o);0<ae;){var Re=16<ae?16:ae,Le=I.l.ma,Me=I.l.width,ze=Me*Re,ot=Le.ca,Nt=Le.tb+Me*W,Ke=I.Ta,ft=I.Ua;Ye(I,Re,Be,Fe),io(Ke,ft,ot,Nt,ze),us(Le,W,W+Re,ot,Nt,Me),ae-=Re,Be+=Re*I.c,W+=Re}s(W==P),I.C=I.Ma=P}function Un(){this.ub=this.yd=this.td=this.Rb=0}function Ks(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pn(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function nr(){this.Yb=(function(){var I=[];return(function P(W,ae,Be){for(var Fe=Be[ae],Re=0;Re<Fe&&(W.push(Be.length>ae+1?[]:0),!(Be.length<ae+1));Re++)P(W[Re],ae+1,Be)})(I,0,[3,11]),I})()}function Yn(){this.jb=c(3),this.Wc=f([4,8],nr),this.Xc=f([4,17],nr)}function dn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function vn(){this.ld=this.La=this.dd=this.tc=0}function jn(){this.Na=this.la=0}function Jn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zr(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ir(){this.uc=this.M=this.Nb=0,this.wa=Array(new vn),this.Y=0,this.ya=Array(new Zr),this.aa=0,this.l=new ts}function Vn(){this.y=c(16),this.f=c(8),this.ea=c(8)}function Ts(){this.cb=this.a=0,this.sc="",this.m=new Z,this.Od=new Un,this.Kc=new Ks,this.ed=new dn,this.Qa=new Pn,this.Ic=this.$c=this.Aa=0,this.D=new Ir,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,Z),this.ia=0,this.pb=p(4,Jn),this.Pa=new Yn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vn),this.Hd=0,this.rb=Array(new jn),this.sb=0,this.wa=Array(new vn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zr),this.L=this.aa=0,this.gd=f([4,2],vn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ls(I,P){return 0>I?0:I>P?P:I}function ts(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qs(){var I=new Ts;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,oo||(oo=lt)),I}function ls(I,P,W){return I.a==0&&(I.a=P,I.sc=W,I.cb=0),0}function be(I,P,W){return 3<=W&&I[P+0]==157&&I[P+1]==1&&I[P+2]==42}function xe(I,P){if(I==null)return 0;if(I.a=0,I.sc="OK",P==null)return ls(I,2,"null VP8Io passed to VP8GetHeaders()");var W=P.data,ae=P.w,Be=P.ha;if(4>Be)return ls(I,7,"Truncated header.");var Fe=W[ae+0]|W[ae+1]<<8|W[ae+2]<<16,Re=I.Od;if(Re.Rb=!(1&Fe),Re.td=Fe>>1&7,Re.yd=Fe>>4&1,Re.ub=Fe>>5,3<Re.td)return ls(I,3,"Incorrect keyframe parameters.");if(!Re.yd)return ls(I,4,"Frame not displayable.");ae+=3,Be-=3;var Le=I.Kc;if(Re.Rb){if(7>Be)return ls(I,7,"cannot parse picture header");if(!be(W,ae,Be))return ls(I,3,"Bad code word");Le.c=16383&(W[ae+4]<<8|W[ae+3]),Le.Td=W[ae+4]>>6,Le.i=16383&(W[ae+6]<<8|W[ae+5]),Le.Ud=W[ae+6]>>6,ae+=7,Be-=7,I.za=Le.c+15>>4,I.Ub=Le.i+15>>4,P.width=Le.c,P.height=Le.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,o((Fe=I.Pa).jb,0,255,Fe.jb.length),s((Fe=I.Qa)!=null),Fe.Cb=0,Fe.Bb=0,Fe.Fb=1,o(Fe.Zb,0,0,Fe.Zb.length),o(Fe.Lb,0,0,Fe.Lb)}if(Re.ub>Be)return ls(I,7,"bad partition length");ne(Fe=I.m,W,ae,Re.ub),ae+=Re.ub,Be-=Re.ub,Re.Rb&&(Le.Ld=we(Fe),Le.Kd=we(Fe)),Le=I.Qa;var Me,ze=I.Pa;if(s(Fe!=null),s(Le!=null),Le.Cb=we(Fe),Le.Cb){if(Le.Bb=we(Fe),we(Fe)){for(Le.Fb=we(Fe),Me=0;4>Me;++Me)Le.Zb[Me]=we(Fe)?se(Fe,7):0;for(Me=0;4>Me;++Me)Le.Lb[Me]=we(Fe)?se(Fe,6):0}if(Le.Bb)for(Me=0;3>Me;++Me)ze.jb[Me]=we(Fe)?re(Fe,8):255}else Le.Bb=0;if(Fe.Ka)return ls(I,3,"cannot parse segment header");if((Le=I.ed).zd=we(Fe),Le.Tb=re(Fe,6),Le.wb=re(Fe,3),Le.Pc=we(Fe),Le.Pc&&we(Fe)){for(ze=0;4>ze;++ze)we(Fe)&&(Le.vd[ze]=se(Fe,6));for(ze=0;4>ze;++ze)we(Fe)&&(Le.od[ze]=se(Fe,6))}if(I.L=Le.Tb==0?0:Le.zd?1:2,Fe.Ka)return ls(I,3,"cannot parse filter header");var ot=Be;if(Be=Me=ae,ae=Me+ot,Le=ot,I.Xb=(1<<re(I.m,2))-1,ot<3*(ze=I.Xb))W=7;else{for(Me+=3*ze,Le-=3*ze,ot=0;ot<ze;++ot){var Nt=W[Be+0]|W[Be+1]<<8|W[Be+2]<<16;Nt>Le&&(Nt=Le),ne(I.Jc[+ot],W,Me,Nt),Me+=Nt,Le-=Nt,Be+=3}ne(I.Jc[+ze],W,Me,Le),W=Me<ae?0:5}if(W!=0)return ls(I,W,"cannot parse partitions");for(W=re(Me=I.m,7),Be=we(Me)?se(Me,4):0,ae=we(Me)?se(Me,4):0,Le=we(Me)?se(Me,4):0,ze=we(Me)?se(Me,4):0,Me=we(Me)?se(Me,4):0,ot=I.Qa,Nt=0;4>Nt;++Nt){if(ot.Cb){var Ke=ot.Zb[Nt];ot.Fb||(Ke+=W)}else{if(0<Nt){I.pb[Nt]=I.pb[0];continue}Ke=W}var ft=I.pb[Nt];ft.Sc[0]=Bo[Ls(Ke+Be,127)],ft.Sc[1]=$i[Ls(Ke+0,127)],ft.Eb[0]=2*Bo[Ls(Ke+ae,127)],ft.Eb[1]=101581*$i[Ls(Ke+Le,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=Bo[Ls(Ke+ze,117)],ft.Qc[1]=$i[Ls(Ke+Me,127)],ft.lc=Ke+Me}if(!Re.Rb)return ls(I,4,"Not a key frame.");for(we(Fe),Re=I.Pa,W=0;4>W;++W){for(Be=0;8>Be;++Be)for(ae=0;3>ae;++ae)for(Le=0;11>Le;++Le)ze=Te(Fe,ra[W][Be][ae][Le])?re(Fe,8):ch[W][Be][ae][Le],Re.Wc[W][Be].Yb[ae][Le]=ze;for(Be=0;17>Be;++Be)Re.Xc[W][Be]=Re.Wc[W][ar[Be]]}return I.kc=we(Fe),I.kc&&(I.Bd=re(Fe,8)),I.cb=1}function lt(I,P,W,ae,Be,Fe,Re){var Le=P[Be].Yb[W];for(W=0;16>Be;++Be){if(!Te(I,Le[W+0]))return Be;for(;!Te(I,Le[W+1]);)if(Le=P[++Be].Yb[0],W=0,Be==16)return 16;var Me=P[Be+1].Yb;if(Te(I,Le[W+2])){var ze=I,ot=0;if(Te(ze,(Ke=Le)[(Nt=W)+3]))if(Te(ze,Ke[Nt+6])){for(Le=0,Nt=2*(ot=Te(ze,Ke[Nt+8]))+(Ke=Te(ze,Ke[Nt+9+ot])),ot=0,Ke=lh[Nt];Ke[Le];++Le)ot+=ot+Te(ze,Ke[Le]);ot+=3+(8<<Nt)}else Te(ze,Ke[Nt+7])?(ot=7+2*Te(ze,165),ot+=Te(ze,145)):ot=5+Te(ze,159);else ot=Te(ze,Ke[Nt+4])?3+Te(ze,Ke[Nt+5]):2;Le=Me[2]}else ot=1,Le=Me[1];Me=Re+cu[Be],0>(ze=I).b&&ye(ze);var Nt,Ke=ze.b,ft=(Nt=ze.Ca>>1)-(ze.I>>Ke)>>31;--ze.b,ze.Ca+=ft,ze.Ca|=1,ze.I-=(Nt+1&ft)<<Ke,Fe[Me]=((ot^ft)-ft)*ae[(0<Be)+0]}return 16}function Je(I){var P=I.rb[I.sb-1];P.la=0,P.Na=0,o(I.zc,0,0,I.zc.length),I.ja=0}function fs(I,P,W,ae,Be){Be=I[P+W+32*ae]+(Be>>3),I[P+W+32*ae]=-256&Be?0>Be?0:255:Be}function wn(I,P,W,ae,Be,Fe){fs(I,P,0,W,ae+Be),fs(I,P,1,W,ae+Fe),fs(I,P,2,W,ae-Fe),fs(I,P,3,W,ae-Be)}function zn(I){return(20091*I>>16)+I}function di(I,P,W,ae){var Be,Fe=0,Re=c(16);for(Be=0;4>Be;++Be){var Le=I[P+0]+I[P+8],Me=I[P+0]-I[P+8],ze=(35468*I[P+4]>>16)-zn(I[P+12]),ot=zn(I[P+4])+(35468*I[P+12]>>16);Re[Fe+0]=Le+ot,Re[Fe+1]=Me+ze,Re[Fe+2]=Me-ze,Re[Fe+3]=Le-ot,Fe+=4,P++}for(Be=Fe=0;4>Be;++Be)Le=(I=Re[Fe+0]+4)+Re[Fe+8],Me=I-Re[Fe+8],ze=(35468*Re[Fe+4]>>16)-zn(Re[Fe+12]),fs(W,ae,0,0,Le+(ot=zn(Re[Fe+4])+(35468*Re[Fe+12]>>16))),fs(W,ae,1,0,Me+ze),fs(W,ae,2,0,Me-ze),fs(W,ae,3,0,Le-ot),Fe++,ae+=32}function Oi(I,P,W,ae){var Be=I[P+0]+4,Fe=35468*I[P+4]>>16,Re=zn(I[P+4]),Le=35468*I[P+1]>>16;wn(W,ae,0,Be+Re,I=zn(I[P+1]),Le),wn(W,ae,1,Be+Fe,I,Le),wn(W,ae,2,Be-Fe,I,Le),wn(W,ae,3,Be-Re,I,Le)}function ka(I,P,W,ae,Be){di(I,P,W,ae),Be&&di(I,P+16,W,ae+4)}function Rr(I,P,W,ae){jl(I,P+0,W,ae,1),jl(I,P+32,W,ae+128,1)}function Ha(I,P,W,ae){var Be;for(I=I[P+0]+4,Be=0;4>Be;++Be)for(P=0;4>P;++P)fs(W,ae,P,Be,I)}function Na(I,P,W,ae){I[P+0]&&Br(I,P+0,W,ae),I[P+16]&&Br(I,P+16,W,ae+4),I[P+32]&&Br(I,P+32,W,ae+128),I[P+48]&&Br(I,P+48,W,ae+128+4)}function $r(I,P,W,ae){var Be,Fe=c(16);for(Be=0;4>Be;++Be){var Re=I[P+0+Be]+I[P+12+Be],Le=I[P+4+Be]+I[P+8+Be],Me=I[P+4+Be]-I[P+8+Be],ze=I[P+0+Be]-I[P+12+Be];Fe[0+Be]=Re+Le,Fe[8+Be]=Re-Le,Fe[4+Be]=ze+Me,Fe[12+Be]=ze-Me}for(Be=0;4>Be;++Be)Re=(I=Fe[0+4*Be]+3)+Fe[3+4*Be],Le=Fe[1+4*Be]+Fe[2+4*Be],Me=Fe[1+4*Be]-Fe[2+4*Be],ze=I-Fe[3+4*Be],W[ae+0]=Re+Le>>3,W[ae+16]=ze+Me>>3,W[ae+32]=Re-Le>>3,W[ae+48]=ze-Me>>3,ae+=64}function Oa(I,P,W){var ae,Be=P-32,Fe=Mi,Re=255-I[Be-1];for(ae=0;ae<W;++ae){var Le,Me=Fe,ze=Re+I[P-1];for(Le=0;Le<W;++Le)I[P+Le]=Me[ze+I[Be+Le]];P+=32}}function vi(I,P){Oa(I,P,4)}function Ui(I,P){Oa(I,P,8)}function bi(I,P){Oa(I,P,16)}function ui(I,P){var W;for(W=0;16>W;++W)r(I,P+32*W,I,P-32,16)}function hi(I,P){var W;for(W=16;0<W;--W)o(I,P,I[P-1],16),P+=32}function tn(I,P,W){var ae;for(ae=0;16>ae;++ae)o(P,W+32*ae,I,16)}function sn(I,P){var W,ae=16;for(W=0;16>W;++W)ae+=I[P-1+32*W]+I[P+W-32];tn(ae>>5,I,P)}function ks(I,P){var W,ae=8;for(W=0;16>W;++W)ae+=I[P-1+32*W];tn(ae>>4,I,P)}function qs(I,P){var W,ae=8;for(W=0;16>W;++W)ae+=I[P+W-32];tn(ae>>4,I,P)}function Js(I,P){tn(128,I,P)}function ms(I,P,W){return I+2*P+W+2>>2}function $n(I,P){var W,ae=P-32;for(ae=new Uint8Array([ms(I[ae-1],I[ae+0],I[ae+1]),ms(I[ae+0],I[ae+1],I[ae+2]),ms(I[ae+1],I[ae+2],I[ae+3]),ms(I[ae+2],I[ae+3],I[ae+4])]),W=0;4>W;++W)r(I,P+32*W,ae,0,ae.length)}function qr(I,P){var W=I[P-1],ae=I[P-1+32],Be=I[P-1+64],Fe=I[P-1+96];qe(I,P+0,16843009*ms(I[P-1-32],W,ae)),qe(I,P+32,16843009*ms(W,ae,Be)),qe(I,P+64,16843009*ms(ae,Be,Fe)),qe(I,P+96,16843009*ms(Be,Fe,Fe))}function Ka(I,P){var W,ae=4;for(W=0;4>W;++W)ae+=I[P+W-32]+I[P-1+32*W];for(ae>>=3,W=0;4>W;++W)o(I,P+32*W,ae,4)}function Ca(I,P){var W=I[P-1+0],ae=I[P-1+32],Be=I[P-1+64],Fe=I[P-1-32],Re=I[P+0-32],Le=I[P+1-32],Me=I[P+2-32],ze=I[P+3-32];I[P+0+96]=ms(ae,Be,I[P-1+96]),I[P+1+96]=I[P+0+64]=ms(W,ae,Be),I[P+2+96]=I[P+1+64]=I[P+0+32]=ms(Fe,W,ae),I[P+3+96]=I[P+2+64]=I[P+1+32]=I[P+0+0]=ms(Re,Fe,W),I[P+3+64]=I[P+2+32]=I[P+1+0]=ms(Le,Re,Fe),I[P+3+32]=I[P+2+0]=ms(Me,Le,Re),I[P+3+0]=ms(ze,Me,Le)}function on(I,P){var W=I[P+1-32],ae=I[P+2-32],Be=I[P+3-32],Fe=I[P+4-32],Re=I[P+5-32],Le=I[P+6-32],Me=I[P+7-32];I[P+0+0]=ms(I[P+0-32],W,ae),I[P+1+0]=I[P+0+32]=ms(W,ae,Be),I[P+2+0]=I[P+1+32]=I[P+0+64]=ms(ae,Be,Fe),I[P+3+0]=I[P+2+32]=I[P+1+64]=I[P+0+96]=ms(Be,Fe,Re),I[P+3+32]=I[P+2+64]=I[P+1+96]=ms(Fe,Re,Le),I[P+3+64]=I[P+2+96]=ms(Re,Le,Me),I[P+3+96]=ms(Le,Me,Me)}function Bn(I,P){var W=I[P-1+0],ae=I[P-1+32],Be=I[P-1+64],Fe=I[P-1-32],Re=I[P+0-32],Le=I[P+1-32],Me=I[P+2-32],ze=I[P+3-32];I[P+0+0]=I[P+1+64]=Fe+Re+1>>1,I[P+1+0]=I[P+2+64]=Re+Le+1>>1,I[P+2+0]=I[P+3+64]=Le+Me+1>>1,I[P+3+0]=Me+ze+1>>1,I[P+0+96]=ms(Be,ae,W),I[P+0+64]=ms(ae,W,Fe),I[P+0+32]=I[P+1+96]=ms(W,Fe,Re),I[P+1+32]=I[P+2+96]=ms(Fe,Re,Le),I[P+2+32]=I[P+3+96]=ms(Re,Le,Me),I[P+3+32]=ms(Le,Me,ze)}function Fn(I,P){var W=I[P+0-32],ae=I[P+1-32],Be=I[P+2-32],Fe=I[P+3-32],Re=I[P+4-32],Le=I[P+5-32],Me=I[P+6-32],ze=I[P+7-32];I[P+0+0]=W+ae+1>>1,I[P+1+0]=I[P+0+64]=ae+Be+1>>1,I[P+2+0]=I[P+1+64]=Be+Fe+1>>1,I[P+3+0]=I[P+2+64]=Fe+Re+1>>1,I[P+0+32]=ms(W,ae,Be),I[P+1+32]=I[P+0+96]=ms(ae,Be,Fe),I[P+2+32]=I[P+1+96]=ms(Be,Fe,Re),I[P+3+32]=I[P+2+96]=ms(Fe,Re,Le),I[P+3+64]=ms(Re,Le,Me),I[P+3+96]=ms(Le,Me,ze)}function Zn(I,P){var W=I[P-1+0],ae=I[P-1+32],Be=I[P-1+64],Fe=I[P-1+96];I[P+0+0]=W+ae+1>>1,I[P+2+0]=I[P+0+32]=ae+Be+1>>1,I[P+2+32]=I[P+0+64]=Be+Fe+1>>1,I[P+1+0]=ms(W,ae,Be),I[P+3+0]=I[P+1+32]=ms(ae,Be,Fe),I[P+3+32]=I[P+1+64]=ms(Be,Fe,Fe),I[P+3+64]=I[P+2+64]=I[P+0+96]=I[P+1+96]=I[P+2+96]=I[P+3+96]=Fe}function pa(I,P){var W=I[P-1+0],ae=I[P-1+32],Be=I[P-1+64],Fe=I[P-1+96],Re=I[P-1-32],Le=I[P+0-32],Me=I[P+1-32],ze=I[P+2-32];I[P+0+0]=I[P+2+32]=W+Re+1>>1,I[P+0+32]=I[P+2+64]=ae+W+1>>1,I[P+0+64]=I[P+2+96]=Be+ae+1>>1,I[P+0+96]=Fe+Be+1>>1,I[P+3+0]=ms(Le,Me,ze),I[P+2+0]=ms(Re,Le,Me),I[P+1+0]=I[P+3+32]=ms(W,Re,Le),I[P+1+32]=I[P+3+64]=ms(ae,W,Re),I[P+1+64]=I[P+3+96]=ms(Be,ae,W),I[P+1+96]=ms(Fe,Be,ae)}function ma(I,P){var W;for(W=0;8>W;++W)r(I,P+32*W,I,P-32,8)}function x(I,P){var W;for(W=0;8>W;++W)o(I,P,I[P-1],8),P+=32}function j(I,P,W){var ae;for(ae=0;8>ae;++ae)o(P,W+32*ae,I,8)}function u(I,P){var W,ae=8;for(W=0;8>W;++W)ae+=I[P+W-32]+I[P-1+32*W];j(ae>>4,I,P)}function b(I,P){var W,ae=4;for(W=0;8>W;++W)ae+=I[P+W-32];j(ae>>3,I,P)}function S(I,P){var W,ae=4;for(W=0;8>W;++W)ae+=I[P-1+32*W];j(ae>>3,I,P)}function R(I,P){j(128,I,P)}function B(I,P,W){var ae=I[P-W],Be=I[P+0],Fe=3*(Be-ae)+al[1020+I[P-2*W]-I[P+W]],Re=NA[112+(Fe+4>>3)];I[P-W]=Mi[255+ae+NA[112+(Fe+3>>3)]],I[P+0]=Mi[255+Be-Re]}function D(I,P,W,ae){var Be=I[P+0],Fe=I[P+W];return Bi[255+I[P-2*W]-I[P-W]]>ae||Bi[255+Fe-Be]>ae}function Q(I,P,W,ae){return 4*Bi[255+I[P-W]-I[P+0]]+Bi[255+I[P-2*W]-I[P+W]]<=ae}function $(I,P,W,ae,Be){var Fe=I[P-3*W],Re=I[P-2*W],Le=I[P-W],Me=I[P+0],ze=I[P+W],ot=I[P+2*W],Nt=I[P+3*W];return 4*Bi[255+Le-Me]+Bi[255+Re-ze]>ae?0:Bi[255+I[P-4*W]-Fe]<=Be&&Bi[255+Fe-Re]<=Be&&Bi[255+Re-Le]<=Be&&Bi[255+Nt-ot]<=Be&&Bi[255+ot-ze]<=Be&&Bi[255+ze-Me]<=Be}function te(I,P,W,ae){var Be=2*ae+1;for(ae=0;16>ae;++ae)Q(I,P+ae,W,Be)&&B(I,P+ae,W)}function Ue(I,P,W,ae){var Be=2*ae+1;for(ae=0;16>ae;++ae)Q(I,P+ae*W,1,Be)&&B(I,P+ae*W,1)}function He(I,P,W,ae){var Be;for(Be=3;0<Be;--Be)te(I,P+=4*W,W,ae)}function st(I,P,W,ae){var Be;for(Be=3;0<Be;--Be)Ue(I,P+=4,W,ae)}function Bt(I,P,W,ae,Be,Fe,Re,Le){for(Fe=2*Fe+1;0<Be--;){if($(I,P,W,Fe,Re))if(D(I,P,W,Le))B(I,P,W);else{var Me=I,ze=P,ot=W,Nt=Me[ze-2*ot],Ke=Me[ze-ot],ft=Me[ze+0],mt=Me[ze+ot],Pt=Me[ze+2*ot],wt=27*(Gt=al[1020+3*(ft-Ke)+al[1020+Nt-mt]])+63>>7,Mt=18*Gt+63>>7,Gt=9*Gt+63>>7;Me[ze-3*ot]=Mi[255+Me[ze-3*ot]+Gt],Me[ze-2*ot]=Mi[255+Nt+Mt],Me[ze-ot]=Mi[255+Ke+wt],Me[ze+0]=Mi[255+ft-wt],Me[ze+ot]=Mi[255+mt-Mt],Me[ze+2*ot]=Mi[255+Pt-Gt]}P+=ae}}function Lt(I,P,W,ae,Be,Fe,Re,Le){for(Fe=2*Fe+1;0<Be--;){if($(I,P,W,Fe,Re))if(D(I,P,W,Le))B(I,P,W);else{var Me=I,ze=P,ot=W,Nt=Me[ze-ot],Ke=Me[ze+0],ft=Me[ze+ot],mt=NA[112+(4+(Pt=3*(Ke-Nt))>>3)],Pt=NA[112+(Pt+3>>3)],wt=mt+1>>1;Me[ze-2*ot]=Mi[255+Me[ze-2*ot]+wt],Me[ze-ot]=Mi[255+Nt+Pt],Me[ze+0]=Mi[255+Ke-mt],Me[ze+ot]=Mi[255+ft-wt]}P+=ae}}function $t(I,P,W,ae,Be,Fe){Bt(I,P,W,1,16,ae,Be,Fe)}function gs(I,P,W,ae,Be,Fe){Bt(I,P,1,W,16,ae,Be,Fe)}function nn(I,P,W,ae,Be,Fe){var Re;for(Re=3;0<Re;--Re)Lt(I,P+=4*W,W,1,16,ae,Be,Fe)}function z(I,P,W,ae,Be,Fe){var Re;for(Re=3;0<Re;--Re)Lt(I,P+=4,1,W,16,ae,Be,Fe)}function me(I,P,W,ae,Be,Fe,Re,Le){Bt(I,P,Be,1,8,Fe,Re,Le),Bt(W,ae,Be,1,8,Fe,Re,Le)}function Qe(I,P,W,ae,Be,Fe,Re,Le){Bt(I,P,1,Be,8,Fe,Re,Le),Bt(W,ae,1,Be,8,Fe,Re,Le)}function We(I,P,W,ae,Be,Fe,Re,Le){Lt(I,P+4*Be,Be,1,8,Fe,Re,Le),Lt(W,ae+4*Be,Be,1,8,Fe,Re,Le)}function ut(I,P,W,ae,Be,Fe,Re,Le){Lt(I,P+4,1,Be,8,Fe,Re,Le),Lt(W,ae+4,1,Be,8,Fe,Re,Le)}function _t(){this.ba=new ys,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function es(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gs(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rn(){this.ua=0,this.Wa=new ht,this.vb=new ht,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new oe,this.yc=new Ae}function Cn(){this.xb=this.a=0,this.l=new ts,this.ca=new ys,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new fe,this.Pb=0,this.wd=new fe,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rn,this.ab=0,this.gc=p(4,Gs),this.Oc=0}function _n(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ts,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(I,P,W,ae,Be,Fe,Re){for(I=I==null?0:I[P+0],P=0;P<Re;++P)Be[Fe+P]=I+W[ae+P]&255,I=Be[Fe+P]}function ga(I,P,W,ae,Be,Fe,Re){var Le;if(I==null)yr(null,null,W,ae,Be,Fe,Re);else for(Le=0;Le<Re;++Le)Be[Fe+Le]=I[P+Le]+W[ae+Le]&255}function Ua(I,P,W,ae,Be,Fe,Re){if(I==null)yr(null,null,W,ae,Be,Fe,Re);else{var Le,Me=I[P+0],ze=Me,ot=Me;for(Le=0;Le<Re;++Le)ze=ot+(Me=I[P+Le])-ze,ot=W[ae+Le]+(-256&ze?0>ze?0:255:ze)&255,ze=Me,Be[Fe+Le]=ot}}function _r(I,P,W,ae){var Be=P.width,Fe=P.o;if(s(I!=null&&P!=null),0>W||0>=ae||W+ae>Fe)return null;if(!I.Cc){if(I.ga==null){var Re;if(I.ga=new _n,(Re=I.ga==null)||(Re=P.width*P.o,s(I.Gb.length==0),I.Gb=c(Re),I.Uc=0,I.Gb==null?Re=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,Re=1),Re=!Re),!Re){Re=I.ga;var Le=I.Fa,Me=I.P,ze=I.qc,ot=I.mb,Nt=I.nb,Ke=Me+1,ft=ze-1,mt=Re.l;if(s(Le!=null&&ot!=null&&P!=null),il[0]=null,il[1]=yr,il[2]=ga,il[3]=Ua,Re.ca=ot,Re.tb=Nt,Re.c=P.width,Re.i=P.height,s(0<Re.c&&0<Re.i),1>=ze)P=0;else if(Re.$a=3&Le[Me+0],Re.Z=Le[Me+0]>>2&3,Re.Lc=Le[Me+0]>>4&3,Me=Le[Me+0]>>6&3,0>Re.$a||1<Re.$a||4<=Re.Z||1<Re.Lc||Me)P=0;else if(mt.put=is,mt.ac=yn,mt.bc=Fs,mt.ma=Re,mt.width=P.width,mt.height=P.height,mt.Da=P.Da,mt.v=P.v,mt.va=P.va,mt.j=P.j,mt.o=P.o,Re.$a)e:{s(Re.$a==1),P=cs();t:for(;;){if(P==null){P=0;break e}if(s(Re!=null),Re.mc=P,P.c=Re.c,P.i=Re.i,P.l=Re.l,P.l.ma=Re,P.l.width=Re.c,P.l.height=Re.i,P.a=0,je(P.m,Le,Ke,ft),!Us(Re.c,Re.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&Rt(P.s)?(Re.ic=1,Le=P.c*P.i,P.Ta=null,P.Ua=0,P.V=c(Le),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(Re.ic=0,P=an(P,Re.c)),!P))break t;P=1;break e}Re.mc=null,P=0}else P=ft>=Re.c*Re.i;Re=!P}if(Re)return null;I.ga.Lc!=1?I.Ga=0:ae=Fe-W}s(I.ga!=null),s(W+ae<=Fe);e:{if(P=(Le=I.ga).c,Fe=Le.l.o,Le.$a==0){if(Ke=I.rc,ft=I.Vc,mt=I.Fa,Me=I.P+1+W*P,ze=I.mb,ot=I.nb+W*P,s(Me<=I.P+I.qc),Le.Z!=0)for(s(il[Le.Z]!=null),Re=0;Re<ae;++Re)il[Le.Z](Ke,ft,mt,Me,ze,ot,P),Ke=ze,ft=ot,ot+=P,Me+=P;else for(Re=0;Re<ae;++Re)r(ze,ot,mt,Me,P),Ke=ze,ft=ot,ot+=P,Me+=P;I.rc=Ke,I.Vc=ft}else{if(s(Le.mc!=null),P=W+ae,s((Re=Le.mc)!=null),s(P<=Re.i),Re.C>=P)P=1;else if(Le.ic||ko(),Le.ic){Le=Re.V,Ke=Re.Ba,ft=Re.c;var Pt=Re.i,wt=(mt=1,Me=Re.$/ft,ze=Re.$%ft,ot=Re.m,Nt=Re.s,Re.$),Mt=ft*Pt,Gt=ft*P,ds=Nt.wc,Xt=wt<Gt?Ps(Nt,ze,Me):null;s(wt<=Mt),s(P<=Pt),s(Rt(Nt));t:for(;;){for(;!ot.h&&wt<Gt;){if(ze&ds||(Xt=Ps(Nt,ze,Me)),s(Xt!=null),Ne(ot),256>(Pt=zt(Xt.G[0],Xt.H[0],ot)))Le[Ke+wt]=Pt,++wt,++ze>=ft&&(ze=0,++Me<=P&&!(Me%16)&&As(Re,Me));else{if(!(280>Pt)){mt=0;break t}Pt=Nn(Pt-256,ot);var $s,Ds=zt(Xt.G[4],Xt.H[4],ot);if(Ne(ot),!(wt>=(Ds=Cs(ft,Ds=Nn(Ds,ot)))&&Mt-wt>=Pt)){mt=0;break t}for($s=0;$s<Pt;++$s)Le[Ke+wt+$s]=Le[Ke+wt+$s-Ds];for(wt+=Pt,ze+=Pt;ze>=ft;)ze-=ft,++Me<=P&&!(Me%16)&&As(Re,Me);wt<Gt&&ze&ds&&(Xt=Ps(Nt,ze,Me))}s(ot.h==pe(ot))}As(Re,Me>P?P:Me);break t}!mt||ot.h&&wt<Mt?(mt=0,Re.a=ot.h?5:3):Re.$=wt,P=mt}else P=as(Re,Re.V,Re.Ba,Re.c,Re.i,P,Mr);if(!P){ae=0;break e}}W+ae>=Fe&&(I.Cc=1),ae=1}if(!ae)return null;if(I.Cc&&((ae=I.ga)!=null&&(ae.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+W*Be}function ri(I,P,W,ae,Be,Fe){for(;0<Be--;){var Re,Le=I,Me=P+(W?1:0),ze=I,ot=P+(W?0:3);for(Re=0;Re<ae;++Re){var Nt=ze[ot+4*Re];Nt!=255&&(Nt*=32897,Le[Me+4*Re+0]=Le[Me+4*Re+0]*Nt>>23,Le[Me+4*Re+1]=Le[Me+4*Re+1]*Nt>>23,Le[Me+4*Re+2]=Le[Me+4*Re+2]*Nt>>23)}P+=Fe}}function za(I,P,W,ae,Be){for(;0<ae--;){var Fe;for(Fe=0;Fe<W;++Fe){var Re=I[P+2*Fe+0],Le=15&(ze=I[P+2*Fe+1]),Me=4369*Le,ze=(240&ze|ze>>4)*Me>>16;I[P+2*Fe+0]=(240&Re|Re>>4)*Me>>16&240|(15&Re|Re<<4)*Me>>16>>4&15,I[P+2*Fe+1]=240&ze|Le}P+=Be}}function ji(I,P,W,ae,Be,Fe,Re,Le){var Me,ze,ot=255;for(ze=0;ze<Be;++ze){for(Me=0;Me<ae;++Me){var Nt=I[P+Me];Fe[Re+4*Me]=Nt,ot&=Nt}P+=W,Re+=Le}return ot!=255}function xl(I,P,W,ae,Be){var Fe;for(Fe=0;Fe<Be;++Fe)W[ae+Fe]=I[P+Fe]>>8}function ko(){zl=ri,ao=za,Kc=ji,io=xl}function vl(I,P,W){J[I]=function(ae,Be,Fe,Re,Le,Me,ze,ot,Nt,Ke,ft,mt,Pt,wt,Mt,Gt,ds){var Xt,$s=ds-1>>1,Ds=Le[Me+0]|ze[ot+0]<<16,In=Nt[Ke+0]|ft[mt+0]<<16;s(ae!=null);var zs=3*Ds+In+131074>>2;for(P(ae[Be+0],255&zs,zs>>16,Pt,wt),Fe!=null&&(zs=3*In+Ds+131074>>2,P(Fe[Re+0],255&zs,zs>>16,Mt,Gt)),Xt=1;Xt<=$s;++Xt){var er=Le[Me+Xt]|ze[ot+Xt]<<16,aa=Nt[Ke+Xt]|ft[mt+Xt]<<16,Ln=Ds+er+In+aa+524296,Ot=Ln+2*(er+In)>>3;zs=Ot+Ds>>1,Ds=(Ln=Ln+2*(Ds+aa)>>3)+er>>1,P(ae[Be+2*Xt-1],255&zs,zs>>16,Pt,wt+(2*Xt-1)*W),P(ae[Be+2*Xt-0],255&Ds,Ds>>16,Pt,wt+(2*Xt-0)*W),Fe!=null&&(zs=Ln+In>>1,Ds=Ot+aa>>1,P(Fe[Re+2*Xt-1],255&zs,zs>>16,Mt,Gt+(2*Xt-1)*W),P(Fe[Re+2*Xt+0],255&Ds,Ds>>16,Mt,Gt+(2*Xt+0)*W)),Ds=er,In=aa}1&ds||(zs=3*Ds+In+131074>>2,P(ae[Be+ds-1],255&zs,zs>>16,Pt,wt+(ds-1)*W),Fe!=null&&(zs=3*In+Ds+131074>>2,P(Fe[Re+ds-1],255&zs,zs>>16,Mt,Gt+(ds-1)*W)))}}function SA(){Ci[od]=bc,Ci[_i]=Bl,Ci[wl]=TA,Ci[bo]=dd,Ci[CA]=Wl,Ci[Sl]=ol,Ci[Gl]=Yl,Ci[EA]=Bl,Ci[ld]=dd,Ci[zc]=Wl,Ci[xc]=ol}function kc(I){return I&-16384?0>I?0:255:I>>ud}function mo(I,P){return kc((19077*I>>8)+(26149*P>>8)-14234)}function go(I,P,W){return kc((19077*I>>8)-(6419*P>>8)-(13320*W>>8)+8708)}function Pl(I,P){return kc((19077*I>>8)+(33050*P>>8)-17685)}function ro(I,P,W,ae,Be){ae[Be+0]=mo(I,W),ae[Be+1]=go(I,P,W),ae[Be+2]=Pl(I,P)}function ya(I,P,W,ae,Be){ae[Be+0]=Pl(I,P),ae[Be+1]=go(I,P,W),ae[Be+2]=mo(I,W)}function rr(I,P,W,ae,Be){var Fe=go(I,P,W);P=Fe<<3&224|Pl(I,P)>>3,ae[Be+0]=248&mo(I,W)|Fe>>5,ae[Be+1]=P}function kl(I,P,W,ae,Be){var Fe=240&Pl(I,P)|15;ae[Be+0]=240&mo(I,W)|go(I,P,W)>>4,ae[Be+1]=Fe}function Hl(I,P,W,ae,Be){ae[Be+0]=255,ro(I,P,W,ae,Be+1)}function Ho(I,P,W,ae,Be){ya(I,P,W,ae,Be),ae[Be+3]=255}function Ga(I,P,W,ae,Be){ro(I,P,W,ae,Be),ae[Be+3]=255}function fi(I,P,W){J[I]=function(ae,Be,Fe,Re,Le,Me,ze,ot,Nt){for(var Ke=ot+(-2&Nt)*W;ot!=Ke;)P(ae[Be+0],Fe[Re+0],Le[Me+0],ze,ot),P(ae[Be+1],Fe[Re+0],Le[Me+0],ze,ot+W),Be+=2,++Re,++Me,ot+=2*W;1&Nt&&P(ae[Be+0],Fe[Re+0],Le[Me+0],ze,ot)}}function Hc(I,P,W){return W==0?I==0?P==0?6:5:P==0?4:0:W}function yo(I,P,W,ae,Be){switch(I>>>30){case 3:jl(P,W,ae,Be,0);break;case 2:Qi(P,W,ae,Be);break;case 1:Br(P,W,ae,Be)}}function Sr(I,P){var W,ae,Be=P.M,Fe=P.Nb,Re=I.oc,Le=I.pc+40,Me=I.oc,ze=I.pc+584,ot=I.oc,Nt=I.pc+600;for(W=0;16>W;++W)Re[Le+32*W-1]=129;for(W=0;8>W;++W)Me[ze+32*W-1]=129,ot[Nt+32*W-1]=129;for(0<Be?Re[Le-1-32]=Me[ze-1-32]=ot[Nt-1-32]=129:(o(Re,Le-32-1,127,21),o(Me,ze-32-1,127,9),o(ot,Nt-32-1,127,9)),ae=0;ae<I.za;++ae){var Ke=P.ya[P.aa+ae];if(0<ae){for(W=-1;16>W;++W)r(Re,Le+32*W-4,Re,Le+32*W+12,4);for(W=-1;8>W;++W)r(Me,ze+32*W-4,Me,ze+32*W+4,4),r(ot,Nt+32*W-4,ot,Nt+32*W+4,4)}var ft=I.Gd,mt=I.Hd+ae,Pt=Ke.ad,wt=Ke.Hc;if(0<Be&&(r(Re,Le-32,ft[mt].y,0,16),r(Me,ze-32,ft[mt].f,0,8),r(ot,Nt-32,ft[mt].ea,0,8)),Ke.Za){var Mt=Re,Gt=Le-32+16;for(0<Be&&(ae>=I.za-1?o(Mt,Gt,ft[mt].y[15],4):r(Mt,Gt,ft[mt+1].y,0,4)),W=0;4>W;W++)Mt[Gt+128+W]=Mt[Gt+256+W]=Mt[Gt+384+W]=Mt[Gt+0+W];for(W=0;16>W;++W,wt<<=2)Mt=Re,Gt=Le+Da[W],Ta[Ke.Ob[W]](Mt,Gt),yo(wt,Pt,16*+W,Mt,Gt)}else if(Mt=Hc(ae,Be,Ke.Ob[0]),qi[Mt](Re,Le),wt!=0)for(W=0;16>W;++W,wt<<=2)yo(wt,Pt,16*+W,Re,Le+Da[W]);for(W=Ke.Gc,Mt=Hc(ae,Be,Ke.Dd),eo[Mt](Me,ze),eo[Mt](ot,Nt),wt=Pt,Mt=Me,Gt=ze,255&(Ke=0|W)&&(170&Ke?Vi(wt,256,Mt,Gt):xr(wt,256,Mt,Gt)),Ke=ot,wt=Nt,255&(W>>=8)&&(170&W?Vi(Pt,320,Ke,wt):xr(Pt,320,Ke,wt)),Be<I.Ub-1&&(r(ft[mt].y,0,Re,Le+480,16),r(ft[mt].f,0,Me,ze+224,8),r(ft[mt].ea,0,ot,Nt+224,8)),W=8*Fe*I.B,ft=I.sa,mt=I.ta+16*ae+16*Fe*I.R,Pt=I.qa,Ke=I.ra+8*ae+W,wt=I.Ha,Mt=I.Ia+8*ae+W,W=0;16>W;++W)r(ft,mt+W*I.R,Re,Le+32*W,16);for(W=0;8>W;++W)r(Pt,Ke+W*I.B,Me,ze+32*W,8),r(wt,Mt+W*I.B,ot,Nt+32*W,8)}}function xo(I,P,W,ae,Be,Fe,Re,Le,Me){var ze=[0],ot=[0],Nt=0,Ke=Me!=null?Me.kd:0,ft=Me??new es;if(I==null||12>W)return 7;ft.data=I,ft.w=P,ft.ha=W,P=[P],W=[W],ft.gb=[ft.gb];e:{var mt=P,Pt=W,wt=ft.gb;if(s(I!=null),s(Pt!=null),s(wt!=null),wt[0]=0,12<=Pt[0]&&!n(I,mt[0],"RIFF")){if(n(I,mt[0]+8,"WEBP")){wt=3;break e}var Mt=at(I,mt[0]+4);if(12>Mt||4294967286<Mt){wt=3;break e}if(Ke&&Mt>Pt[0]-8){wt=7;break e}wt[0]=Mt,mt[0]+=12,Pt[0]-=12}wt=0}if(wt!=0)return wt;for(Mt=0<ft.gb[0],W=W[0];;){e:{var Gt=I;Pt=P,wt=W;var ds=ze,Xt=ot,$s=mt=[0];if((zs=Nt=[Nt])[0]=0,8>wt[0])wt=7;else{if(!n(Gt,Pt[0],"VP8X")){if(at(Gt,Pt[0]+4)!=10){wt=3;break e}if(18>wt[0]){wt=7;break e}var Ds=at(Gt,Pt[0]+8),In=1+Ge(Gt,Pt[0]+12);if(2147483648<=In*(Gt=1+Ge(Gt,Pt[0]+15))){wt=3;break e}$s!=null&&($s[0]=Ds),ds!=null&&(ds[0]=In),Xt!=null&&(Xt[0]=Gt),Pt[0]+=18,wt[0]-=18,zs[0]=1}wt=0}}if(Nt=Nt[0],mt=mt[0],wt!=0)return wt;if(Pt=!!(2&mt),!Mt&&Nt)return 3;if(Fe!=null&&(Fe[0]=!!(16&mt)),Re!=null&&(Re[0]=Pt),Le!=null&&(Le[0]=0),Re=ze[0],mt=ot[0],Nt&&Pt&&Me==null){wt=0;break}if(4>W){wt=7;break}if(Mt&&Nt||!Mt&&!Nt&&!n(I,P[0],"ALPH")){W=[W],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];e:{Ds=I,wt=P,Mt=W;var zs=ft.gb;ds=ft.na,Xt=ft.P,$s=ft.Sa,In=22,s(Ds!=null),s(Mt!=null),Gt=wt[0];var er=Mt[0];for(s(ds!=null),s($s!=null),ds[0]=null,Xt[0]=null,$s[0]=0;;){if(wt[0]=Gt,Mt[0]=er,8>er){wt=7;break e}var aa=at(Ds,Gt+4);if(4294967286<aa){wt=3;break e}var Ln=8+aa+1&-2;if(In+=Ln,0<zs&&In>zs){wt=3;break e}if(!n(Ds,Gt,"VP8 ")||!n(Ds,Gt,"VP8L")){wt=0;break e}if(er[0]<Ln){wt=7;break e}n(Ds,Gt,"ALPH")||(ds[0]=Ds,Xt[0]=Gt+8,$s[0]=aa),Gt+=Ln,er-=Ln}}if(W=W[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],wt!=0)break}W=[W],ft.Ja=[ft.Ja],ft.xa=[ft.xa];e:if(zs=I,wt=P,Mt=W,ds=ft.gb[0],Xt=ft.Ja,$s=ft.xa,Ds=wt[0],Gt=!n(zs,Ds,"VP8 "),In=!n(zs,Ds,"VP8L"),s(zs!=null),s(Mt!=null),s(Xt!=null),s($s!=null),8>Mt[0])wt=7;else{if(Gt||In){if(zs=at(zs,Ds+4),12<=ds&&zs>ds-12){wt=3;break e}if(Ke&&zs>Mt[0]-8){wt=7;break e}Xt[0]=zs,wt[0]+=8,Mt[0]-=8,$s[0]=In}else $s[0]=5<=Mt[0]&&zs[Ds+0]==47&&!(zs[Ds+4]>>5),Xt[0]=Mt[0];wt=0}if(W=W[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],P=P[0],wt!=0)break;if(4294967286<ft.Ja)return 3;if(Le==null||Pt||(Le[0]=ft.xa?2:1),Re=[Re],mt=[mt],ft.xa){if(5>W){wt=7;break}Le=Re,Ke=mt,Pt=Fe,I==null||5>W?I=0:5<=W&&I[P+0]==47&&!(I[P+4]>>5)?(Mt=[0],zs=[0],ds=[0],je(Xt=new fe,I,P,W),Ns(Xt,Mt,zs,ds)?(Le!=null&&(Le[0]=Mt[0]),Ke!=null&&(Ke[0]=zs[0]),Pt!=null&&(Pt[0]=ds[0]),I=1):I=0):I=0}else{if(10>W){wt=7;break}Le=mt,I==null||10>W||!be(I,P+3,W-3)?I=0:(Ke=I[P+0]|I[P+1]<<8|I[P+2]<<16,Pt=16383&(I[P+7]<<8|I[P+6]),I=16383&(I[P+9]<<8|I[P+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=ft.Ja||!Pt||!I?I=0:(Re&&(Re[0]=Pt),Le&&(Le[0]=I),I=1))}if(!I||(Re=Re[0],mt=mt[0],Nt&&(ze[0]!=Re||ot[0]!=mt)))return 3;Me!=null&&(Me[0]=ft,Me.offset=P-Me.w,s(4294967286>P-Me.w),s(Me.offset==Me.ha-W));break}return wt==0||wt==7&&Nt&&Me==null?(Fe!=null&&(Fe[0]|=ft.na!=null&&0<ft.na.length),ae!=null&&(ae[0]=Re),Be!=null&&(Be[0]=mt),0):wt}function na(I,P,W){var ae=P.width,Be=P.height,Fe=0,Re=0,Le=ae,Me=Be;if(P.Da=I!=null&&0<I.Da,P.Da&&(Le=I.cd,Me=I.bd,Fe=I.v,Re=I.j,11>W||(Fe&=-2,Re&=-2),0>Fe||0>Re||0>=Le||0>=Me||Fe+Le>ae||Re+Me>Be))return 0;if(P.v=Fe,P.j=Re,P.va=Fe+Le,P.o=Re+Me,P.U=Le,P.T=Me,P.da=I!=null&&0<I.da,P.da){if(!pt(Le,Me,W=[I.ib],Fe=[I.hb]))return 0;P.ib=W[0],P.hb=Fe[0]}return P.ob=I!=null&&I.ob,P.Kb=I==null||!I.Sd,P.da&&(P.ob=P.ib<3*ae/4&&P.hb<3*Be/4,P.Kb=0),1}function hc(I){if(I==null)return 2;if(11>I.S){var P=I.f.RGBA;P.fb+=(I.height-1)*P.A,P.A=-P.A}else P=I.f.kb,I=I.height,P.O+=(I-1)*P.fa,P.fa=-P.fa,P.N+=(I-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(I-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(I-1)*P.lb,P.lb=-P.lb);return 0}function pi(I,P,W,ae){if(ae==null||0>=I||0>=P)return 2;if(W!=null){if(W.Da){var Be=W.cd,Fe=W.bd,Re=-2&W.v,Le=-2&W.j;if(0>Re||0>Le||0>=Be||0>=Fe||Re+Be>I||Le+Fe>P)return 2;I=Be,P=Fe}if(W.da){if(!pt(I,P,Be=[W.ib],Fe=[W.hb]))return 2;I=Be[0],P=Fe[0]}}ae.width=I,ae.height=P;e:{var Me=ae.width,ze=ae.height;if(I=ae.S,0>=Me||0>=ze||!(I>=od&&13>I))I=2;else{if(0>=ae.Rd&&ae.sd==null){Re=Fe=Be=P=0;var ot=(Le=Me*fd[I])*ze;if(11>I||(Fe=(ze+1)/2*(P=(Me+1)/2),I==12&&(Re=(Be=Me)*ze)),(ze=c(ot+2*Fe+Re))==null){I=1;break e}ae.sd=ze,11>I?((Me=ae.f.RGBA).eb=ze,Me.fb=0,Me.A=Le,Me.size=ot):((Me=ae.f.kb).y=ze,Me.O=0,Me.fa=Le,Me.Fd=ot,Me.f=ze,Me.N=0+ot,Me.Ab=P,Me.Cd=Fe,Me.ea=ze,Me.W=0+ot+Fe,Me.Db=P,Me.Ed=Fe,I==12&&(Me.F=ze,Me.J=0+ot+2*Fe),Me.Tc=Re,Me.lb=Be)}if(P=1,Be=ae.S,Fe=ae.width,Re=ae.height,Be>=od&&13>Be)if(11>Be)I=ae.f.RGBA,P&=(Le=Math.abs(I.A))*(Re-1)+Fe<=I.size,P&=Le>=Fe*fd[Be],P&=I.eb!=null;else{I=ae.f.kb,Le=(Fe+1)/2,ot=(Re+1)/2,Me=Math.abs(I.fa),ze=Math.abs(I.Ab);var Nt=Math.abs(I.Db),Ke=Math.abs(I.lb),ft=Ke*(Re-1)+Fe;P&=Me*(Re-1)+Fe<=I.Fd,P&=ze*(ot-1)+Le<=I.Cd,P=(P&=Nt*(ot-1)+Le<=I.Ed)&Me>=Fe&ze>=Le&Nt>=Le,P&=I.y!=null,P&=I.f!=null,P&=I.ea!=null,Be==12&&(P&=Ke>=Fe,P&=ft<=I.Tc,P&=I.F!=null)}else P=0;I=P?0:2}}return I!=0||W!=null&&W.fd&&(I=hc(ae)),I}var vo=64,Gn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Li=24,Ko=32,zo=8,tl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];At("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(I){return I},J.Predictor2=function(I,P,W){return P[W+0]},J.Predictor3=function(I,P,W){return P[W+1]},J.Predictor4=function(I,P,W){return P[W-1]},J.Predictor5=function(I,P,W){return It(It(I,P[W+1]),P[W+0])},J.Predictor6=function(I,P,W){return It(I,P[W-1])},J.Predictor7=function(I,P,W){return It(I,P[W+0])},J.Predictor8=function(I,P,W){return It(P[W-1],P[W+0])},J.Predictor9=function(I,P,W){return It(P[W+0],P[W+1])},J.Predictor10=function(I,P,W){return It(It(I,P[W-1]),It(P[W+0],P[W+1]))},J.Predictor11=function(I,P,W){var ae=P[W+0];return 0>=Ss(ae>>24&255,I>>24&255,(P=P[W-1])>>24&255)+Ss(ae>>16&255,I>>16&255,P>>16&255)+Ss(ae>>8&255,I>>8&255,P>>8&255)+Ss(255&ae,255&I,255&P)?ae:I},J.Predictor12=function(I,P,W){var ae=P[W+0];return(Wt((I>>24&255)+(ae>>24&255)-((P=P[W-1])>>24&255))<<24|Wt((I>>16&255)+(ae>>16&255)-(P>>16&255))<<16|Wt((I>>8&255)+(ae>>8&255)-(P>>8&255))<<8|Wt((255&I)+(255&ae)-(255&P)))>>>0},J.Predictor13=function(I,P,W){var ae=P[W-1];return(Es((I=It(I,P[W+0]))>>24&255,ae>>24&255)<<24|Es(I>>16&255,ae>>16&255)<<16|Es(I>>8&255,ae>>8&255)<<8|Es(255&I,255&ae))>>>0};var bl=J.PredictorAdd0;J.PredictorAdd1=_s,At("Predictor2","PredictorAdd2"),At("Predictor3","PredictorAdd3"),At("Predictor4","PredictorAdd4"),At("Predictor5","PredictorAdd5"),At("Predictor6","PredictorAdd6"),At("Predictor7","PredictorAdd7"),At("Predictor8","PredictorAdd8"),At("Predictor9","PredictorAdd9"),At("Predictor10","PredictorAdd10"),At("Predictor11","PredictorAdd11"),At("Predictor12","PredictorAdd12"),At("Predictor13","PredictorAdd13");var fc=J.PredictorAdd2;tt("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),tt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var Ea,Gi=J.ColorIndexInverseTransform,wi=J.MapARGB,Si=J.VP8LColorIndexInverseTransformAlpha,lr=J.MapAlpha,Di=J.VP8LPredictorsAdd=[];Di.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var pc,mc,Go,sl,nl,Vo,La,jl,Qi,Vi,Br,xr,ea,Or,$o,qo,gc,Kl,au,iu,ou,lu,nd,rd,zl,ao,Kc,io,rl=c(511),ad=c(2041),BA=c(225),yc=c(767),id=0,al=ad,NA=BA,Mi=yc,Bi=rl,od=0,_i=1,wl=2,bo=3,CA=4,Sl=5,Gl=6,EA=7,ld=8,zc=9,xc=10,jo=[2,3,7],Gc=[3,3,11],vc=[280,256,256,256,40],cd=[0,1,1,1,0],Vl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],So=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$l=8,Bo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$i=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oo=null,lh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],cu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ad=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ch=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ni=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ra=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ar=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],qi=[],Ta=[],eo=[],ql=1,Au=2,il=[],Ci=[];vl("UpsampleRgbLinePair",ro,3),vl("UpsampleBgrLinePair",ya,3),vl("UpsampleRgbaLinePair",Ga,4),vl("UpsampleBgraLinePair",Ho,4),vl("UpsampleArgbLinePair",Hl,4),vl("UpsampleRgba4444LinePair",kl,2),vl("UpsampleRgb565LinePair",rr,2);var bc=J.UpsampleRgbLinePair,TA=J.UpsampleBgrLinePair,Bl=J.UpsampleRgbaLinePair,dd=J.UpsampleBgraLinePair,Wl=J.UpsampleArgbLinePair,ol=J.UpsampleRgba4444LinePair,Yl=J.UpsampleRgb565LinePair,No=16,Vc=1<<No-1,ll=-227,Xl=482,ud=6,Jl=0,Ei=c(256),hd=c(256),Ah=c(256),Sf=c(256),Bf=c(Xl-ll),Nf=c(Xl-ll);fi("YuvToRgbRow",ro,3),fi("YuvToBgrRow",ya,3),fi("YuvToRgbaRow",Ga,4),fi("YuvToBgraRow",Ho,4),fi("YuvToArgbRow",Hl,4),fi("YuvToRgba4444Row",kl,2),fi("YuvToRgb565Row",rr,2);var Da=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$c=[0,2,8],FA=[8,7,6,4,4,2,2,2,1,1,1,1],qc=1;this.WebPDecodeRGBA=function(I,P,W,ae,Be){var Fe=_i,Re=new _t,Le=new ys;Re.ba=Le,Le.S=Fe,Le.width=[Le.width],Le.height=[Le.height];var Me=Le.width,ze=Le.height,ot=new gt;if(ot==null||I==null)var Nt=2;else s(ot!=null),Nt=xo(I,P,W,ot.width,ot.height,ot.Pd,ot.Qd,ot.format,null);if(Nt!=0?Me=0:(Me!=null&&(Me[0]=ot.width[0]),ze!=null&&(ze[0]=ot.height[0]),Me=1),Me){Le.width=Le.width[0],Le.height=Le.height[0],ae!=null&&(ae[0]=Le.width),Be!=null&&(Be[0]=Le.height);e:{if(ae=new ts,(Be=new es).data=I,Be.w=P,Be.ha=W,Be.kd=1,P=[0],s(Be!=null),((I=xo(Be.data,Be.w,Be.ha,null,null,null,P,null,Be))==0||I==7)&&P[0]&&(I=4),(P=I)==0){if(s(Re!=null),ae.data=Be.data,ae.w=Be.w+Be.offset,ae.ha=Be.ha-Be.offset,ae.put=is,ae.ac=yn,ae.bc=Fs,ae.ma=Re,Be.xa){if((I=cs())==null){Re=1;break e}if((function(Ke,ft){var mt=[0],Pt=[0],wt=[0];t:for(;;){if(Ke==null)return 0;if(ft==null)return Ke.a=2,0;if(Ke.l=ft,Ke.a=0,je(Ke.m,ft.data,ft.w,ft.ha),!Ns(Ke.m,mt,Pt,wt)){Ke.a=3;break t}if(Ke.xb=Au,ft.width=mt[0],ft.height=Pt[0],!Us(mt[0],Pt[0],1,Ke,null))break t;return 1}return s(Ke.a!=0),0})(I,ae)){if(ae=(P=pi(ae.width,ae.height,Re.Oa,Re.ba))==0){t:{ae=I;s:for(;;){if(ae==null){ae=0;break t}if(s(ae.s.yc!=null),s(ae.s.Ya!=null),s(0<ae.s.Wb),s((W=ae.l)!=null),s((Be=W.ma)!=null),ae.xb!=0){if(ae.ca=Be.ba,ae.tb=Be.tb,s(ae.ca!=null),!na(Be.Oa,W,bo)){ae.a=2;break s}if(!an(ae,W.width)||W.da)break s;if((W.da||ns(ae.ca.S))&&ko(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&ko()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!Se(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break s}ae.xb=0}if(!as(ae,ae.V,ae.Ba,ae.c,ae.i,W.o,St))break s;Be.Dc=ae.Ma,ae=1;break t}s(ae.a!=0),ae=0}ae=!ae}ae&&(P=I.a)}else P=I.a}else{if((I=new Qs)==null){Re=1;break e}if(I.Fa=Be.na,I.P=Be.P,I.qc=Be.Sa,xe(I,ae)){if((P=pi(ae.width,ae.height,Re.Oa,Re.ba))==0){if(I.Aa=0,W=Re.Oa,s((Be=I)!=null),W!=null){if(0<(Me=0>(Me=W.Md)?0:100<Me?255:255*Me/100)){for(ze=ot=0;4>ze;++ze)12>(Nt=Be.pb[ze]).lc&&(Nt.ia=Me*FA[0>Nt.lc?0:Nt.lc]>>3),ot|=Nt.ia;ot&&(alert("todo:VP8InitRandom"),Be.ia=1)}Be.Ga=W.Id,100<Be.Ga?Be.Ga=100:0>Be.Ga&&(Be.Ga=0)}(function(Ke,ft){if(Ke==null)return 0;if(ft==null)return ls(Ke,2,"NULL VP8Io parameter in VP8Decode().");if(!Ke.cb&&!xe(Ke,ft))return 0;if(s(Ke.cb),ft.ac==null||ft.ac(ft)){ft.ob&&(Ke.L=0);var mt=$c[Ke.L];if(Ke.L==2?(Ke.yb=0,Ke.zb=0):(Ke.yb=ft.v-mt>>4,Ke.zb=ft.j-mt>>4,0>Ke.yb&&(Ke.yb=0),0>Ke.zb&&(Ke.zb=0)),Ke.Va=ft.o+15+mt>>4,Ke.Hb=ft.va+15+mt>>4,Ke.Hb>Ke.za&&(Ke.Hb=Ke.za),Ke.Va>Ke.Ub&&(Ke.Va=Ke.Ub),0<Ke.L){var Pt=Ke.ed;for(mt=0;4>mt;++mt){var wt;if(Ke.Qa.Cb){var Mt=Ke.Qa.Lb[mt];Ke.Qa.Fb||(Mt+=Pt.Tb)}else Mt=Pt.Tb;for(wt=0;1>=wt;++wt){var Gt=Ke.gd[mt][wt],ds=Mt;if(Pt.Pc&&(ds+=Pt.vd[0],wt&&(ds+=Pt.od[0])),0<(ds=0>ds?0:63<ds?63:ds)){var Xt=ds;0<Pt.wb&&(Xt=4<Pt.wb?Xt>>2:Xt>>1)>9-Pt.wb&&(Xt=9-Pt.wb),1>Xt&&(Xt=1),Gt.dd=Xt,Gt.tc=2*ds+Xt,Gt.ld=40<=ds?2:15<=ds?1:0}else Gt.tc=0;Gt.La=wt}}}mt=0}else ls(Ke,6,"Frame setup failed"),mt=Ke.a;if(mt=mt==0){if(mt){Ke.$c=0,0<Ke.Aa||(Ke.Ic=qc);t:{mt=Ke.Ic,Pt=4*(Xt=Ke.za);var $s=32*Xt,Ds=Xt+1,In=0<Ke.L?Xt*(0<Ke.Aa?2:1):0,zs=(Ke.Aa==2?2:1)*Xt;if((Gt=Pt+832+(wt=3*(16*mt+$c[Ke.L])/2*$s)+(Mt=Ke.Fa!=null&&0<Ke.Fa.length?Ke.Kc.c*Ke.Kc.i:0))!=Gt)mt=0;else{if(Gt>Ke.Vb){if(Ke.Vb=0,Ke.Ec=c(Gt),Ke.Fc=0,Ke.Ec==null){mt=ls(Ke,1,"no memory during frame initialization.");break t}Ke.Vb=Gt}Gt=Ke.Ec,ds=Ke.Fc,Ke.Ac=Gt,Ke.Bc=ds,ds+=Pt,Ke.Gd=p($s,Vn),Ke.Hd=0,Ke.rb=p(Ds+1,jn),Ke.sb=1,Ke.wa=In?p(In,vn):null,Ke.Y=0,Ke.D.Nb=0,Ke.D.wa=Ke.wa,Ke.D.Y=Ke.Y,0<Ke.Aa&&(Ke.D.Y+=Xt),s(!0),Ke.oc=Gt,Ke.pc=ds,ds+=832,Ke.ya=p(zs,Zr),Ke.aa=0,Ke.D.ya=Ke.ya,Ke.D.aa=Ke.aa,Ke.Aa==2&&(Ke.D.aa+=Xt),Ke.R=16*Xt,Ke.B=8*Xt,Xt=($s=$c[Ke.L])*Ke.R,$s=$s/2*Ke.B,Ke.sa=Gt,Ke.ta=ds+Xt,Ke.qa=Ke.sa,Ke.ra=Ke.ta+16*mt*Ke.R+$s,Ke.Ha=Ke.qa,Ke.Ia=Ke.ra+8*mt*Ke.B+$s,Ke.$c=0,ds+=wt,Ke.mb=Mt?Gt:null,Ke.nb=Mt?ds:null,s(ds+Mt<=Ke.Fc+Ke.Vb),Je(Ke),o(Ke.Ac,Ke.Bc,0,Pt),mt=1}}if(mt){if(ft.ka=0,ft.y=Ke.sa,ft.O=Ke.ta,ft.f=Ke.qa,ft.N=Ke.ra,ft.ea=Ke.Ha,ft.Vd=Ke.Ia,ft.fa=Ke.R,ft.Rc=Ke.B,ft.F=null,ft.J=0,!id){for(mt=-255;255>=mt;++mt)rl[255+mt]=0>mt?-mt:mt;for(mt=-1020;1020>=mt;++mt)ad[1020+mt]=-128>mt?-128:127<mt?127:mt;for(mt=-112;112>=mt;++mt)BA[112+mt]=-16>mt?-16:15<mt?15:mt;for(mt=-255;510>=mt;++mt)yc[255+mt]=0>mt?0:255<mt?255:mt;id=1}La=$r,jl=ka,Vi=Rr,Br=Ha,xr=Na,Qi=Oi,ea=$t,Or=gs,$o=me,qo=Qe,gc=nn,Kl=z,au=We,iu=ut,ou=te,lu=Ue,nd=He,rd=st,Ta[0]=Ka,Ta[1]=vi,Ta[2]=$n,Ta[3]=qr,Ta[4]=Ca,Ta[5]=Bn,Ta[6]=on,Ta[7]=Fn,Ta[8]=pa,Ta[9]=Zn,qi[0]=sn,qi[1]=bi,qi[2]=ui,qi[3]=hi,qi[4]=ks,qi[5]=qs,qi[6]=Js,eo[0]=u,eo[1]=Ui,eo[2]=ma,eo[3]=x,eo[4]=S,eo[5]=b,eo[6]=R,mt=1}else mt=0}mt&&(mt=(function(er,aa){for(er.M=0;er.M<er.Va;++er.M){var Ln,Ot=er.Jc[er.M&er.Xb],ws=er.m,xa=er;for(Ln=0;Ln<xa.za;++Ln){var xn=ws,Sn=xa,Pr=Sn.Ac,Va=Sn.Bc+4*Ln,Qa=Sn.zc,kr=Sn.ya[Sn.aa+Ln];if(Sn.Qa.Bb?kr.$b=Te(xn,Sn.Pa.jb[0])?2+Te(xn,Sn.Pa.jb[2]):Te(xn,Sn.Pa.jb[1]):kr.$b=0,Sn.kc&&(kr.Ad=Te(xn,Sn.Bd)),kr.Za=!Te(xn,145)+0,kr.Za){var $a=kr.Ob,Pi=0;for(Sn=0;4>Sn;++Sn){var qa,Rn=Qa[0+Sn];for(qa=0;4>qa;++qa){Rn=Ni[Pr[Va+qa]][Rn];for(var cr=Ad[Te(xn,Rn[0])];0<cr;)cr=Ad[2*cr+Te(xn,Rn[cr])];Rn=-cr,Pr[Va+qa]=Rn}r($a,Pi,Pr,Va,4),Pi+=4,Qa[0+Sn]=Rn}}else Rn=Te(xn,156)?Te(xn,128)?1:3:Te(xn,163)?2:0,kr.Ob[0]=Rn,o(Pr,Va,Rn,4),o(Qa,0,Rn,4);kr.Dd=Te(xn,142)?Te(xn,114)?Te(xn,183)?1:3:2:0}if(xa.m.Ka)return ls(er,7,"Premature end-of-partition0 encountered.");for(;er.ja<er.za;++er.ja){if(xa=Ot,xn=(ws=er).rb[ws.sb-1],Pr=ws.rb[ws.sb+ws.ja],Ln=ws.ya[ws.aa+ws.ja],Va=ws.kc?Ln.Ad:0)xn.la=Pr.la=0,Ln.Za||(xn.Na=Pr.Na=0),Ln.Hc=0,Ln.Gc=0,Ln.ia=0;else{var ia,Ur;if(xn=Pr,Pr=xa,Va=ws.Pa.Xc,Qa=ws.ya[ws.aa+ws.ja],kr=ws.pb[Qa.$b],Sn=Qa.ad,$a=0,Pi=ws.rb[ws.sb-1],Rn=qa=0,o(Sn,$a,0,384),Qa.Za)var Wa=0,va=Va[3];else{cr=c(16);var Ar=xn.Na+Pi.Na;if(Ar=oo(Pr,Va[1],Ar,kr.Eb,0,cr,0),xn.Na=Pi.Na=(0<Ar)+0,1<Ar)La(cr,0,Sn,$a);else{var Ma=cr[0]+3>>3;for(cr=0;256>cr;cr+=16)Sn[$a+cr]=Ma}Wa=1,va=Va[0]}var Hr=15&xn.la,Ya=15&Pi.la;for(cr=0;4>cr;++cr){var Xa=1&Ya;for(Ma=Ur=0;4>Ma;++Ma)Hr=Hr>>1|(Xa=(Ar=oo(Pr,va,Ar=Xa+(1&Hr),kr.Sc,Wa,Sn,$a))>Wa)<<7,Ur=Ur<<2|(3<Ar?3:1<Ar?2:Sn[$a+0]!=0),$a+=16;Hr>>=4,Ya=Ya>>1|Xa<<7,qa=(qa<<8|Ur)>>>0}for(va=Hr,Wa=Ya>>4,ia=0;4>ia;ia+=2){for(Ur=0,Hr=xn.la>>4+ia,Ya=Pi.la>>4+ia,cr=0;2>cr;++cr){for(Xa=1&Ya,Ma=0;2>Ma;++Ma)Ar=Xa+(1&Hr),Hr=Hr>>1|(Xa=0<(Ar=oo(Pr,Va[2],Ar,kr.Qc,0,Sn,$a)))<<3,Ur=Ur<<2|(3<Ar?3:1<Ar?2:Sn[$a+0]!=0),$a+=16;Hr>>=2,Ya=Ya>>1|Xa<<5}Rn|=Ur<<4*ia,va|=Hr<<4<<ia,Wa|=(240&Ya)<<ia}xn.la=va,Pi.la=Wa,Qa.Hc=qa,Qa.Gc=Rn,Qa.ia=43690&Rn?0:kr.ia,Va=!(qa|Rn)}if(0<ws.L&&(ws.wa[ws.Y+ws.ja]=ws.gd[Ln.$b][Ln.Za],ws.wa[ws.Y+ws.ja].La|=!Va),xa.Ka)return ls(er,7,"Premature end-of-file encountered.")}if(Je(er),ws=aa,xa=1,Ln=(Ot=er).D,xn=0<Ot.L&&Ot.M>=Ot.zb&&Ot.M<=Ot.Va,Ot.Aa==0)t:{if(Ln.M=Ot.M,Ln.uc=xn,Sr(Ot,Ln),xa=1,Ln=(Ur=Ot.D).Nb,xn=(Rn=$c[Ot.L])*Ot.R,Pr=Rn/2*Ot.B,cr=16*Ln*Ot.R,Ma=8*Ln*Ot.B,Va=Ot.sa,Qa=Ot.ta-xn+cr,kr=Ot.qa,Sn=Ot.ra-Pr+Ma,$a=Ot.Ha,Pi=Ot.Ia-Pr+Ma,Ya=(Hr=Ur.M)==0,qa=Hr>=Ot.Va-1,Ot.Aa==2&&Sr(Ot,Ur),Ur.uc)for(Xa=(Ar=Ot).D.M,s(Ar.D.uc),Ur=Ar.yb;Ur<Ar.Hb;++Ur){Wa=Ur,va=Xa;var Wr=(vr=(ba=Ar).D).Nb;ia=ba.R;var vr=vr.wa[vr.Y+Wa],ki=ba.sa,Fa=ba.ta+16*Wr*ia+16*Wa,pn=vr.dd,mn=vr.tc;if(mn!=0)if(s(3<=mn),ba.L==1)0<Wa&&lu(ki,Fa,ia,mn+4),vr.La&&rd(ki,Fa,ia,mn),0<va&&ou(ki,Fa,ia,mn+4),vr.La&&nd(ki,Fa,ia,mn);else{var Nr=ba.B,to=ba.qa,lo=ba.ra+8*Wr*Nr+8*Wa,Wi=ba.Ha,ba=ba.Ia+8*Wr*Nr+8*Wa;Wr=vr.ld,0<Wa&&(Or(ki,Fa,ia,mn+4,pn,Wr),qo(to,lo,Wi,ba,Nr,mn+4,pn,Wr)),vr.La&&(Kl(ki,Fa,ia,mn,pn,Wr),iu(to,lo,Wi,ba,Nr,mn,pn,Wr)),0<va&&(ea(ki,Fa,ia,mn+4,pn,Wr),$o(to,lo,Wi,ba,Nr,mn+4,pn,Wr)),vr.La&&(gc(ki,Fa,ia,mn,pn,Wr),au(to,lo,Wi,ba,Nr,mn,pn,Wr))}}if(Ot.ia&&alert("todo:DitherRow"),ws.put!=null){if(Ur=16*Hr,Hr=16*(Hr+1),Ya?(ws.y=Ot.sa,ws.O=Ot.ta+cr,ws.f=Ot.qa,ws.N=Ot.ra+Ma,ws.ea=Ot.Ha,ws.W=Ot.Ia+Ma):(Ur-=Rn,ws.y=Va,ws.O=Qa,ws.f=kr,ws.N=Sn,ws.ea=$a,ws.W=Pi),qa||(Hr-=Rn),Hr>ws.o&&(Hr=ws.o),ws.F=null,ws.J=null,Ot.Fa!=null&&0<Ot.Fa.length&&Ur<Hr&&(ws.J=_r(Ot,ws,Ur,Hr-Ur),ws.F=Ot.mb,ws.F==null&&ws.F.length==0)){xa=ls(Ot,3,"Could not decode alpha data.");break t}Ur<ws.j&&(Rn=ws.j-Ur,Ur=ws.j,s(!(1&Rn)),ws.O+=Ot.R*Rn,ws.N+=Ot.B*(Rn>>1),ws.W+=Ot.B*(Rn>>1),ws.F!=null&&(ws.J+=ws.width*Rn)),Ur<Hr&&(ws.O+=ws.v,ws.N+=ws.v>>1,ws.W+=ws.v>>1,ws.F!=null&&(ws.J+=ws.v),ws.ka=Ur-ws.j,ws.U=ws.va-ws.v,ws.T=Hr-Ur,xa=ws.put(ws))}Ln+1!=Ot.Ic||qa||(r(Ot.sa,Ot.ta-xn,Va,Qa+16*Ot.R,xn),r(Ot.qa,Ot.ra-Pr,kr,Sn+8*Ot.B,Pr),r(Ot.Ha,Ot.Ia-Pr,$a,Pi+8*Ot.B,Pr))}if(!xa)return ls(er,6,"Output aborted.")}return 1})(Ke,ft)),ft.bc!=null&&ft.bc(ft),mt&=1}return mt?(Ke.cb=0,mt):0})(I,ae)||(P=I.a)}}else P=I.a}P==0&&Re.Oa!=null&&Re.Oa.fd&&(P=hc(Re.ba))}Re=P}Fe=Re!=0?null:11>Fe?Le.f.RGBA.eb:Le.f.kb.y}else Fe=null;return Fe};var fd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(J,he){for(var q="",ie=0;ie<4;ie++)q+=String.fromCharCode(J[he++]);return q}function l(J,he){return J[he+0]|J[he+1]<<8}function g(J,he){return(J[he+0]|J[he+1]<<8|J[he+2]<<16)>>>0}function v(J,he){return(J[he+0]|J[he+1]<<8|J[he+2]<<16|J[he+3]<<24)>>>0}new A;var m=[0],N=[0],w=[],E=new A,F=t,M=(function(J,he){var q={},ie=0,Ae=!1,ce=0,oe=0;if(q.frames=[],!(function(Z,fe){for(var ue=0;ue<4;ue++)if(Z[fe+ue]!="RIFF".charCodeAt(ue))return!0;return!1})(J,he)){for(v(J,he+=4),he+=8;he<J.length;){var ne=h(J,he),re=v(J,he+=4);he+=4;var se=re+(1&re);switch(ne){case"VP8 ":case"VP8L":q.frames[ie]===void 0&&(q.frames[ie]={}),(ge=q.frames[ie]).src_off=Ae?oe:he-8,ge.src_size=ce+re+8,ie++,Ae&&(Ae=!1,ce=0,oe=0);break;case"VP8X":(ge=q.header={}).feature_flags=J[he];var je=he+4;ge.canvas_width=1+g(J,je),je+=3,ge.canvas_height=1+g(J,je),je+=3;break;case"ALPH":Ae=!0,ce=se+8,oe=he-8;break;case"ANIM":(ge=q.header).bgcolor=v(J,he),je=he+4,ge.loop_count=l(J,je),je+=2;break;case"ANMF":var De,ge;(ge=q.frames[ie]={}).offset_x=2*g(J,he),he+=3,ge.offset_y=2*g(J,he),he+=3,ge.width=1+g(J,he),he+=3,ge.height=1+g(J,he),he+=3,ge.duration=g(J,he),he+=3,De=J[he++],ge.dispose=1&De,ge.blend=De>>1&1}ne!="ANMF"&&(he+=se)}return q}})(F,0);M.response=F,M.rgbaoutput=!0,M.dataurl=!1;var k=M.header?M.header:null,K=M.frames?M.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],N=[k.canvas_width];for(var G=0;G<K.length&&K[G].blend!=0;G++);}var ee=K[0],V=E.WebPDecodeRGBA(F,ee.src_off,ee.src_size,N,m);ee.rgba=V,ee.imgwidth=N[0],ee.imgheight=m[0];for(var X=0;X<N[0]*m[0]*4;X++)w[X]=V[X];return this.width=N,this.height=m,this.data=w,this}(function(t){var s,n,r,o,c,p,f,A,h,l=function(Z){return Z=Z||{},this.isStrokeTransparent=Z.isStrokeTransparent||!1,this.strokeOpacity=Z.strokeOpacity||1,this.strokeStyle=Z.strokeStyle||"#000000",this.fillStyle=Z.fillStyle||"#000000",this.isFillTransparent=Z.isFillTransparent||!1,this.fillOpacity=Z.fillOpacity||1,this.font=Z.font||"10px sans-serif",this.textBaseline=Z.textBaseline||"alphabetic",this.textAlign=Z.textAlign||"left",this.lineWidth=Z.lineWidth||1,this.lineJoin=Z.lineJoin||"miter",this.lineCap=Z.lineCap||"butt",this.path=Z.path||[],this.transform=Z.transform!==void 0?Z.transform.clone():new A,this.globalCompositeOperation=Z.globalCompositeOperation||"normal",this.globalAlpha=Z.globalAlpha||1,this.clip_path=Z.clip_path||[],this.currentPoint=Z.currentPoint||new p,this.miterLimit=Z.miterLimit||10,this.lastPoint=Z.lastPoint||new p,this.lineDashOffset=Z.lineDashOffset||0,this.lineDash=Z.lineDash||[],this.margin=Z.margin||[0,0,0,0],this.prevPageLastElemOffset=Z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Z.ignoreClearRect!="boolean"||Z.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),s=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,p=this.internal.Point,f=this.internal.Rectangle,A=this.internal.Matrix,h=new l}]);var g=function(Z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var fe=Z;Object.defineProperty(this,"pdf",{get:function(){return fe}});var ue=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ue},set:function(Se){ue=!!Se}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(Se){pe=!!Se}});var Ce=0;Object.defineProperty(this,"posX",{get:function(){return Ce},set:function(Se){isNaN(Se)||(Ce=Se)}});var Ne=0;Object.defineProperty(this,"posY",{get:function(){return Ne},set:function(Se){isNaN(Se)||(Ne=Se)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Se){var vt;typeof Se=="number"?vt=[Se,Se,Se,Se]:((vt=new Array(4))[0]=Se[0],vt[1]=Se.length>=2?Se[1]:vt[0],vt[2]=Se.length>=3?Se[2]:vt[0],vt[3]=Se.length>=4?Se[3]:vt[1]),h.margin=vt}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Se){ye=Se}});var we=0;Object.defineProperty(this,"lastBreak",{get:function(){return we},set:function(Se){we=Se}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(Se){Te=Se}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Se){Se instanceof l&&(h=Se)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Se){h.path=Se}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Se){qe=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var vt;vt=v(Se),this.ctx.fillStyle=vt.style,this.ctx.isFillTransparent=vt.a===0,this.ctx.fillOpacity=vt.a,this.pdf.setFillColor(vt.r,vt.g,vt.b,{a:vt.a}),this.pdf.setTextColor(vt.r,vt.g,vt.b,{a:vt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var vt=v(Se);this.ctx.strokeStyle=vt.style,this.ctx.isStrokeTransparent=vt.a===0,this.ctx.strokeOpacity=vt.a,vt.a===0?this.pdf.setDrawColor(255,255,255):(vt.a,this.pdf.setDrawColor(vt.r,vt.g,vt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var ve=null,Ge=null,at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(Se){ve=null,Ge=null,at=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var vt;if(this.ctx.font=Se,(vt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Se))!==null){var ht=vt[1];vt[2];var pt=vt[3],Ze=vt[4];vt[5];var Ht=vt[6],At=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ze)[2];Ze=Math.floor(At==="px"?parseFloat(Ze)*this.pdf.internal.scaleFactor:At==="em"?parseFloat(Ze)*this.pdf.getFontSize():parseFloat(Ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ze);var Ct=(function(tt){var Jt,Qt,ss=[],dt=tt.trim();if(dt==="")return U0;if(dt in qS)return[qS[dt]];for(;dt!=="";){switch(Qt=null,Jt=(dt=YS(dt)).charAt(0)){case'"':case"'":Qt=eK(dt.substring(1),Jt);break;default:Qt=tK(dt)}if(Qt===null||(ss.push(Qt[0]),(dt=YS(Qt[1]))!==""&&dt.charAt(0)!==","))return U0;dt=dt.replace(/^,/,"")}return ss})(Ht);if(this.fontFaces){var It=(function(tt,Jt){var Qt=tt.getFontList(),ss=JSON.stringify(Qt);if(ve===null||Ge!==ss){var dt=(function(qt){var Vt=[];return Object.keys(qt).forEach(function(vs){qt[vs].forEach(function(ns){var js=null;switch(ns){case"bold":js={family:vs,weight:"bold"};break;case"italic":js={family:vs,style:"italic"};break;case"bolditalic":js={family:vs,weight:"bold",style:"italic"};break;case"":case"normal":js={family:vs}}js!==null&&(js.ref={name:vs,style:ns},Vt.push(js))})}),Vt})(Qt);ve=(function(qt){for(var Vt={},vs=0;vs<qt.length;++vs){var ns=O0(qt[vs]),js=ns.family,ln=ns.stretch,ys=ns.style,gt=ns.weight;Vt[js]=Vt[js]||{},Vt[js][ln]=Vt[js][ln]||{},Vt[js][ln][ys]=Vt[js][ln][ys]||{},Vt[js][ln][ys][gt]=ns}return Vt})(dt.concat(Jt)),Ge=ss}return ve})(this.pdf,this.fontFaces),Wt=Ct.map(function(tt){return{family:tt,stretch:"normal",weight:pt,style:ht}}),Es=(function(tt,Jt,Qt){for(var ss=(Qt=Qt||{}).defaultFontFamily||"times",dt=Object.assign({},Z9,Qt.genericFontFamilies||{}),qt=null,Vt=null,vs=0;vs<Jt.length;++vs)if(dt[(qt=O0(Jt[vs])).family]&&(qt.family=dt[qt.family]),tt.hasOwnProperty(qt.family)){Vt=tt[qt.family];break}if(!(Vt=Vt||tt[ss]))throw new Error("Could not find a font-family for the rule '"+WS(qt)+"' and default family '"+ss+"'.");if(Vt=(function(ns,js){if(js[ns])return js[ns];var ln=$v[ns],ys=ln<=$v.normal?-1:1,gt=$S(js,ZT,ln,ys);if(!gt)throw new Error("Could not find a matching font-stretch value for "+ns);return gt})(qt.stretch,Vt),Vt=(function(ns,js){if(js[ns])return js[ns];for(var ln=JT[ns],ys=0;ys<ln.length;++ys)if(js[ln[ys]])return js[ln[ys]];throw new Error("Could not find a matching font-style for "+ns)})(qt.style,Vt),!(Vt=(function(ns,js){if(js[ns])return js[ns];if(ns===400&&js[500])return js[500];if(ns===500&&js[400])return js[400];var ln=J9[ns],ys=$S(js,eF,ln,ns<400?-1:1);if(!ys)throw new Error("Could not find a matching font-weight for value "+ns);return ys})(qt.weight,Vt)))throw new Error("Failed to resolve a font for the rule '"+WS(qt)+"'.");return Vt})(It,Wt);this.pdf.setFont(Es.ref.name,Es.ref.style)}else{var Ss="";(pt==="bold"||parseInt(pt,10)>=700||ht==="bold")&&(Ss="bold"),ht==="italic"&&(Ss+="italic"),Ss.length===0&&(Ss="normal");for(var _s="",$e={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ke=0;ke<Ct.length;ke++){if(this.pdf.internal.getFont(Ct[ke],Ss,{noFallback:!0,disableWarning:!0})!==void 0){_s=Ct[ke];break}if(Ss==="bolditalic"&&this.pdf.internal.getFont(Ct[ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_s=Ct[ke],Ss="bold";else if(this.pdf.internal.getFont(Ct[ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_s=Ct[ke],Ss="normal";break}}if(_s===""){for(var it=0;it<Ct.length;it++)if($e[Ct[it]]){_s=$e[Ct[it]];break}}_s=_s===""?"Times":_s,this.pdf.setFont(_s,Ss)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};g.prototype.setLineDash=function(Z){this.lineDash=Z},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){K.call(this,"fill",!1)},g.prototype.stroke=function(){K.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(Z,fe){if(isNaN(Z)||isNaN(fe))throw Ba.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ue=this.ctx.transform.applyToPoint(new p(Z,fe));this.path.push({type:"mt",x:ue.x,y:ue.y}),this.ctx.lastPoint=new p(Z,fe)},g.prototype.closePath=function(){var Z=new p(0,0),fe=0;for(fe=this.path.length-1;fe!==-1;fe--)if(this.path[fe].type==="begin"&&Aa(this.path[fe+1])==="object"&&typeof this.path[fe+1].x=="number"){Z=new p(this.path[fe+1].x,this.path[fe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(Z.x,Z.y)},g.prototype.lineTo=function(Z,fe){if(isNaN(Z)||isNaN(fe))throw Ba.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ue=this.ctx.transform.applyToPoint(new p(Z,fe));this.path.push({type:"lt",x:ue.x,y:ue.y}),this.ctx.lastPoint=new p(ue.x,ue.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},g.prototype.quadraticCurveTo=function(Z,fe,ue,pe){if(isNaN(ue)||isNaN(pe)||isNaN(Z)||isNaN(fe))throw Ba.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ce=this.ctx.transform.applyToPoint(new p(ue,pe)),Ne=this.ctx.transform.applyToPoint(new p(Z,fe));this.path.push({type:"qct",x1:Ne.x,y1:Ne.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new p(Ce.x,Ce.y)},g.prototype.bezierCurveTo=function(Z,fe,ue,pe,Ce,Ne){if(isNaN(Ce)||isNaN(Ne)||isNaN(Z)||isNaN(fe)||isNaN(ue)||isNaN(pe))throw Ba.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new p(Ce,Ne)),we=this.ctx.transform.applyToPoint(new p(Z,fe)),Te=this.ctx.transform.applyToPoint(new p(ue,pe));this.path.push({type:"bct",x1:we.x,y1:we.y,x2:Te.x,y2:Te.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new p(ye.x,ye.y)},g.prototype.arc=function(Z,fe,ue,pe,Ce,Ne){if(isNaN(Z)||isNaN(fe)||isNaN(ue)||isNaN(pe)||isNaN(Ce))throw Ba.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ne=!!Ne,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new p(Z,fe));Z=ye.x,fe=ye.y;var we=this.ctx.transform.applyToPoint(new p(0,ue)),Te=this.ctx.transform.applyToPoint(new p(0,0));ue=Math.sqrt(Math.pow(we.x-Te.x,2)+Math.pow(we.y-Te.y,2))}Math.abs(Ce-pe)>=2*Math.PI&&(pe=0,Ce=2*Math.PI),this.path.push({type:"arc",x:Z,y:fe,radius:ue,startAngle:pe,endAngle:Ce,counterclockwise:Ne})},g.prototype.arcTo=function(Z,fe,ue,pe,Ce){throw new Error("arcTo not implemented.")},g.prototype.rect=function(Z,fe,ue,pe){if(isNaN(Z)||isNaN(fe)||isNaN(ue)||isNaN(pe))throw Ba.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Z,fe),this.lineTo(Z+ue,fe),this.lineTo(Z+ue,fe+pe),this.lineTo(Z,fe+pe),this.lineTo(Z,fe),this.lineTo(Z+ue,fe),this.lineTo(Z,fe)},g.prototype.fillRect=function(Z,fe,ue,pe){if(isNaN(Z)||isNaN(fe)||isNaN(ue)||isNaN(pe))throw Ba.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Ce={};this.lineCap!=="butt"&&(Ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Z,fe,ue,pe),this.fill(),Ce.hasOwnProperty("lineCap")&&(this.lineCap=Ce.lineCap),Ce.hasOwnProperty("lineJoin")&&(this.lineJoin=Ce.lineJoin)}},g.prototype.strokeRect=function(Z,fe,ue,pe){if(isNaN(Z)||isNaN(fe)||isNaN(ue)||isNaN(pe))throw Ba.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(Z,fe,ue,pe),this.stroke())},g.prototype.clearRect=function(Z,fe,ue,pe){if(isNaN(Z)||isNaN(fe)||isNaN(ue)||isNaN(pe))throw Ba.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Z,fe,ue,pe))},g.prototype.save=function(Z){Z=typeof Z!="boolean"||Z;for(var fe=this.pdf.internal.getCurrentPageInfo().pageNumber,ue=0;ue<this.pdf.internal.getNumberOfPages();ue++)this.pdf.setPage(ue+1),this.pdf.internal.out("q");if(this.pdf.setPage(fe),Z){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},g.prototype.restore=function(Z){Z=typeof Z!="boolean"||Z;for(var fe=this.pdf.internal.getCurrentPageInfo().pageNumber,ue=0;ue<this.pdf.internal.getNumberOfPages();ue++)this.pdf.setPage(ue+1),this.pdf.internal.out("Q");this.pdf.setPage(fe),Z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(Z){var fe,ue,pe,Ce;if(Z.isCanvasGradient===!0&&(Z=Z.getColor()),!Z)return{r:0,g:0,b:0,a:0,style:Z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Z))fe=0,ue=0,pe=0,Ce=0;else{var Ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Z);if(Ne!==null)fe=parseInt(Ne[1]),ue=parseInt(Ne[2]),pe=parseInt(Ne[3]),Ce=1;else if((Ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Z))!==null)fe=parseInt(Ne[1]),ue=parseInt(Ne[2]),pe=parseInt(Ne[3]),Ce=parseFloat(Ne[4]);else{if(Ce=1,typeof Z=="string"&&Z.charAt(0)!=="#"){var ye=new GT(Z);Z=ye.ok?ye.toHex():"#000000"}Z.length===4?(fe=Z.substring(1,2),fe+=fe,ue=Z.substring(2,3),ue+=ue,pe=Z.substring(3,4),pe+=pe):(fe=Z.substring(1,3),ue=Z.substring(3,5),pe=Z.substring(5,7)),fe=parseInt(fe,16),ue=parseInt(ue,16),pe=parseInt(pe,16)}}return{r:fe,g:ue,b:pe,a:Ce,style:Z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(Z,fe,ue,pe){if(isNaN(fe)||isNaN(ue)||typeof Z!="string")throw Ba.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!m.call(this)){var Ce=se(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;ie.call(this,{text:Z,x:fe,y:ue,scale:Ne,angle:Ce,align:this.textAlign,maxWidth:pe})}},g.prototype.strokeText=function(Z,fe,ue,pe){if(isNaN(fe)||isNaN(ue)||typeof Z!="string")throw Ba.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){pe=isNaN(pe)?void 0:pe;var Ce=se(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;ie.call(this,{text:Z,x:fe,y:ue,scale:Ne,renderingMode:"stroke",angle:Ce,align:this.textAlign,maxWidth:pe})}},g.prototype.measureText=function(Z){if(typeof Z!="string")throw Ba.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var fe=this.pdf,ue=this.pdf.internal.scaleFactor,pe=fe.internal.getFontSize(),Ce=fe.getStringUnitWidth(Z)*pe/fe.internal.scaleFactor;return new function(Ne){var ye=(Ne=Ne||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this}({width:Ce*=Math.round(96*ue/72*1e4)/1e4})},g.prototype.scale=function(Z,fe){if(isNaN(Z)||isNaN(fe))throw Ba.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ue=new A(Z,0,0,fe,0,0);this.ctx.transform=this.ctx.transform.multiply(ue)},g.prototype.rotate=function(Z){if(isNaN(Z))throw Ba.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var fe=new A(Math.cos(Z),Math.sin(Z),-Math.sin(Z),Math.cos(Z),0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},g.prototype.translate=function(Z,fe){if(isNaN(Z)||isNaN(fe))throw Ba.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ue=new A(1,0,0,1,Z,fe);this.ctx.transform=this.ctx.transform.multiply(ue)},g.prototype.transform=function(Z,fe,ue,pe,Ce,Ne){if(isNaN(Z)||isNaN(fe)||isNaN(ue)||isNaN(pe)||isNaN(Ce)||isNaN(Ne))throw Ba.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new A(Z,fe,ue,pe,Ce,Ne);this.ctx.transform=this.ctx.transform.multiply(ye)},g.prototype.setTransform=function(Z,fe,ue,pe,Ce,Ne){Z=isNaN(Z)?1:Z,fe=isNaN(fe)?0:fe,ue=isNaN(ue)?0:ue,pe=isNaN(pe)?1:pe,Ce=isNaN(Ce)?0:Ce,Ne=isNaN(Ne)?0:Ne,this.ctx.transform=new A(Z,fe,ue,pe,Ce,Ne)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(Z,fe,ue,pe,Ce,Ne,ye,we,Te){var qe=this.pdf.getImageProperties(Z),ve=1,Ge=1,at=1,Se=1;pe!==void 0&&we!==void 0&&(at=we/pe,Se=Te/Ce,ve=qe.width/pe*we/pe,Ge=qe.height/Ce*Te/Ce),Ne===void 0&&(Ne=fe,ye=ue,fe=0,ue=0),pe!==void 0&&we===void 0&&(we=pe,Te=Ce),pe===void 0&&we===void 0&&(we=qe.width,Te=qe.height);var vt=this.ctx.transform.decompose(),ht=se(vt.rotate.shx),pt=new A,Ze=(pt=(pt=(pt=pt.multiply(vt.translate)).multiply(vt.skew)).multiply(vt.scale)).applyToRectangle(new f(Ne-fe*at,ye-ue*Se,pe*ve,Ce*Ge));if(this.autoPaging){for(var Ht,At=E.call(this,Ze),Ct=[],It=0;It<At.length;It+=1)Ct.indexOf(At[It])===-1&&Ct.push(At[It]);k(Ct);for(var Wt=Ct[0],Es=Ct[Ct.length-1],Ss=Wt;Ss<Es+1;Ss++){this.pdf.setPage(Ss);var _s=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Ss===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Ss===1?0:ke+(Ss-2)*it;if(this.ctx.clip_path.length!==0){var Jt=this.path;Ht=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Ht,this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=Jt}var Qt=JSON.parse(JSON.stringify(Ze));Qt=M([Qt],this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset)[0];var ss=(Ss>Wt||Ss<Es)&&w.call(this);ss&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_s,it,null).clip().discardPath()),this.pdf.addImage(Z,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,ht),ss&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(Z,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,ht)};var E=function(Z,fe,ue){var pe=[];fe=fe||this.pdf.internal.pageSize.width,ue=ue||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ce=this.posY+this.ctx.prevPageLastElemOffset;switch(Z.type){default:case"mt":case"lt":pe.push(Math.floor((Z.y+Ce)/ue)+1);break;case"arc":pe.push(Math.floor((Z.y+Ce-Z.radius)/ue)+1),pe.push(Math.floor((Z.y+Ce+Z.radius)/ue)+1);break;case"qct":var Ne=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x,Z.y);pe.push(Math.floor((Ne.y+Ce)/ue)+1),pe.push(Math.floor((Ne.y+Ne.h+Ce)/ue)+1);break;case"bct":var ye=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x2,Z.y2,Z.x,Z.y);pe.push(Math.floor((ye.y+Ce)/ue)+1),pe.push(Math.floor((ye.y+ye.h+Ce)/ue)+1);break;case"rect":pe.push(Math.floor((Z.y+Ce)/ue)+1),pe.push(Math.floor((Z.y+Z.h+Ce)/ue)+1)}for(var we=0;we<pe.length;we+=1)for(;this.pdf.internal.getNumberOfPages()<pe[we];)F.call(this);return pe},F=function(){var Z=this.fillStyle,fe=this.strokeStyle,ue=this.font,pe=this.lineCap,Ce=this.lineWidth,Ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=Z,this.strokeStyle=fe,this.font=ue,this.lineCap=pe,this.lineWidth=Ce,this.lineJoin=Ne},M=function(Z,fe,ue){for(var pe=0;pe<Z.length;pe++)switch(Z[pe].type){case"bct":Z[pe].x2+=fe,Z[pe].y2+=ue;case"qct":Z[pe].x1+=fe,Z[pe].y1+=ue;default:Z[pe].x+=fe,Z[pe].y+=ue}return Z},k=function(Z){return Z.sort(function(fe,ue){return fe-ue})},K=function(Z,fe){var ue=this.fillStyle,pe=this.strokeStyle,Ce=this.lineCap,Ne=this.lineWidth,ye=Math.abs(Ne*this.ctx.transform.scaleX),we=this.lineJoin;if(this.autoPaging){for(var Te,qe,ve=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),at=[],Se=0;Se<Ge.length;Se++)if(Ge[Se].x!==void 0)for(var vt=E.call(this,Ge[Se]),ht=0;ht<vt.length;ht+=1)at.indexOf(vt[ht])===-1&&at.push(vt[ht]);for(var pt=0;pt<at.length;pt++)for(;this.pdf.internal.getNumberOfPages()<at[pt];)F.call(this);k(at);for(var Ze=at[0],Ht=at[at.length-1],At=Ze;At<Ht+1;At++){this.pdf.setPage(At),this.fillStyle=ue,this.strokeStyle=pe,this.lineCap=Ce,this.lineWidth=ye,this.lineJoin=we;var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=At===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Es=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ss=At===1?0:Wt+(At-2)*Es;if(this.ctx.clip_path.length!==0){var _s=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Te,this.posX+this.margin[3],-Ss+It+this.ctx.prevPageLastElemOffset),G.call(this,Z,!0),this.path=_s}if(qe=JSON.parse(JSON.stringify(ve)),this.path=M(qe,this.posX+this.margin[3],-Ss+It+this.ctx.prevPageLastElemOffset),fe===!1||At===0){var $e=(At>Ze||At<Ht)&&w.call(this);$e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,Es,null).clip().discardPath()),G.call(this,Z,fe),$e&&this.pdf.restoreGraphicsState()}this.lineWidth=Ne}this.path=ve}else this.lineWidth=ye,G.call(this,Z,fe),this.lineWidth=Ne},G=function(Z,fe){if((Z!=="stroke"||fe||!N.call(this))&&(Z==="stroke"||fe||!m.call(this))){for(var ue,pe,Ce=[],Ne=this.path,ye=0;ye<Ne.length;ye++){var we=Ne[ye];switch(we.type){case"begin":Ce.push({begin:!0});break;case"close":Ce.push({close:!0});break;case"mt":Ce.push({start:we,deltas:[],abs:[]});break;case"lt":var Te=Ce.length;if(Ne[ye-1]&&!isNaN(Ne[ye-1].x)&&(ue=[we.x-Ne[ye-1].x,we.y-Ne[ye-1].y],Te>0)){for(;Te>=0;Te--)if(Ce[Te-1].close!==!0&&Ce[Te-1].begin!==!0){Ce[Te-1].deltas.push(ue),Ce[Te-1].abs.push(we);break}}break;case"bct":ue=[we.x1-Ne[ye-1].x,we.y1-Ne[ye-1].y,we.x2-Ne[ye-1].x,we.y2-Ne[ye-1].y,we.x-Ne[ye-1].x,we.y-Ne[ye-1].y],Ce[Ce.length-1].deltas.push(ue);break;case"qct":var qe=Ne[ye-1].x+2/3*(we.x1-Ne[ye-1].x),ve=Ne[ye-1].y+2/3*(we.y1-Ne[ye-1].y),Ge=we.x+2/3*(we.x1-we.x),at=we.y+2/3*(we.y1-we.y),Se=we.x,vt=we.y;ue=[qe-Ne[ye-1].x,ve-Ne[ye-1].y,Ge-Ne[ye-1].x,at-Ne[ye-1].y,Se-Ne[ye-1].x,vt-Ne[ye-1].y],Ce[Ce.length-1].deltas.push(ue);break;case"arc":Ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ce[Ce.length-1].abs)&&Ce[Ce.length-1].abs.push(we)}}pe=fe?null:Z==="stroke"?"stroke":"fill";for(var ht=!1,pt=0;pt<Ce.length;pt++)if(Ce[pt].arc)for(var Ze=Ce[pt].abs,Ht=0;Ht<Ze.length;Ht++){var At=Ze[Ht];At.type==="arc"?X.call(this,At.x,At.y,At.radius,At.startAngle,At.endAngle,At.counterclockwise,void 0,fe,!ht):Ae.call(this,At.x,At.y),ht=!0}else if(Ce[pt].close===!0)this.pdf.internal.out("h"),ht=!1;else if(Ce[pt].begin!==!0){var Ct=Ce[pt].start.x,It=Ce[pt].start.y;ce.call(this,Ce[pt].deltas,Ct,It),ht=!0}pe&&J.call(this,pe),fe&&he.call(this)}},ee=function(Z){var fe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ue=fe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Z-ue;case"top":return Z+fe-ue;case"hanging":return Z+fe-2*ue;case"middle":return Z+fe/2-ue;default:return Z}},V=function(Z){return Z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var Z=function(){};return Z.colorStops=[],Z.addColorStop=function(fe,ue){this.colorStops.push([fe,ue])},Z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Z.isCanvasGradient=!0,Z},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var X=function(Z,fe,ue,pe,Ce,Ne,ye,we,Te){for(var qe=ne.call(this,ue,pe,Ce,Ne),ve=0;ve<qe.length;ve++){var Ge=qe[ve];ve===0&&(Te?q.call(this,Ge.x1+Z,Ge.y1+fe):Ae.call(this,Ge.x1+Z,Ge.y1+fe)),oe.call(this,Z,fe,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}we?he.call(this):J.call(this,ye)},J=function(Z){switch(Z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(Z,fe){this.pdf.internal.out(n(Z)+" "+r(fe)+" m")},ie=function(Z){var fe;switch(Z.align){case"right":case"end":fe="right";break;case"center":fe="center";break;default:fe="left"}var ue,pe,Ce,Ne=this.pdf.getTextDimensions(Z.text),ye=ee.call(this,Z.y),we=V.call(this,ye)-Ne.h,Te=this.ctx.transform.applyToPoint(new p(Z.x,ye));if(this.autoPaging){var qe=this.ctx.transform.decompose(),ve=new A;ve=(ve=(ve=ve.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale);for(var Ge=this.ctx.transform.applyToRectangle(new f(Z.x,ye,Ne.w,Ne.h)),at=ve.applyToRectangle(new f(Z.x,we,Ne.w,Ne.h)),Se=E.call(this,at),vt=[],ht=0;ht<Se.length;ht+=1)vt.indexOf(Se[ht])===-1&&vt.push(Se[ht]);k(vt);for(var pt=vt[0],Ze=vt[vt.length-1],Ht=pt;Ht<Ze+1;Ht++){this.pdf.setPage(Ht);var At=Ht===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[2],Wt=It-this.margin[0],Es=this.pdf.internal.pageSize.width-this.margin[1],Ss=Es-this.margin[3],_s=Ht===1?0:Ct+(Ht-2)*Wt;if(this.ctx.clip_path.length!==0){var $e=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(ue,this.posX+this.margin[3],-1*_s+At),G.call(this,"fill",!0),this.path=$e}var ke=M([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-_s+At+this.ctx.prevPageLastElemOffset)[0];Z.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*Z.scale),Ce=this.lineWidth,this.lineWidth=Ce*Z.scale);var it=this.autoPaging!=="text";if(it||ke.y+ke.h<=It){if(it||ke.y>=At&&ke.x<=Es){var tt=it?Z.text:this.pdf.splitTextToSize(Z.text,Z.maxWidth||Es-ke.x)[0],Jt=M([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-_s+At+this.ctx.prevPageLastElemOffset)[0],Qt=it&&(Ht>pt||Ht<Ze)&&w.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ss,Wt,null).clip().discardPath()),this.pdf.text(tt,Jt.x,Jt.y,{angle:Z.angle,align:fe,renderingMode:Z.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else ke.y<It&&(this.ctx.prevPageLastElemOffset+=It-ke.y);Z.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=Ce)}}else Z.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*Z.scale),Ce=this.lineWidth,this.lineWidth=Ce*Z.scale),this.pdf.text(Z.text,Te.x+this.posX,Te.y+this.posY,{angle:Z.angle,align:fe,renderingMode:Z.renderingMode,maxWidth:Z.maxWidth}),Z.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=Ce)},Ae=function(Z,fe,ue,pe){ue=ue||0,pe=pe||0,this.pdf.internal.out(n(Z+ue)+" "+r(fe+pe)+" l")},ce=function(Z,fe,ue){return this.pdf.lines(Z,fe,ue,null,null)},oe=function(Z,fe,ue,pe,Ce,Ne,ye,we){this.pdf.internal.out([s(o(ue+Z)),s(c(pe+fe)),s(o(Ce+Z)),s(c(Ne+fe)),s(o(ye+Z)),s(c(we+fe)),"c"].join(" "))},ne=function(Z,fe,ue,pe){for(var Ce=2*Math.PI,Ne=Math.PI/2;fe>ue;)fe-=Ce;var ye=Math.abs(ue-fe);ye<Ce&&pe&&(ye=Ce-ye);for(var we=[],Te=pe?-1:1,qe=fe;ye>1e-5;){var ve=qe+Te*Math.min(ye,Ne);we.push(re.call(this,Z,qe,ve)),ye-=Math.abs(ve-qe),qe=ve}return we},re=function(Z,fe,ue){var pe=(ue-fe)/2,Ce=Z*Math.cos(pe),Ne=Z*Math.sin(pe),ye=Ce,we=-Ne,Te=ye*ye+we*we,qe=Te+ye*Ce+we*Ne,ve=4/3*(Math.sqrt(2*Te*qe)-qe)/(ye*Ne-we*Ce),Ge=ye-ve*we,at=we+ve*ye,Se=Ge,vt=-at,ht=pe+fe,pt=Math.cos(ht),Ze=Math.sin(ht);return{x1:Z*Math.cos(fe),y1:Z*Math.sin(fe),x2:Ge*pt-at*Ze,y2:Ge*Ze+at*pt,x3:Se*pt-vt*Ze,y3:Se*Ze+vt*pt,x4:Z*Math.cos(ue),y4:Z*Math.sin(ue)}},se=function(Z){return 180*Z/Math.PI},je=function(Z,fe,ue,pe,Ce,Ne){var ye=Z+.5*(ue-Z),we=fe+.5*(pe-fe),Te=Ce+.5*(ue-Ce),qe=Ne+.5*(pe-Ne),ve=Math.min(Z,Ce,ye,Te),Ge=Math.max(Z,Ce,ye,Te),at=Math.min(fe,Ne,we,qe),Se=Math.max(fe,Ne,we,qe);return new f(ve,at,Ge-ve,Se-at)},De=function(Z,fe,ue,pe,Ce,Ne,ye,we){var Te,qe,ve,Ge,at,Se,vt,ht,pt,Ze,Ht,At,Ct,It,Wt=ue-Z,Es=pe-fe,Ss=Ce-ue,_s=Ne-pe,$e=ye-Ce,ke=we-Ne;for(qe=0;qe<41;qe++)pt=(vt=(ve=Z+(Te=qe/40)*Wt)+Te*((at=ue+Te*Ss)-ve))+Te*(at+Te*(Ce+Te*$e-at)-vt),Ze=(ht=(Ge=fe+Te*Es)+Te*((Se=pe+Te*_s)-Ge))+Te*(Se+Te*(Ne+Te*ke-Se)-ht),qe==0?(Ht=pt,At=Ze,Ct=pt,It=Ze):(Ht=Math.min(Ht,pt),At=Math.min(At,Ze),Ct=Math.max(Ct,pt),It=Math.max(It,Ze));return new f(Math.round(Ht),Math.round(At),Math.round(Ct-Ht),Math.round(It-At))},ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Z,fe,ue=(Z=this.ctx.lineDash,fe=this.ctx.lineDashOffset,JSON.stringify({lineDash:Z,lineDashOffset:fe}));this.prevLineDash!==ue&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ue)}}})(hn.API),(function(t){var s=function(p){var f,A,h,l,g,v,m,N,w,E;for(A=[],h=0,l=(p+=f="\0\0\0\0".slice(p.length%4||4)).length;l>h;h+=4)(g=(p.charCodeAt(h)<<24)+(p.charCodeAt(h+1)<<16)+(p.charCodeAt(h+2)<<8)+p.charCodeAt(h+3))!==0?(v=(g=((g=((g=((g=(g-(E=g%85))/85)-(w=g%85))/85)-(N=g%85))/85)-(m=g%85))/85)%85,A.push(v+33,m+33,N+33,w+33,E+33)):A.push(122);return(function(F,M){for(var k=M;k>0;k--)F.pop()})(A,f.length),String.fromCharCode.apply(String,A)+"~>"},n=function(p){var f,A,h,l,g,v=String,m="length",N=255,w="charCodeAt",E="slice",F="replace";for(p[E](-2),p=p[E](0,-2)[F](/\s/g,"")[F]("z","!!!!!"),h=[],l=0,g=(p+=f="uuuuu"[E](p[m]%5||5))[m];g>l;l+=5)A=52200625*(p[w](l)-33)+614125*(p[w](l+1)-33)+7225*(p[w](l+2)-33)+85*(p[w](l+3)-33)+(p[w](l+4)-33),h.push(N&A>>24,N&A>>16,N&A>>8,N&A);return(function(M,k){for(var K=k;K>0;K--)M.pop()})(h,f[m]),v.fromCharCode.apply(v,h)},r=function(p){return p.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(p){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((p=p.replace(/\s/g,"")).indexOf(">")!==-1&&(p=p.substr(0,p.indexOf(">"))),p.length%2&&(p+="0"),f.test(p)===!1)return"";for(var A="",h=0;h<p.length;h+=2)A+=String.fromCharCode("0x"+(p[h]+p[h+1]));return A},c=function(p){for(var f=new Uint8Array(p.length),A=p.length;A--;)f[A]=p.charCodeAt(A);return(f=Pv(f)).reduce(function(h,l){return h+String.fromCharCode(l)},"")};t.processDataByFilters=function(p,f){var A=0,h=p||"",l=[];for(typeof(f=f||[])=="string"&&(f=[f]),A=0;A<f.length;A+=1)switch(f[A]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=s(h),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=o(h),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=r(h),l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=c(h),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[A]+'" is not implemented')}return{data:h,reverseChain:l.reverse().join(" ")}}})(hn.API),(function(t){t.loadFile=function(s,n,r){return(function(o,c,p){c=c!==!1,p=typeof p=="function"?p:function(){};var f=void 0;try{f=(function(A,h,l){var g=new XMLHttpRequest,v=0,m=function(N){var w=N.length,E=[],F=String.fromCharCode;for(v=0;v<w;v+=1)E.push(F(255&N.charCodeAt(v)));return E.join("")};if(g.open("GET",A,!h),g.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(g.onload=function(){g.status===200?l(m(this.responseText)):l(void 0)}),g.send(null),h&&g.status===200)return m(g.responseText)})(o,c,p)}catch{}return f})(s,n,r)},t.loadImageFile=t.loadFile})(hn.API),(function(t){function s(){return(Dn.html2canvas?Promise.resolve(Dn.html2canvas):Uc(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function n(){return(Dn.DOMPurify?Promise.resolve(Dn.DOMPurify):Uc(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var r=function(f){var A=Aa(f);return A==="undefined"?"undefined":A==="string"||f instanceof String?"string":A==="number"||f instanceof Number?"number":A==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":A==="object"?"object":"unknown"},o=function(f,A){var h=document.createElement(f);for(var l in A.className&&(h.className=A.className),A.innerHTML&&A.dompurify&&(h.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)h.style[l]=A.style[l];return h},c=function f(A,h){for(var l=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),g=A.firstChild;g;g=g.nextSibling)h!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||l.appendChild(f(g,h));return A.nodeType===1&&(A.nodeName==="CANVAS"?(l.width=A.width,l.height=A.height,l.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(l.value=A.value),l.addEventListener("load",function(){l.scrollTop=A.scrollTop,l.scrollLeft=A.scrollLeft},!0)),l},p=function f(A){var h=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),l=f.convert(Promise.resolve(),h);return(l=l.setProgress(1,f,1,[f])).set(A)};(p.prototype=Object.create(Promise.prototype)).constructor=p,p.convert=function(f,A){return f.__proto__=A||p.prototype,f},p.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},p.prototype.from=function(f,A){return this.then(function(){switch(A=A||(function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(f),A){case"string":return this.then(n).then(function(h){return this.set({src:o("div",{innerHTML:f,dompurify:h})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},p.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},p.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=c(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},p.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(s).then(function(A){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,A(this.prop.container,h)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},p.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(s).then(function(A){var h=this.opt.jsPDF,l=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=l,l)for(var m=0;m<l.length;++m){var N=l[m],w=N.src.find(function(E){return E.format==="truetype"});w&&h.addFont(w.url,N.ref.name,N.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,h.context2d.save(!0),A(this.prop.container,v)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},p.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},p.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},p.prototype.output=function(f,A,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(f,A):this.outputPdf(f,A)},p.prototype.outputPdf=function(f,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,A)})},p.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},p.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},p.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},p.prototype.set=function(f){if(r(f)!=="object")return this;var A=Object.keys(f||{}).map(function(h){if(h in p.template.prop)return function(){this.prop[h]=f[h]};switch(h){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[h]=f[h]}}},this);return this.then(function(){return this.thenList(A)})},p.prototype.get=function(f,A){return this.then(function(){var h=f in p.template.prop?this.prop[f]:this.opt[f];return A?A(h):h})},p.prototype.setMargin=function(f){return this.then(function(){switch(r(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},p.prototype.setPageSize=function(f){function A(h,l){return Math.floor(h*l/72*96)}return this.then(function(){(f=f||hn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:A(f.inner.width,f.k),height:A(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},p.prototype.setProgress=function(f,A,h,l){return f!=null&&(this.progress.val=f),A!=null&&(this.progress.state=A),h!=null&&(this.progress.n=h),l!=null&&(this.progress.stack=l),this.progress.ratio=this.progress.val/this.progress.state,this},p.prototype.updateProgress=function(f,A,h,l){return this.setProgress(f?this.progress.val+f:null,A||null,h?this.progress.n+h:null,l?this.progress.stack.concat(l):null)},p.prototype.then=function(f,A){var h=this;return this.thenCore(f,A,function(l,g){return h.updateProgress(null,null,1,[l]),Promise.prototype.then.call(this,function(v){return h.updateProgress(null,l),v}).then(l,g).then(function(v){return h.updateProgress(1),v})})},p.prototype.thenCore=function(f,A,h){h=h||Promise.prototype.then;var l=this;f&&(f=f.bind(l)),A&&(A=A.bind(l));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?l:p.convert(Object.assign({},l),Promise.prototype),v=h.call(g,f,A);return p.convert(v,l.__proto__)},p.prototype.thenExternal=function(f,A){return Promise.prototype.then.call(this,f,A)},p.prototype.thenList=function(f){var A=this;return f.forEach(function(h){A=A.thenCore(h)}),A},p.prototype.catch=function(f){f&&(f=f.bind(this));var A=Promise.prototype.catch.call(this,f);return p.convert(A,this)},p.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},p.prototype.error=function(f){return this.then(function(){throw new Error(f)})},p.prototype.using=p.prototype.set,p.prototype.saveAs=p.prototype.save,p.prototype.export=p.prototype.output,p.prototype.run=p.prototype.then,hn.getPageSize=function(f,A,h){if(Aa(f)==="object"){var l=f;f=l.orientation,A=l.unit||A,h=l.format||h}A=A||"mm",h=h||"a4",f=(""+(f||"P")).toLowerCase();var g,v=(""+h).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+A}var N,w=0,E=0;if(m.hasOwnProperty(v))w=m[v][1]/g,E=m[v][0]/g;else try{w=h[1],E=h[0]}catch{throw new Error("Invalid format: "+h)}if(f==="p"||f==="portrait")f="p",E>w&&(N=E,E=w,w=N);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",w>E&&(N=E,E=w,w=N)}return{width:E,height:w,unit:A,k:g,orientation:f}},t.html=function(f,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(O0):null;var h=new p(A);return A.worker?h:h.from(f).doCallback()}})(hn.API),hn.API.addJS=function(t){return JS=t,this.internal.events.subscribe("postPutResources",function(){wg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(wg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),XS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+JS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){wg!==void 0&&XS!==void 0&&this.internal.out("/Names <</JavaScript "+wg+" 0 R>>")}),this},(function(t){var s;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),c=0;c<o.length;c++){var p=o[c],f=r.exec(p);if(f!=null){var A=f[1];n.internal.newObjectDeferredBegin(A,!1)}n.internal.write(p)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,l=[];for(c=0;c<h;c++){var g=n.internal.newObject();l.push(g);var v=n.internal.getPageInfo(c+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),c=0;c<l.length;c++)n.internal.write("(page_"+(c+1)+")"+l[c]+" 0 R");n.internal.write(" ] >>","endobj"),s=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,c){var p={title:o,options:c,children:[]};return r==null&&(r=this.root),r.children.push(p),p},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<r.children.length;c++){var p=r.children[c];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(r)),c>0&&this.line("/Prev "+this.makeRef(r.children[c-1])),c<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[c+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var f=this.count=this.count_r({count:0},p);if(f>0&&this.line("/Count "+f),p.options&&p.options.pageNumber){var A=n.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var c=0;c<o.children.length;c++)r.count++,this.count_r(r,o.children[c]);return r.count}}])})(hn.API),(function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,o,c,p,f){var A,h=this.decode.DCT_DECODE,l=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=p||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,A=(function(g){for(var v,m=256*g.charCodeAt(4)+g.charCodeAt(5),N=g.length,w={width:0,height:0,numcomponents:1},E=4;E<N;E+=2){if(E+=m,s.indexOf(g.charCodeAt(E+1))!==-1){v=256*g.charCodeAt(E+5)+g.charCodeAt(E+6),w={width:256*g.charCodeAt(E+7)+g.charCodeAt(E+8),height:v,numcomponents:g.charCodeAt(E+9)};break}m=256*g.charCodeAt(E+2)+g.charCodeAt(E+3)}return w})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),A.numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}l={data:n,width:A.width,height:A.height,colorSpace:f,bitsPerComponent:8,filter:h,index:r,alias:o}}return l}})(hn.API),hn.API.processPNG=function(t,s,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var o,c=Q9(t,{checkCrc:!0}),p=c.width,f=c.height,A=c.channels,h=c.palette,l=c.depth;o=h&&A===1?(function(X){for(var J=X.width,he=X.height,q=X.data,ie=X.palette,Ae=X.depth,ce=!1,oe=[],ne=[],re=void 0,se=!1,je=0,De=0;De<ie.length;De++){var ge=sS(ie[De],4),Z=ge[0],fe=ge[1],ue=ge[2],pe=ge[3];oe.push(Z,fe,ue),pe!=null&&(pe===0?(je++,ne.length<1&&ne.push(De)):pe<255&&(se=!0))}if(se||je>1){ce=!0,ne=void 0;var Ce=J*he;re=new Uint8Array(Ce);for(var Ne=new DataView(q.buffer),ye=0;ye<Ce;ye++){var we=L0(Ne,ye,Ae),Te=sS(ie[we],4)[3];re[ye]=Te}}else je===0&&(ne=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ce?8:void 0,colorBytes:q,alphaBytes:re,needSMask:ce,palette:oe,mask:ne}})(c):A===2||A===4?(function(X){for(var J=X.data,he=X.width,q=X.height,ie=X.channels,Ae=X.depth,ce=ie===2?"DeviceGray":"DeviceRGB",oe=ie-1,ne=he*q,re=oe,se=ne*re,je=1*ne,De=Math.ceil(se*Ae/8),ge=Math.ceil(je*Ae/8),Z=new Uint8Array(De),fe=new Uint8Array(ge),ue=new DataView(J.buffer),pe=new DataView(Z.buffer),Ce=new DataView(fe.buffer),Ne=!1,ye=0;ye<ne;ye++){for(var we=ye*ie,Te=0;Te<re;Te++)oB(pe,L0(ue,we+Te,Ae),ye*re+Te,Ae);var qe=L0(ue,we+re,Ae);qe<(1<<Ae)-1&&(Ne=!0),oB(Ce,qe,1*ye,Ae)}return{colorSpace:ce,colorsPerPixel:oe,sMaskBitsPerComponent:Ne?Ae:void 0,colorBytes:Z,alphaBytes:fe,needSMask:Ne}})(c):(function(X){var J=X.data,he=X.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:he,colorsPerPixel:he==="DeviceGray"?1:3,colorBytes:J instanceof Uint16Array?(function(q){for(var ie=q.length,Ae=new Uint8Array(2*ie),ce=new DataView(Ae.buffer,Ae.byteOffset,Ae.byteLength),oe=0;oe<ie;oe++)ce.setUint16(2*oe,q[oe],!1);return Ae})(J):J,needSMask:!1}})(c);var g,v,m,N=o,w=N.colorSpace,E=N.colorsPerPixel,F=N.sMaskBitsPerComponent,M=N.colorBytes,k=N.alphaBytes,K=N.needSMask,G=N.palette,ee=N.mask,V=null;return r!==hn.API.image_compression.NONE&&typeof Pv=="function"?(V=(function(X){var J;switch(X){case hn.API.image_compression.FAST:J=11;break;case hn.API.image_compression.MEDIUM:J=13;break;case hn.API.image_compression.SLOW:J=14;break;default:J=12}return J})(r),g=this.decode.FLATE_DECODE,v="/Predictor ".concat(V," /Colors ").concat(E," /BitsPerComponent ").concat(l," /Columns ").concat(p),t=sB(M,Math.ceil(p*E*l/8),E,l,r),K&&(m=sB(k,Math.ceil(p*F/8),1,F,r))):(g=void 0,v=void 0,t=M,K&&(m=k)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:n,data:t,index:s,filter:g,decodeParameters:v,transparency:ee,palette:G,sMask:m,predictor:V,width:p,height:f,bitsPerComponent:l,sMaskBitsPerComponent:F,colorSpace:w}}},(function(t){t.processGIF89A=function(s,n,r,o){var c=new aK(s),p=c.width,f=c.height,A=[];c.decodeAndBlitFrameRGBA(0,A);var h={data:A,width:p,height:f},l=new D0(100).encode(h,100);return t.processJPEG.call(this,l,n,r,o)},t.processGIF87A=t.processGIF89A})(hn.API),Fc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:o,green:r,blue:n,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(n){Ba.log("bit decode error:"+n)}},Fc.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),n=s%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<s;o++)for(var c=this.datav.getUint8(this.pos++,!0),p=r*this.width*4+8*o*4,f=0;f<8&&8*o+f<this.width;f++){var A=this.palette[c>>7-f&1];this.data[p+4*f]=A.blue,this.data[p+4*f+1]=A.green,this.data[p+4*f+2]=A.red,this.data[p+4*f+3]=255}n!==0&&(this.pos+=4-n)}},Fc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var c=this.datav.getUint8(this.pos++,!0),p=r*this.width*4+2*o*4,f=c>>4,A=15&c,h=this.palette[f];if(this.data[p]=h.blue,this.data[p+1]=h.green,this.data[p+2]=h.red,this.data[p+3]=255,2*o+1>=this.width)break;h=this.palette[A],this.data[p+4]=h.blue,this.data[p+4+1]=h.green,this.data[p+4+2]=h.red,this.data[p+4+3]=255}s!==0&&(this.pos+=4-s)}},Fc.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+4*r;if(o<this.palette.length){var p=this.palette[o];this.data[c]=p.red,this.data[c+1]=p.green,this.data[c+2]=p.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}t!==0&&(this.pos+=4-t)}},Fc.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(c&s)/s*255|0,f=(c>>5&s)/s*255|0,A=(c>>10&s)/s*255|0,h=c>>15?255:0,l=r*this.width*4+4*o;this.data[l]=A,this.data[l+1]=f,this.data[l+2]=p,this.data[l+3]=h}this.pos+=t}},Fc.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,c=0;c<this.width;c++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(p&s)/s*255|0,A=(p>>5&n)/n*255|0,h=(p>>11)/s*255|0,l=o*this.width*4+4*c;this.data[l]=h,this.data[l+1]=A,this.data[l+2]=f,this.data[l+3]=255}this.pos+=t}},Fc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+4*n;this.data[p]=c,this.data[p+1]=o,this.data[p+2]=r,this.data[p+3]=255}this.pos+=this.width%4}},Fc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),f=s*this.width*4+4*n;this.data[f]=c,this.data[f+1]=o,this.data[f+2]=r,this.data[f+3]=p}},Fc.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(s,n,r,o){var c=new Fc(s,!1),p=c.width,f=c.height,A={data:c.getData(),width:p,height:f},h=new D0(100).encode(A,100);return t.processJPEG.call(this,h,n,r,o)}})(hn.API),cB.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(s,n,r,o){var c=new cB(s),p=c.width,f=c.height,A={data:c.getData(),width:p,height:f},h=new D0(100).encode(A,100);return t.processJPEG.call(this,h,n,r,o)}})(hn.API),hn.API.processRGBA=function(t,s,n){for(var r=t.data,o=r.length,c=new Uint8Array(o/4*3),p=new Uint8Array(o/4),f=0,A=0,h=0;h<o;h+=4){var l=r[h],g=r[h+1],v=r[h+2],m=r[h+3];c[f++]=l,c[f++]=g,c[f++]=v,p[A++]=m}var N=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:N,index:s,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},hn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Kh=hn.API,Sg=Kh.getCharWidthsArray=function(t,s){var n,r,o=(s=s||{}).font||this.internal.getFont(),c=s.fontSize||this.internal.getFontSize(),p=s.charSpace||this.internal.getCharSpace(),f=s.widths?s.widths:o.metadata.Unicode.widths,A=f.fof?f.fof:1,h=s.kerning?s.kerning:o.metadata.Unicode.kerning,l=h.fof?h.fof:1,g=s.doKerning!==!1,v=0,m=t.length,N=0,w=f[0]||A,E=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?E.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+p*(1e3/c)||0)/1e3):(v=g&&Aa(h[r])==="object"&&!isNaN(parseInt(h[r][N],10))?h[r][N]/l:0,E.push((f[r]||w)/A+v)),N=r;return E},ZS=Kh.getStringUnitWidth=function(t,s){var n=(s=s||{}).fontSize||this.internal.getFontSize(),r=s.font||this.internal.getFont(),o=s.charSpace||this.internal.getCharSpace();return Kh.processArabic&&(t=Kh.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,o)/n:Sg.apply(this,arguments).reduce(function(c,p){return c+p},0)},eB=function(t,s,n,r){for(var o=[],c=0,p=t.length,f=0;c!==p&&f+s[c]<n;)f+=s[c],c++;o.push(t.slice(0,c));var A=c;for(f=0;c!==p;)f+s[c]>r&&(o.push(t.slice(A,c)),f=0,A=c),f+=s[c],c++;return A!==c&&o.push(t.slice(A,c)),o},tB=function(t,s,n){n||(n={});var r,o,c,p,f,A,h,l=[],g=[l],v=n.textIndent||0,m=0,N=0,w=t.split(" "),E=Sg.apply(this,[" ",n])[0];if(A=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var F=Array(A).join(" "),M=[];w.map(function(K){(K=K.split(/\s*\n/)).length>1?M=M.concat(K.map(function(G,ee){return(ee&&G.length?`
`:"")+G})):M.push(K[0])}),w=M,A=ZS.apply(this,[F,n])}for(c=0,p=w.length;c<p;c++){var k=0;if(r=w[c],A&&r[0]==`
`&&(r=r.substr(1),k=1),v+m+(N=(o=Sg.apply(this,[r,n])).reduce(function(K,G){return K+G},0))>s||k){if(N>s){for(f=eB.apply(this,[r,o,s-(v+m),s]),l.push(f.shift()),l=[f.pop()];f.length;)g.push([f.shift()]);N=o.slice(r.length-(l[0]?l[0].length:0)).reduce(function(K,G){return K+G},0)}else l=[r];g.push(l),v=N+A,m=E}else l.push(r),v+=m+N,m=E}return h=A?function(K,G){return(G?F:"")+K.join(" ")}:function(K){return K.join(" ")},g.map(h)},Kh.splitTextToSize=function(t,s,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),c=(function(l){if(l.widths&&l.kerning)return{widths:l.widths,kerning:l.kerning};var g=this.internal.getFont(l.fontName,l.fontStyle),v="Unicode";return g.metadata[v]?{widths:g.metadata[v].widths||{0:1},kerning:g.metadata[v].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var p=1*this.internal.scaleFactor*s/o;c.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,c.lineIndent=n.lineIndent;var f,A,h=[];for(f=0,A=r.length;f<A;f++)h=h.concat(tB.apply(this,[r[f],p,c]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="0123456789abcdef",n="klmnopqrstuvwxyz",r={},o={},c=0;c<16;c++)r[n[c]]=s[c],o[s[c]]=n[c];var p=function(v){return"0x"+parseInt(v,10).toString(16)},f=t.__fontmetrics__.compress=function(v){var m,N,w,E,F=["{"];for(var M in v){if(m=v[M],isNaN(parseInt(M,10))?N="'"+M+"'":(M=parseInt(M,10),N=(N=p(M).slice(2)).slice(0,-1)+o[N.slice(-1)]),typeof m=="number")m<0?(w=p(m).slice(3),E="-"):(w=p(m).slice(2),E=""),w=E+w.slice(0,-1)+o[w.slice(-1)];else{if(Aa(m)!=="object")throw new Error("Don't know what to do with value type "+Aa(m)+".");w=f(m)}F.push(N+w)}return F.push("}"),F.join("")},A=t.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,N,w,E,F={},M=1,k=F,K=[],G="",ee="",V=v.length-1,X=1;X<V;X+=1)(E=v[X])=="'"?m?(w=m.join(""),m=void 0):m=[]:m?m.push(E):E=="{"?(K.push([k,w]),k={},w=void 0):E=="}"?((N=K.pop())[0][N[1]]=k,w=void 0,k=N[0]):E=="-"?M=-1:w===void 0?r.hasOwnProperty(E)?(G+=r[E],w=parseInt(G,16)*M,M=1,G=""):G+=E:r.hasOwnProperty(E)?(ee+=r[E],k[w]=parseInt(ee,16)*M,M=1,w=void 0,ee=""):ee+=E;return F},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},g={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(v){var m=v.font,N=g.Unicode[m.postScriptName];N&&(m.metadata.Unicode={},m.metadata.Unicode.widths=N.widths,m.metadata.Unicode.kerning=N.kerning);var w=l.Unicode[m.postScriptName];w&&(m.metadata.Unicode.encoding=w,m.encoding=w.codePages[0])}])})(hn.API),(function(t){var s=function(n){for(var r=n.length,o=new Uint8Array(r),c=0;c<r;c++)o[c]=n.charCodeAt(c);return o};t.API.events.push(["addFont",function(n){var r=void 0,o=n.font,c=n.instance;if(!o.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=c.existsFileInVFS(o.postScriptName)===!1?c.loadFile(o.postScriptName):c.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(p,f){f=/^\x00\x01\x00\x00/.test(f)?s(f):s(Mg(f)),p.metadata=t.API.TTFFont.open(f),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(o,r)}}])})(hn),hn.API.addSvgAsImage=function(t,s,n,r,o,c,p,f){if(isNaN(s)||isNaN(n))throw Ba.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw Ba.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=r,A.height=o;var h=A.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,A.width,A.height);var l={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(Dn.canvg?Promise.resolve(Dn.canvg):Uc(()=>import("./index.es-Ckx_QAtn.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(h,t,l)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(l)}).then(function(){g.addImage(A.toDataURL("image/jpeg",1),s,n,r,o,p,f)})},hn.API.putTotalPages=function(t){var s,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(s,n);return this},hn.API.viewerPreferences=function(t,s){var n;t=t||{},s=s||!1;var r,o,c,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(p),A=[],h=0,l=0,g=0;function v(N,w){var E,F=!1;for(E=0;E<N.length;E+=1)N[E]===w&&(F=!0);return F}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var m=f.length;for(g=0;g<m;g+=1)n[f[g]].value=n[f[g]].defaultValue,n[f[g]].explicitSet=!1}if(Aa(t)==="object"){for(o in t)if(c=t[o],v(f,o)&&c!==void 0){if(n[o].type==="boolean"&&typeof c=="boolean")n[o].value=c;else if(n[o].type==="name"&&v(n[o].valueSet,c))n[o].value=c;else if(n[o].type==="integer"&&Number.isInteger(c))n[o].value=c;else if(n[o].type==="array"){for(h=0;h<c.length;h+=1)if(r=!0,c[h].length===1&&typeof c[h][0]=="number")A.push(String(c[h]-1));else if(c[h].length>1){for(l=0;l<c[h].length;l+=1)typeof c[h][l]!="number"&&(r=!1);r===!0&&A.push([c[h][0]-1,c[h][1]-1].join(" "))}n[o].value="["+A.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,w=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?w.push("/"+N+" /"+n[N].value):w.push("/"+N+" "+n[N].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var s=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(r)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),h=c.length+p.length+f.length+o.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(o+c+p+f+A),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",s)),this}})(hn.API),(function(t){var s=t.API,n=s.pdfEscape16=function(c,p){for(var f,A=p.metadata.Unicode.widths,h=["","0","00","000","0000"],l=[""],g=0,v=c.length;g<v;++g){if(f=p.metadata.characterToGlyph(c.charCodeAt(g)),p.metadata.glyIdsUsed.push(f),p.metadata.toUnicode[f]=c.charCodeAt(g),A.indexOf(f)==-1&&(A.push(f),A.push([parseInt(p.metadata.widthOfGlyph(f),10)])),f=="0")return l.join("");f=f.toString(16),l.push(h[4-f.length],f)}return l.join("")},r=function(c){var p,f,A,h,l,g,v;for(l=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],g=0,v=(f=Object.keys(c).sort(function(m,N){return m-N})).length;g<v;g++)p=f[g],A.length>=100&&(l+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),c[p]!==void 0&&c[p]!==null&&typeof c[p].toString=="function"&&(h=("0000"+c[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),A.push("<"+p+"><"+h+">"));return A.length&&(l+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),l+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(c){(function(p){var f=p.font,A=p.out,h=p.newObject,l=p.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="Identity-H"){for(var g=f.metadata.Unicode.widths,v=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),m="",N=0;N<v.length;N++)m+=String.fromCharCode(v[N]);var w=h();l({data:m,addLength1:!0,objectId:w}),A("endobj");var E=h();l({data:r(f.metadata.toUnicode),addLength1:!0,objectId:E}),A("endobj");var F=h();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Gh(f.fontName)),A("/FontFile2 "+w+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),A("/Flags "+f.metadata.flags),A("/StemV "+f.metadata.stemV),A("/ItalicAngle "+f.metadata.italicAngle),A("/Ascent "+f.metadata.ascender),A("/Descent "+f.metadata.decender),A("/CapHeight "+f.metadata.capHeight),A(">>"),A("endobj");var M=h();A("<<"),A("/Type /Font"),A("/BaseFont /"+Gh(f.fontName)),A("/FontDescriptor "+F+" 0 R"),A("/W "+t.API.PDFObject.convert(g)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+f.encoding+")"),A(">>"),A(">>"),A("endobj"),f.objectNumber=h(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+E+" 0 R"),A("/BaseFont /"+Gh(f.fontName)),A("/Encoding /"+f.encoding),A("/DescendantFonts ["+M+" 0 R]"),A(">>"),A("endobj"),f.isAlreadyPutted=!0}})(c)}]),s.events.push(["putFont",function(c){(function(p){var f=p.font,A=p.out,h=p.newObject,l=p.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var g=f.metadata.rawData,v="",m=0;m<g.length;m++)v+=String.fromCharCode(g[m]);var N=h();l({data:v,addLength1:!0,objectId:N}),A("endobj");var w=h();l({data:r(f.metadata.toUnicode),addLength1:!0,objectId:w}),A("endobj");var E=h();A("<<"),A("/Descent "+f.metadata.decender),A("/CapHeight "+f.metadata.capHeight),A("/StemV "+f.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+N+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),A("/FontName /"+Gh(f.fontName)),A("/ItalicAngle "+f.metadata.italicAngle),A("/Ascent "+f.metadata.ascender),A(">>"),A("endobj"),f.objectNumber=h();for(var F=0;F<f.metadata.hmtx.widths.length;F++)f.metadata.hmtx.widths[F]=parseInt(f.metadata.hmtx.widths[F]*(1e3/f.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Gh(f.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),A("endobj"),f.isAlreadyPutted=!0}})(c)}]);var o=function(c){var p,f=c.text||"",A=c.x,h=c.y,l=c.options||{},g=c.mutex||{},v=g.pdfEscape,m=g.activeFontKey,N=g.fonts,w=m,E="",F=0,M="",k=N[w].encoding;if(N[w].encoding!=="Identity-H")return{text:f,x:A,y:h,options:l,mutex:g};for(M=f,w=m,Array.isArray(f)&&(M=f[0]),F=0;F<M.length;F+=1)N[w].metadata.hasOwnProperty("cmap")&&(p=N[w].metadata.cmap.unicode.codeMap[M[F].charCodeAt(0)]),p||M[F].charCodeAt(0)<256&&N[w].metadata.hasOwnProperty("Unicode")?E+=M[F]:E+="";var K="";return parseInt(w.slice(1))<14||k==="WinAnsiEncoding"?K=v(E,w).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(K=n(E,N[w])),g.isHex=!0,{text:K,x:A,y:h,options:l,mutex:g}};s.events.push(["postProcessText",function(c){var p=c.text||"",f=[],A={text:p,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(p)){var h=0;for(h=0;h<p.length;h+=1)Array.isArray(p[h])&&p[h].length===3?f.push([o(Object.assign({},A,{text:p[h][0]})).text,p[h][1],p[h][2]]):f.push(o(Object.assign({},A,{text:p[h]})).text);c.text=f}else c.text=o(Object.assign({},A,{text:p})).text}])})(hn),(function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return s.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(hn.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var o,c,p,f,A,h,l,g=s,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],F=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,k=0;this.__bidiEngine__={};var K=function(q){var ie=q.charCodeAt(),Ae=ie>>8,ce=w[Ae];return ce!==void 0?g[256*ce+(255&ie)]:Ae===252||Ae===253?"AL":F.test(Ae)?"L":Ae===8?"R":"N"},G=function(q){for(var ie,Ae=0;Ae<q.length;Ae++){if((ie=K(q.charAt(Ae)))==="L")return!1;if(ie==="R")return!0}return!1},ee=function(q,ie,Ae,ce){var oe,ne,re,se,je=ie[ce];switch(je){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"N":case"AN":break;case"EN":M&&(je="AN");break;case"AL":M=!0,je="R";break;case"WS":case"BN":je="N";break;case"CS":ce<1||ce+1>=ie.length||(oe=Ae[ce-1])!=="EN"&&oe!=="AN"||(ne=ie[ce+1])!=="EN"&&ne!=="AN"?je="N":M&&(ne="AN"),je=ne===oe?ne:"N";break;case"ES":je=(oe=ce>0?Ae[ce-1]:"B")==="EN"&&ce+1<ie.length&&ie[ce+1]==="EN"?"EN":"N";break;case"ET":if(ce>0&&Ae[ce-1]==="EN"){je="EN";break}if(M){je="N";break}for(re=ce+1,se=ie.length;re<se&&ie[re]==="ET";)re++;je=re<se&&ie[re]==="EN"?"EN":"N";break;case"NSM":if(p&&!f){for(se=ie.length,re=ce+1;re<se&&ie[re]==="NSM";)re++;if(re<se){var De=q[ce],ge=De>=1425&&De<=2303||De===64286;if(oe=ie[re],ge&&(oe==="R"||oe==="AL")){je="R";break}}}je=ce<1||(oe=ie[ce-1])==="B"?"N":Ae[ce-1];break;case"B":M=!1,o=!0,je=k;break;case"S":c=!0,je="N"}return je},V=function(q,ie,Ae){var ce=q.split("");return Ae&&X(ce,Ae,{hiLevel:k}),ce.reverse(),ie&&ie.reverse(),ce.join("")},X=function(q,ie,Ae){var ce,oe,ne,re,se,je=-1,De=q.length,ge=0,Z=[],fe=k?m:v,ue=[];for(M=!1,o=!1,c=!1,oe=0;oe<De;oe++)ue[oe]=K(q[oe]);for(ne=0;ne<De;ne++){if(se=ge,Z[ne]=ee(q,ue,Z,ne),ce=240&(ge=fe[se][N[Z[ne]]]),ge&=15,ie[ne]=re=fe[ge][5],ce>0)if(ce===16){for(oe=je;oe<ne;oe++)ie[oe]=1;je=-1}else je=-1;if(fe[ge][6])je===-1&&(je=ne);else if(je>-1){for(oe=je;oe<ne;oe++)ie[oe]=re;je=-1}ue[ne]==="B"&&(ie[ne]=0),Ae.hiLevel|=re}c&&(function(pe,Ce,Ne){for(var ye=0;ye<Ne;ye++)if(pe[ye]==="S"){Ce[ye]=k;for(var we=ye-1;we>=0&&pe[we]==="WS";we--)Ce[we]=k}})(ue,ie,De)},J=function(q,ie,Ae,ce,oe){if(!(oe.hiLevel<q)){if(q===1&&k===1&&!o)return ie.reverse(),void(Ae&&Ae.reverse());for(var ne,re,se,je,De=ie.length,ge=0;ge<De;){if(ce[ge]>=q){for(se=ge+1;se<De&&ce[se]>=q;)se++;for(je=ge,re=se-1;je<re;je++,re--)ne=ie[je],ie[je]=ie[re],ie[re]=ne,Ae&&(ne=Ae[je],Ae[je]=Ae[re],Ae[re]=ne);ge=se}ge++}}},he=function(q,ie,Ae){var ce=q.split(""),oe={hiLevel:k};return Ae||(Ae=[]),X(ce,Ae,oe),(function(ne,re,se){if(se.hiLevel!==0&&l)for(var je,De=0;De<ne.length;De++)re[De]===1&&(je=E.indexOf(ne[De]))>=0&&(ne[De]=E[je+1])})(ce,Ae,oe),J(2,ce,ie,Ae,oe),J(1,ce,ie,Ae,oe),ce.join("")};return this.__bidiEngine__.doBidiReorder=function(q,ie,Ae){if((function(oe,ne){if(ne)for(var re=0;re<oe.length;re++)ne[re]=re;f===void 0&&(f=G(oe)),h===void 0&&(h=G(oe))})(q,ie),p||!A||h)if(p&&A&&f^h)k=f?1:0,q=V(q,ie,Ae);else if(!p&&A&&h)k=f?1:0,q=he(q,ie,Ae),q=V(q,ie);else if(!p||f||A||h){if(p&&!A&&f^h)q=V(q,ie),f?(k=0,q=he(q,ie,Ae)):(k=1,q=he(q,ie,Ae),q=V(q,ie));else if(p&&f&&!A&&h)k=1,q=he(q,ie,Ae),q=V(q,ie);else if(!p&&!A&&f^h){var ce=l;f?(k=1,q=he(q,ie,Ae),k=0,l=!1,q=he(q,ie,Ae),l=ce):(k=0,q=he(q,ie,Ae),q=V(q,ie),k=1,l=!1,q=he(q,ie,Ae),l=ce,q=V(q,ie))}}else k=0,q=he(q,ie,Ae);else k=f?1:0,q=he(q,ie,Ae);return q},this.__bidiEngine__.setOptions=function(q){q&&(p=q.isInputVisual,A=q.isOutputVisual,f=q.isInputRtl,h=q.isOutputRtl,l=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var o=r.text;r.x,r.y;var c=r.options||{};r.mutex,c.lang;var p=[];if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,n.setOptions(c),Object.prototype.toString.call(o)==="[object Array]"){var f=0;for(p=[],f=0;f<o.length;f+=1)Object.prototype.toString.call(o[f])==="[object Array]"?p.push([n.doBidiReorder(o[f][0]),o[f][1],o[f][2]]):p.push([n.doBidiReorder(o[f])]);r.text=p}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])})(hn),hn.API.TTFFont=(function(){function t(s){var n;if(this.rawData=s,n=this.contents=new eu(s),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new vK(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new iK(this.contents),this.head=new lK(this),this.name=new hK(this),this.cmap=new sF(this),this.toUnicode={},this.hhea=new cK(this),this.maxp=new fK(this),this.hmtx=new pK(this),this.post=new dK(this),this.os2=new AK(this),this.loca=new xK(this),this.glyf=new mK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,n,r,o,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var p,f,A,h;for(h=[],p=0,f=(A=this.bbox).length;p<f;p++)s=A[p],h.push(Math.round(s*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var n;return((n=this.cmap.unicode)!=null?n.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*n},t.prototype.widthOfString=function(s,n,r){var o,c,p,f;for(p=0,c=0,f=(s=""+s).length;0<=f?c<f:c>f;c=0<=f?++c:--c)o=s.charCodeAt(c),p+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return p*(n/1e3)},t.prototype.lineHeight=function(s,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*s},t})();var Pc,eu=(function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var n,r;for(r=[],n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(s){var n,r,o;for(o=[],n=0,r=s.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(s.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,n,r,o,c,p,f,A;return s=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),c=this.readByte(),p=this.readByte(),f=this.readByte(),A=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^c)+65536*(255^p)+256*(255^f)+(255^A)+1):72057594037927940*s+281474976710656*n+1099511627776*r+4294967296*o+16777216*c+65536*p+256*f+A},t.prototype.writeLongLong=function(s){var n,r;return n=Math.floor(s/4294967296),r=4294967295&s,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var n,r;for(n=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(s){var n,r,o,c;for(c=[],r=0,o=s.length;r<o;r++)n=s[r],c.push(this.writeByte(n));return c},t})(),iK=(function(){var t;function s(n){var r,o,c;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,c=this.tableCount;0<=c?o<c:o>c;o=0<=c?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return s.prototype.encode=function(n){var r,o,c,p,f,A,h,l,g,v,m,N,w;for(w in m=Object.keys(n).length,A=Math.log(2),g=16*Math.floor(Math.log(m)/A),p=Math.floor(g/A),l=16*m-g,(o=new eu).writeInt(this.scalarType),o.writeShort(m),o.writeShort(g),o.writeShort(p),o.writeShort(l),c=16*m,h=o.pos+c,f=null,N=[],n)for(v=n[w],o.writeString(w),o.writeInt(t(v)),o.writeInt(h),o.writeInt(v.length),N=N.concat(v),w==="head"&&(f=h),h+=v.length;h%4;)N.push(0),h++;return o.write(N),r=2981146554-t(o.data),o.pos=f+8,o.writeUInt32(r),o.data},t=function(n){var r,o,c,p;for(n=nF.call(n);n.length%4;)n.push(0);for(c=new eu(n),o=0,r=0,p=n.length;r<p;r=r+=4)o+=c.readUInt32();return 4294967295&o},s})(),oK={}.hasOwnProperty,wA=function(t,s){for(var n in s)oK.call(s,n)&&(t[n]=s[n]);function r(){this.constructor=t}return r.prototype=s.prototype,t.prototype=new r,t.__super__=s.prototype,t};Pc=(function(){function t(s){var n;this.file=s,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var lK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var n;return(n=new eu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(s),n.writeShort(this.glyphDataFormat),n.data},t})(),AB=(function(){function t(s,n){var r,o,c,p,f,A,h,l,g,v,m,N,w,E,F,M,k;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=n+s.readInt(),g=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=s.readByte();break;case 4:for(m=s.readUInt16(),v=m/2,s.pos+=6,c=(function(){var K,G;for(G=[],A=K=0;0<=v?K<v:K>v;A=0<=v?++K:--K)G.push(s.readUInt16());return G})(),s.pos+=2,w=(function(){var K,G;for(G=[],A=K=0;0<=v?K<v:K>v;A=0<=v?++K:--K)G.push(s.readUInt16());return G})(),h=(function(){var K,G;for(G=[],A=K=0;0<=v?K<v:K>v;A=0<=v?++K:--K)G.push(s.readUInt16());return G})(),l=(function(){var K,G;for(G=[],A=K=0;0<=v?K<v:K>v;A=0<=v?++K:--K)G.push(s.readUInt16());return G})(),o=(this.length-s.pos+this.offset)/2,f=(function(){var K,G;for(G=[],A=K=0;0<=o?K<o:K>o;A=0<=o?++K:--K)G.push(s.readUInt16());return G})(),A=F=0,k=c.length;F<k;A=++F)for(E=c[A],r=M=N=w[A];N<=E?M<=E:M>=E;r=N<=E?++M:--M)l[A]===0?p=r+h[A]:(p=f[l[A]/2+(r-N)-(v-A)]||0)!==0&&(p+=h[A]),this.codeMap[r]=65535&p}s.pos=g}return t.encode=function(s,n){var r,o,c,p,f,A,h,l,g,v,m,N,w,E,F,M,k,K,G,ee,V,X,J,he,q,ie,Ae,ce,oe,ne,re,se,je,De,ge,Z,fe,ue,pe,Ce,Ne,ye,we,Te,qe,ve;switch(ce=new eu,p=Object.keys(s).sort(function(Ge,at){return Ge-at}),n){case"macroman":for(w=0,E=(function(){var Ge=[];for(N=0;N<256;++N)Ge.push(0);return Ge})(),M={0:0},c={},oe=0,je=p.length;oe<je;oe++)M[we=s[o=p[oe]]]==null&&(M[we]=++w),c[o]={old:s[o],new:M[s[o]]},E[o]=M[s[o]];return ce.writeUInt16(1),ce.writeUInt16(0),ce.writeUInt32(12),ce.writeUInt16(0),ce.writeUInt16(262),ce.writeUInt16(0),ce.write(E),{charMap:c,subtable:ce.data,maxGlyphID:w+1};case"unicode":for(ie=[],g=[],k=0,M={},r={},F=h=null,ne=0,De=p.length;ne<De;ne++)M[G=s[o=p[ne]]]==null&&(M[G]=++k),r[o]={old:G,new:M[G]},f=M[G]-o,F!=null&&f===h||(F&&g.push(F),ie.push(o),h=f),F=o;for(F&&g.push(F),g.push(65535),ie.push(65535),he=2*(J=ie.length),X=2*Math.pow(Math.log(J)/Math.LN2,2),v=Math.log(X/2)/Math.LN2,V=2*J-X,A=[],ee=[],m=[],N=re=0,ge=ie.length;re<ge;N=++re){if(q=ie[N],l=g[N],q===65535){A.push(0),ee.push(0);break}if(q-(Ae=r[q].new)>=32768)for(A.push(0),ee.push(2*(m.length+J-N)),o=se=q;q<=l?se<=l:se>=l;o=q<=l?++se:--se)m.push(r[o].new);else A.push(Ae-q),ee.push(0)}for(ce.writeUInt16(3),ce.writeUInt16(1),ce.writeUInt32(12),ce.writeUInt16(4),ce.writeUInt16(16+8*J+2*m.length),ce.writeUInt16(0),ce.writeUInt16(he),ce.writeUInt16(X),ce.writeUInt16(v),ce.writeUInt16(V),Ne=0,Z=g.length;Ne<Z;Ne++)o=g[Ne],ce.writeUInt16(o);for(ce.writeUInt16(0),ye=0,fe=ie.length;ye<fe;ye++)o=ie[ye],ce.writeUInt16(o);for(Te=0,ue=A.length;Te<ue;Te++)f=A[Te],ce.writeUInt16(f);for(qe=0,pe=ee.length;qe<pe;qe++)K=ee[qe],ce.writeUInt16(K);for(ve=0,Ce=m.length;ve<Ce;ve++)w=m[ve],ce.writeUInt16(w);return{charMap:r,subtable:ce.data,maxGlyphID:k+1}}},t})(),sF=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="cmap",t.prototype.parse=function(s){var n,r,o;for(s.pos=this.offset,this.version=s.readUInt16(),o=s.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=o?r<o:r>o;r=0<=o?++r:--r)n=new AB(s,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(s,n){var r,o;return n==null&&(n="macroman"),r=AB.encode(s,n),(o=new eu).writeUInt16(0),o.writeUInt16(1),r.table=o.data.concat(r.subtable),r},t})(),cK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t})(),AK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(s.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(s.readInt());return r})(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(s.readInt());return r})(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t})(),dK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="post",t.prototype.parse=function(s){var n,r,o;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:case 196608:break;case 131072:var c;for(r=s.readUInt16(),this.glyphNameIndex=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],o=[];s.pos<this.offset+this.length;)n=s.readByte(),o.push(this.names.push(s.readString(n)));return o;case 151552:return r=s.readUInt16(),this.offsets=s.read(r);case 262144:return this.map=(function(){var p,f,A;for(A=[],c=p=0,f=this.file.maxp.numGlyphs;0<=f?p<f:p>f;c=0<=f?++p:--p)A.push(s.readUInt32());return A}).call(this)}},t})(),uK=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},hK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="name",t.prototype.parse=function(s){var n,r,o,c,p,f,A,h,l,g,v;for(s.pos=this.offset,s.readShort(),n=s.readShort(),f=s.readShort(),r=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)r.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+f+s.readShort()});for(A={},c=l=0,g=r.length;l<g;c=++l)o=r[c],s.pos=o.offset,h=s.readString(o.length),p=new uK(h,o),A[v=o.nameID]==null&&(A[v]=[]),A[o.nameID].push(p);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t})(),fK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t})(),pK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="hmtx",t.prototype.parse=function(s){var n,r,o,c,p,f,A;for(s.pos=this.offset,this.metrics=[],n=0,f=this.file.hhea.numberOfMetrics;0<=f?n<f:n>f;n=0<=f?++n:--n)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,l;for(l=[],n=h=0;0<=o?h<o:h>o;n=0<=o?++h:--h)l.push(s.readInt16());return l})(),this.widths=(function(){var h,l,g,v;for(v=[],h=0,l=(g=this.metrics).length;h<l;h++)c=g[h],v.push(c.advance);return v}).call(this),r=this.widths[this.widths.length-1],A=[],n=p=0;0<=o?p<o:p>o;n=0<=o?++p:--p)A.push(this.widths.push(r));return A},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t})(),nF=[].slice,mK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var n,r,o,c,p,f,A,h,l,g;return s in this.cache?this.cache[s]:(c=this.file.loca,n=this.file.contents,r=c.indexOf(s),(o=c.lengthOf(s))===0?this.cache[s]=null:(n.pos=this.offset+r,p=(f=new eu(n.read(o))).readShort(),h=f.readShort(),g=f.readShort(),A=f.readShort(),l=f.readShort(),this.cache[s]=p===-1?new yK(f,h,g,A,l):new gK(f,p,h,g,A,l),this.cache[s]))},t.prototype.encode=function(s,n,r){var o,c,p,f,A;for(p=[],c=[],f=0,A=n.length;f<A;f++)o=s[n[f]],c.push(p.length),o&&(p=p.concat(o.encode(r)));return c.push(p.length),{table:p,offsets:c}},t})(),gK=(function(){function t(s,n,r,o,c,p){this.raw=s,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=c,this.yMax=p,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),yK=(function(){function t(s,n,r,o,c){var p,f;for(this.raw=s,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;f=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&f;)p.pos+=1&f?4:2,128&f?p.pos+=8:64&f?p.pos+=4:8&f&&(p.pos+=2)}return t.prototype.encode=function(){var s,n,r;for(n=new eu(nF.call(this.raw.data)),s=0,r=this.glyphIDs.length;s<r;++s)n.pos=this.glyphOffsets[s];return n.data},t})(),xK=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Pc),t.prototype.tag="loca",t.prototype.parse=function(s){var n,r;return s.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,c;for(c=[],r=0,o=this.length;r<o;r+=2)c.push(2*s.readUInt16());return c}).call(this):(function(){var o,c;for(c=[],r=0,o=this.length;r<o;r+=4)c.push(s.readUInt32());return c}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,n){for(var r=new Uint32Array(this.offsets.length),o=0,c=0,p=0;p<r.length;++p)if(r[p]=o,c<n.length&&n[c]==p){++c,r[p]=o;var f=this.offsets[p],A=this.offsets[p+1]-f;A>0&&(o+=A)}for(var h=new Array(4*r.length),l=0;l<r.length;++l)h[4*l+3]=255&r[l],h[4*l+2]=(65280&r[l])>>8,h[4*l+1]=(16711680&r[l])>>16,h[4*l]=(4278190080&r[l])>>24;return h},t})(),vK=(function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,n,r,o,c;for(n in o=this.font.cmap.tables[0].codeMap,s={},c=this.subset)r=c[n],s[n]=o[r];return s},t.prototype.glyphsFor=function(s){var n,r,o,c,p,f,A;for(o={},p=0,f=s.length;p<f;p++)o[c=s[p]]=this.font.glyf.glyphFor(c);for(c in n=[],o)(r=o[c])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(c in A=this.glyphsFor(n))r=A[c],o[c]=r;return o},t.prototype.encode=function(s,n){var r,o,c,p,f,A,h,l,g,v,m,N,w,E,F;for(o in r=sF.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(s),m={0:0},F=r.charMap)m[(A=F[o]).old]=A.new;for(N in v=r.maxGlyphID,p)N in m||(m[N]=v++);return l=(function(M){var k,K;for(k in K={},M)K[M[k]]=k;return K})(m),g=Object.keys(l).sort(function(M,k){return M-k}),w=(function(){var M,k,K;for(K=[],M=0,k=g.length;M<k;M++)f=g[M],K.push(l[f]);return K})(),c=this.font.glyf.encode(p,w,m),h=this.font.loca.encode(c.offsets,w),E={cmap:this.font.cmap.raw(),glyf:c.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t})();hn.API.PDFObject=(function(){var t;function s(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},s.convert=function(n){var r,o,c,p;if(Array.isArray(n))return"["+(function(){var f,A,h;for(h=[],f=0,A=n.length;f<A;f++)r=n[f],h.push(s.convert(r));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in c=["<<"],n)p=n[o],c.push("/"+o+" "+s.convert(p));return c.push(">>"),c.join(`
`)}return""+n},s})();const bK=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:X9,AcroFormAppearance:Ys,AcroFormButton:Zi,AcroFormCheckBox:Qp,AcroFormChoiceField:qu,AcroFormComboBox:Yu,AcroFormEditBox:Lp,AcroFormListBox:Wu,AcroFormPasswordField:Mp,AcroFormPushButton:Dp,AcroFormRadioButton:Xu,AcroFormTextField:Wd,GState:Jp,ShadingPattern:zd,TilingPattern:Gu,default:hn,jsPDF:hn},Symbol.toStringTag,{value:"Module"})),jK=mI(bK);var _g={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var wK=_g.exports,dB;function SK(){return dB||(dB=1,(function(t,s){(function(n,r){t.exports=r()})(wK,(function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var n=function(O,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,U){L.__proto__=U}||function(L,U){for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&(L[Y]=U[Y])},n(O,T)};function r(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");n(O,T);function L(){this.constructor=O}O.prototype=T===null?Object.create(T):(L.prototype=T.prototype,new L)}var o=function(){return o=Object.assign||function(T){for(var L,U=1,Y=arguments.length;U<Y;U++){L=arguments[U];for(var de in L)Object.prototype.hasOwnProperty.call(L,de)&&(T[de]=L[de])}return T},o.apply(this,arguments)};function c(O,T,L,U){function Y(de){return de instanceof L?de:new L(function(Ee){Ee(de)})}return new(L||(L=Promise))(function(de,Ee){function _e(yt){try{rt(U.next(yt))}catch(jt){Ee(jt)}}function Pe(yt){try{rt(U.throw(yt))}catch(jt){Ee(jt)}}function rt(yt){yt.done?de(yt.value):Y(yt.value).then(_e,Pe)}rt((U=U.apply(O,[])).next())})}function p(O,T){var L={label:0,sent:function(){if(de[0]&1)throw de[1];return de[1]},trys:[],ops:[]},U,Y,de,Ee;return Ee={next:_e(0),throw:_e(1),return:_e(2)},typeof Symbol=="function"&&(Ee[Symbol.iterator]=function(){return this}),Ee;function _e(rt){return function(yt){return Pe([rt,yt])}}function Pe(rt){if(U)throw new TypeError("Generator is already executing.");for(;L;)try{if(U=1,Y&&(de=rt[0]&2?Y.return:rt[0]?Y.throw||((de=Y.return)&&de.call(Y),0):Y.next)&&!(de=de.call(Y,rt[1])).done)return de;switch(Y=0,de&&(rt=[rt[0]&2,de.value]),rt[0]){case 0:case 1:de=rt;break;case 4:return L.label++,{value:rt[1],done:!1};case 5:L.label++,Y=rt[1],rt=[0];continue;case 7:rt=L.ops.pop(),L.trys.pop();continue;default:if(de=L.trys,!(de=de.length>0&&de[de.length-1])&&(rt[0]===6||rt[0]===2)){L=0;continue}if(rt[0]===3&&(!de||rt[1]>de[0]&&rt[1]<de[3])){L.label=rt[1];break}if(rt[0]===6&&L.label<de[1]){L.label=de[1],de=rt;break}if(de&&L.label<de[2]){L.label=de[2],L.ops.push(rt);break}de[2]&&L.ops.pop(),L.trys.pop();continue}rt=T.call(O,L)}catch(yt){rt=[6,yt],Y=0}finally{U=de=0}if(rt[0]&5)throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}}function f(O,T,L){if(arguments.length===2)for(var U=0,Y=T.length,de;U<Y;U++)(de||!(U in T))&&(de||(de=Array.prototype.slice.call(T,0,U)),de[U]=T[U]);return O.concat(de||T)}for(var A=(function(){function O(T,L,U,Y){this.left=T,this.top=L,this.width=U,this.height=Y}return O.prototype.add=function(T,L,U,Y){return new O(this.left+T,this.top+L,this.width+U,this.height+Y)},O.fromClientRect=function(T,L){return new O(L.left+T.windowBounds.left,L.top+T.windowBounds.top,L.width,L.height)},O.fromDOMRectList=function(T,L){var U=Array.from(L).find(function(Y){return Y.width!==0});return U?new O(U.left+T.windowBounds.left,U.top+T.windowBounds.top,U.width,U.height):O.EMPTY},O.EMPTY=new O(0,0,0,0),O})(),h=function(O,T){return A.fromClientRect(O,T.getBoundingClientRect())},l=function(O){var T=O.body,L=O.documentElement;if(!T||!L)throw new Error("Unable to get document size");var U=Math.max(Math.max(T.scrollWidth,L.scrollWidth),Math.max(T.offsetWidth,L.offsetWidth),Math.max(T.clientWidth,L.clientWidth)),Y=Math.max(Math.max(T.scrollHeight,L.scrollHeight),Math.max(T.offsetHeight,L.offsetHeight),Math.max(T.clientHeight,L.clientHeight));return new A(0,0,U,Y)},g=function(O){for(var T=[],L=0,U=O.length;L<U;){var Y=O.charCodeAt(L++);if(Y>=55296&&Y<=56319&&L<U){var de=O.charCodeAt(L++);(de&64512)===56320?T.push(((Y&1023)<<10)+(de&1023)+65536):(T.push(Y),L--)}else T.push(Y)}return T},v=function(){for(var O=[],T=0;T<arguments.length;T++)O[T]=arguments[T];if(String.fromCodePoint)return String.fromCodePoint.apply(String,O);var L=O.length;if(!L)return"";for(var U=[],Y=-1,de="";++Y<L;){var Ee=O[Y];Ee<=65535?U.push(Ee):(Ee-=65536,U.push((Ee>>10)+55296,Ee%1024+56320)),(Y+1===L||U.length>16384)&&(de+=String.fromCharCode.apply(String,U),U.length=0)}return de},m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=typeof Uint8Array>"u"?[]:new Uint8Array(256),w=0;w<m.length;w++)N[m.charCodeAt(w)]=w;for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=typeof Uint8Array>"u"?[]:new Uint8Array(256),M=0;M<E.length;M++)F[E.charCodeAt(M)]=M;for(var k=function(O){var T=O.length*.75,L=O.length,U,Y=0,de,Ee,_e,Pe;O[O.length-1]==="="&&(T--,O[O.length-2]==="="&&T--);var rt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(T):new Array(T),yt=Array.isArray(rt)?rt:new Uint8Array(rt);for(U=0;U<L;U+=4)de=F[O.charCodeAt(U)],Ee=F[O.charCodeAt(U+1)],_e=F[O.charCodeAt(U+2)],Pe=F[O.charCodeAt(U+3)],yt[Y++]=de<<2|Ee>>4,yt[Y++]=(Ee&15)<<4|_e>>2,yt[Y++]=(_e&3)<<6|Pe&63;return rt},K=function(O){for(var T=O.length,L=[],U=0;U<T;U+=2)L.push(O[U+1]<<8|O[U]);return L},G=function(O){for(var T=O.length,L=[],U=0;U<T;U+=4)L.push(O[U+3]<<24|O[U+2]<<16|O[U+1]<<8|O[U]);return L},ee=5,V=11,X=2,J=V-ee,he=65536>>ee,q=1<<ee,ie=q-1,Ae=1024>>ee,ce=he+Ae,oe=ce,ne=32,re=oe+ne,se=65536>>V,je=1<<J,De=je-1,ge=function(O,T,L){return O.slice?O.slice(T,L):new Uint16Array(Array.prototype.slice.call(O,T,L))},Z=function(O,T,L){return O.slice?O.slice(T,L):new Uint32Array(Array.prototype.slice.call(O,T,L))},fe=function(O,T){var L=k(O),U=Array.isArray(L)?G(L):new Uint32Array(L),Y=Array.isArray(L)?K(L):new Uint16Array(L),de=24,Ee=ge(Y,de/2,U[4]/2),_e=U[5]===2?ge(Y,(de+U[4])/2):Z(U,Math.ceil((de+U[4])/4));return new ue(U[0],U[1],U[2],U[3],Ee,_e)},ue=(function(){function O(T,L,U,Y,de,Ee){this.initialValue=T,this.errorValue=L,this.highStart=U,this.highValueIndex=Y,this.index=de,this.data=Ee}return O.prototype.get=function(T){var L;if(T>=0){if(T<55296||T>56319&&T<=65535)return L=this.index[T>>ee],L=(L<<X)+(T&ie),this.data[L];if(T<=65535)return L=this.index[he+(T-55296>>ee)],L=(L<<X)+(T&ie),this.data[L];if(T<this.highStart)return L=re-se+(T>>V),L=this.index[L],L+=T>>ee&De,L=this.index[L],L=(L<<X)+(T&ie),this.data[L];if(T<=1114111)return this.data[this.highValueIndex]}return this.errorValue},O})(),pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ce=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ne=0;Ne<pe.length;Ne++)Ce[pe.charCodeAt(Ne)]=Ne;var ye="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",we=50,Te=1,qe=2,ve=3,Ge=4,at=5,Se=7,vt=8,ht=9,pt=10,Ze=11,Ht=12,At=13,Ct=14,It=15,Wt=16,Es=17,Ss=18,_s=19,$e=20,ke=21,it=22,tt=23,Jt=24,Qt=25,ss=26,dt=27,qt=28,Vt=29,vs=30,ns=31,js=32,ln=33,ys=34,gt=35,Dt=36,xt=37,rs=38,ps=39,yn=40,is=41,Fs=42,Ns=43,Nn=[9001,65288],Cs="!",zt="",os="",Ps=fe(ye),Ye=[vs,Dt],St=[Te,qe,ve,at],Rt=[pt,vt],us=[dt,ss],As=St.concat(Rt),as=[rs,ps,yn,ys,gt],bs=[It,At],cs=function(O,T){T===void 0&&(T="strict");var L=[],U=[],Y=[];return O.forEach(function(de,Ee){var _e=Ps.get(de);if(_e>we?(Y.push(!0),_e-=we):Y.push(!1),["normal","auto","loose"].indexOf(T)!==-1&&[8208,8211,12316,12448].indexOf(de)!==-1)return U.push(Ee),L.push(Wt);if(_e===Ge||_e===Ze){if(Ee===0)return U.push(Ee),L.push(vs);var Pe=L[Ee-1];return As.indexOf(Pe)===-1?(U.push(U[Ee-1]),L.push(Pe)):(U.push(Ee),L.push(vs))}if(U.push(Ee),_e===ns)return L.push(T==="strict"?ke:xt);if(_e===Fs||_e===Vt)return L.push(vs);if(_e===Ns)return de>=131072&&de<=196605||de>=196608&&de<=262141?L.push(xt):L.push(vs);L.push(_e)}),[U,L,Y]},Us=function(O,T,L,U){var Y=U[L];if(Array.isArray(O)?O.indexOf(Y)!==-1:O===Y)for(var de=L;de<=U.length;){de++;var Ee=U[de];if(Ee===T)return!0;if(Ee!==pt)break}if(Y===pt)for(var de=L;de>0;){de--;var _e=U[de];if(Array.isArray(O)?O.indexOf(_e)!==-1:O===_e)for(var Pe=L;Pe<=U.length;){Pe++;var Ee=U[Pe];if(Ee===T)return!0;if(Ee!==pt)break}if(_e!==pt)break}return!1},an=function(O,T){for(var L=O;L>=0;){var U=T[L];if(U===pt)L--;else return U}return 0},Mr=function(O,T,L,U,Y){if(L[U]===0)return zt;var de=U-1;if(Array.isArray(Y)&&Y[de]===!0)return zt;var Ee=de-1,_e=de+1,Pe=T[de],rt=Ee>=0?T[Ee]:0,yt=T[_e];if(Pe===qe&&yt===ve)return zt;if(St.indexOf(Pe)!==-1)return Cs;if(St.indexOf(yt)!==-1||Rt.indexOf(yt)!==-1)return zt;if(an(de,T)===vt)return os;if(Ps.get(O[de])===Ze||(Pe===js||Pe===ln)&&Ps.get(O[_e])===Ze||Pe===Se||yt===Se||Pe===ht||[pt,At,It].indexOf(Pe)===-1&&yt===ht||[Es,Ss,_s,Jt,qt].indexOf(yt)!==-1||an(de,T)===it||Us(tt,it,de,T)||Us([Es,Ss],ke,de,T)||Us(Ht,Ht,de,T))return zt;if(Pe===pt)return os;if(Pe===tt||yt===tt)return zt;if(yt===Wt||Pe===Wt)return os;if([At,It,ke].indexOf(yt)!==-1||Pe===Ct||rt===Dt&&bs.indexOf(Pe)!==-1||Pe===qt&&yt===Dt||yt===$e||Ye.indexOf(yt)!==-1&&Pe===Qt||Ye.indexOf(Pe)!==-1&&yt===Qt||Pe===dt&&[xt,js,ln].indexOf(yt)!==-1||[xt,js,ln].indexOf(Pe)!==-1&&yt===ss||Ye.indexOf(Pe)!==-1&&us.indexOf(yt)!==-1||us.indexOf(Pe)!==-1&&Ye.indexOf(yt)!==-1||[dt,ss].indexOf(Pe)!==-1&&(yt===Qt||[it,It].indexOf(yt)!==-1&&T[_e+1]===Qt)||[it,It].indexOf(Pe)!==-1&&yt===Qt||Pe===Qt&&[Qt,qt,Jt].indexOf(yt)!==-1)return zt;if([Qt,qt,Jt,Es,Ss].indexOf(yt)!==-1)for(var jt=de;jt>=0;){var kt=T[jt];if(kt===Qt)return zt;if([qt,Jt].indexOf(kt)!==-1)jt--;else break}if([dt,ss].indexOf(yt)!==-1)for(var jt=[Es,Ss].indexOf(Pe)!==-1?Ee:de;jt>=0;){var kt=T[jt];if(kt===Qt)return zt;if([qt,Jt].indexOf(kt)!==-1)jt--;else break}if(rs===Pe&&[rs,ps,ys,gt].indexOf(yt)!==-1||[ps,ys].indexOf(Pe)!==-1&&[ps,yn].indexOf(yt)!==-1||[yn,gt].indexOf(Pe)!==-1&&yt===yn||as.indexOf(Pe)!==-1&&[$e,ss].indexOf(yt)!==-1||as.indexOf(yt)!==-1&&Pe===dt||Ye.indexOf(Pe)!==-1&&Ye.indexOf(yt)!==-1||Pe===Jt&&Ye.indexOf(yt)!==-1||Ye.concat(Qt).indexOf(Pe)!==-1&&yt===it&&Nn.indexOf(O[_e])===-1||Ye.concat(Qt).indexOf(yt)!==-1&&Pe===Ss)return zt;if(Pe===is&&yt===is){for(var Rs=L[de],xs=1;Rs>0&&(Rs--,T[Rs]===is);)xs++;if(xs%2!==0)return zt}return Pe===js&&yt===ln?zt:os},Un=function(O,T){T||(T={lineBreak:"normal",wordBreak:"normal"});var L=cs(O,T.lineBreak),U=L[0],Y=L[1],de=L[2];(T.wordBreak==="break-all"||T.wordBreak==="break-word")&&(Y=Y.map(function(_e){return[Qt,vs,Fs].indexOf(_e)!==-1?xt:_e}));var Ee=T.wordBreak==="keep-all"?de.map(function(_e,Pe){return _e&&O[Pe]>=19968&&O[Pe]<=40959}):void 0;return[U,Y,Ee]},Ks=(function(){function O(T,L,U,Y){this.codePoints=T,this.required=L===Cs,this.start=U,this.end=Y}return O.prototype.slice=function(){return v.apply(void 0,this.codePoints.slice(this.start,this.end))},O})(),Pn=function(O,T){var L=g(O),U=Un(L,T),Y=U[0],de=U[1],Ee=U[2],_e=L.length,Pe=0,rt=0;return{next:function(){if(rt>=_e)return{done:!0,value:null};for(var yt=zt;rt<_e&&(yt=Mr(L,de,Y,++rt,Ee))===zt;);if(yt!==zt||rt===_e){var jt=new Ks(L,yt,Pe,rt);return Pe=rt,{value:jt,done:!1}}return{done:!0,value:null}}}},nr=1,Yn=2,dn=4,vn=8,jn=10,Jn=47,Zr=92,Ir=9,Vn=32,Ts=34,Ls=61,ts=35,Qs=36,ls=37,be=39,xe=40,lt=41,Je=95,fs=45,wn=33,zn=60,di=62,Oi=64,ka=91,Rr=93,Ha=61,Na=123,$r=63,Oa=125,vi=124,Ui=126,bi=128,ui=65533,hi=42,tn=43,sn=44,ks=58,qs=59,Js=46,ms=0,$n=8,qr=11,Ka=14,Ca=31,on=127,Bn=-1,Fn=48,Zn=97,pa=101,ma=102,x=117,j=122,u=65,b=69,S=70,R=85,B=90,D=function(O){return O>=Fn&&O<=57},Q=function(O){return O>=55296&&O<=57343},$=function(O){return D(O)||O>=u&&O<=S||O>=Zn&&O<=ma},te=function(O){return O>=Zn&&O<=j},Ue=function(O){return O>=u&&O<=B},He=function(O){return te(O)||Ue(O)},st=function(O){return O>=bi},Bt=function(O){return O===jn||O===Ir||O===Vn},Lt=function(O){return He(O)||st(O)||O===Je},$t=function(O){return Lt(O)||D(O)||O===fs},gs=function(O){return O>=ms&&O<=$n||O===qr||O>=Ka&&O<=Ca||O===on},nn=function(O,T){return O!==Zr?!1:T!==jn},z=function(O,T,L){return O===fs?Lt(T)||nn(T,L):Lt(O)?!0:!!(O===Zr&&nn(O,T))},me=function(O,T,L){return O===tn||O===fs?D(T)?!0:T===Js&&D(L):D(O===Js?T:O)},Qe=function(O){var T=0,L=1;(O[T]===tn||O[T]===fs)&&(O[T]===fs&&(L=-1),T++);for(var U=[];D(O[T]);)U.push(O[T++]);var Y=U.length?parseInt(v.apply(void 0,U),10):0;O[T]===Js&&T++;for(var de=[];D(O[T]);)de.push(O[T++]);var Ee=de.length,_e=Ee?parseInt(v.apply(void 0,de),10):0;(O[T]===b||O[T]===pa)&&T++;var Pe=1;(O[T]===tn||O[T]===fs)&&(O[T]===fs&&(Pe=-1),T++);for(var rt=[];D(O[T]);)rt.push(O[T++]);var yt=rt.length?parseInt(v.apply(void 0,rt),10):0;return L*(Y+_e*Math.pow(10,-Ee))*Math.pow(10,Pe*yt)},We={type:2},ut={type:3},_t={type:4},es={type:13},Gs={type:8},rn={type:21},Cn={type:9},_n={type:10},yr={type:11},ga={type:12},Ua={type:14},_r={type:23},ri={type:1},za={type:25},ji={type:24},xl={type:26},ko={type:27},vl={type:28},SA={type:29},kc={type:31},mo={type:32},go=(function(){function O(){this._value=[]}return O.prototype.write=function(T){this._value=this._value.concat(g(T))},O.prototype.read=function(){for(var T=[],L=this.consumeToken();L!==mo;)T.push(L),L=this.consumeToken();return T},O.prototype.consumeToken=function(){var T=this.consumeCodePoint();switch(T){case Ts:return this.consumeStringToken(Ts);case ts:var L=this.peekCodePoint(0),U=this.peekCodePoint(1),Y=this.peekCodePoint(2);if($t(L)||nn(U,Y)){var de=z(L,U,Y)?Yn:nr,Ee=this.consumeName();return{type:5,value:Ee,flags:de}}break;case Qs:if(this.peekCodePoint(0)===Ls)return this.consumeCodePoint(),es;break;case be:return this.consumeStringToken(be);case xe:return We;case lt:return ut;case hi:if(this.peekCodePoint(0)===Ls)return this.consumeCodePoint(),Ua;break;case tn:if(me(T,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(T),this.consumeNumericToken();break;case sn:return _t;case fs:var _e=T,Pe=this.peekCodePoint(0),rt=this.peekCodePoint(1);if(me(_e,Pe,rt))return this.reconsumeCodePoint(T),this.consumeNumericToken();if(z(_e,Pe,rt))return this.reconsumeCodePoint(T),this.consumeIdentLikeToken();if(Pe===fs&&rt===di)return this.consumeCodePoint(),this.consumeCodePoint(),ji;break;case Js:if(me(T,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(T),this.consumeNumericToken();break;case Jn:if(this.peekCodePoint(0)===hi)for(this.consumeCodePoint();;){var yt=this.consumeCodePoint();if(yt===hi&&(yt=this.consumeCodePoint(),yt===Jn))return this.consumeToken();if(yt===Bn)return this.consumeToken()}break;case ks:return xl;case qs:return ko;case zn:if(this.peekCodePoint(0)===wn&&this.peekCodePoint(1)===fs&&this.peekCodePoint(2)===fs)return this.consumeCodePoint(),this.consumeCodePoint(),za;break;case Oi:var jt=this.peekCodePoint(0),kt=this.peekCodePoint(1),Rs=this.peekCodePoint(2);if(z(jt,kt,Rs)){var Ee=this.consumeName();return{type:7,value:Ee}}break;case ka:return vl;case Zr:if(nn(T,this.peekCodePoint(0)))return this.reconsumeCodePoint(T),this.consumeIdentLikeToken();break;case Rr:return SA;case Ha:if(this.peekCodePoint(0)===Ls)return this.consumeCodePoint(),Gs;break;case Na:return yr;case Oa:return ga;case x:case R:var xs=this.peekCodePoint(0),Bs=this.peekCodePoint(1);return xs===tn&&($(Bs)||Bs===$r)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(T),this.consumeIdentLikeToken();case vi:if(this.peekCodePoint(0)===Ls)return this.consumeCodePoint(),Cn;if(this.peekCodePoint(0)===vi)return this.consumeCodePoint(),rn;break;case Ui:if(this.peekCodePoint(0)===Ls)return this.consumeCodePoint(),_n;break;case Bn:return mo}return Bt(T)?(this.consumeWhiteSpace(),kc):D(T)?(this.reconsumeCodePoint(T),this.consumeNumericToken()):Lt(T)?(this.reconsumeCodePoint(T),this.consumeIdentLikeToken()):{type:6,value:v(T)}},O.prototype.consumeCodePoint=function(){var T=this._value.shift();return typeof T>"u"?-1:T},O.prototype.reconsumeCodePoint=function(T){this._value.unshift(T)},O.prototype.peekCodePoint=function(T){return T>=this._value.length?-1:this._value[T]},O.prototype.consumeUnicodeRangeToken=function(){for(var T=[],L=this.consumeCodePoint();$(L)&&T.length<6;)T.push(L),L=this.consumeCodePoint();for(var U=!1;L===$r&&T.length<6;)T.push(L),L=this.consumeCodePoint(),U=!0;if(U){var Y=parseInt(v.apply(void 0,T.map(function(Pe){return Pe===$r?Fn:Pe})),16),de=parseInt(v.apply(void 0,T.map(function(Pe){return Pe===$r?S:Pe})),16);return{type:30,start:Y,end:de}}var Ee=parseInt(v.apply(void 0,T),16);if(this.peekCodePoint(0)===fs&&$(this.peekCodePoint(1))){this.consumeCodePoint(),L=this.consumeCodePoint();for(var _e=[];$(L)&&_e.length<6;)_e.push(L),L=this.consumeCodePoint();var de=parseInt(v.apply(void 0,_e),16);return{type:30,start:Ee,end:de}}else return{type:30,start:Ee,end:Ee}},O.prototype.consumeIdentLikeToken=function(){var T=this.consumeName();return T.toLowerCase()==="url"&&this.peekCodePoint(0)===xe?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===xe?(this.consumeCodePoint(),{type:19,value:T}):{type:20,value:T}},O.prototype.consumeUrlToken=function(){var T=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Bn)return{type:22,value:""};var L=this.peekCodePoint(0);if(L===be||L===Ts){var U=this.consumeStringToken(this.consumeCodePoint());return U.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Bn||this.peekCodePoint(0)===lt)?(this.consumeCodePoint(),{type:22,value:U.value}):(this.consumeBadUrlRemnants(),_r)}for(;;){var Y=this.consumeCodePoint();if(Y===Bn||Y===lt)return{type:22,value:v.apply(void 0,T)};if(Bt(Y))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Bn||this.peekCodePoint(0)===lt?(this.consumeCodePoint(),{type:22,value:v.apply(void 0,T)}):(this.consumeBadUrlRemnants(),_r);if(Y===Ts||Y===be||Y===xe||gs(Y))return this.consumeBadUrlRemnants(),_r;if(Y===Zr)if(nn(Y,this.peekCodePoint(0)))T.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),_r;else T.push(Y)}},O.prototype.consumeWhiteSpace=function(){for(;Bt(this.peekCodePoint(0));)this.consumeCodePoint()},O.prototype.consumeBadUrlRemnants=function(){for(;;){var T=this.consumeCodePoint();if(T===lt||T===Bn)return;nn(T,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},O.prototype.consumeStringSlice=function(T){for(var L=5e4,U="";T>0;){var Y=Math.min(L,T);U+=v.apply(void 0,this._value.splice(0,Y)),T-=Y}return this._value.shift(),U},O.prototype.consumeStringToken=function(T){var L="",U=0;do{var Y=this._value[U];if(Y===Bn||Y===void 0||Y===T)return L+=this.consumeStringSlice(U),{type:0,value:L};if(Y===jn)return this._value.splice(0,U),ri;if(Y===Zr){var de=this._value[U+1];de!==Bn&&de!==void 0&&(de===jn?(L+=this.consumeStringSlice(U),U=-1,this._value.shift()):nn(Y,de)&&(L+=this.consumeStringSlice(U),L+=v(this.consumeEscapedCodePoint()),U=-1))}U++}while(!0)},O.prototype.consumeNumber=function(){var T=[],L=dn,U=this.peekCodePoint(0);for((U===tn||U===fs)&&T.push(this.consumeCodePoint());D(this.peekCodePoint(0));)T.push(this.consumeCodePoint());U=this.peekCodePoint(0);var Y=this.peekCodePoint(1);if(U===Js&&D(Y))for(T.push(this.consumeCodePoint(),this.consumeCodePoint()),L=vn;D(this.peekCodePoint(0));)T.push(this.consumeCodePoint());U=this.peekCodePoint(0),Y=this.peekCodePoint(1);var de=this.peekCodePoint(2);if((U===b||U===pa)&&((Y===tn||Y===fs)&&D(de)||D(Y)))for(T.push(this.consumeCodePoint(),this.consumeCodePoint()),L=vn;D(this.peekCodePoint(0));)T.push(this.consumeCodePoint());return[Qe(T),L]},O.prototype.consumeNumericToken=function(){var T=this.consumeNumber(),L=T[0],U=T[1],Y=this.peekCodePoint(0),de=this.peekCodePoint(1),Ee=this.peekCodePoint(2);if(z(Y,de,Ee)){var _e=this.consumeName();return{type:15,number:L,flags:U,unit:_e}}return Y===ls?(this.consumeCodePoint(),{type:16,number:L,flags:U}):{type:17,number:L,flags:U}},O.prototype.consumeEscapedCodePoint=function(){var T=this.consumeCodePoint();if($(T)){for(var L=v(T);$(this.peekCodePoint(0))&&L.length<6;)L+=v(this.consumeCodePoint());Bt(this.peekCodePoint(0))&&this.consumeCodePoint();var U=parseInt(L,16);return U===0||Q(U)||U>1114111?ui:U}return T===Bn?ui:T},O.prototype.consumeName=function(){for(var T="";;){var L=this.consumeCodePoint();if($t(L))T+=v(L);else if(nn(L,this.peekCodePoint(0)))T+=v(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(L),T}},O})(),Pl=(function(){function O(T){this._tokens=T}return O.create=function(T){var L=new go;return L.write(T),new O(L.read())},O.parseValue=function(T){return O.create(T).parseComponentValue()},O.parseValues=function(T){return O.create(T).parseComponentValues()},O.prototype.parseComponentValue=function(){for(var T=this.consumeToken();T.type===31;)T=this.consumeToken();if(T.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(T);var L=this.consumeComponentValue();do T=this.consumeToken();while(T.type===31);if(T.type===32)return L;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},O.prototype.parseComponentValues=function(){for(var T=[];;){var L=this.consumeComponentValue();if(L.type===32)return T;T.push(L),T.push()}},O.prototype.consumeComponentValue=function(){var T=this.consumeToken();switch(T.type){case 11:case 28:case 2:return this.consumeSimpleBlock(T.type);case 19:return this.consumeFunction(T)}return T},O.prototype.consumeSimpleBlock=function(T){for(var L={type:T,values:[]},U=this.consumeToken();;){if(U.type===32||Hc(U,T))return L;this.reconsumeToken(U),L.values.push(this.consumeComponentValue()),U=this.consumeToken()}},O.prototype.consumeFunction=function(T){for(var L={name:T.value,values:[],type:18};;){var U=this.consumeToken();if(U.type===32||U.type===3)return L;this.reconsumeToken(U),L.values.push(this.consumeComponentValue())}},O.prototype.consumeToken=function(){var T=this._tokens.shift();return typeof T>"u"?mo:T},O.prototype.reconsumeToken=function(T){this._tokens.unshift(T)},O})(),ro=function(O){return O.type===15},ya=function(O){return O.type===17},rr=function(O){return O.type===20},kl=function(O){return O.type===0},Hl=function(O,T){return rr(O)&&O.value===T},Ho=function(O){return O.type!==31},Ga=function(O){return O.type!==31&&O.type!==4},fi=function(O){var T=[],L=[];return O.forEach(function(U){if(U.type===4){if(L.length===0)throw new Error("Error parsing function args, zero tokens for arg");T.push(L),L=[];return}U.type!==31&&L.push(U)}),L.length&&T.push(L),T},Hc=function(O,T){return T===11&&O.type===12||T===28&&O.type===29?!0:T===2&&O.type===3},yo=function(O){return O.type===17||O.type===15},Sr=function(O){return O.type===16||yo(O)},xo=function(O){return O.length>1?[O[0],O[1]]:[O[0]]},na={type:17,number:0,flags:dn},hc={type:16,number:50,flags:dn},pi={type:16,number:100,flags:dn},vo=function(O,T,L){var U=O[0],Y=O[1];return[Gn(U,T),Gn(typeof Y<"u"?Y:U,L)]},Gn=function(O,T){if(O.type===16)return O.number/100*T;if(ro(O))switch(O.unit){case"rem":case"em":return 16*O.number;case"px":default:return O.number}return O.number},Li="deg",Ko="grad",zo="rad",tl="turn",bl={name:"angle",parse:function(O,T){if(T.type===15)switch(T.unit){case Li:return Math.PI*T.number/180;case Ko:return Math.PI/200*T.number;case zo:return T.number;case tl:return Math.PI*2*T.number}throw new Error("Unsupported angle type")}},fc=function(O){return O.type===15&&(O.unit===Li||O.unit===Ko||O.unit===zo||O.unit===tl)},Ea=function(O){var T=O.filter(rr).map(function(L){return L.value}).join(" ");switch(T){case"to bottom right":case"to right bottom":case"left top":case"top left":return[na,na];case"to top":case"bottom":return Gi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[na,pi];case"to right":case"left":return Gi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[pi,pi];case"to bottom":case"top":return Gi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[pi,na];case"to left":case"right":return Gi(270)}return 0},Gi=function(O){return Math.PI*O/180},wi={name:"color",parse:function(O,T){if(T.type===18){var L=nl[T.name];if(typeof L>"u")throw new Error('Attempting to parse an unsupported color function "'+T.name+'"');return L(O,T.values)}if(T.type===5){if(T.value.length===3){var U=T.value.substring(0,1),Y=T.value.substring(1,2),de=T.value.substring(2,3);return Di(parseInt(U+U,16),parseInt(Y+Y,16),parseInt(de+de,16),1)}if(T.value.length===4){var U=T.value.substring(0,1),Y=T.value.substring(1,2),de=T.value.substring(2,3),Ee=T.value.substring(3,4);return Di(parseInt(U+U,16),parseInt(Y+Y,16),parseInt(de+de,16),parseInt(Ee+Ee,16)/255)}if(T.value.length===6){var U=T.value.substring(0,2),Y=T.value.substring(2,4),de=T.value.substring(4,6);return Di(parseInt(U,16),parseInt(Y,16),parseInt(de,16),1)}if(T.value.length===8){var U=T.value.substring(0,2),Y=T.value.substring(2,4),de=T.value.substring(4,6),Ee=T.value.substring(6,8);return Di(parseInt(U,16),parseInt(Y,16),parseInt(de,16),parseInt(Ee,16)/255)}}if(T.type===20){var _e=La[T.value.toUpperCase()];if(typeof _e<"u")return _e}return La.TRANSPARENT}},Si=function(O){return(255&O)===0},lr=function(O){var T=255&O,L=255&O>>8,U=255&O>>16,Y=255&O>>24;return T<255?"rgba("+Y+","+U+","+L+","+T/255+")":"rgb("+Y+","+U+","+L+")"},Di=function(O,T,L,U){return(O<<24|T<<16|L<<8|Math.round(U*255)<<0)>>>0},pc=function(O,T){if(O.type===17)return O.number;if(O.type===16){var L=T===3?1:255;return T===3?O.number/100*L:Math.round(O.number/100*L)}return 0},mc=function(O,T){var L=T.filter(Ga);if(L.length===3){var U=L.map(pc),Y=U[0],de=U[1],Ee=U[2];return Di(Y,de,Ee,1)}if(L.length===4){var _e=L.map(pc),Y=_e[0],de=_e[1],Ee=_e[2],Pe=_e[3];return Di(Y,de,Ee,Pe)}return 0};function Go(O,T,L){return L<0&&(L+=1),L>=1&&(L-=1),L<1/6?(T-O)*L*6+O:L<1/2?T:L<2/3?(T-O)*6*(2/3-L)+O:O}var sl=function(O,T){var L=T.filter(Ga),U=L[0],Y=L[1],de=L[2],Ee=L[3],_e=(U.type===17?Gi(U.number):bl.parse(O,U))/(Math.PI*2),Pe=Sr(Y)?Y.number/100:0,rt=Sr(de)?de.number/100:0,yt=typeof Ee<"u"&&Sr(Ee)?Gn(Ee,1):1;if(Pe===0)return Di(rt*255,rt*255,rt*255,1);var jt=rt<=.5?rt*(Pe+1):rt+Pe-rt*Pe,kt=rt*2-jt,Rs=Go(kt,jt,_e+1/3),xs=Go(kt,jt,_e),Bs=Go(kt,jt,_e-1/3);return Di(Rs*255,xs*255,Bs*255,yt)},nl={hsl:sl,hsla:sl,rgb:mc,rgba:mc},Vo=function(O,T){return wi.parse(O,Pl.create(T).parseComponentValue())},La={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},jl={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(O,T){return T.map(function(L){if(rr(L))switch(L.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Qi={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Vi=function(O,T){var L=wi.parse(O,T[0]),U=T[1];return U&&Sr(U)?{color:L,stop:U}:{color:L,stop:null}},Br=function(O,T){var L=O[0],U=O[O.length-1];L.stop===null&&(L.stop=na),U.stop===null&&(U.stop=pi);for(var Y=[],de=0,Ee=0;Ee<O.length;Ee++){var _e=O[Ee].stop;if(_e!==null){var Pe=Gn(_e,T);Pe>de?Y.push(Pe):Y.push(de),de=Pe}else Y.push(null)}for(var rt=null,Ee=0;Ee<Y.length;Ee++){var yt=Y[Ee];if(yt===null)rt===null&&(rt=Ee);else if(rt!==null){for(var jt=Ee-rt,kt=Y[rt-1],Rs=(yt-kt)/(jt+1),xs=1;xs<=jt;xs++)Y[rt+xs-1]=Rs*xs;rt=null}}return O.map(function(Bs,cn){var Hs=Bs.color;return{color:Hs,stop:Math.max(Math.min(1,Y[cn]/T),0)}})},xr=function(O,T,L){var U=T/2,Y=L/2,de=Gn(O[0],T)-U,Ee=Y-Gn(O[1],L);return(Math.atan2(Ee,de)+Math.PI*2)%(Math.PI*2)},ea=function(O,T,L){var U=typeof O=="number"?O:xr(O,T,L),Y=Math.abs(T*Math.sin(U))+Math.abs(L*Math.cos(U)),de=T/2,Ee=L/2,_e=Y/2,Pe=Math.sin(U-Math.PI/2)*_e,rt=Math.cos(U-Math.PI/2)*_e;return[Y,de-rt,de+rt,Ee-Pe,Ee+Pe]},Or=function(O,T){return Math.sqrt(O*O+T*T)},$o=function(O,T,L,U,Y){var de=[[0,0],[0,T],[O,0],[O,T]];return de.reduce(function(Ee,_e){var Pe=_e[0],rt=_e[1],yt=Or(L-Pe,U-rt);return(Y?yt<Ee.optimumDistance:yt>Ee.optimumDistance)?{optimumCorner:_e,optimumDistance:yt}:Ee},{optimumDistance:Y?1/0:-1/0,optimumCorner:null}).optimumCorner},qo=function(O,T,L,U,Y){var de=0,Ee=0;switch(O.size){case 0:O.shape===0?de=Ee=Math.min(Math.abs(T),Math.abs(T-U),Math.abs(L),Math.abs(L-Y)):O.shape===1&&(de=Math.min(Math.abs(T),Math.abs(T-U)),Ee=Math.min(Math.abs(L),Math.abs(L-Y)));break;case 2:if(O.shape===0)de=Ee=Math.min(Or(T,L),Or(T,L-Y),Or(T-U,L),Or(T-U,L-Y));else if(O.shape===1){var _e=Math.min(Math.abs(L),Math.abs(L-Y))/Math.min(Math.abs(T),Math.abs(T-U)),Pe=$o(U,Y,T,L,!0),rt=Pe[0],yt=Pe[1];de=Or(rt-T,(yt-L)/_e),Ee=_e*de}break;case 1:O.shape===0?de=Ee=Math.max(Math.abs(T),Math.abs(T-U),Math.abs(L),Math.abs(L-Y)):O.shape===1&&(de=Math.max(Math.abs(T),Math.abs(T-U)),Ee=Math.max(Math.abs(L),Math.abs(L-Y)));break;case 3:if(O.shape===0)de=Ee=Math.max(Or(T,L),Or(T,L-Y),Or(T-U,L),Or(T-U,L-Y));else if(O.shape===1){var _e=Math.max(Math.abs(L),Math.abs(L-Y))/Math.max(Math.abs(T),Math.abs(T-U)),jt=$o(U,Y,T,L,!1),rt=jt[0],yt=jt[1];de=Or(rt-T,(yt-L)/_e),Ee=_e*de}break}return Array.isArray(O.size)&&(de=Gn(O.size[0],U),Ee=O.size.length===2?Gn(O.size[1],Y):de),[de,Ee]},gc=function(O,T){var L=Gi(180),U=[];return fi(T).forEach(function(Y,de){if(de===0){var Ee=Y[0];if(Ee.type===20&&Ee.value==="to"){L=Ea(Y);return}else if(fc(Ee)){L=bl.parse(O,Ee);return}}var _e=Vi(O,Y);U.push(_e)}),{angle:L,stops:U,type:1}},Kl=function(O,T){var L=Gi(180),U=[];return fi(T).forEach(function(Y,de){if(de===0){var Ee=Y[0];if(Ee.type===20&&["top","left","right","bottom"].indexOf(Ee.value)!==-1){L=Ea(Y);return}else if(fc(Ee)){L=(bl.parse(O,Ee)+Gi(270))%Gi(360);return}}var _e=Vi(O,Y);U.push(_e)}),{angle:L,stops:U,type:1}},au=function(O,T){var L=Gi(180),U=[],Y=1,de=0,Ee=3,_e=[];return fi(T).forEach(function(Pe,rt){var yt=Pe[0];if(rt===0){if(rr(yt)&&yt.value==="linear"){Y=1;return}else if(rr(yt)&&yt.value==="radial"){Y=2;return}}if(yt.type===18){if(yt.name==="from"){var jt=wi.parse(O,yt.values[0]);U.push({stop:na,color:jt})}else if(yt.name==="to"){var jt=wi.parse(O,yt.values[0]);U.push({stop:pi,color:jt})}else if(yt.name==="color-stop"){var kt=yt.values.filter(Ga);if(kt.length===2){var jt=wi.parse(O,kt[1]),Rs=kt[0];ya(Rs)&&U.push({stop:{type:16,number:Rs.number*100,flags:Rs.flags},color:jt})}}}}),Y===1?{angle:(L+Gi(180))%Gi(360),stops:U,type:Y}:{size:Ee,shape:de,stops:U,position:_e,type:Y}},iu="closest-side",ou="farthest-side",lu="closest-corner",nd="farthest-corner",rd="circle",zl="ellipse",ao="cover",Kc="contain",io=function(O,T){var L=0,U=3,Y=[],de=[];return fi(T).forEach(function(Ee,_e){var Pe=!0;if(_e===0){var rt=!1;Pe=Ee.reduce(function(jt,kt){if(rt)if(rr(kt))switch(kt.value){case"center":return de.push(hc),jt;case"top":case"left":return de.push(na),jt;case"right":case"bottom":return de.push(pi),jt}else(Sr(kt)||yo(kt))&&de.push(kt);else if(rr(kt))switch(kt.value){case rd:return L=0,!1;case zl:return L=1,!1;case"at":return rt=!0,!1;case iu:return U=0,!1;case ao:case ou:return U=1,!1;case Kc:case lu:return U=2,!1;case nd:return U=3,!1}else if(yo(kt)||Sr(kt))return Array.isArray(U)||(U=[]),U.push(kt),!1;return jt},Pe)}if(Pe){var yt=Vi(O,Ee);Y.push(yt)}}),{size:U,shape:L,stops:Y,position:de,type:2}},rl=function(O,T){var L=0,U=3,Y=[],de=[];return fi(T).forEach(function(Ee,_e){var Pe=!0;if(_e===0?Pe=Ee.reduce(function(yt,jt){if(rr(jt))switch(jt.value){case"center":return de.push(hc),!1;case"top":case"left":return de.push(na),!1;case"right":case"bottom":return de.push(pi),!1}else if(Sr(jt)||yo(jt))return de.push(jt),!1;return yt},Pe):_e===1&&(Pe=Ee.reduce(function(yt,jt){if(rr(jt))switch(jt.value){case rd:return L=0,!1;case zl:return L=1,!1;case Kc:case iu:return U=0,!1;case ou:return U=1,!1;case lu:return U=2,!1;case ao:case nd:return U=3,!1}else if(yo(jt)||Sr(jt))return Array.isArray(U)||(U=[]),U.push(jt),!1;return yt},Pe)),Pe){var rt=Vi(O,Ee);Y.push(rt)}}),{size:U,shape:L,stops:Y,position:de,type:2}},ad=function(O){return O.type===1},BA=function(O){return O.type===2},yc={name:"image",parse:function(O,T){if(T.type===22){var L={url:T.value,type:0};return O.cache.addImage(T.value),L}if(T.type===18){var U=al[T.name];if(typeof U>"u")throw new Error('Attempting to parse an unsupported image function "'+T.name+'"');return U(O,T.values)}throw new Error("Unsupported image type "+T.type)}};function id(O){return!(O.type===20&&O.value==="none")&&(O.type!==18||!!al[O.name])}var al={"linear-gradient":gc,"-moz-linear-gradient":Kl,"-ms-linear-gradient":Kl,"-o-linear-gradient":Kl,"-webkit-linear-gradient":Kl,"radial-gradient":io,"-moz-radial-gradient":rl,"-ms-radial-gradient":rl,"-o-radial-gradient":rl,"-webkit-radial-gradient":rl,"-webkit-gradient":au},NA={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(O,T){if(T.length===0)return[];var L=T[0];return L.type===20&&L.value==="none"?[]:T.filter(function(U){return Ga(U)&&id(U)}).map(function(U){return yc.parse(O,U)})}},Mi={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(O,T){return T.map(function(L){if(rr(L))switch(L.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Bi={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(O,T){return fi(T).map(function(L){return L.filter(Sr)}).map(xo)}},od={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(O,T){return fi(T).map(function(L){return L.filter(rr).map(function(U){return U.value}).join(" ")}).map(_i)}},_i=function(O){switch(O){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},wl;(function(O){O.AUTO="auto",O.CONTAIN="contain",O.COVER="cover"})(wl||(wl={}));var bo={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(O,T){return fi(T).map(function(L){return L.filter(CA)})}},CA=function(O){return rr(O)||Sr(O)},Sl=function(O){return{name:"border-"+O+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Gl=Sl("top"),EA=Sl("right"),ld=Sl("bottom"),zc=Sl("left"),xc=function(O){return{name:"border-radius-"+O,initialValue:"0 0",prefix:!1,type:1,parse:function(T,L){return xo(L.filter(Sr))}}},jo=xc("top-left"),Gc=xc("top-right"),vc=xc("bottom-right"),cd=xc("bottom-left"),Vl=function(O){return{name:"border-"+O+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(T,L){switch(L){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},wo=Vl("top"),So=Vl("right"),$l=Vl("bottom"),Bo=Vl("left"),$i=function(O){return{name:"border-"+O+"-width",initialValue:"0",type:0,prefix:!1,parse:function(T,L){return ro(L)?L.number:0}}},oo=$i("top"),lh=$i("right"),cu=$i("bottom"),Ad=$i("left"),ch={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ni={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(O,T){switch(T){case"rtl":return 1;case"ltr":default:return 0}}},ra={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(O,T){return T.filter(rr).reduce(function(L,U){return L|ar(U.value)},0)}},ar=function(O){switch(O){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},qi={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(O,T){switch(T){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ta={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(O,T){return T.type===20&&T.value==="normal"?0:T.type===17||T.type===15?T.number:0}},eo;(function(O){O.NORMAL="normal",O.STRICT="strict"})(eo||(eo={}));var ql={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(O,T){switch(T){case"strict":return eo.STRICT;case"normal":default:return eo.NORMAL}}},Au={name:"line-height",initialValue:"normal",prefix:!1,type:4},il=function(O,T){return rr(O)&&O.value==="normal"?1.2*T:O.type===17?T*O.number:Sr(O)?Gn(O,T):T},Ci={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(O,T){return T.type===20&&T.value==="none"?null:yc.parse(O,T)}},bc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(O,T){switch(T){case"inside":return 0;case"outside":default:return 1}}},TA={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(O,T){switch(T){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Bl=function(O){return{name:"margin-"+O,initialValue:"0",prefix:!1,type:4}},dd=Bl("top"),Wl=Bl("right"),ol=Bl("bottom"),Yl=Bl("left"),No={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(O,T){return T.filter(rr).map(function(L){switch(L.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Vc={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(O,T){switch(T){case"break-word":return"break-word";case"normal":default:return"normal"}}},ll=function(O){return{name:"padding-"+O,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Xl=ll("top"),ud=ll("right"),Jl=ll("bottom"),Ei=ll("left"),hd={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(O,T){switch(T){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Ah={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(O,T){switch(T){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Sf={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(O,T){return T.length===1&&Hl(T[0],"none")?[]:fi(T).map(function(L){for(var U={color:La.TRANSPARENT,offsetX:na,offsetY:na,blur:na},Y=0,de=0;de<L.length;de++){var Ee=L[de];yo(Ee)?(Y===0?U.offsetX=Ee:Y===1?U.offsetY=Ee:U.blur=Ee,Y++):U.color=wi.parse(O,Ee)}return U})}},Bf={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(O,T){switch(T){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Nf={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(O,T){if(T.type===20&&T.value==="none")return null;if(T.type===18){var L=FA[T.name];if(typeof L>"u")throw new Error('Attempting to parse an unsupported transform function "'+T.name+'"');return L(T.values)}return null}},Da=function(O){var T=O.filter(function(L){return L.type===17}).map(function(L){return L.number});return T.length===6?T:null},$c=function(O){var T=O.filter(function(Pe){return Pe.type===17}).map(function(Pe){return Pe.number}),L=T[0],U=T[1];T[2],T[3];var Y=T[4],de=T[5];T[6],T[7],T[8],T[9],T[10],T[11];var Ee=T[12],_e=T[13];return T[14],T[15],T.length===16?[L,U,Y,de,Ee,_e]:null},FA={matrix:Da,matrix3d:$c},qc={type:16,number:50,flags:dn},fd=[qc,qc],I={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(O,T){var L=T.filter(Sr);return L.length!==2?fd:[L[0],L[1]]}},P={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(O,T){switch(T){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},W;(function(O){O.NORMAL="normal",O.BREAK_ALL="break-all",O.KEEP_ALL="keep-all"})(W||(W={}));for(var ae={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(O,T){switch(T){case"break-all":return W.BREAK_ALL;case"keep-all":return W.KEEP_ALL;case"normal":default:return W.NORMAL}}},Be={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(O,T){if(T.type===20)return{auto:!0,order:0};if(ya(T))return{auto:!1,order:T.number};throw new Error("Invalid z-index number parsed")}},Fe={name:"time",parse:function(O,T){if(T.type===15)switch(T.unit.toLowerCase()){case"s":return 1e3*T.number;case"ms":return T.number}throw new Error("Unsupported time type")}},Re={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(O,T){return ya(T)?T.number:1}},Le={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Me={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(O,T){return T.filter(rr).map(function(L){switch(L.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(L){return L!==0})}},ze={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(O,T){var L=[],U=[];return T.forEach(function(Y){switch(Y.type){case 20:case 0:L.push(Y.value);break;case 17:L.push(Y.number.toString());break;case 4:U.push(L.join(" ")),L.length=0;break}}),L.length&&U.push(L.join(" ")),U.map(function(Y){return Y.indexOf(" ")===-1?Y:"'"+Y+"'"})}},ot={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Nt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(O,T){if(ya(T))return T.number;if(rr(T))switch(T.value){case"bold":return 700;case"normal":default:return 400}return 400}},Ke={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(O,T){return T.filter(rr).map(function(L){return L.value})}},ft={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(O,T){switch(T){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mt=function(O,T){return(O&T)!==0},Pt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(O,T){if(T.length===0)return[];var L=T[0];return L.type===20&&L.value==="none"?[]:T}},wt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(O,T){if(T.length===0)return null;var L=T[0];if(L.type===20&&L.value==="none")return null;for(var U=[],Y=T.filter(Ho),de=0;de<Y.length;de++){var Ee=Y[de],_e=Y[de+1];if(Ee.type===20){var Pe=_e&&ya(_e)?_e.number:1;U.push({counter:Ee.value,increment:Pe})}}return U}},Mt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(O,T){if(T.length===0)return[];for(var L=[],U=T.filter(Ho),Y=0;Y<U.length;Y++){var de=U[Y],Ee=U[Y+1];if(rr(de)&&de.value!=="none"){var _e=Ee&&ya(Ee)?Ee.number:0;L.push({counter:de.value,reset:_e})}}return L}},Gt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(O,T){return T.filter(ro).map(function(L){return Fe.parse(O,L)})}},ds={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(O,T){if(T.length===0)return null;var L=T[0];if(L.type===20&&L.value==="none")return null;var U=[],Y=T.filter(kl);if(Y.length%2!==0)return null;for(var de=0;de<Y.length;de+=2){var Ee=Y[de].value,_e=Y[de+1].value;U.push({open:Ee,close:_e})}return U}},Xt=function(O,T,L){if(!O)return"";var U=O[Math.min(T,O.length-1)];return U?L?U.open:U.close:""},$s={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(O,T){return T.length===1&&Hl(T[0],"none")?[]:fi(T).map(function(L){for(var U={color:255,offsetX:na,offsetY:na,blur:na,spread:na,inset:!1},Y=0,de=0;de<L.length;de++){var Ee=L[de];Hl(Ee,"inset")?U.inset=!0:yo(Ee)?(Y===0?U.offsetX=Ee:Y===1?U.offsetY=Ee:Y===2?U.blur=Ee:U.spread=Ee,Y++):U.color=wi.parse(O,Ee)}return U})}},Ds={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(O,T){var L=[0,1,2],U=[];return T.filter(rr).forEach(function(Y){switch(Y.value){case"stroke":U.push(1);break;case"fill":U.push(0);break;case"markers":U.push(2);break}}),L.forEach(function(Y){U.indexOf(Y)===-1&&U.push(Y)}),U}},In={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},zs={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(O,T){return ro(T)?T.number:0}},er=(function(){function O(T,L){var U,Y;this.animationDuration=Ot(T,Gt,L.animationDuration),this.backgroundClip=Ot(T,jl,L.backgroundClip),this.backgroundColor=Ot(T,Qi,L.backgroundColor),this.backgroundImage=Ot(T,NA,L.backgroundImage),this.backgroundOrigin=Ot(T,Mi,L.backgroundOrigin),this.backgroundPosition=Ot(T,Bi,L.backgroundPosition),this.backgroundRepeat=Ot(T,od,L.backgroundRepeat),this.backgroundSize=Ot(T,bo,L.backgroundSize),this.borderTopColor=Ot(T,Gl,L.borderTopColor),this.borderRightColor=Ot(T,EA,L.borderRightColor),this.borderBottomColor=Ot(T,ld,L.borderBottomColor),this.borderLeftColor=Ot(T,zc,L.borderLeftColor),this.borderTopLeftRadius=Ot(T,jo,L.borderTopLeftRadius),this.borderTopRightRadius=Ot(T,Gc,L.borderTopRightRadius),this.borderBottomRightRadius=Ot(T,vc,L.borderBottomRightRadius),this.borderBottomLeftRadius=Ot(T,cd,L.borderBottomLeftRadius),this.borderTopStyle=Ot(T,wo,L.borderTopStyle),this.borderRightStyle=Ot(T,So,L.borderRightStyle),this.borderBottomStyle=Ot(T,$l,L.borderBottomStyle),this.borderLeftStyle=Ot(T,Bo,L.borderLeftStyle),this.borderTopWidth=Ot(T,oo,L.borderTopWidth),this.borderRightWidth=Ot(T,lh,L.borderRightWidth),this.borderBottomWidth=Ot(T,cu,L.borderBottomWidth),this.borderLeftWidth=Ot(T,Ad,L.borderLeftWidth),this.boxShadow=Ot(T,$s,L.boxShadow),this.color=Ot(T,ch,L.color),this.direction=Ot(T,Ni,L.direction),this.display=Ot(T,ra,L.display),this.float=Ot(T,qi,L.cssFloat),this.fontFamily=Ot(T,ze,L.fontFamily),this.fontSize=Ot(T,ot,L.fontSize),this.fontStyle=Ot(T,ft,L.fontStyle),this.fontVariant=Ot(T,Ke,L.fontVariant),this.fontWeight=Ot(T,Nt,L.fontWeight),this.letterSpacing=Ot(T,Ta,L.letterSpacing),this.lineBreak=Ot(T,ql,L.lineBreak),this.lineHeight=Ot(T,Au,L.lineHeight),this.listStyleImage=Ot(T,Ci,L.listStyleImage),this.listStylePosition=Ot(T,bc,L.listStylePosition),this.listStyleType=Ot(T,TA,L.listStyleType),this.marginTop=Ot(T,dd,L.marginTop),this.marginRight=Ot(T,Wl,L.marginRight),this.marginBottom=Ot(T,ol,L.marginBottom),this.marginLeft=Ot(T,Yl,L.marginLeft),this.opacity=Ot(T,Re,L.opacity);var de=Ot(T,No,L.overflow);this.overflowX=de[0],this.overflowY=de[de.length>1?1:0],this.overflowWrap=Ot(T,Vc,L.overflowWrap),this.paddingTop=Ot(T,Xl,L.paddingTop),this.paddingRight=Ot(T,ud,L.paddingRight),this.paddingBottom=Ot(T,Jl,L.paddingBottom),this.paddingLeft=Ot(T,Ei,L.paddingLeft),this.paintOrder=Ot(T,Ds,L.paintOrder),this.position=Ot(T,Ah,L.position),this.textAlign=Ot(T,hd,L.textAlign),this.textDecorationColor=Ot(T,Le,(U=L.textDecorationColor)!==null&&U!==void 0?U:L.color),this.textDecorationLine=Ot(T,Me,(Y=L.textDecorationLine)!==null&&Y!==void 0?Y:L.textDecoration),this.textShadow=Ot(T,Sf,L.textShadow),this.textTransform=Ot(T,Bf,L.textTransform),this.transform=Ot(T,Nf,L.transform),this.transformOrigin=Ot(T,I,L.transformOrigin),this.visibility=Ot(T,P,L.visibility),this.webkitTextStrokeColor=Ot(T,In,L.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ot(T,zs,L.webkitTextStrokeWidth),this.wordBreak=Ot(T,ae,L.wordBreak),this.zIndex=Ot(T,Be,L.zIndex)}return O.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},O.prototype.isTransparent=function(){return Si(this.backgroundColor)},O.prototype.isTransformed=function(){return this.transform!==null},O.prototype.isPositioned=function(){return this.position!==0},O.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},O.prototype.isFloating=function(){return this.float!==0},O.prototype.isInlineLevel=function(){return mt(this.display,4)||mt(this.display,33554432)||mt(this.display,268435456)||mt(this.display,536870912)||mt(this.display,67108864)||mt(this.display,134217728)},O})(),aa=(function(){function O(T,L){this.content=Ot(T,Pt,L.content),this.quotes=Ot(T,ds,L.quotes)}return O})(),Ln=(function(){function O(T,L){this.counterIncrement=Ot(T,wt,L.counterIncrement),this.counterReset=Ot(T,Mt,L.counterReset)}return O})(),Ot=function(O,T,L){var U=new go,Y=L!==null&&typeof L<"u"?L.toString():T.initialValue;U.write(Y);var de=new Pl(U.read());switch(T.type){case 2:var Ee=de.parseComponentValue();return T.parse(O,rr(Ee)?Ee.value:T.initialValue);case 0:return T.parse(O,de.parseComponentValue());case 1:return T.parse(O,de.parseComponentValues());case 4:return de.parseComponentValue();case 3:switch(T.format){case"angle":return bl.parse(O,de.parseComponentValue());case"color":return wi.parse(O,de.parseComponentValue());case"image":return yc.parse(O,de.parseComponentValue());case"length":var _e=de.parseComponentValue();return yo(_e)?_e:na;case"length-percentage":var Pe=de.parseComponentValue();return Sr(Pe)?Pe:na;case"time":return Fe.parse(O,de.parseComponentValue())}break}},ws="data-html2canvas-debug",xa=function(O){var T=O.getAttribute(ws);switch(T){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},xn=function(O,T){var L=xa(O);return L===1||T===L},Sn=(function(){function O(T,L){if(this.context=T,this.textNodes=[],this.elements=[],this.flags=0,xn(L,3))debugger;this.styles=new er(T,window.getComputedStyle(L,null)),xu(L)&&(this.styles.animationDuration.some(function(U){return U>0})&&(L.style.animationDuration="0s"),this.styles.transform!==null&&(L.style.transform="none")),this.bounds=h(this.context,L),xn(L,4)&&(this.flags|=16)}return O})(),Pr="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qa=typeof Uint8Array>"u"?[]:new Uint8Array(256),kr=0;kr<Va.length;kr++)Qa[Va.charCodeAt(kr)]=kr;for(var $a=function(O){var T=O.length*.75,L=O.length,U,Y=0,de,Ee,_e,Pe;O[O.length-1]==="="&&(T--,O[O.length-2]==="="&&T--);var rt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(T):new Array(T),yt=Array.isArray(rt)?rt:new Uint8Array(rt);for(U=0;U<L;U+=4)de=Qa[O.charCodeAt(U)],Ee=Qa[O.charCodeAt(U+1)],_e=Qa[O.charCodeAt(U+2)],Pe=Qa[O.charCodeAt(U+3)],yt[Y++]=de<<2|Ee>>4,yt[Y++]=(Ee&15)<<4|_e>>2,yt[Y++]=(_e&3)<<6|Pe&63;return rt},Pi=function(O){for(var T=O.length,L=[],U=0;U<T;U+=2)L.push(O[U+1]<<8|O[U]);return L},qa=function(O){for(var T=O.length,L=[],U=0;U<T;U+=4)L.push(O[U+3]<<24|O[U+2]<<16|O[U+1]<<8|O[U]);return L},Rn=5,cr=11,ia=2,Ur=cr-Rn,Wa=65536>>Rn,va=1<<Rn,Ar=va-1,Ma=1024>>Rn,Hr=Wa+Ma,Ya=Hr,Xa=32,Wr=Ya+Xa,vr=65536>>cr,ki=1<<Ur,Fa=ki-1,pn=function(O,T,L){return O.slice?O.slice(T,L):new Uint16Array(Array.prototype.slice.call(O,T,L))},mn=function(O,T,L){return O.slice?O.slice(T,L):new Uint32Array(Array.prototype.slice.call(O,T,L))},Nr=function(O,T){var L=$a(O),U=Array.isArray(L)?qa(L):new Uint32Array(L),Y=Array.isArray(L)?Pi(L):new Uint16Array(L),de=24,Ee=pn(Y,de/2,U[4]/2),_e=U[5]===2?pn(Y,(de+U[4])/2):mn(U,Math.ceil((de+U[4])/4));return new to(U[0],U[1],U[2],U[3],Ee,_e)},to=(function(){function O(T,L,U,Y,de,Ee){this.initialValue=T,this.errorValue=L,this.highStart=U,this.highValueIndex=Y,this.index=de,this.data=Ee}return O.prototype.get=function(T){var L;if(T>=0){if(T<55296||T>56319&&T<=65535)return L=this.index[T>>Rn],L=(L<<ia)+(T&Ar),this.data[L];if(T<=65535)return L=this.index[Wa+(T-55296>>Rn)],L=(L<<ia)+(T&Ar),this.data[L];if(T<this.highStart)return L=Wr-vr+(T>>cr),L=this.index[L],L+=T>>Rn&Fa,L=this.index[L],L=(L<<ia)+(T&Ar),this.data[L];if(T<=1114111)return this.data[this.highValueIndex]}return this.errorValue},O})(),lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wi=typeof Uint8Array>"u"?[]:new Uint8Array(256),ba=0;ba<lo.length;ba++)Wi[lo.charCodeAt(ba)]=ba;var Zl=1,cl=2,Wc=3,Yr=4,pd=5,du=7,IA=8,Wo=9,uu=10,md=11,gd=12,RA=13,ai=14,da=15,OA=function(O){for(var T=[],L=0,U=O.length;L<U;){var Y=O.charCodeAt(L++);if(Y>=55296&&Y<=56319&&L<U){var de=O.charCodeAt(L++);(de&64512)===56320?T.push(((Y&1023)<<10)+(de&1023)+65536):(T.push(Y),L--)}else T.push(Y)}return T},ec=function(){for(var O=[],T=0;T<arguments.length;T++)O[T]=arguments[T];if(String.fromCodePoint)return String.fromCodePoint.apply(String,O);var L=O.length;if(!L)return"";for(var U=[],Y=-1,de="";++Y<L;){var Ee=O[Y];Ee<=65535?U.push(Ee):(Ee-=65536,U.push((Ee>>10)+55296,Ee%1024+56320)),(Y+1===L||U.length>16384)&&(de+=String.fromCharCode.apply(String,U),U.length=0)}return de},Yc=Nr(Pr),mi="",Co="",yd=function(O){return Yc.get(O)},Xc=function(O,T,L){var U=L-2,Y=T[U],de=T[L-1],Ee=T[L];if(de===cl&&Ee===Wc)return mi;if(de===cl||de===Wc||de===Yr||Ee===cl||Ee===Wc||Ee===Yr)return Co;if(de===IA&&[IA,Wo,md,gd].indexOf(Ee)!==-1||(de===md||de===Wo)&&(Ee===Wo||Ee===uu)||(de===gd||de===uu)&&Ee===uu||Ee===RA||Ee===pd||Ee===du||de===Zl)return mi;if(de===RA&&Ee===ai){for(;Y===pd;)Y=T[--U];if(Y===ai)return mi}if(de===da&&Ee===da){for(var _e=0;Y===da;)_e++,Y=T[--U];if(_e%2===0)return mi}return Co},xd=function(O){var T=OA(O),L=T.length,U=0,Y=0,de=T.map(yd);return{next:function(){if(U>=L)return{done:!0,value:null};for(var Ee=mi;U<L&&(Ee=Xc(T,de,++U))===mi;);if(Ee!==mi||U===L){var _e=ec.apply(null,T.slice(Y,U));return Y=U,{value:_e,done:!1}}return{done:!0,value:null}}}},vd=function(O){for(var T=xd(O),L=[],U;!(U=T.next()).done;)U.value&&L.push(U.value.slice());return L},Nl=function(O){var T=123;if(O.createRange){var L=O.createRange();if(L.getBoundingClientRect){var U=O.createElement("boundtest");U.style.height=T+"px",U.style.display="block",O.body.appendChild(U),L.selectNode(U);var Y=L.getBoundingClientRect(),de=Math.round(Y.height);if(O.body.removeChild(U),de===T)return!0}}return!1},hu=function(O){var T=O.createElement("boundtest");T.style.width="50px",T.style.display="block",T.style.fontSize="12px",T.style.letterSpacing="0px",T.style.wordSpacing="0px",O.body.appendChild(T);var L=O.createRange();T.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var U=T.firstChild,Y=g(U.data).map(function(Pe){return v(Pe)}),de=0,Ee={},_e=Y.every(function(Pe,rt){L.setStart(U,de),L.setEnd(U,de+Pe.length);var yt=L.getBoundingClientRect();de+=Pe.length;var jt=yt.x>Ee.x||yt.y>Ee.y;return Ee=yt,rt===0?!0:jt});return O.body.removeChild(T),_e},fu=function(){return typeof new Image().crossOrigin<"u"},dh=function(){return typeof new XMLHttpRequest().responseType=="string"},pu=function(O){var T=new Image,L=O.createElement("canvas"),U=L.getContext("2d");if(!U)return!1;T.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{U.drawImage(T,0,0),L.toDataURL()}catch{return!1}return!0},Cl=function(O){return O[0]===0&&O[1]===255&&O[2]===0&&O[3]===255},uh=function(O){var T=O.createElement("canvas"),L=100;T.width=L,T.height=L;var U=T.getContext("2d");if(!U)return Promise.reject(!1);U.fillStyle="rgb(0, 255, 0)",U.fillRect(0,0,L,L);var Y=new Image,de=T.toDataURL();Y.src=de;var Ee=bd(L,L,0,0,Y);return U.fillStyle="red",U.fillRect(0,0,L,L),mu(Ee).then(function(_e){U.drawImage(_e,0,0);var Pe=U.getImageData(0,0,L,L).data;U.fillStyle="red",U.fillRect(0,0,L,L);var rt=O.createElement("div");return rt.style.backgroundImage="url("+de+")",rt.style.height=L+"px",Cl(Pe)?mu(bd(L,L,0,0,rt)):Promise.reject(!1)}).then(function(_e){return U.drawImage(_e,0,0),Cl(U.getImageData(0,0,L,L).data)}).catch(function(){return!1})},bd=function(O,T,L,U,Y){var de="http://www.w3.org/2000/svg",Ee=document.createElementNS(de,"svg"),_e=document.createElementNS(de,"foreignObject");return Ee.setAttributeNS(null,"width",O.toString()),Ee.setAttributeNS(null,"height",T.toString()),_e.setAttributeNS(null,"width","100%"),_e.setAttributeNS(null,"height","100%"),_e.setAttributeNS(null,"x",L.toString()),_e.setAttributeNS(null,"y",U.toString()),_e.setAttributeNS(null,"externalResourcesRequired","true"),Ee.appendChild(_e),_e.appendChild(Y),Ee},mu=function(O){return new Promise(function(T,L){var U=new Image;U.onload=function(){return T(U)},U.onerror=L,U.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(O))})},ii={get SUPPORT_RANGE_BOUNDS(){var O=Nl(document);return Object.defineProperty(ii,"SUPPORT_RANGE_BOUNDS",{value:O}),O},get SUPPORT_WORD_BREAKING(){var O=ii.SUPPORT_RANGE_BOUNDS&&hu(document);return Object.defineProperty(ii,"SUPPORT_WORD_BREAKING",{value:O}),O},get SUPPORT_SVG_DRAWING(){var O=pu(document);return Object.defineProperty(ii,"SUPPORT_SVG_DRAWING",{value:O}),O},get SUPPORT_FOREIGNOBJECT_DRAWING(){var O=typeof Array.from=="function"&&typeof window.fetch=="function"?uh(document):Promise.resolve(!1);return Object.defineProperty(ii,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:O}),O},get SUPPORT_CORS_IMAGES(){var O=fu();return Object.defineProperty(ii,"SUPPORT_CORS_IMAGES",{value:O}),O},get SUPPORT_RESPONSE_TYPE(){var O=dh();return Object.defineProperty(ii,"SUPPORT_RESPONSE_TYPE",{value:O}),O},get SUPPORT_CORS_XHR(){var O="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ii,"SUPPORT_CORS_XHR",{value:O}),O},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var O=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ii,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:O}),O}},Jc=(function(){function O(T,L){this.text=T,this.bounds=L}return O})(),jc=function(O,T,L,U){var Y=Tl(T,L),de=[],Ee=0;return Y.forEach(function(_e){if(L.textDecorationLine.length||_e.trim().length>0)if(ii.SUPPORT_RANGE_BOUNDS){var Pe=Zc(U,Ee,_e.length).getClientRects();if(Pe.length>1){var rt=Eo(_e),yt=0;rt.forEach(function(kt){de.push(new Jc(kt,A.fromDOMRectList(O,Zc(U,yt+Ee,kt.length).getClientRects()))),yt+=kt.length})}else de.push(new Jc(_e,A.fromDOMRectList(O,Pe)))}else{var jt=U.splitText(_e.length);de.push(new Jc(_e,jd(O,U))),U=jt}else ii.SUPPORT_RANGE_BOUNDS||(U=U.splitText(_e.length));Ee+=_e.length}),de},jd=function(O,T){var L=T.ownerDocument;if(L){var U=L.createElement("html2canvaswrapper");U.appendChild(T.cloneNode(!0));var Y=T.parentNode;if(Y){Y.replaceChild(U,T);var de=h(O,U);return U.firstChild&&Y.replaceChild(U.firstChild,U),de}}return A.EMPTY},Zc=function(O,T,L){var U=O.ownerDocument;if(!U)throw new Error("Node has no owner document");var Y=U.createRange();return Y.setStart(O,T),Y.setEnd(O,T+L),Y},Eo=function(O){if(ii.SUPPORT_NATIVE_TEXT_SEGMENTATION){var T=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(T.segment(O)).map(function(L){return L.segment})}return vd(O)},El=function(O,T){if(ii.SUPPORT_NATIVE_TEXT_SEGMENTATION){var L=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(L.segment(O)).map(function(U){return U.segment})}return Sd(O,T)},Tl=function(O,T){return T.letterSpacing!==0?Eo(O):El(O,T)},wd=[32,160,4961,65792,65793,4153,4241],Sd=function(O,T){for(var L=Pn(O,{lineBreak:T.lineBreak,wordBreak:T.overflowWrap==="break-word"?"break-word":T.wordBreak}),U=[],Y,de=function(){if(Y.value){var Ee=Y.value.slice(),_e=g(Ee),Pe="";_e.forEach(function(rt){wd.indexOf(rt)===-1?Pe+=v(rt):(Pe.length&&U.push(Pe),U.push(v(rt)),Pe="")}),Pe.length&&U.push(Pe)}};!(Y=L.next()).done;)de();return U},wc=(function(){function O(T,L,U){this.text=hh(L.data,U.textTransform),this.textBounds=jc(T,this.text,U,L)}return O})(),hh=function(O,T){switch(T){case 1:return O.toLowerCase();case 3:return O.replace(eA,tA);case 2:return O.toUpperCase();default:return O}},eA=/(^|\s|:|-|\(|\))([a-z])/g,tA=function(O,T,L){return O.length>0?T+L.toUpperCase():O},Cf=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;return Y.src=U.currentSrc||U.src,Y.intrinsicWidth=U.naturalWidth,Y.intrinsicHeight=U.naturalHeight,Y.context.cache.addImage(Y.src),Y}return T})(Sn),fh=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;return Y.canvas=U,Y.intrinsicWidth=U.width,Y.intrinsicHeight=U.height,Y}return T})(Sn),om=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this,de=new XMLSerializer,Ee=h(L,U);return U.setAttribute("width",Ee.width+"px"),U.setAttribute("height",Ee.height+"px"),Y.svg="data:image/svg+xml,"+encodeURIComponent(de.serializeToString(U)),Y.intrinsicWidth=U.width.baseVal.value,Y.intrinsicHeight=U.height.baseVal.value,Y.context.cache.addImage(Y.svg),Y}return T})(Sn),Ef=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;return Y.value=U.value,Y}return T})(Sn),ph=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;return Y.start=U.start,Y.reversed=typeof U.reversed=="boolean"&&U.reversed===!0,Y}return T})(Sn),lm=[{type:15,flags:0,unit:"px",number:3}],cm=[{type:16,flags:0,number:50}],Am=function(O){return O.width>O.height?new A(O.left+(O.width-O.height)/2,O.top,O.height,O.height):O.width<O.height?new A(O.left,O.top+(O.height-O.width)/2,O.width,O.width):O},Tf=function(O){var T=O.type===Ff?new Array(O.value.length+1).join(""):O.value;return T.length===0?O.placeholder||"":T},gu="checkbox",yu="radio",Ff="password",If=707406591,mh=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;switch(Y.type=U.type.toLowerCase(),Y.checked=U.checked,Y.value=Tf(U),(Y.type===gu||Y.type===yu)&&(Y.styles.backgroundColor=3739148031,Y.styles.borderTopColor=Y.styles.borderRightColor=Y.styles.borderBottomColor=Y.styles.borderLeftColor=2779096575,Y.styles.borderTopWidth=Y.styles.borderRightWidth=Y.styles.borderBottomWidth=Y.styles.borderLeftWidth=1,Y.styles.borderTopStyle=Y.styles.borderRightStyle=Y.styles.borderBottomStyle=Y.styles.borderLeftStyle=1,Y.styles.backgroundClip=[0],Y.styles.backgroundOrigin=[0],Y.bounds=Am(Y.bounds)),Y.type){case gu:Y.styles.borderTopRightRadius=Y.styles.borderTopLeftRadius=Y.styles.borderBottomRightRadius=Y.styles.borderBottomLeftRadius=lm;break;case yu:Y.styles.borderTopRightRadius=Y.styles.borderTopLeftRadius=Y.styles.borderBottomRightRadius=Y.styles.borderBottomLeftRadius=cm;break}return Y}return T})(Sn),dm=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this,de=U.options[U.selectedIndex||0];return Y.value=de&&de.text||"",Y}return T})(Sn),gh=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;return Y.value=U.value,Y}return T})(Sn),Rf=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;Y.src=U.src,Y.width=parseInt(U.width,10)||0,Y.height=parseInt(U.height,10)||0,Y.backgroundColor=Y.styles.backgroundColor;try{if(U.contentWindow&&U.contentWindow.document&&U.contentWindow.document.documentElement){Y.tree=Uf(L,U.contentWindow.document.documentElement);var de=U.contentWindow.document.documentElement?Vo(L,getComputedStyle(U.contentWindow.document.documentElement).backgroundColor):La.TRANSPARENT,Ee=U.contentWindow.document.body?Vo(L,getComputedStyle(U.contentWindow.document.body).backgroundColor):La.TRANSPARENT;Y.backgroundColor=Si(de)?Si(Ee)?Y.styles.backgroundColor:Ee:de}}catch{}return Y}return T})(Sn),um=["OL","UL","MENU"],Bd=function(O,T,L,U){for(var Y=T.firstChild,de=void 0;Y;Y=de)if(de=Y.nextSibling,Lf(Y)&&Y.data.trim().length>0)L.textNodes.push(new wc(O,Y,L.styles));else if(tc(Y))if(wu(Y)&&Y.assignedNodes)Y.assignedNodes().forEach(function(_e){return Bd(O,_e,L,U)});else{var Ee=Of(O,Y);Ee.styles.isVisible()&&(Vy(Y,Ee,U)?Ee.flags|=4:$y(Ee.styles)&&(Ee.flags|=2),um.indexOf(Y.tagName)!==-1&&(Ee.flags|=8),L.elements.push(Ee),Y.slot,Y.shadowRoot?Bd(O,Y.shadowRoot,Ee,U):!bu(Y)&&!yh(Y)&&!ju(Y)&&Bd(O,Y,Ee,U))}},Of=function(O,T){return jh(T)?new Cf(O,T):vh(T)?new fh(O,T):yh(T)?new om(O,T):hm(T)?new Ef(O,T):fm(T)?new ph(O,T):vu(T)?new mh(O,T):ju(T)?new dm(O,T):bu(T)?new gh(O,T):Df(T)?new Rf(O,T):new Sn(O,T)},Uf=function(O,T){var L=Of(O,T);return L.flags|=4,Bd(O,T,L,L),L},Vy=function(O,T,L){return T.styles.isPositionedWithZIndex()||T.styles.opacity<1||T.styles.isTransformed()||xh(O)&&L.styles.isTransparent()},$y=function(O){return O.isPositioned()||O.isFloating()},Lf=function(O){return O.nodeType===Node.TEXT_NODE},tc=function(O){return O.nodeType===Node.ELEMENT_NODE},xu=function(O){return tc(O)&&typeof O.style<"u"&&!UA(O)},UA=function(O){return typeof O.className=="object"},hm=function(O){return O.tagName==="LI"},fm=function(O){return O.tagName==="OL"},vu=function(O){return O.tagName==="INPUT"},pm=function(O){return O.tagName==="HTML"},yh=function(O){return O.tagName==="svg"},xh=function(O){return O.tagName==="BODY"},vh=function(O){return O.tagName==="CANVAS"},bh=function(O){return O.tagName==="VIDEO"},jh=function(O){return O.tagName==="IMG"},Df=function(O){return O.tagName==="IFRAME"},sA=function(O){return O.tagName==="STYLE"},mm=function(O){return O.tagName==="SCRIPT"},bu=function(O){return O.tagName==="TEXTAREA"},ju=function(O){return O.tagName==="SELECT"},wu=function(O){return O.tagName==="SLOT"},Qf=function(O){return O.tagName.indexOf("-")>0},Mf=(function(){function O(){this.counters={}}return O.prototype.getCounterValue=function(T){var L=this.counters[T];return L&&L.length?L[L.length-1]:1},O.prototype.getCounterValues=function(T){var L=this.counters[T];return L||[]},O.prototype.pop=function(T){var L=this;T.forEach(function(U){return L.counters[U].pop()})},O.prototype.parse=function(T){var L=this,U=T.counterIncrement,Y=T.counterReset,de=!0;U!==null&&U.forEach(function(_e){var Pe=L.counters[_e.counter];Pe&&_e.increment!==0&&(de=!1,Pe.length||Pe.push(1),Pe[Math.max(0,Pe.length-1)]+=_e.increment)});var Ee=[];return de&&Y.forEach(function(_e){var Pe=L.counters[_e.counter];Ee.push(_e.counter),Pe||(Pe=L.counters[_e.counter]=[]),Pe.push(_e.reset)}),Ee},O})(),_f={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Pf={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},qy={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},kf={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ja=function(O,T,L,U,Y,de){return O<T||O>L?Cd(O,Y,de.length>0):U.integers.reduce(function(Ee,_e,Pe){for(;O>=_e;)O-=_e,Ee+=U.values[Pe];return Ee},"")+de},Hi=function(O,T,L,U){var Y="";do L||O--,Y=U(O)+Y,O/=T;while(O*T>=T);return Y},Ja=function(O,T,L,U,Y){var de=L-T+1;return(O<0?"-":"")+(Hi(Math.abs(O),de,U,function(Ee){return v(Math.floor(Ee%de)+T)})+Y)},nA=function(O,T,L){L===void 0&&(L=". ");var U=T.length;return Hi(Math.abs(O),U,!1,function(Y){return T[Math.floor(Y%U)]})+L},LA=1,Sc=2,Al=4,Nd=8,dl=function(O,T,L,U,Y,de){if(O<-9999||O>9999)return Cd(O,4,Y.length>0);var Ee=Math.abs(O),_e=Y;if(Ee===0)return T[0]+_e;for(var Pe=0;Ee>0&&Pe<=4;Pe++){var rt=Ee%10;rt===0&&mt(de,LA)&&_e!==""?_e=T[rt]+_e:rt>1||rt===1&&Pe===0||rt===1&&Pe===1&&mt(de,Sc)||rt===1&&Pe===1&&mt(de,Al)&&O>100||rt===1&&Pe>1&&mt(de,Nd)?_e=T[rt]+(Pe>0?L[Pe-1]:"")+_e:rt===1&&Pe>0&&(_e=L[Pe-1]+_e),Ee=Math.floor(Ee/10)}return(O<0?U:"")+_e},Hf="",gm="",Su="",Bu="",Cd=function(O,T,L){var U=L?". ":"",Y=L?"":"",de=L?", ":"",Ee=L?" ":"";switch(T){case 0:return""+Ee;case 1:return""+Ee;case 2:return""+Ee;case 5:var _e=Ja(O,48,57,!0,U);return _e.length<4?"0"+_e:_e;case 4:return nA(O,"",Y);case 6:return ja(O,1,3999,_f,3,U).toLowerCase();case 7:return ja(O,1,3999,_f,3,U);case 8:return Ja(O,945,969,!1,U);case 9:return Ja(O,97,122,!1,U);case 10:return Ja(O,65,90,!1,U);case 11:return Ja(O,1632,1641,!0,U);case 12:case 49:return ja(O,1,9999,Pf,3,U);case 35:return ja(O,1,9999,Pf,3,U).toLowerCase();case 13:return Ja(O,2534,2543,!0,U);case 14:case 30:return Ja(O,6112,6121,!0,U);case 15:return nA(O,"",Y);case 16:return nA(O,"",Y);case 17:case 48:return dl(O,"",Hf,"",Y,Sc|Al|Nd);case 47:return dl(O,"",gm,"",Y,LA|Sc|Al|Nd);case 42:return dl(O,"",Hf,"",Y,Sc|Al|Nd);case 41:return dl(O,"",gm,"",Y,LA|Sc|Al|Nd);case 26:return dl(O,"","",Su,Y,0);case 25:return dl(O,"","",Su,Y,LA|Sc|Al);case 31:return dl(O,"","",Bu,de,LA|Sc|Al);case 33:return dl(O,"","",Bu,de,0);case 32:return dl(O,"","",Bu,de,LA|Sc|Al);case 18:return Ja(O,2406,2415,!0,U);case 20:return ja(O,1,19999,kf,3,U);case 21:return Ja(O,2790,2799,!0,U);case 22:return Ja(O,2662,2671,!0,U);case 22:return ja(O,1,10999,qy,3,U);case 23:return nA(O,"");case 24:return nA(O,"");case 27:return Ja(O,3302,3311,!0,U);case 28:return nA(O,"",Y);case 29:return nA(O,"",Y);case 34:return Ja(O,3792,3801,!0,U);case 37:return Ja(O,6160,6169,!0,U);case 38:return Ja(O,4160,4169,!0,U);case 39:return Ja(O,2918,2927,!0,U);case 40:return Ja(O,1776,1785,!0,U);case 43:return Ja(O,3046,3055,!0,U);case 44:return Ja(O,3174,3183,!0,U);case 45:return Ja(O,3664,3673,!0,U);case 46:return Ja(O,3872,3881,!0,U);case 3:default:return Ja(O,48,57,!0,U)}},Kf="data-html2canvas-ignore",zf=(function(){function O(T,L,U){if(this.context=T,this.options=U,this.scrolledElements=[],this.referenceElement=L,this.counters=new Mf,this.quoteDepth=0,!L.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(L.ownerDocument.documentElement,!1)}return O.prototype.toIFrame=function(T,L){var U=this,Y=Gf(T,L);if(!Y.contentWindow)return Promise.reject("Unable to find iframe window");var de=T.defaultView.pageXOffset,Ee=T.defaultView.pageYOffset,_e=Y.contentWindow,Pe=_e.document,rt=$f(Y).then(function(){return c(U,void 0,void 0,function(){var yt,jt;return p(this,function(kt){switch(kt.label){case 0:return this.scrolledElements.forEach(vm),_e&&(_e.scrollTo(L.left,L.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(_e.scrollY!==L.top||_e.scrollX!==L.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(_e.scrollX-L.left,_e.scrollY-L.top,0,0))),yt=this.options.onclone,jt=this.clonedReferenceElement,typeof jt>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Pe.fonts&&Pe.fonts.ready?[4,Pe.fonts.ready]:[3,2];case 1:kt.sent(),kt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ym(Pe)]:[3,4];case 3:kt.sent(),kt.label=4;case 4:return typeof yt=="function"?[2,Promise.resolve().then(function(){return yt(Pe,jt)}).then(function(){return Y})]:[2,Y]}})})});return Pe.open(),Pe.write(xm(document.doctype)+"<html></html>"),qf(this.referenceElement.ownerDocument,de,Ee),Pe.replaceChild(Pe.adoptNode(this.documentElement),Pe.documentElement),Pe.close(),rt},O.prototype.createElementClone=function(T){if(xn(T,2))debugger;if(vh(T))return this.createCanvasClone(T);if(bh(T))return this.createVideoClone(T);if(sA(T))return this.createStyleClone(T);var L=T.cloneNode(!1);return jh(L)&&(jh(T)&&T.currentSrc&&T.currentSrc!==T.src&&(L.src=T.currentSrc,L.srcset=""),L.loading==="lazy"&&(L.loading="eager")),Qf(L)?this.createCustomElementClone(L):L},O.prototype.createCustomElementClone=function(T){var L=document.createElement("html2canvascustomelement");return Nu(T.style,L),L},O.prototype.createStyleClone=function(T){try{var L=T.sheet;if(L&&L.cssRules){var U=[].slice.call(L.cssRules,0).reduce(function(de,Ee){return Ee&&typeof Ee.cssText=="string"?de+Ee.cssText:de},""),Y=T.cloneNode(!1);return Y.textContent=U,Y}}catch(de){if(this.context.logger.error("Unable to access cssRules property",de),de.name!=="SecurityError")throw de}return T.cloneNode(!1)},O.prototype.createCanvasClone=function(T){var L;if(this.options.inlineImages&&T.ownerDocument){var U=T.ownerDocument.createElement("img");try{return U.src=T.toDataURL(),U}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",T)}}var Y=T.cloneNode(!1);try{Y.width=T.width,Y.height=T.height;var de=T.getContext("2d"),Ee=Y.getContext("2d");if(Ee)if(!this.options.allowTaint&&de)Ee.putImageData(de.getImageData(0,0,T.width,T.height),0,0);else{var _e=(L=T.getContext("webgl2"))!==null&&L!==void 0?L:T.getContext("webgl");if(_e){var Pe=_e.getContextAttributes();Pe?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",T)}Ee.drawImage(T,0,0)}return Y}catch{this.context.logger.info("Unable to clone canvas as it is tainted",T)}return Y},O.prototype.createVideoClone=function(T){var L=T.ownerDocument.createElement("canvas");L.width=T.offsetWidth,L.height=T.offsetHeight;var U=L.getContext("2d");try{return U&&(U.drawImage(T,0,0,L.width,L.height),this.options.allowTaint||U.getImageData(0,0,L.width,L.height)),L}catch{this.context.logger.info("Unable to clone video as it is tainted",T)}var Y=T.ownerDocument.createElement("canvas");return Y.width=T.offsetWidth,Y.height=T.offsetHeight,Y},O.prototype.appendChildNode=function(T,L,U){(!tc(L)||!mm(L)&&!L.hasAttribute(Kf)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(L)))&&(!this.options.copyStyles||!tc(L)||!sA(L))&&T.appendChild(this.cloneNode(L,U))},O.prototype.cloneChildNodes=function(T,L,U){for(var Y=this,de=T.shadowRoot?T.shadowRoot.firstChild:T.firstChild;de;de=de.nextSibling)if(tc(de)&&wu(de)&&typeof de.assignedNodes=="function"){var Ee=de.assignedNodes();Ee.length&&Ee.forEach(function(_e){return Y.appendChildNode(L,_e,U)})}else this.appendChildNode(L,de,U)},O.prototype.cloneNode=function(T,L){if(Lf(T))return document.createTextNode(T.data);if(!T.ownerDocument)return T.cloneNode(!1);var U=T.ownerDocument.defaultView;if(U&&tc(T)&&(xu(T)||UA(T))){var Y=this.createElementClone(T);Y.style.transitionProperty="none";var de=U.getComputedStyle(T),Ee=U.getComputedStyle(T,":before"),_e=U.getComputedStyle(T,":after");this.referenceElement===T&&xu(Y)&&(this.clonedReferenceElement=Y),xh(Y)&&Xf(Y);var Pe=this.counters.parse(new Ln(this.context,de)),rt=this.resolvePseudoContent(T,Y,Ee,DA.BEFORE);Qf(T)&&(L=!0),bh(T)||this.cloneChildNodes(T,Y,L),rt&&Y.insertBefore(rt,Y.firstChild);var yt=this.resolvePseudoContent(T,Y,_e,DA.AFTER);return yt&&Y.appendChild(yt),this.counters.pop(Pe),(de&&(this.options.copyStyles||UA(T))&&!Df(T)||L)&&Nu(de,Y),(T.scrollTop!==0||T.scrollLeft!==0)&&this.scrolledElements.push([Y,T.scrollLeft,T.scrollTop]),(bu(T)||ju(T))&&(bu(Y)||ju(Y))&&(Y.value=T.value),Y}return T.cloneNode(!1)},O.prototype.resolvePseudoContent=function(T,L,U,Y){var de=this;if(U){var Ee=U.content,_e=L.ownerDocument;if(!(!_e||!Ee||Ee==="none"||Ee==="-moz-alt-content"||U.display==="none")){this.counters.parse(new Ln(this.context,U));var Pe=new aa(this.context,U),rt=_e.createElement("html2canvaspseudoelement");Nu(U,rt),Pe.content.forEach(function(jt){if(jt.type===0)rt.appendChild(_e.createTextNode(jt.value));else if(jt.type===22){var kt=_e.createElement("img");kt.src=jt.value,kt.style.opacity="1",rt.appendChild(kt)}else if(jt.type===18){if(jt.name==="attr"){var Rs=jt.values.filter(rr);Rs.length&&rt.appendChild(_e.createTextNode(T.getAttribute(Rs[0].value)||""))}else if(jt.name==="counter"){var xs=jt.values.filter(Ga),Bs=xs[0],cn=xs[1];if(Bs&&rr(Bs)){var Hs=de.counters.getCounterValue(Bs.value),Ms=cn&&rr(cn)?TA.parse(de.context,cn.value):3;rt.appendChild(_e.createTextNode(Cd(Hs,Ms,!1)))}}else if(jt.name==="counters"){var qn=jt.values.filter(Ga),Bs=qn[0],kn=qn[1],cn=qn[2];if(Bs&&rr(Bs)){var En=de.counters.getCounterValues(Bs.value),Os=cn&&rr(cn)?TA.parse(de.context,cn.value):3,tr=kn&&kn.type===0?kn.value:"",ur=En.map(function(la){return Cd(la,Os,!1)}).join(tr);rt.appendChild(_e.createTextNode(ur))}}}else if(jt.type===20)switch(jt.value){case"open-quote":rt.appendChild(_e.createTextNode(Xt(Pe.quotes,de.quoteDepth++,!0)));break;case"close-quote":rt.appendChild(_e.createTextNode(Xt(Pe.quotes,--de.quoteDepth,!1)));break;default:rt.appendChild(_e.createTextNode(jt.value))}}),rt.className=Yf+" "+Sh;var yt=Y===DA.BEFORE?" "+Yf:" "+Sh;return UA(L)?L.className.baseValue+=yt:L.className+=yt,rt}}},O.destroy=function(T){return T.parentNode?(T.parentNode.removeChild(T),!0):!1},O})(),DA;(function(O){O[O.BEFORE=0]="BEFORE",O[O.AFTER=1]="AFTER"})(DA||(DA={}));var Gf=function(O,T){var L=O.createElement("iframe");return L.className="html2canvas-container",L.style.visibility="hidden",L.style.position="fixed",L.style.left="-10000px",L.style.top="0px",L.style.border="0",L.width=T.width.toString(),L.height=T.height.toString(),L.scrolling="no",L.setAttribute(Kf,"true"),O.body.appendChild(L),L},Vf=function(O){return new Promise(function(T){if(O.complete){T();return}if(!O.src){T();return}O.onload=T,O.onerror=T})},ym=function(O){return Promise.all([].slice.call(O.images,0).map(Vf))},$f=function(O){return new Promise(function(T,L){var U=O.contentWindow;if(!U)return L("No window assigned for iframe");var Y=U.document;U.onload=O.onload=function(){U.onload=O.onload=null;var de=setInterval(function(){Y.body.childNodes.length>0&&Y.readyState==="complete"&&(clearInterval(de),T(O))},50)}})},wh=["all","d","content"],Nu=function(O,T){for(var L=O.length-1;L>=0;L--){var U=O.item(L);wh.indexOf(U)===-1&&T.style.setProperty(U,O.getPropertyValue(U))}return T},xm=function(O){var T="";return O&&(T+="<!DOCTYPE ",O.name&&(T+=O.name),O.internalSubset&&(T+=O.internalSubset),O.publicId&&(T+='"'+O.publicId+'"'),O.systemId&&(T+='"'+O.systemId+'"'),T+=">"),T},qf=function(O,T,L){O&&O.defaultView&&(T!==O.defaultView.pageXOffset||L!==O.defaultView.pageYOffset)&&O.defaultView.scrollTo(T,L)},vm=function(O){var T=O[0],L=O[1],U=O[2];T.scrollLeft=L,T.scrollTop=U},Bc=":before",Wf=":after",Yf="___html2canvas___pseudoelement_before",Sh="___html2canvas___pseudoelement_after",sc=`{
    content: "" !important;
    display: none !important;
}`,Xf=function(O){bm(O,"."+Yf+Bc+sc+`
         .`+Sh+Wf+sc)},bm=function(O,T){var L=O.ownerDocument;if(L){var U=L.createElement("style");U.textContent=T,O.appendChild(U)}},Cu=(function(){function O(){}return O.getOrigin=function(T){var L=O._link;return L?(L.href=T,L.href=L.href,L.protocol+L.hostname+L.port):"about:blank"},O.isSameOrigin=function(T){return O.getOrigin(T)===O._origin},O.setContext=function(T){O._link=T.document.createElement("a"),O._origin=O.getOrigin(T.location.href)},O._origin="about:blank",O})(),Eu=(function(){function O(T,L){this.context=T,this._options=L,this._cache={}}return O.prototype.addImage=function(T){var L=Promise.resolve();return this.has(T)||(Bh(T)||jm(T))&&(this._cache[T]=this.loadImage(T)).catch(function(){}),L},O.prototype.match=function(T){return this._cache[T]},O.prototype.loadImage=function(T){return c(this,void 0,void 0,function(){var L,U,Y,de,Ee=this;return p(this,function(_e){switch(_e.label){case 0:return L=Cu.isSameOrigin(T),U=!QA(T)&&this._options.useCORS===!0&&ii.SUPPORT_CORS_IMAGES&&!L,Y=!QA(T)&&!L&&!Bh(T)&&typeof this._options.proxy=="string"&&ii.SUPPORT_CORS_XHR&&!U,!L&&this._options.allowTaint===!1&&!QA(T)&&!Bh(T)&&!Y&&!U?[2]:(de=T,Y?[4,this.proxy(de)]:[3,2]);case 1:de=_e.sent(),_e.label=2;case 2:return this.context.logger.debug("Added image "+T.substring(0,256)),[4,new Promise(function(Pe,rt){var yt=new Image;yt.onload=function(){return Pe(yt)},yt.onerror=rt,(rA(de)||U)&&(yt.crossOrigin="anonymous"),yt.src=de,yt.complete===!0&&setTimeout(function(){return Pe(yt)},500),Ee._options.imageTimeout>0&&setTimeout(function(){return rt("Timed out ("+Ee._options.imageTimeout+"ms) loading image")},Ee._options.imageTimeout)})];case 3:return[2,_e.sent()]}})})},O.prototype.has=function(T){return typeof this._cache[T]<"u"},O.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},O.prototype.proxy=function(T){var L=this,U=this._options.proxy;if(!U)throw new Error("No proxy defined");var Y=T.substring(0,256);return new Promise(function(de,Ee){var _e=ii.SUPPORT_RESPONSE_TYPE?"blob":"text",Pe=new XMLHttpRequest;Pe.onload=function(){if(Pe.status===200)if(_e==="text")de(Pe.response);else{var jt=new FileReader;jt.addEventListener("load",function(){return de(jt.result)},!1),jt.addEventListener("error",function(kt){return Ee(kt)},!1),jt.readAsDataURL(Pe.response)}else Ee("Failed to proxy resource "+Y+" with status code "+Pe.status)},Pe.onerror=Ee;var rt=U.indexOf("?")>-1?"&":"?";if(Pe.open("GET",""+U+rt+"url="+encodeURIComponent(T)+"&responseType="+_e),_e!=="text"&&Pe instanceof XMLHttpRequest&&(Pe.responseType=_e),L._options.imageTimeout){var yt=L._options.imageTimeout;Pe.timeout=yt,Pe.ontimeout=function(){return Ee("Timed out ("+yt+"ms) proxying "+Y)}}Pe.send()})},O})(),wa=/^data:image\/svg\+xml/i,Wy=/^data:image\/.*;base64,/i,Yy=/^data:image\/.*/i,jm=function(O){return ii.SUPPORT_SVG_DRAWING||!wm(O)},QA=function(O){return Yy.test(O)},rA=function(O){return Wy.test(O)},Bh=function(O){return O.substr(0,4)==="blob"},wm=function(O){return O.substr(-3).toLowerCase()==="svg"||wa.test(O)},Is=(function(){function O(T,L){this.type=0,this.x=T,this.y=L}return O.prototype.add=function(T,L){return new O(this.x+T,this.y+L)},O})(),co=function(O,T,L){return new Is(O.x+(T.x-O.x)*L,O.y+(T.y-O.y)*L)},Tu=(function(){function O(T,L,U,Y){this.type=1,this.start=T,this.startControl=L,this.endControl=U,this.end=Y}return O.prototype.subdivide=function(T,L){var U=co(this.start,this.startControl,T),Y=co(this.startControl,this.endControl,T),de=co(this.endControl,this.end,T),Ee=co(U,Y,T),_e=co(Y,de,T),Pe=co(Ee,_e,T);return L?new O(this.start,U,Ee,Pe):new O(Pe,_e,de,this.end)},O.prototype.add=function(T,L){return new O(this.start.add(T,L),this.startControl.add(T,L),this.endControl.add(T,L),this.end.add(T,L))},O.prototype.reverse=function(){return new O(this.end,this.endControl,this.startControl,this.start)},O})(),To=function(O){return O.type===1},Sm=(function(){function O(T){var L=T.styles,U=T.bounds,Y=vo(L.borderTopLeftRadius,U.width,U.height),de=Y[0],Ee=Y[1],_e=vo(L.borderTopRightRadius,U.width,U.height),Pe=_e[0],rt=_e[1],yt=vo(L.borderBottomRightRadius,U.width,U.height),jt=yt[0],kt=yt[1],Rs=vo(L.borderBottomLeftRadius,U.width,U.height),xs=Rs[0],Bs=Rs[1],cn=[];cn.push((de+Pe)/U.width),cn.push((xs+jt)/U.width),cn.push((Ee+Bs)/U.height),cn.push((rt+kt)/U.height);var Hs=Math.max.apply(Math,cn);Hs>1&&(de/=Hs,Ee/=Hs,Pe/=Hs,rt/=Hs,jt/=Hs,kt/=Hs,xs/=Hs,Bs/=Hs);var Ms=U.width-Pe,qn=U.height-kt,kn=U.width-jt,En=U.height-Bs,Os=L.borderTopWidth,tr=L.borderRightWidth,ur=L.borderBottomWidth,un=L.borderLeftWidth,oi=Gn(L.paddingTop,T.bounds.width),la=Gn(L.paddingRight,T.bounds.width),Ro=Gn(L.paddingBottom,T.bounds.width),Jr=Gn(L.paddingLeft,T.bounds.width);this.topLeftBorderDoubleOuterBox=de>0||Ee>0?ua(U.left+un/3,U.top+Os/3,de-un/3,Ee-Os/3,Qr.TOP_LEFT):new Is(U.left+un/3,U.top+Os/3),this.topRightBorderDoubleOuterBox=de>0||Ee>0?ua(U.left+Ms,U.top+Os/3,Pe-tr/3,rt-Os/3,Qr.TOP_RIGHT):new Is(U.left+U.width-tr/3,U.top+Os/3),this.bottomRightBorderDoubleOuterBox=jt>0||kt>0?ua(U.left+kn,U.top+qn,jt-tr/3,kt-ur/3,Qr.BOTTOM_RIGHT):new Is(U.left+U.width-tr/3,U.top+U.height-ur/3),this.bottomLeftBorderDoubleOuterBox=xs>0||Bs>0?ua(U.left+un/3,U.top+En,xs-un/3,Bs-ur/3,Qr.BOTTOM_LEFT):new Is(U.left+un/3,U.top+U.height-ur/3),this.topLeftBorderDoubleInnerBox=de>0||Ee>0?ua(U.left+un*2/3,U.top+Os*2/3,de-un*2/3,Ee-Os*2/3,Qr.TOP_LEFT):new Is(U.left+un*2/3,U.top+Os*2/3),this.topRightBorderDoubleInnerBox=de>0||Ee>0?ua(U.left+Ms,U.top+Os*2/3,Pe-tr*2/3,rt-Os*2/3,Qr.TOP_RIGHT):new Is(U.left+U.width-tr*2/3,U.top+Os*2/3),this.bottomRightBorderDoubleInnerBox=jt>0||kt>0?ua(U.left+kn,U.top+qn,jt-tr*2/3,kt-ur*2/3,Qr.BOTTOM_RIGHT):new Is(U.left+U.width-tr*2/3,U.top+U.height-ur*2/3),this.bottomLeftBorderDoubleInnerBox=xs>0||Bs>0?ua(U.left+un*2/3,U.top+En,xs-un*2/3,Bs-ur*2/3,Qr.BOTTOM_LEFT):new Is(U.left+un*2/3,U.top+U.height-ur*2/3),this.topLeftBorderStroke=de>0||Ee>0?ua(U.left+un/2,U.top+Os/2,de-un/2,Ee-Os/2,Qr.TOP_LEFT):new Is(U.left+un/2,U.top+Os/2),this.topRightBorderStroke=de>0||Ee>0?ua(U.left+Ms,U.top+Os/2,Pe-tr/2,rt-Os/2,Qr.TOP_RIGHT):new Is(U.left+U.width-tr/2,U.top+Os/2),this.bottomRightBorderStroke=jt>0||kt>0?ua(U.left+kn,U.top+qn,jt-tr/2,kt-ur/2,Qr.BOTTOM_RIGHT):new Is(U.left+U.width-tr/2,U.top+U.height-ur/2),this.bottomLeftBorderStroke=xs>0||Bs>0?ua(U.left+un/2,U.top+En,xs-un/2,Bs-ur/2,Qr.BOTTOM_LEFT):new Is(U.left+un/2,U.top+U.height-ur/2),this.topLeftBorderBox=de>0||Ee>0?ua(U.left,U.top,de,Ee,Qr.TOP_LEFT):new Is(U.left,U.top),this.topRightBorderBox=Pe>0||rt>0?ua(U.left+Ms,U.top,Pe,rt,Qr.TOP_RIGHT):new Is(U.left+U.width,U.top),this.bottomRightBorderBox=jt>0||kt>0?ua(U.left+kn,U.top+qn,jt,kt,Qr.BOTTOM_RIGHT):new Is(U.left+U.width,U.top+U.height),this.bottomLeftBorderBox=xs>0||Bs>0?ua(U.left,U.top+En,xs,Bs,Qr.BOTTOM_LEFT):new Is(U.left,U.top+U.height),this.topLeftPaddingBox=de>0||Ee>0?ua(U.left+un,U.top+Os,Math.max(0,de-un),Math.max(0,Ee-Os),Qr.TOP_LEFT):new Is(U.left+un,U.top+Os),this.topRightPaddingBox=Pe>0||rt>0?ua(U.left+Math.min(Ms,U.width-tr),U.top+Os,Ms>U.width+tr?0:Math.max(0,Pe-tr),Math.max(0,rt-Os),Qr.TOP_RIGHT):new Is(U.left+U.width-tr,U.top+Os),this.bottomRightPaddingBox=jt>0||kt>0?ua(U.left+Math.min(kn,U.width-un),U.top+Math.min(qn,U.height-ur),Math.max(0,jt-tr),Math.max(0,kt-ur),Qr.BOTTOM_RIGHT):new Is(U.left+U.width-tr,U.top+U.height-ur),this.bottomLeftPaddingBox=xs>0||Bs>0?ua(U.left+un,U.top+Math.min(En,U.height-ur),Math.max(0,xs-un),Math.max(0,Bs-ur),Qr.BOTTOM_LEFT):new Is(U.left+un,U.top+U.height-ur),this.topLeftContentBox=de>0||Ee>0?ua(U.left+un+Jr,U.top+Os+oi,Math.max(0,de-(un+Jr)),Math.max(0,Ee-(Os+oi)),Qr.TOP_LEFT):new Is(U.left+un+Jr,U.top+Os+oi),this.topRightContentBox=Pe>0||rt>0?ua(U.left+Math.min(Ms,U.width+un+Jr),U.top+Os+oi,Ms>U.width+un+Jr?0:Pe-un+Jr,rt-(Os+oi),Qr.TOP_RIGHT):new Is(U.left+U.width-(tr+la),U.top+Os+oi),this.bottomRightContentBox=jt>0||kt>0?ua(U.left+Math.min(kn,U.width-(un+Jr)),U.top+Math.min(qn,U.height+Os+oi),Math.max(0,jt-(tr+la)),kt-(ur+Ro),Qr.BOTTOM_RIGHT):new Is(U.left+U.width-(tr+la),U.top+U.height-(ur+Ro)),this.bottomLeftContentBox=xs>0||Bs>0?ua(U.left+un+Jr,U.top+En,Math.max(0,xs-(un+Jr)),Bs-(ur+Ro),Qr.BOTTOM_LEFT):new Is(U.left+un+Jr,U.top+U.height-(ur+Ro))}return O})(),Qr;(function(O){O[O.TOP_LEFT=0]="TOP_LEFT",O[O.TOP_RIGHT=1]="TOP_RIGHT",O[O.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",O[O.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Qr||(Qr={}));var ua=function(O,T,L,U,Y){var de=4*((Math.sqrt(2)-1)/3),Ee=L*de,_e=U*de,Pe=O+L,rt=T+U;switch(Y){case Qr.TOP_LEFT:return new Tu(new Is(O,rt),new Is(O,rt-_e),new Is(Pe-Ee,T),new Is(Pe,T));case Qr.TOP_RIGHT:return new Tu(new Is(O,T),new Is(O+Ee,T),new Is(Pe,rt-_e),new Is(Pe,rt));case Qr.BOTTOM_RIGHT:return new Tu(new Is(Pe,T),new Is(Pe,T+_e),new Is(O+Ee,rt),new Is(O,rt));case Qr.BOTTOM_LEFT:default:return new Tu(new Is(Pe,rt),new Is(Pe-Ee,rt),new Is(O,T+_e),new Is(O,T))}},MA=function(O){return[O.topLeftBorderBox,O.topRightBorderBox,O.bottomRightBorderBox,O.bottomLeftBorderBox]},Bm=function(O){return[O.topLeftContentBox,O.topRightContentBox,O.bottomRightContentBox,O.bottomLeftContentBox]},ul=function(O){return[O.topLeftPaddingBox,O.topRightPaddingBox,O.bottomRightPaddingBox,O.bottomLeftPaddingBox]},gi=(function(){function O(T,L,U){this.offsetX=T,this.offsetY=L,this.matrix=U,this.type=0,this.target=6}return O})(),Ed=(function(){function O(T,L){this.path=T,this.target=L,this.type=1}return O})(),Nm=(function(){function O(T){this.opacity=T,this.type=2,this.target=6}return O})(),Ki=function(O){return O.type===0},Cm=function(O){return O.type===1},Em=function(O){return O.type===2},Jf=function(O,T){return O.length===T.length?O.some(function(L,U){return L===T[U]}):!1},Ia=function(O,T,L,U,Y){return O.map(function(de,Ee){switch(Ee){case 0:return de.add(T,L);case 1:return de.add(T+U,L);case 2:return de.add(T+U,L+Y);case 3:return de.add(T,L+Y)}return de})},Ao=(function(){function O(T){this.element=T,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return O})(),nc=(function(){function O(T,L){if(this.container=T,this.parent=L,this.effects=[],this.curves=new Sm(this.container),this.container.styles.opacity<1&&this.effects.push(new Nm(this.container.styles.opacity)),this.container.styles.transform!==null){var U=this.container.bounds.left+this.container.styles.transformOrigin[0].number,Y=this.container.bounds.top+this.container.styles.transformOrigin[1].number,de=this.container.styles.transform;this.effects.push(new gi(U,Y,de))}if(this.container.styles.overflowX!==0){var Ee=MA(this.curves),_e=ul(this.curves);Jf(Ee,_e)?this.effects.push(new Ed(Ee,6)):(this.effects.push(new Ed(Ee,2)),this.effects.push(new Ed(_e,4)))}}return O.prototype.getEffects=function(T){for(var L=[2,3].indexOf(this.container.styles.position)===-1,U=this.parent,Y=this.effects.slice(0);U;){var de=U.effects.filter(function(Pe){return!Cm(Pe)});if(L||U.container.styles.position!==0||!U.parent){if(Y.unshift.apply(Y,de),L=[2,3].indexOf(U.container.styles.position)===-1,U.container.styles.overflowX!==0){var Ee=MA(U.curves),_e=ul(U.curves);Jf(Ee,_e)||Y.unshift(new Ed(_e,6))}}else Y.unshift.apply(Y,de);U=U.parent}return Y.filter(function(Pe){return mt(Pe.target,T)})},O})(),Nh=function(O,T,L,U){O.container.elements.forEach(function(Y){var de=mt(Y.flags,4),Ee=mt(Y.flags,2),_e=new nc(Y,O);mt(Y.styles.display,2048)&&U.push(_e);var Pe=mt(Y.flags,8)?[]:U;if(de||Ee){var rt=de||Y.styles.isPositioned()?L:T,yt=new Ao(_e);if(Y.styles.isPositioned()||Y.styles.opacity<1||Y.styles.isTransformed()){var jt=Y.styles.zIndex.order;if(jt<0){var kt=0;rt.negativeZIndex.some(function(xs,Bs){return jt>xs.element.container.styles.zIndex.order?(kt=Bs,!1):kt>0}),rt.negativeZIndex.splice(kt,0,yt)}else if(jt>0){var Rs=0;rt.positiveZIndex.some(function(xs,Bs){return jt>=xs.element.container.styles.zIndex.order?(Rs=Bs+1,!1):Rs>0}),rt.positiveZIndex.splice(Rs,0,yt)}else rt.zeroOrAutoZIndexOrTransformedOrOpacity.push(yt)}else Y.styles.isFloating()?rt.nonPositionedFloats.push(yt):rt.nonPositionedInlineLevel.push(yt);Nh(_e,yt,de?yt:L,Pe)}else Y.styles.isInlineLevel()?T.inlineLevel.push(_e):T.nonInlineLevel.push(_e),Nh(_e,T,L,Pe);mt(Y.flags,8)&&Zf(Y,Pe)})},Zf=function(O,T){for(var L=O instanceof ph?O.start:1,U=O instanceof ph?O.reversed:!1,Y=0;Y<T.length;Y++){var de=T[Y];de.container instanceof Ef&&typeof de.container.value=="number"&&de.container.value!==0&&(L=de.container.value),de.listValue=Cd(L,de.container.styles.listStyleType,!0),L+=U?-1:1}},Tm=function(O){var T=new nc(O,null),L=new Ao(T),U=[];return Nh(T,L,L,U),Zf(T.container,U),L},Fm=function(O,T){switch(T){case 0:return Sa(O.topLeftBorderBox,O.topLeftPaddingBox,O.topRightBorderBox,O.topRightPaddingBox);case 1:return Sa(O.topRightBorderBox,O.topRightPaddingBox,O.bottomRightBorderBox,O.bottomRightPaddingBox);case 2:return Sa(O.bottomRightBorderBox,O.bottomRightPaddingBox,O.bottomLeftBorderBox,O.bottomLeftPaddingBox);case 3:default:return Sa(O.bottomLeftBorderBox,O.bottomLeftPaddingBox,O.topLeftBorderBox,O.topLeftPaddingBox)}},Ch=function(O,T){switch(T){case 0:return Sa(O.topLeftBorderBox,O.topLeftBorderDoubleOuterBox,O.topRightBorderBox,O.topRightBorderDoubleOuterBox);case 1:return Sa(O.topRightBorderBox,O.topRightBorderDoubleOuterBox,O.bottomRightBorderBox,O.bottomRightBorderDoubleOuterBox);case 2:return Sa(O.bottomRightBorderBox,O.bottomRightBorderDoubleOuterBox,O.bottomLeftBorderBox,O.bottomLeftBorderDoubleOuterBox);case 3:default:return Sa(O.bottomLeftBorderBox,O.bottomLeftBorderDoubleOuterBox,O.topLeftBorderBox,O.topLeftBorderDoubleOuterBox)}},Fo=function(O,T){switch(T){case 0:return Sa(O.topLeftBorderDoubleInnerBox,O.topLeftPaddingBox,O.topRightBorderDoubleInnerBox,O.topRightPaddingBox);case 1:return Sa(O.topRightBorderDoubleInnerBox,O.topRightPaddingBox,O.bottomRightBorderDoubleInnerBox,O.bottomRightPaddingBox);case 2:return Sa(O.bottomRightBorderDoubleInnerBox,O.bottomRightPaddingBox,O.bottomLeftBorderDoubleInnerBox,O.bottomLeftPaddingBox);case 3:default:return Sa(O.bottomLeftBorderDoubleInnerBox,O.bottomLeftPaddingBox,O.topLeftBorderDoubleInnerBox,O.topLeftPaddingBox)}},Fl=function(O,T){switch(T){case 0:return Fu(O.topLeftBorderStroke,O.topRightBorderStroke);case 1:return Fu(O.topRightBorderStroke,O.bottomRightBorderStroke);case 2:return Fu(O.bottomRightBorderStroke,O.bottomLeftBorderStroke);case 3:default:return Fu(O.bottomLeftBorderStroke,O.topLeftBorderStroke)}},Fu=function(O,T){var L=[];return To(O)?L.push(O.subdivide(.5,!1)):L.push(O),To(T)?L.push(T.subdivide(.5,!0)):L.push(T),L},Sa=function(O,T,L,U){var Y=[];return To(O)?Y.push(O.subdivide(.5,!1)):Y.push(O),To(L)?Y.push(L.subdivide(.5,!0)):Y.push(L),To(U)?Y.push(U.subdivide(.5,!0).reverse()):Y.push(U),To(T)?Y.push(T.subdivide(.5,!1).reverse()):Y.push(T),Y},ep=function(O){var T=O.bounds,L=O.styles;return T.add(L.borderLeftWidth,L.borderTopWidth,-(L.borderRightWidth+L.borderLeftWidth),-(L.borderTopWidth+L.borderBottomWidth))},hl=function(O){var T=O.styles,L=O.bounds,U=Gn(T.paddingLeft,L.width),Y=Gn(T.paddingRight,L.width),de=Gn(T.paddingTop,L.width),Ee=Gn(T.paddingBottom,L.width);return L.add(U+T.borderLeftWidth,de+T.borderTopWidth,-(T.borderRightWidth+T.borderLeftWidth+U+Y),-(T.borderTopWidth+T.borderBottomWidth+de+Ee))},_A=function(O,T){return O===0?T.bounds:O===2?hl(T):ep(T)},Nc=function(O,T){return O===0?T.bounds:O===2?hl(T):ep(T)},Iu=function(O,T,L){var U=_A(Il(O.styles.backgroundOrigin,T),O),Y=Nc(Il(O.styles.backgroundClip,T),O),de=Im(Il(O.styles.backgroundSize,T),L,U),Ee=de[0],_e=de[1],Pe=vo(Il(O.styles.backgroundPosition,T),U.width-Ee,U.height-_e),rt=Ru(Il(O.styles.backgroundRepeat,T),Pe,de,U,Y),yt=Math.round(U.left+Pe[0]),jt=Math.round(U.top+Pe[1]);return[rt,yt,jt,Ee,_e]},aA=function(O){return rr(O)&&O.value===wl.AUTO},Io=function(O){return typeof O=="number"},Im=function(O,T,L){var U=T[0],Y=T[1],de=T[2],Ee=O[0],_e=O[1];if(!Ee)return[0,0];if(Sr(Ee)&&_e&&Sr(_e))return[Gn(Ee,L.width),Gn(_e,L.height)];var Pe=Io(de);if(rr(Ee)&&(Ee.value===wl.CONTAIN||Ee.value===wl.COVER)){if(Io(de)){var rt=L.width/L.height;return rt<de!=(Ee.value===wl.COVER)?[L.width,L.width/de]:[L.height*de,L.height]}return[L.width,L.height]}var yt=Io(U),jt=Io(Y),kt=yt||jt;if(aA(Ee)&&(!_e||aA(_e))){if(yt&&jt)return[U,Y];if(!Pe&&!kt)return[L.width,L.height];if(kt&&Pe){var Rs=yt?U:Y*de,xs=jt?Y:U/de;return[Rs,xs]}var Bs=yt?U:L.width,cn=jt?Y:L.height;return[Bs,cn]}if(Pe){var Hs=0,Ms=0;return Sr(Ee)?Hs=Gn(Ee,L.width):Sr(_e)&&(Ms=Gn(_e,L.height)),aA(Ee)?Hs=Ms*de:(!_e||aA(_e))&&(Ms=Hs/de),[Hs,Ms]}var qn=null,kn=null;if(Sr(Ee)?qn=Gn(Ee,L.width):_e&&Sr(_e)&&(kn=Gn(_e,L.height)),qn!==null&&(!_e||aA(_e))&&(kn=yt&&jt?qn/U*Y:L.height),kn!==null&&aA(Ee)&&(qn=yt&&jt?kn/Y*U:L.width),qn!==null&&kn!==null)return[qn,kn];throw new Error("Unable to calculate background-size for element")},Il=function(O,T){var L=O[T];return typeof L>"u"?O[0]:L},Ru=function(O,T,L,U,Y){var de=T[0],Ee=T[1],_e=L[0],Pe=L[1];switch(O){case 2:return[new Is(Math.round(U.left),Math.round(U.top+Ee)),new Is(Math.round(U.left+U.width),Math.round(U.top+Ee)),new Is(Math.round(U.left+U.width),Math.round(Pe+U.top+Ee)),new Is(Math.round(U.left),Math.round(Pe+U.top+Ee))];case 3:return[new Is(Math.round(U.left+de),Math.round(U.top)),new Is(Math.round(U.left+de+_e),Math.round(U.top)),new Is(Math.round(U.left+de+_e),Math.round(U.height+U.top)),new Is(Math.round(U.left+de),Math.round(U.height+U.top))];case 1:return[new Is(Math.round(U.left+de),Math.round(U.top+Ee)),new Is(Math.round(U.left+de+_e),Math.round(U.top+Ee)),new Is(Math.round(U.left+de+_e),Math.round(U.top+Ee+Pe)),new Is(Math.round(U.left+de),Math.round(U.top+Ee+Pe))];default:return[new Is(Math.round(Y.left),Math.round(Y.top)),new Is(Math.round(Y.left+Y.width),Math.round(Y.top)),new Is(Math.round(Y.left+Y.width),Math.round(Y.height+Y.top)),new Is(Math.round(Y.left),Math.round(Y.height+Y.top))]}},Ou="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",PA="Hidden Text",Rm=(function(){function O(T){this._data={},this._document=T}return O.prototype.parseMetrics=function(T,L){var U=this._document.createElement("div"),Y=this._document.createElement("img"),de=this._document.createElement("span"),Ee=this._document.body;U.style.visibility="hidden",U.style.fontFamily=T,U.style.fontSize=L,U.style.margin="0",U.style.padding="0",U.style.whiteSpace="nowrap",Ee.appendChild(U),Y.src=Ou,Y.width=1,Y.height=1,Y.style.margin="0",Y.style.padding="0",Y.style.verticalAlign="baseline",de.style.fontFamily=T,de.style.fontSize=L,de.style.margin="0",de.style.padding="0",de.appendChild(this._document.createTextNode(PA)),U.appendChild(de),U.appendChild(Y);var _e=Y.offsetTop-de.offsetTop+2;U.removeChild(de),U.appendChild(this._document.createTextNode(PA)),U.style.lineHeight="normal",Y.style.verticalAlign="super";var Pe=Y.offsetTop-U.offsetTop+2;return Ee.removeChild(U),{baseline:_e,middle:Pe}},O.prototype.getMetrics=function(T,L){var U=T+" "+L;return typeof this._data[U]>"u"&&(this._data[U]=this.parseMetrics(T,L)),this._data[U]},O})(),tp=(function(){function O(T,L){this.context=T,this.options=L}return O})(),Uu=1e4,Om=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;return Y._activeEffects=[],Y.canvas=U.canvas?U.canvas:document.createElement("canvas"),Y.ctx=Y.canvas.getContext("2d"),U.canvas||(Y.canvas.width=Math.floor(U.width*U.scale),Y.canvas.height=Math.floor(U.height*U.scale),Y.canvas.style.width=U.width+"px",Y.canvas.style.height=U.height+"px"),Y.fontMetrics=new Rm(document),Y.ctx.scale(Y.options.scale,Y.options.scale),Y.ctx.translate(-U.x,-U.y),Y.ctx.textBaseline="bottom",Y._activeEffects=[],Y.context.logger.debug("Canvas renderer initialized ("+U.width+"x"+U.height+") with scale "+U.scale),Y}return T.prototype.applyEffects=function(L){for(var U=this;this._activeEffects.length;)this.popEffect();L.forEach(function(Y){return U.applyEffect(Y)})},T.prototype.applyEffect=function(L){this.ctx.save(),Em(L)&&(this.ctx.globalAlpha=L.opacity),Ki(L)&&(this.ctx.translate(L.offsetX,L.offsetY),this.ctx.transform(L.matrix[0],L.matrix[1],L.matrix[2],L.matrix[3],L.matrix[4],L.matrix[5]),this.ctx.translate(-L.offsetX,-L.offsetY)),Cm(L)&&(this.path(L.path),this.ctx.clip()),this._activeEffects.push(L)},T.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},T.prototype.renderStack=function(L){return c(this,void 0,void 0,function(){var U;return p(this,function(Y){switch(Y.label){case 0:return U=L.element.container.styles,U.isVisible()?[4,this.renderStackContent(L)]:[3,2];case 1:Y.sent(),Y.label=2;case 2:return[2]}})})},T.prototype.renderNode=function(L){return c(this,void 0,void 0,function(){return p(this,function(U){switch(U.label){case 0:if(mt(L.container.flags,16))debugger;return L.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(L)]:[3,3];case 1:return U.sent(),[4,this.renderNodeContent(L)];case 2:U.sent(),U.label=3;case 3:return[2]}})})},T.prototype.renderTextWithLetterSpacing=function(L,U,Y){var de=this;if(U===0)this.ctx.fillText(L.text,L.bounds.left,L.bounds.top+Y);else{var Ee=Eo(L.text);Ee.reduce(function(_e,Pe){return de.ctx.fillText(Pe,_e,L.bounds.top+Y),_e+de.ctx.measureText(Pe).width},L.bounds.left)}},T.prototype.createFontStyle=function(L){var U=L.fontVariant.filter(function(Ee){return Ee==="normal"||Ee==="small-caps"}).join(""),Y=Kr(L.fontFamily).join(", "),de=ro(L.fontSize)?""+L.fontSize.number+L.fontSize.unit:L.fontSize.number+"px";return[[L.fontStyle,U,L.fontWeight,de,Y].join(" "),Y,de]},T.prototype.renderTextNode=function(L,U){return c(this,void 0,void 0,function(){var Y,de,Ee,_e,Pe,rt,yt,jt,kt=this;return p(this,function(Rs){return Y=this.createFontStyle(U),de=Y[0],Ee=Y[1],_e=Y[2],this.ctx.font=de,this.ctx.direction=U.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Pe=this.fontMetrics.getMetrics(Ee,_e),rt=Pe.baseline,yt=Pe.middle,jt=U.paintOrder,L.textBounds.forEach(function(xs){jt.forEach(function(Bs){switch(Bs){case 0:kt.ctx.fillStyle=lr(U.color),kt.renderTextWithLetterSpacing(xs,U.letterSpacing,rt);var cn=U.textShadow;cn.length&&xs.text.trim().length&&(cn.slice(0).reverse().forEach(function(Hs){kt.ctx.shadowColor=lr(Hs.color),kt.ctx.shadowOffsetX=Hs.offsetX.number*kt.options.scale,kt.ctx.shadowOffsetY=Hs.offsetY.number*kt.options.scale,kt.ctx.shadowBlur=Hs.blur.number,kt.renderTextWithLetterSpacing(xs,U.letterSpacing,rt)}),kt.ctx.shadowColor="",kt.ctx.shadowOffsetX=0,kt.ctx.shadowOffsetY=0,kt.ctx.shadowBlur=0),U.textDecorationLine.length&&(kt.ctx.fillStyle=lr(U.textDecorationColor||U.color),U.textDecorationLine.forEach(function(Hs){switch(Hs){case 1:kt.ctx.fillRect(xs.bounds.left,Math.round(xs.bounds.top+rt),xs.bounds.width,1);break;case 2:kt.ctx.fillRect(xs.bounds.left,Math.round(xs.bounds.top),xs.bounds.width,1);break;case 3:kt.ctx.fillRect(xs.bounds.left,Math.ceil(xs.bounds.top+yt),xs.bounds.width,1);break}}));break;case 1:U.webkitTextStrokeWidth&&xs.text.trim().length&&(kt.ctx.strokeStyle=lr(U.webkitTextStrokeColor),kt.ctx.lineWidth=U.webkitTextStrokeWidth,kt.ctx.lineJoin=window.chrome?"miter":"round",kt.ctx.strokeText(xs.text,xs.bounds.left,xs.bounds.top+rt)),kt.ctx.strokeStyle="",kt.ctx.lineWidth=0,kt.ctx.lineJoin="miter";break}})}),[2]})})},T.prototype.renderReplacedElement=function(L,U,Y){if(Y&&L.intrinsicWidth>0&&L.intrinsicHeight>0){var de=hl(L),Ee=ul(U);this.path(Ee),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(Y,0,0,L.intrinsicWidth,L.intrinsicHeight,de.left,de.top,de.width,de.height),this.ctx.restore()}},T.prototype.renderNodeContent=function(L){return c(this,void 0,void 0,function(){var U,Y,de,Ee,_e,Pe,Ms,Ms,rt,yt,jt,kt,kn,Rs,xs,En,Bs,cn,Hs,Ms,qn,kn,En;return p(this,function(Os){switch(Os.label){case 0:this.applyEffects(L.getEffects(4)),U=L.container,Y=L.curves,de=U.styles,Ee=0,_e=U.textNodes,Os.label=1;case 1:return Ee<_e.length?(Pe=_e[Ee],[4,this.renderTextNode(Pe,de)]):[3,4];case 2:Os.sent(),Os.label=3;case 3:return Ee++,[3,1];case 4:if(!(U instanceof Cf))return[3,8];Os.label=5;case 5:return Os.trys.push([5,7,,8]),[4,this.context.cache.match(U.src)];case 6:return Ms=Os.sent(),this.renderReplacedElement(U,Y,Ms),[3,8];case 7:return Os.sent(),this.context.logger.error("Error loading image "+U.src),[3,8];case 8:if(U instanceof fh&&this.renderReplacedElement(U,Y,U.canvas),!(U instanceof om))return[3,12];Os.label=9;case 9:return Os.trys.push([9,11,,12]),[4,this.context.cache.match(U.svg)];case 10:return Ms=Os.sent(),this.renderReplacedElement(U,Y,Ms),[3,12];case 11:return Os.sent(),this.context.logger.error("Error loading svg "+U.svg.substring(0,255)),[3,12];case 12:return U instanceof Rf&&U.tree?(rt=new T(this.context,{scale:this.options.scale,backgroundColor:U.backgroundColor,x:0,y:0,width:U.width,height:U.height}),[4,rt.render(U.tree)]):[3,14];case 13:yt=Os.sent(),U.width&&U.height&&this.ctx.drawImage(yt,0,0,U.width,U.height,U.bounds.left,U.bounds.top,U.bounds.width,U.bounds.height),Os.label=14;case 14:if(U instanceof mh&&(jt=Math.min(U.bounds.width,U.bounds.height),U.type===gu?U.checked&&(this.ctx.save(),this.path([new Is(U.bounds.left+jt*.39363,U.bounds.top+jt*.79),new Is(U.bounds.left+jt*.16,U.bounds.top+jt*.5549),new Is(U.bounds.left+jt*.27347,U.bounds.top+jt*.44071),new Is(U.bounds.left+jt*.39694,U.bounds.top+jt*.5649),new Is(U.bounds.left+jt*.72983,U.bounds.top+jt*.23),new Is(U.bounds.left+jt*.84,U.bounds.top+jt*.34085),new Is(U.bounds.left+jt*.39363,U.bounds.top+jt*.79)]),this.ctx.fillStyle=lr(If),this.ctx.fill(),this.ctx.restore()):U.type===yu&&U.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(U.bounds.left+jt/2,U.bounds.top+jt/2,jt/4,0,Math.PI*2,!0),this.ctx.fillStyle=lr(If),this.ctx.fill(),this.ctx.restore())),Eh(U)&&U.value.length){switch(kt=this.createFontStyle(de),kn=kt[0],Rs=kt[1],xs=this.fontMetrics.getMetrics(kn,Rs).baseline,this.ctx.font=kn,this.ctx.fillStyle=lr(de.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Xy(U.styles.textAlign),En=hl(U),Bs=0,U.styles.textAlign){case 1:Bs+=En.width/2;break;case 2:Bs+=En.width;break}cn=En.add(Bs,0,0,-En.height/2+1),this.ctx.save(),this.path([new Is(En.left,En.top),new Is(En.left+En.width,En.top),new Is(En.left+En.width,En.top+En.height),new Is(En.left,En.top+En.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jc(U.value,cn),de.letterSpacing,xs),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mt(U.styles.display,2048))return[3,20];if(U.styles.listStyleImage===null)return[3,19];if(Hs=U.styles.listStyleImage,Hs.type!==0)return[3,18];Ms=void 0,qn=Hs.url,Os.label=15;case 15:return Os.trys.push([15,17,,18]),[4,this.context.cache.match(qn)];case 16:return Ms=Os.sent(),this.ctx.drawImage(Ms,U.bounds.left-(Ms.width+10),U.bounds.top),[3,18];case 17:return Os.sent(),this.context.logger.error("Error loading list-style-image "+qn),[3,18];case 18:return[3,20];case 19:L.listValue&&U.styles.listStyleType!==-1&&(kn=this.createFontStyle(de)[0],this.ctx.font=kn,this.ctx.fillStyle=lr(de.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",En=new A(U.bounds.left,U.bounds.top+Gn(U.styles.paddingTop,U.bounds.width),U.bounds.width,il(de.lineHeight,de.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jc(L.listValue,En),de.letterSpacing,il(de.lineHeight,de.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Os.label=20;case 20:return[2]}})})},T.prototype.renderStackContent=function(L){return c(this,void 0,void 0,function(){var U,Y,Hs,de,Ee,Hs,_e,Pe,Hs,rt,yt,Hs,jt,kt,Hs,Rs,xs,Hs,Bs,cn,Hs;return p(this,function(Ms){switch(Ms.label){case 0:if(mt(L.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(L.element)];case 1:Ms.sent(),U=0,Y=L.negativeZIndex,Ms.label=2;case 2:return U<Y.length?(Hs=Y[U],[4,this.renderStack(Hs)]):[3,5];case 3:Ms.sent(),Ms.label=4;case 4:return U++,[3,2];case 5:return[4,this.renderNodeContent(L.element)];case 6:Ms.sent(),de=0,Ee=L.nonInlineLevel,Ms.label=7;case 7:return de<Ee.length?(Hs=Ee[de],[4,this.renderNode(Hs)]):[3,10];case 8:Ms.sent(),Ms.label=9;case 9:return de++,[3,7];case 10:_e=0,Pe=L.nonPositionedFloats,Ms.label=11;case 11:return _e<Pe.length?(Hs=Pe[_e],[4,this.renderStack(Hs)]):[3,14];case 12:Ms.sent(),Ms.label=13;case 13:return _e++,[3,11];case 14:rt=0,yt=L.nonPositionedInlineLevel,Ms.label=15;case 15:return rt<yt.length?(Hs=yt[rt],[4,this.renderStack(Hs)]):[3,18];case 16:Ms.sent(),Ms.label=17;case 17:return rt++,[3,15];case 18:jt=0,kt=L.inlineLevel,Ms.label=19;case 19:return jt<kt.length?(Hs=kt[jt],[4,this.renderNode(Hs)]):[3,22];case 20:Ms.sent(),Ms.label=21;case 21:return jt++,[3,19];case 22:Rs=0,xs=L.zeroOrAutoZIndexOrTransformedOrOpacity,Ms.label=23;case 23:return Rs<xs.length?(Hs=xs[Rs],[4,this.renderStack(Hs)]):[3,26];case 24:Ms.sent(),Ms.label=25;case 25:return Rs++,[3,23];case 26:Bs=0,cn=L.positiveZIndex,Ms.label=27;case 27:return Bs<cn.length?(Hs=cn[Bs],[4,this.renderStack(Hs)]):[3,30];case 28:Ms.sent(),Ms.label=29;case 29:return Bs++,[3,27];case 30:return[2]}})})},T.prototype.mask=function(L){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(L.slice(0).reverse()),this.ctx.closePath()},T.prototype.path=function(L){this.ctx.beginPath(),this.formatPath(L),this.ctx.closePath()},T.prototype.formatPath=function(L){var U=this;L.forEach(function(Y,de){var Ee=To(Y)?Y.start:Y;de===0?U.ctx.moveTo(Ee.x,Ee.y):U.ctx.lineTo(Ee.x,Ee.y),To(Y)&&U.ctx.bezierCurveTo(Y.startControl.x,Y.startControl.y,Y.endControl.x,Y.endControl.y,Y.end.x,Y.end.y)})},T.prototype.renderRepeat=function(L,U,Y,de){this.path(L),this.ctx.fillStyle=U,this.ctx.translate(Y,de),this.ctx.fill(),this.ctx.translate(-Y,-de)},T.prototype.resizeImage=function(L,U,Y){var de;if(L.width===U&&L.height===Y)return L;var Ee=(de=this.canvas.ownerDocument)!==null&&de!==void 0?de:document,_e=Ee.createElement("canvas");_e.width=Math.max(1,U),_e.height=Math.max(1,Y);var Pe=_e.getContext("2d");return Pe.drawImage(L,0,0,L.width,L.height,0,0,U,Y),_e},T.prototype.renderBackgroundImage=function(L){return c(this,void 0,void 0,function(){var U,Y,de,Ee,_e,Pe;return p(this,function(rt){switch(rt.label){case 0:U=L.styles.backgroundImage.length-1,Y=function(yt){var jt,kt,Rs,oi,Xi,so,Jr,Yi,ur,xs,oi,Xi,so,Jr,Yi,Bs,cn,Hs,Ms,qn,kn,En,Os,tr,ur,un,oi,la,Ro,Jr,Yi,uo,Xi,so,fl,Rl,Cc,oA,lA,pl,Ec,Tc;return p(this,function(Fd){switch(Fd.label){case 0:if(yt.type!==0)return[3,5];jt=void 0,kt=yt.url,Fd.label=1;case 1:return Fd.trys.push([1,3,,4]),[4,de.context.cache.match(kt)];case 2:return jt=Fd.sent(),[3,4];case 3:return Fd.sent(),de.context.logger.error("Error loading background-image "+kt),[3,4];case 4:return jt&&(Rs=Iu(L,U,[jt.width,jt.height,jt.width/jt.height]),oi=Rs[0],Xi=Rs[1],so=Rs[2],Jr=Rs[3],Yi=Rs[4],ur=de.ctx.createPattern(de.resizeImage(jt,Jr,Yi),"repeat"),de.renderRepeat(oi,ur,Xi,so)),[3,6];case 5:ad(yt)?(xs=Iu(L,U,[null,null,null]),oi=xs[0],Xi=xs[1],so=xs[2],Jr=xs[3],Yi=xs[4],Bs=ea(yt.angle,Jr,Yi),cn=Bs[0],Hs=Bs[1],Ms=Bs[2],qn=Bs[3],kn=Bs[4],En=document.createElement("canvas"),En.width=Jr,En.height=Yi,Os=En.getContext("2d"),tr=Os.createLinearGradient(Hs,qn,Ms,kn),Br(yt.stops,cn).forEach(function(Lu){return tr.addColorStop(Lu.stop,lr(Lu.color))}),Os.fillStyle=tr,Os.fillRect(0,0,Jr,Yi),Jr>0&&Yi>0&&(ur=de.ctx.createPattern(En,"repeat"),de.renderRepeat(oi,ur,Xi,so))):BA(yt)&&(un=Iu(L,U,[null,null,null]),oi=un[0],la=un[1],Ro=un[2],Jr=un[3],Yi=un[4],uo=yt.position.length===0?[hc]:yt.position,Xi=Gn(uo[0],Jr),so=Gn(uo[uo.length-1],Yi),fl=qo(yt,Xi,so,Jr,Yi),Rl=fl[0],Cc=fl[1],Rl>0&&Cc>0&&(oA=de.ctx.createRadialGradient(la+Xi,Ro+so,0,la+Xi,Ro+so,Rl),Br(yt.stops,Rl*2).forEach(function(Lu){return oA.addColorStop(Lu.stop,lr(Lu.color))}),de.path(oi),de.ctx.fillStyle=oA,Rl!==Cc?(lA=L.bounds.left+.5*L.bounds.width,pl=L.bounds.top+.5*L.bounds.height,Ec=Cc/Rl,Tc=1/Ec,de.ctx.save(),de.ctx.translate(lA,pl),de.ctx.transform(1,0,0,Ec,0,0),de.ctx.translate(-lA,-pl),de.ctx.fillRect(la,Tc*(Ro-pl)+pl,Jr,Yi*Tc),de.ctx.restore()):de.ctx.fill())),Fd.label=6;case 6:return U--,[2]}})},de=this,Ee=0,_e=L.styles.backgroundImage.slice(0).reverse(),rt.label=1;case 1:return Ee<_e.length?(Pe=_e[Ee],[5,Y(Pe)]):[3,4];case 2:rt.sent(),rt.label=3;case 3:return Ee++,[3,1];case 4:return[2]}})})},T.prototype.renderSolidBorder=function(L,U,Y){return c(this,void 0,void 0,function(){return p(this,function(de){return this.path(Fm(Y,U)),this.ctx.fillStyle=lr(L),this.ctx.fill(),[2]})})},T.prototype.renderDoubleBorder=function(L,U,Y,de){return c(this,void 0,void 0,function(){var Ee,_e;return p(this,function(Pe){switch(Pe.label){case 0:return U<3?[4,this.renderSolidBorder(L,Y,de)]:[3,2];case 1:return Pe.sent(),[2];case 2:return Ee=Ch(de,Y),this.path(Ee),this.ctx.fillStyle=lr(L),this.ctx.fill(),_e=Fo(de,Y),this.path(_e),this.ctx.fill(),[2]}})})},T.prototype.renderNodeBackgroundAndBorders=function(L){return c(this,void 0,void 0,function(){var U,Y,de,Ee,_e,Pe,rt,yt,jt=this;return p(this,function(kt){switch(kt.label){case 0:return this.applyEffects(L.getEffects(2)),U=L.container.styles,Y=!Si(U.backgroundColor)||U.backgroundImage.length,de=[{style:U.borderTopStyle,color:U.borderTopColor,width:U.borderTopWidth},{style:U.borderRightStyle,color:U.borderRightColor,width:U.borderRightWidth},{style:U.borderBottomStyle,color:U.borderBottomColor,width:U.borderBottomWidth},{style:U.borderLeftStyle,color:U.borderLeftColor,width:U.borderLeftWidth}],Ee=Um(Il(U.backgroundClip,0),L.curves),Y||U.boxShadow.length?(this.ctx.save(),this.path(Ee),this.ctx.clip(),Si(U.backgroundColor)||(this.ctx.fillStyle=lr(U.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(L.container)]):[3,2];case 1:kt.sent(),this.ctx.restore(),U.boxShadow.slice(0).reverse().forEach(function(Rs){jt.ctx.save();var xs=MA(L.curves),Bs=Rs.inset?0:Uu,cn=Ia(xs,-Bs+(Rs.inset?1:-1)*Rs.spread.number,(Rs.inset?1:-1)*Rs.spread.number,Rs.spread.number*(Rs.inset?-2:2),Rs.spread.number*(Rs.inset?-2:2));Rs.inset?(jt.path(xs),jt.ctx.clip(),jt.mask(cn)):(jt.mask(xs),jt.ctx.clip(),jt.path(cn)),jt.ctx.shadowOffsetX=Rs.offsetX.number+Bs,jt.ctx.shadowOffsetY=Rs.offsetY.number,jt.ctx.shadowColor=lr(Rs.color),jt.ctx.shadowBlur=Rs.blur.number,jt.ctx.fillStyle=Rs.inset?lr(Rs.color):"rgba(0,0,0,1)",jt.ctx.fill(),jt.ctx.restore()}),kt.label=2;case 2:_e=0,Pe=0,rt=de,kt.label=3;case 3:return Pe<rt.length?(yt=rt[Pe],yt.style!==0&&!Si(yt.color)&&yt.width>0?yt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(yt.color,yt.width,_e,L.curves,2)]:[3,11]):[3,13];case 4:return kt.sent(),[3,11];case 5:return yt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(yt.color,yt.width,_e,L.curves,3)];case 6:return kt.sent(),[3,11];case 7:return yt.style!==4?[3,9]:[4,this.renderDoubleBorder(yt.color,yt.width,_e,L.curves)];case 8:return kt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(yt.color,_e,L.curves)];case 10:kt.sent(),kt.label=11;case 11:_e++,kt.label=12;case 12:return Pe++,[3,3];case 13:return[2]}})})},T.prototype.renderDashedDottedBorder=function(L,U,Y,de,Ee){return c(this,void 0,void 0,function(){var _e,Pe,rt,yt,jt,kt,Rs,xs,Bs,cn,Hs,Ms,qn,kn,En,Os,En,Os;return p(this,function(tr){return this.ctx.save(),_e=Fl(de,Y),Pe=Fm(de,Y),Ee===2&&(this.path(Pe),this.ctx.clip()),To(Pe[0])?(rt=Pe[0].start.x,yt=Pe[0].start.y):(rt=Pe[0].x,yt=Pe[0].y),To(Pe[1])?(jt=Pe[1].end.x,kt=Pe[1].end.y):(jt=Pe[1].x,kt=Pe[1].y),Y===0||Y===2?Rs=Math.abs(rt-jt):Rs=Math.abs(yt-kt),this.ctx.beginPath(),Ee===3?this.formatPath(_e):this.formatPath(Pe.slice(0,2)),xs=U<3?U*3:U*2,Bs=U<3?U*2:U,Ee===3&&(xs=U,Bs=U),cn=!0,Rs<=xs*2?cn=!1:Rs<=xs*2+Bs?(Hs=Rs/(2*xs+Bs),xs*=Hs,Bs*=Hs):(Ms=Math.floor((Rs+Bs)/(xs+Bs)),qn=(Rs-Ms*xs)/(Ms-1),kn=(Rs-(Ms+1)*xs)/Ms,Bs=kn<=0||Math.abs(Bs-qn)<Math.abs(Bs-kn)?qn:kn),cn&&(Ee===3?this.ctx.setLineDash([0,xs+Bs]):this.ctx.setLineDash([xs,Bs])),Ee===3?(this.ctx.lineCap="round",this.ctx.lineWidth=U):this.ctx.lineWidth=U*2+1.1,this.ctx.strokeStyle=lr(L),this.ctx.stroke(),this.ctx.setLineDash([]),Ee===2&&(To(Pe[0])&&(En=Pe[3],Os=Pe[0],this.ctx.beginPath(),this.formatPath([new Is(En.end.x,En.end.y),new Is(Os.start.x,Os.start.y)]),this.ctx.stroke()),To(Pe[1])&&(En=Pe[1],Os=Pe[2],this.ctx.beginPath(),this.formatPath([new Is(En.end.x,En.end.y),new Is(Os.start.x,Os.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},T.prototype.render=function(L){return c(this,void 0,void 0,function(){var U;return p(this,function(Y){switch(Y.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=lr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),U=Tm(L),[4,this.renderStack(U)];case 1:return Y.sent(),this.applyEffects([]),[2,this.canvas]}})})},T})(tp),Eh=function(O){return O instanceof gh||O instanceof dm?!0:O instanceof mh&&O.type!==yu&&O.type!==gu},Um=function(O,T){switch(O){case 0:return MA(T);case 2:return Bm(T);case 1:default:return ul(T)}},Xy=function(O){switch(O){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Jy=["-apple-system","system-ui"],Kr=function(O){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?O.filter(function(T){return Jy.indexOf(T)===-1}):O},oa=(function(O){r(T,O);function T(L,U){var Y=O.call(this,L,U)||this;return Y.canvas=U.canvas?U.canvas:document.createElement("canvas"),Y.ctx=Y.canvas.getContext("2d"),Y.options=U,Y.canvas.width=Math.floor(U.width*U.scale),Y.canvas.height=Math.floor(U.height*U.scale),Y.canvas.style.width=U.width+"px",Y.canvas.style.height=U.height+"px",Y.ctx.scale(Y.options.scale,Y.options.scale),Y.ctx.translate(-U.x,-U.y),Y.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+U.width+"x"+U.height+" at "+U.x+","+U.y+") with scale "+U.scale),Y}return T.prototype.render=function(L){return c(this,void 0,void 0,function(){var U,Y;return p(this,function(de){switch(de.label){case 0:return U=bd(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,L),[4,ir(U)];case 1:return Y=de.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=lr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(Y,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},T})(tp),ir=function(O){return new Promise(function(T,L){var U=new Image;U.onload=function(){T(U)},U.onerror=L,U.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(O))})},dr=(function(){function O(T){var L=T.id,U=T.enabled;this.id=L,this.enabled=U,this.start=Date.now()}return O.prototype.debug=function(){for(var T=[],L=0;L<arguments.length;L++)T[L]=arguments[L];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,f([this.id,this.getTime()+"ms"],T)):this.info.apply(this,T))},O.prototype.getTime=function(){return Date.now()-this.start},O.prototype.info=function(){for(var T=[],L=0;L<arguments.length;L++)T[L]=arguments[L];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,f([this.id,this.getTime()+"ms"],T))},O.prototype.warn=function(){for(var T=[],L=0;L<arguments.length;L++)T[L]=arguments[L];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,f([this.id,this.getTime()+"ms"],T)):this.info.apply(this,T))},O.prototype.error=function(){for(var T=[],L=0;L<arguments.length;L++)T[L]=arguments[L];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,f([this.id,this.getTime()+"ms"],T)):this.info.apply(this,T))},O.instances={},O})(),Xr=(function(){function O(T,L){var U;this.windowBounds=L,this.instanceName="#"+O.instanceCount++,this.logger=new dr({id:this.instanceName,enabled:T.logging}),this.cache=(U=T.cache)!==null&&U!==void 0?U:new Eu(this,T)}return O.instanceCount=1,O})(),Yo=function(O,T){return T===void 0&&(T={}),iA(O,T)};typeof window<"u"&&Cu.setContext(window);var iA=function(O,T){return c(void 0,void 0,void 0,function(){var L,U,Y,de,Ee,_e,Pe,rt,yt,jt,kt,Rs,xs,Bs,cn,Hs,Ms,qn,kn,En,tr,Os,tr,ur,un,oi,la,Ro,Jr,Yi,uo,Xi,so,fl,Rl,Cc,oA,lA,pl,Ec;return p(this,function(Tc){switch(Tc.label){case 0:if(!O||typeof O!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(L=O.ownerDocument,!L)throw new Error("Element is not attached to a Document");if(U=L.defaultView,!U)throw new Error("Document is not attached to a Window");return Y={allowTaint:(ur=T.allowTaint)!==null&&ur!==void 0?ur:!1,imageTimeout:(un=T.imageTimeout)!==null&&un!==void 0?un:15e3,proxy:T.proxy,useCORS:(oi=T.useCORS)!==null&&oi!==void 0?oi:!1},de=o({logging:(la=T.logging)!==null&&la!==void 0?la:!0,cache:T.cache},Y),Ee={windowWidth:(Ro=T.windowWidth)!==null&&Ro!==void 0?Ro:U.innerWidth,windowHeight:(Jr=T.windowHeight)!==null&&Jr!==void 0?Jr:U.innerHeight,scrollX:(Yi=T.scrollX)!==null&&Yi!==void 0?Yi:U.pageXOffset,scrollY:(uo=T.scrollY)!==null&&uo!==void 0?uo:U.pageYOffset},_e=new A(Ee.scrollX,Ee.scrollY,Ee.windowWidth,Ee.windowHeight),Pe=new Xr(de,_e),rt=(Xi=T.foreignObjectRendering)!==null&&Xi!==void 0?Xi:!1,yt={allowTaint:(so=T.allowTaint)!==null&&so!==void 0?so:!1,onclone:T.onclone,ignoreElements:T.ignoreElements,inlineImages:rt,copyStyles:rt},Pe.logger.debug("Starting document clone with size "+_e.width+"x"+_e.height+" scrolled to "+-_e.left+","+-_e.top),jt=new zf(Pe,O,yt),kt=jt.clonedReferenceElement,kt?[4,jt.toIFrame(L,_e)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Rs=Tc.sent(),xs=xh(kt)||pm(kt)?l(kt.ownerDocument):h(Pe,kt),Bs=xs.width,cn=xs.height,Hs=xs.left,Ms=xs.top,qn=Td(Pe,kt,T.backgroundColor),kn={canvas:T.canvas,backgroundColor:qn,scale:(Rl=(fl=T.scale)!==null&&fl!==void 0?fl:U.devicePixelRatio)!==null&&Rl!==void 0?Rl:1,x:((Cc=T.x)!==null&&Cc!==void 0?Cc:0)+Hs,y:((oA=T.y)!==null&&oA!==void 0?oA:0)+Ms,width:(lA=T.width)!==null&&lA!==void 0?lA:Math.ceil(Bs),height:(pl=T.height)!==null&&pl!==void 0?pl:Math.ceil(cn)},rt?(Pe.logger.debug("Document cloned, using foreign object rendering"),tr=new oa(Pe,kn),[4,tr.render(kt)]):[3,3];case 2:return En=Tc.sent(),[3,5];case 3:return Pe.logger.debug("Document cloned, element located at "+Hs+","+Ms+" with size "+Bs+"x"+cn+" using computed rendering"),Pe.logger.debug("Starting DOM parsing"),Os=Uf(Pe,kt),qn===Os.styles.backgroundColor&&(Os.styles.backgroundColor=La.TRANSPARENT),Pe.logger.debug("Starting renderer for element at "+kn.x+","+kn.y+" with size "+kn.width+"x"+kn.height),tr=new Om(Pe,kn),[4,tr.render(Os)];case 4:En=Tc.sent(),Tc.label=5;case 5:return(!((Ec=T.removeContainer)!==null&&Ec!==void 0)||Ec)&&(zf.destroy(Rs)||Pe.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Pe.logger.debug("Finished rendering"),[2,En]}})})},Td=function(O,T,L){var U=T.ownerDocument,Y=U.documentElement?Vo(O,getComputedStyle(U.documentElement).backgroundColor):La.TRANSPARENT,de=U.body?Vo(O,getComputedStyle(U.body).backgroundColor):La.TRANSPARENT,Ee=typeof L=="string"?Vo(O,L):L===null?La.TRANSPARENT:4294967295;return T===U.documentElement?Si(Y)?Si(de)?Ee:de:Y:Ee};return Yo}))})(_g)),_g.exports}/*!
 * html2pdf.js v0.12.1
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */var uB;function BK(){return uB||(uB=1,(function(t,s){(function(r,o){t.exports=o(jK,SK())})(self,function(n,r){return(function(){var o={"./node_modules/core-js/internals/a-callable.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-callable.js"),v=l("./node_modules/core-js/internals/try-to-string.js"),m=TypeError;A.exports=function(N){if(g(N))return N;throw new m(v(N)+" is not a function")}}),"./node_modules/core-js/internals/a-constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-constructor.js"),v=l("./node_modules/core-js/internals/try-to-string.js"),m=TypeError;A.exports=function(N){if(g(N))return N;throw new m(v(N)+" is not a constructor")}}),"./node_modules/core-js/internals/a-possible-prototype.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-possible-prototype.js"),v=String,m=TypeError;A.exports=function(N){if(g(N))return N;throw new m("Can't set "+v(N)+" as a prototype")}}),"./node_modules/core-js/internals/a-set.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/set-helpers.js").has;A.exports=function(v){return g(v),v}}),"./node_modules/core-js/internals/add-to-unscopables.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/well-known-symbol.js"),v=l("./node_modules/core-js/internals/object-create.js"),m=l("./node_modules/core-js/internals/object-define-property.js").f,N=g("unscopables"),w=Array.prototype;w[N]===void 0&&m(w,N,{configurable:!0,value:v(null)}),A.exports=function(E){w[N][E]=!0}}),"./node_modules/core-js/internals/an-instance.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/object-is-prototype-of.js"),v=TypeError;A.exports=function(m,N){if(g(N,m))return m;throw new v("Incorrect invocation")}}),"./node_modules/core-js/internals/an-object.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-object.js"),v=String,m=TypeError;A.exports=function(N){if(g(N))return N;throw new m(v(N)+" is not an object")}}),"./node_modules/core-js/internals/array-buffer-non-extensible.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js");A.exports=g(function(){if(typeof ArrayBuffer=="function"){var v=new ArrayBuffer(8);Object.isExtensible(v)&&Object.defineProperty(v,"a",{value:8})}})}),"./node_modules/core-js/internals/array-for-each.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/array-iteration.js").forEach,v=l("./node_modules/core-js/internals/array-method-is-strict.js"),m=v("forEach");A.exports=m?[].forEach:function(w){return g(this,w,arguments.length>1?arguments[1]:void 0)}}),"./node_modules/core-js/internals/array-from.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-bind-context.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-object.js"),N=l("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),w=l("./node_modules/core-js/internals/is-array-iterator-method.js"),E=l("./node_modules/core-js/internals/is-constructor.js"),F=l("./node_modules/core-js/internals/length-of-array-like.js"),M=l("./node_modules/core-js/internals/create-property.js"),k=l("./node_modules/core-js/internals/get-iterator.js"),K=l("./node_modules/core-js/internals/get-iterator-method.js"),G=Array;A.exports=function(V){var X=m(V),J=E(this),he=arguments.length,q=he>1?arguments[1]:void 0,ie=q!==void 0;ie&&(q=g(q,he>2?arguments[2]:void 0));var Ae=K(X),ce=0,oe,ne,re,se,je,De;if(Ae&&!(this===G&&w(Ae)))for(ne=J?new this:[],se=k(X,Ae),je=se.next;!(re=v(je,se)).done;ce++)De=ie?N(se,q,[re.value,ce],!0):re.value,M(ne,ce,De);else for(oe=F(X),ne=J?new this(oe):G(oe);oe>ce;ce++)De=ie?q(X[ce],ce):X[ce],M(ne,ce,De);return ne.length=ce,ne}}),"./node_modules/core-js/internals/array-includes.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-indexed-object.js"),v=l("./node_modules/core-js/internals/to-absolute-index.js"),m=l("./node_modules/core-js/internals/length-of-array-like.js"),N=function(w){return function(E,F,M){var k=g(E),K=m(k);if(K===0)return!w&&-1;var G=v(M,K),ee;if(w&&F!==F){for(;K>G;)if(ee=k[G++],ee!==ee)return!0}else for(;K>G;G++)if((w||G in k)&&k[G]===F)return w||G||0;return!w&&-1}};A.exports={includes:N(!0),indexOf:N(!1)}}),"./node_modules/core-js/internals/array-iteration.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-bind-context.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/indexed-object.js"),N=l("./node_modules/core-js/internals/to-object.js"),w=l("./node_modules/core-js/internals/length-of-array-like.js"),E=l("./node_modules/core-js/internals/array-species-create.js"),F=v([].push),M=function(k){var K=k===1,G=k===2,ee=k===3,V=k===4,X=k===6,J=k===7,he=k===5||X;return function(q,ie,Ae,ce){for(var oe=N(q),ne=m(oe),re=w(ne),se=g(ie,Ae),je=0,De=ce||E,ge=K?De(q,re):G||J?De(q,0):void 0,Z,fe;re>je;je++)if((he||je in ne)&&(Z=ne[je],fe=se(Z,je,oe),k))if(K)ge[je]=fe;else if(fe)switch(k){case 3:return!0;case 5:return Z;case 6:return je;case 2:F(ge,Z)}else switch(k){case 4:return!1;case 7:F(ge,Z)}return X?-1:ee||V?V:ge}};A.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6),filterReject:M(7)}}),"./node_modules/core-js/internals/array-method-has-species-support.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js"),v=l("./node_modules/core-js/internals/well-known-symbol.js"),m=l("./node_modules/core-js/internals/environment-v8-version.js"),N=v("species");A.exports=function(w){return m>=51||!g(function(){var E=[],F=E.constructor={};return F[N]=function(){return{foo:1}},E[w](Boolean).foo!==1})}}),"./node_modules/core-js/internals/array-method-is-strict.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js");A.exports=function(v,m){var N=[][v];return!!N&&g(function(){N.call(null,m||function(){return 1},1)})}}),"./node_modules/core-js/internals/array-slice.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=g([].slice)}),"./node_modules/core-js/internals/array-species-constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-array.js"),v=l("./node_modules/core-js/internals/is-constructor.js"),m=l("./node_modules/core-js/internals/is-object.js"),N=l("./node_modules/core-js/internals/well-known-symbol.js"),w=N("species"),E=Array;A.exports=function(F){var M;return g(F)&&(M=F.constructor,v(M)&&(M===E||g(M.prototype))?M=void 0:m(M)&&(M=M[w],M===null&&(M=void 0))),M===void 0?E:M}}),"./node_modules/core-js/internals/array-species-create.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/array-species-constructor.js");A.exports=function(v,m){return new(g(v))(m===0?0:m)}}),"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/an-object.js"),v=l("./node_modules/core-js/internals/iterator-close.js");A.exports=function(m,N,w,E){try{return E?N(g(w)[0],w[1]):N(w)}catch(F){v(m,"throw",F)}}}),"./node_modules/core-js/internals/check-correctness-of-iteration.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/well-known-symbol.js"),v=g("iterator"),m=!1;try{var N=0,w={next:function(){return{done:!!N++}},return:function(){m=!0}};w[v]=function(){return this},Array.from(w,function(){throw 2})}catch{}A.exports=function(E,F){try{if(!F&&!m)return!1}catch{return!1}var M=!1;try{var k={};k[v]=function(){return{next:function(){return{done:M=!0}}}},E(k)}catch{}return M}}),"./node_modules/core-js/internals/classof-raw.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=g({}.toString),m=g("".slice);A.exports=function(N){return m(v(N),8,-1)}}),"./node_modules/core-js/internals/classof.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-string-tag-support.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),N=l("./node_modules/core-js/internals/well-known-symbol.js"),w=N("toStringTag"),E=Object,F=m((function(){return arguments})())==="Arguments",M=function(k,K){try{return k[K]}catch{}};A.exports=g?m:function(k){var K,G,ee;return k===void 0?"Undefined":k===null?"Null":typeof(G=M(K=E(k),w))=="string"?G:F?m(K):(ee=m(K))==="Object"&&v(K.callee)?"Arguments":ee}}),"./node_modules/core-js/internals/collection-strong.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/object-create.js"),v=l("./node_modules/core-js/internals/define-built-in-accessor.js"),m=l("./node_modules/core-js/internals/define-built-ins.js"),N=l("./node_modules/core-js/internals/function-bind-context.js"),w=l("./node_modules/core-js/internals/an-instance.js"),E=l("./node_modules/core-js/internals/is-null-or-undefined.js"),F=l("./node_modules/core-js/internals/iterate.js"),M=l("./node_modules/core-js/internals/iterator-define.js"),k=l("./node_modules/core-js/internals/create-iter-result-object.js"),K=l("./node_modules/core-js/internals/set-species.js"),G=l("./node_modules/core-js/internals/descriptors.js"),ee=l("./node_modules/core-js/internals/internal-metadata.js").fastKey,V=l("./node_modules/core-js/internals/internal-state.js"),X=V.set,J=V.getterFor;A.exports={getConstructor:function(he,q,ie,Ae){var ce=he(function(je,De){w(je,oe),X(je,{type:q,index:g(null),first:null,last:null,size:0}),G||(je.size=0),E(De)||F(De,je[Ae],{that:je,AS_ENTRIES:ie})}),oe=ce.prototype,ne=J(q),re=function(je,De,ge){var Z=ne(je),fe=se(je,De),ue,pe;return fe?fe.value=ge:(Z.last=fe={index:pe=ee(De,!0),key:De,value:ge,previous:ue=Z.last,next:null,removed:!1},Z.first||(Z.first=fe),ue&&(ue.next=fe),G?Z.size++:je.size++,pe!=="F"&&(Z.index[pe]=fe)),je},se=function(je,De){var ge=ne(je),Z=ee(De),fe;if(Z!=="F")return ge.index[Z];for(fe=ge.first;fe;fe=fe.next)if(fe.key===De)return fe};return m(oe,{clear:function(){for(var De=this,ge=ne(De),Z=ge.first;Z;)Z.removed=!0,Z.previous&&(Z.previous=Z.previous.next=null),Z=Z.next;ge.first=ge.last=null,ge.index=g(null),G?ge.size=0:De.size=0},delete:function(je){var De=this,ge=ne(De),Z=se(De,je);if(Z){var fe=Z.next,ue=Z.previous;delete ge.index[Z.index],Z.removed=!0,ue&&(ue.next=fe),fe&&(fe.previous=ue),ge.first===Z&&(ge.first=fe),ge.last===Z&&(ge.last=ue),G?ge.size--:De.size--}return!!Z},forEach:function(De){for(var ge=ne(this),Z=N(De,arguments.length>1?arguments[1]:void 0),fe;fe=fe?fe.next:ge.first;)for(Z(fe.value,fe.key,this);fe&&fe.removed;)fe=fe.previous},has:function(De){return!!se(this,De)}}),m(oe,ie?{get:function(De){var ge=se(this,De);return ge&&ge.value},set:function(De,ge){return re(this,De===0?0:De,ge)}}:{add:function(De){return re(this,De=De===0?0:De,De)}}),G&&v(oe,"size",{configurable:!0,get:function(){return ne(this).size}}),ce},setStrong:function(he,q,ie){var Ae=q+" Iterator",ce=J(q),oe=J(Ae);M(he,q,function(ne,re){X(this,{type:Ae,target:ne,state:ce(ne),kind:re,last:null})},function(){for(var ne=oe(this),re=ne.kind,se=ne.last;se&&se.removed;)se=se.previous;return!ne.target||!(ne.last=se=se?se.next:ne.state.first)?(ne.target=null,k(void 0,!0)):k(re==="keys"?se.key:re==="values"?se.value:[se.key,se.value],!1)},ie?"entries":"values",!ie,!0),K(q)}}}),"./node_modules/core-js/internals/collection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/function-uncurry-this.js"),N=l("./node_modules/core-js/internals/is-forced.js"),w=l("./node_modules/core-js/internals/define-built-in.js"),E=l("./node_modules/core-js/internals/internal-metadata.js"),F=l("./node_modules/core-js/internals/iterate.js"),M=l("./node_modules/core-js/internals/an-instance.js"),k=l("./node_modules/core-js/internals/is-callable.js"),K=l("./node_modules/core-js/internals/is-null-or-undefined.js"),G=l("./node_modules/core-js/internals/is-object.js"),ee=l("./node_modules/core-js/internals/fails.js"),V=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),X=l("./node_modules/core-js/internals/set-to-string-tag.js"),J=l("./node_modules/core-js/internals/inherit-if-required.js");A.exports=function(he,q,ie){var Ae=he.indexOf("Map")!==-1,ce=he.indexOf("Weak")!==-1,oe=Ae?"set":"add",ne=v[he],re=ne&&ne.prototype,se=ne,je={},De=function(Ne){var ye=m(re[Ne]);w(re,Ne,Ne==="add"?function(Te){return ye(this,Te===0?0:Te),this}:Ne==="delete"?function(we){return ce&&!G(we)?!1:ye(this,we===0?0:we)}:Ne==="get"?function(Te){return ce&&!G(Te)?void 0:ye(this,Te===0?0:Te)}:Ne==="has"?function(Te){return ce&&!G(Te)?!1:ye(this,Te===0?0:Te)}:function(Te,qe){return ye(this,Te===0?0:Te,qe),this})},ge=N(he,!k(ne)||!(ce||re.forEach&&!ee(function(){new ne().entries().next()})));if(ge)se=ie.getConstructor(q,he,Ae,oe),E.enable();else if(N(he,!0)){var Z=new se,fe=Z[oe](ce?{}:-0,1)!==Z,ue=ee(function(){Z.has(1)}),pe=V(function(Ne){new ne(Ne)}),Ce=!ce&&ee(function(){for(var Ne=new ne,ye=5;ye--;)Ne[oe](ye,ye);return!Ne.has(-0)});pe||(se=q(function(Ne,ye){M(Ne,re);var we=J(new ne,Ne,se);return K(ye)||F(ye,we[oe],{that:we,AS_ENTRIES:Ae}),we}),se.prototype=re,re.constructor=se),(ue||Ce)&&(De("delete"),De("has"),Ae&&De("get")),(Ce||fe)&&De(oe),ce&&re.clear&&delete re.clear}return je[he]=se,g({global:!0,constructor:!0,forced:se!==ne},je),X(se,he),ce||ie.setStrong(se,he,Ae),se}}),"./node_modules/core-js/internals/copy-constructor-properties.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/has-own-property.js"),v=l("./node_modules/core-js/internals/own-keys.js"),m=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),N=l("./node_modules/core-js/internals/object-define-property.js");A.exports=function(w,E,F){for(var M=v(E),k=N.f,K=m.f,G=0;G<M.length;G++){var ee=M[G];!g(w,ee)&&!(F&&g(F,ee))&&k(w,ee,K(E,ee))}}}),"./node_modules/core-js/internals/correct-prototype-getter.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js");A.exports=!g(function(){function v(){}return v.prototype.constructor=null,Object.getPrototypeOf(new v)!==v.prototype})}),"./node_modules/core-js/internals/create-html.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/require-object-coercible.js"),m=l("./node_modules/core-js/internals/to-string.js"),N=/"/g,w=g("".replace);A.exports=function(E,F,M,k){var K=m(v(E)),G="<"+F;return M!==""&&(G+=" "+M+'="'+w(m(k),N,"&quot;")+'"'),G+">"+K+"</"+F+">"}}),"./node_modules/core-js/internals/create-iter-result-object.js":(function(A){A.exports=function(h,l){return{value:h,done:l}}}),"./node_modules/core-js/internals/create-non-enumerable-property.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/object-define-property.js"),m=l("./node_modules/core-js/internals/create-property-descriptor.js");A.exports=g?function(N,w,E){return v.f(N,w,m(1,E))}:function(N,w,E){return N[w]=E,N}}),"./node_modules/core-js/internals/create-property-descriptor.js":(function(A){A.exports=function(h,l){return{enumerable:!(h&1),configurable:!(h&2),writable:!(h&4),value:l}}}),"./node_modules/core-js/internals/create-property.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/object-define-property.js"),m=l("./node_modules/core-js/internals/create-property-descriptor.js");A.exports=function(N,w,E){g?v.f(N,w,m(0,E)):N[w]=E}}),"./node_modules/core-js/internals/define-built-in-accessor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/make-built-in.js"),v=l("./node_modules/core-js/internals/object-define-property.js");A.exports=function(m,N,w){return w.get&&g(w.get,N,{getter:!0}),w.set&&g(w.set,N,{setter:!0}),v.f(m,N,w)}}),"./node_modules/core-js/internals/define-built-in.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-callable.js"),v=l("./node_modules/core-js/internals/object-define-property.js"),m=l("./node_modules/core-js/internals/make-built-in.js"),N=l("./node_modules/core-js/internals/define-global-property.js");A.exports=function(w,E,F,M){M||(M={});var k=M.enumerable,K=M.name!==void 0?M.name:E;if(g(F)&&m(F,K,M),M.global)k?w[E]=F:N(E,F);else{try{M.unsafe?w[E]&&(k=!0):delete w[E]}catch{}k?w[E]=F:v.f(w,E,{value:F,enumerable:!1,configurable:!M.nonConfigurable,writable:!M.nonWritable})}return w}}),"./node_modules/core-js/internals/define-built-ins.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/define-built-in.js");A.exports=function(v,m,N){for(var w in m)g(v,w,m[w],N);return v}}),"./node_modules/core-js/internals/define-global-property.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=Object.defineProperty;A.exports=function(m,N){try{v(g,m,{value:N,configurable:!0,writable:!0})}catch{g[m]=N}return N}}),"./node_modules/core-js/internals/descriptors.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js");A.exports=!g(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),"./node_modules/core-js/internals/document-create-element.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/is-object.js"),m=g.document,N=v(m)&&v(m.createElement);A.exports=function(w){return N?m.createElement(w):{}}}),"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":(function(A){var h=TypeError,l=9007199254740991;A.exports=function(g){if(g>l)throw h("Maximum allowed index exceeded");return g}}),"./node_modules/core-js/internals/dom-iterables.js":(function(A){A.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),"./node_modules/core-js/internals/dom-token-list-prototype.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/document-create-element.js"),v=g("span").classList,m=v&&v.constructor&&v.constructor.prototype;A.exports=m===Object.prototype?void 0:m}),"./node_modules/core-js/internals/enum-bug-keys.js":(function(A){A.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"./node_modules/core-js/internals/environment-is-ios-pebble.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/environment-user-agent.js");A.exports=/ipad|iphone|ipod/i.test(g)&&typeof Pebble<"u"}),"./node_modules/core-js/internals/environment-is-ios.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/environment-user-agent.js");A.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(g)}),"./node_modules/core-js/internals/environment-is-node.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/environment.js");A.exports=g==="NODE"}),"./node_modules/core-js/internals/environment-is-webos-webkit.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/environment-user-agent.js");A.exports=/web0s(?!.*chrome)/i.test(g)}),"./node_modules/core-js/internals/environment-user-agent.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=g.navigator,m=v&&v.userAgent;A.exports=m?String(m):""}),"./node_modules/core-js/internals/environment-v8-version.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/environment-user-agent.js"),m=g.process,N=g.Deno,w=m&&m.versions||N&&N.version,E=w&&w.v8,F,M;E&&(F=E.split("."),M=F[0]>0&&F[0]<4?1:+(F[0]+F[1])),!M&&v&&(F=v.match(/Edge\/(\d+)/),(!F||F[1]>=74)&&(F=v.match(/Chrome\/(\d+)/),F&&(M=+F[1]))),A.exports=M}),"./node_modules/core-js/internals/environment.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/environment-user-agent.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),N=function(w){return v.slice(0,w.length)===w};A.exports=(function(){return N("Bun/")?"BUN":N("Cloudflare-Workers")?"CLOUDFLARE":N("Deno/")?"DENO":N("Node.js/")?"NODE":g.Bun&&typeof Bun.version=="string"?"BUN":g.Deno&&typeof Deno.version=="object"?"DENO":m(g.process)==="process"?"NODE":g.window&&g.document?"BROWSER":"REST"})()}),"./node_modules/core-js/internals/export.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=l("./node_modules/core-js/internals/define-built-in.js"),w=l("./node_modules/core-js/internals/define-global-property.js"),E=l("./node_modules/core-js/internals/copy-constructor-properties.js"),F=l("./node_modules/core-js/internals/is-forced.js");A.exports=function(M,k){var K=M.target,G=M.global,ee=M.stat,V,X,J,he,q,ie;if(G?X=g:ee?X=g[K]||w(K,{}):X=g[K]&&g[K].prototype,X)for(J in k){if(q=k[J],M.dontCallGetSet?(ie=v(X,J),he=ie&&ie.value):he=X[J],V=F(G?J:K+(ee?".":"#")+J,M.forced),!V&&he!==void 0){if(typeof q==typeof he)continue;E(q,he)}(M.sham||he&&he.sham)&&m(q,"sham",!0),N(X,J,q,M)}}}),"./node_modules/core-js/internals/fails.js":(function(A){A.exports=function(h){try{return!!h()}catch{return!0}}}),"./node_modules/core-js/internals/freezing.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js");A.exports=!g(function(){return Object.isExtensible(Object.preventExtensions({}))})}),"./node_modules/core-js/internals/function-apply.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-bind-native.js"),v=Function.prototype,m=v.apply,N=v.call;A.exports=typeof Reflect=="object"&&Reflect.apply||(g?N.bind(m):function(){return N.apply(m,arguments)})}),"./node_modules/core-js/internals/function-bind-context.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),v=l("./node_modules/core-js/internals/a-callable.js"),m=l("./node_modules/core-js/internals/function-bind-native.js"),N=g(g.bind);A.exports=function(w,E){return v(w),E===void 0?w:m?N(w,E):function(){return w.apply(E,arguments)}}}),"./node_modules/core-js/internals/function-bind-native.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js");A.exports=!g(function(){var v=(function(){}).bind();return typeof v!="function"||v.hasOwnProperty("prototype")})}),"./node_modules/core-js/internals/function-call.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-bind-native.js"),v=Function.prototype.call;A.exports=g?v.bind(v):function(){return v.apply(v,arguments)}}),"./node_modules/core-js/internals/function-name.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/has-own-property.js"),m=Function.prototype,N=g&&Object.getOwnPropertyDescriptor,w=v(m,"name"),E=w&&(function(){}).name==="something",F=w&&(!g||g&&N(m,"name").configurable);A.exports={EXISTS:w,PROPER:E,CONFIGURABLE:F}}),"./node_modules/core-js/internals/function-uncurry-this-accessor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/a-callable.js");A.exports=function(m,N,w){try{return g(v(Object.getOwnPropertyDescriptor(m,N)[w]))}catch{}}}),"./node_modules/core-js/internals/function-uncurry-this-clause.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/classof-raw.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=function(m){if(g(m)==="Function")return v(m)}}),"./node_modules/core-js/internals/function-uncurry-this.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-bind-native.js"),v=Function.prototype,m=v.call,N=g&&v.bind.bind(m,m);A.exports=g?N:function(w){return function(){return m.apply(w,arguments)}}}),"./node_modules/core-js/internals/get-built-in.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=function(N){return v(N)?N:void 0};A.exports=function(N,w){return arguments.length<2?m(g[N]):g[N]&&g[N][w]}}),"./node_modules/core-js/internals/get-iterator-direct.js":(function(A){A.exports=function(h){return{iterator:h,next:h.next,done:!1}}}),"./node_modules/core-js/internals/get-iterator-method.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/classof.js"),v=l("./node_modules/core-js/internals/get-method.js"),m=l("./node_modules/core-js/internals/is-null-or-undefined.js"),N=l("./node_modules/core-js/internals/iterators.js"),w=l("./node_modules/core-js/internals/well-known-symbol.js"),E=w("iterator");A.exports=function(F){if(!m(F))return v(F,E)||v(F,"@@iterator")||N[g(F)]}}),"./node_modules/core-js/internals/get-iterator.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/a-callable.js"),m=l("./node_modules/core-js/internals/an-object.js"),N=l("./node_modules/core-js/internals/try-to-string.js"),w=l("./node_modules/core-js/internals/get-iterator-method.js"),E=TypeError;A.exports=function(F,M){var k=arguments.length<2?w(F):M;if(v(k))return m(g(k,F));throw new E(N(F)+" is not iterable")}}),"./node_modules/core-js/internals/get-json-replacer-function.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/is-array.js"),m=l("./node_modules/core-js/internals/is-callable.js"),N=l("./node_modules/core-js/internals/classof-raw.js"),w=l("./node_modules/core-js/internals/to-string.js"),E=g([].push);A.exports=function(F){if(m(F))return F;if(v(F)){for(var M=F.length,k=[],K=0;K<M;K++){var G=F[K];typeof G=="string"?E(k,G):(typeof G=="number"||N(G)==="Number"||N(G)==="String")&&E(k,w(G))}var ee=k.length,V=!0;return function(X,J){if(V)return V=!1,J;if(v(this))return J;for(var he=0;he<ee;he++)if(k[he]===X)return J}}}}),"./node_modules/core-js/internals/get-method.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-callable.js"),v=l("./node_modules/core-js/internals/is-null-or-undefined.js");A.exports=function(m,N){var w=m[N];return v(w)?void 0:g(w)}}),"./node_modules/core-js/internals/get-set-record.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-callable.js"),v=l("./node_modules/core-js/internals/an-object.js"),m=l("./node_modules/core-js/internals/function-call.js"),N=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),w=l("./node_modules/core-js/internals/get-iterator-direct.js"),E="Invalid size",F=RangeError,M=TypeError,k=Math.max,K=function(G,ee){this.set=G,this.size=k(ee,0),this.has=g(G.has),this.keys=g(G.keys)};K.prototype={getIterator:function(){return w(v(m(this.keys,this.set)))},includes:function(G){return m(this.has,this.set,G)}},A.exports=function(G){v(G);var ee=+G.size;if(ee!==ee)throw new M(E);var V=N(ee);if(V<0)throw new F(E);return new K(G,V)}}),"./node_modules/core-js/internals/global-this.js":(function(A){var h=function(l){return l&&l.Math===Math&&l};A.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof yj=="object"&&yj)||h(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),"./node_modules/core-js/internals/has-own-property.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/to-object.js"),m=g({}.hasOwnProperty);A.exports=Object.hasOwn||function(w,E){return m(v(w),E)}}),"./node_modules/core-js/internals/hidden-keys.js":(function(A){A.exports={}}),"./node_modules/core-js/internals/host-report-errors.js":(function(A){A.exports=function(h,l){try{arguments.length===1?console.error(h):console.error(h,l)}catch{}}}),"./node_modules/core-js/internals/html.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/get-built-in.js");A.exports=g("document","documentElement")}),"./node_modules/core-js/internals/ie8-dom-define.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/document-create-element.js");A.exports=!g&&!v(function(){return Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a!==7})}),"./node_modules/core-js/internals/indexed-object.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),N=Object,w=g("".split);A.exports=v(function(){return!N("z").propertyIsEnumerable(0)})?function(E){return m(E)==="String"?w(E,""):N(E)}:N}),"./node_modules/core-js/internals/inherit-if-required.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-callable.js"),v=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/object-set-prototype-of.js");A.exports=function(N,w,E){var F,M;return m&&g(F=w.constructor)&&F!==E&&v(M=F.prototype)&&M!==E.prototype&&m(N,M),N}}),"./node_modules/core-js/internals/inspect-source.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/shared-store.js"),N=g(Function.toString);v(m.inspectSource)||(m.inspectSource=function(w){return N(w)}),A.exports=m.inspectSource}),"./node_modules/core-js/internals/internal-metadata.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/hidden-keys.js"),N=l("./node_modules/core-js/internals/is-object.js"),w=l("./node_modules/core-js/internals/has-own-property.js"),E=l("./node_modules/core-js/internals/object-define-property.js").f,F=l("./node_modules/core-js/internals/object-get-own-property-names.js"),M=l("./node_modules/core-js/internals/object-get-own-property-names-external.js"),k=l("./node_modules/core-js/internals/object-is-extensible.js"),K=l("./node_modules/core-js/internals/uid.js"),G=l("./node_modules/core-js/internals/freezing.js"),ee=!1,V=K("meta"),X=0,J=function(oe){E(oe,V,{value:{objectID:"O"+X++,weakData:{}}})},he=function(oe,ne){if(!N(oe))return typeof oe=="symbol"?oe:(typeof oe=="string"?"S":"P")+oe;if(!w(oe,V)){if(!k(oe))return"F";if(!ne)return"E";J(oe)}return oe[V].objectID},q=function(oe,ne){if(!w(oe,V)){if(!k(oe))return!0;if(!ne)return!1;J(oe)}return oe[V].weakData},ie=function(oe){return G&&ee&&k(oe)&&!w(oe,V)&&J(oe),oe},Ae=function(){ce.enable=function(){},ee=!0;var oe=F.f,ne=v([].splice),re={};re[V]=1,oe(re).length&&(F.f=function(se){for(var je=oe(se),De=0,ge=je.length;De<ge;De++)if(je[De]===V){ne(je,De,1);break}return je},g({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:M.f}))},ce=A.exports={enable:Ae,fastKey:he,getWeakData:q,onFreeze:ie};m[V]=!0}),"./node_modules/core-js/internals/internal-state.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/weak-map-basic-detection.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/is-object.js"),N=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=l("./node_modules/core-js/internals/has-own-property.js"),E=l("./node_modules/core-js/internals/shared-store.js"),F=l("./node_modules/core-js/internals/shared-key.js"),M=l("./node_modules/core-js/internals/hidden-keys.js"),k="Object already initialized",K=v.TypeError,G=v.WeakMap,ee,V,X,J=function(Ae){return X(Ae)?V(Ae):ee(Ae,{})},he=function(Ae){return function(ce){var oe;if(!m(ce)||(oe=V(ce)).type!==Ae)throw new K("Incompatible receiver, "+Ae+" required");return oe}};if(g||E.state){var q=E.state||(E.state=new G);q.get=q.get,q.has=q.has,q.set=q.set,ee=function(Ae,ce){if(q.has(Ae))throw new K(k);return ce.facade=Ae,q.set(Ae,ce),ce},V=function(Ae){return q.get(Ae)||{}},X=function(Ae){return q.has(Ae)}}else{var ie=F("state");M[ie]=!0,ee=function(Ae,ce){if(w(Ae,ie))throw new K(k);return ce.facade=Ae,N(Ae,ie,ce),ce},V=function(Ae){return w(Ae,ie)?Ae[ie]:{}},X=function(Ae){return w(Ae,ie)}}A.exports={set:ee,get:V,has:X,enforce:J,getterFor:he}}),"./node_modules/core-js/internals/is-array-iterator-method.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/well-known-symbol.js"),v=l("./node_modules/core-js/internals/iterators.js"),m=g("iterator"),N=Array.prototype;A.exports=function(w){return w!==void 0&&(v.Array===w||N[m]===w)}}),"./node_modules/core-js/internals/is-array.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/classof-raw.js");A.exports=Array.isArray||function(m){return g(m)==="Array"}}),"./node_modules/core-js/internals/is-callable.js":(function(A){var h=typeof document=="object"&&document.all;A.exports=typeof h>"u"&&h!==void 0?function(l){return typeof l=="function"||l===h}:function(l){return typeof l=="function"}}),"./node_modules/core-js/internals/is-constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/is-callable.js"),N=l("./node_modules/core-js/internals/classof.js"),w=l("./node_modules/core-js/internals/get-built-in.js"),E=l("./node_modules/core-js/internals/inspect-source.js"),F=function(){},M=w("Reflect","construct"),k=/^\s*(?:class|function)\b/,K=g(k.exec),G=!k.test(F),ee=function(J){if(!m(J))return!1;try{return M(F,[],J),!0}catch{return!1}},V=function(J){if(!m(J))return!1;switch(N(J)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return G||!!K(k,E(J))}catch{return!0}};V.sham=!0,A.exports=!M||v(function(){var X;return ee(ee.call)||!ee(Object)||!ee(function(){X=!0})||X})?V:ee}),"./node_modules/core-js/internals/is-forced.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=/#|\.prototype\./,N=function(k,K){var G=E[w(k)];return G===M?!0:G===F?!1:v(K)?g(K):!!K},w=N.normalize=function(k){return String(k).replace(m,".").toLowerCase()},E=N.data={},F=N.NATIVE="N",M=N.POLYFILL="P";A.exports=N}),"./node_modules/core-js/internals/is-iterable.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/classof.js"),v=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/is-null-or-undefined.js"),N=l("./node_modules/core-js/internals/well-known-symbol.js"),w=l("./node_modules/core-js/internals/iterators.js"),E=N("iterator"),F=Object;A.exports=function(M){if(m(M))return!1;var k=F(M);return k[E]!==void 0||"@@iterator"in k||v(w,g(k))}}),"./node_modules/core-js/internals/is-null-or-undefined.js":(function(A){A.exports=function(h){return h==null}}),"./node_modules/core-js/internals/is-object.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-callable.js");A.exports=function(v){return typeof v=="object"?v!==null:g(v)}}),"./node_modules/core-js/internals/is-possible-prototype.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-object.js");A.exports=function(v){return g(v)||v===null}}),"./node_modules/core-js/internals/is-pure.js":(function(A){A.exports=!1}),"./node_modules/core-js/internals/is-symbol.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/get-built-in.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/object-is-prototype-of.js"),N=l("./node_modules/core-js/internals/use-symbol-as-uid.js"),w=Object;A.exports=N?function(E){return typeof E=="symbol"}:function(E){var F=g("Symbol");return v(F)&&m(F.prototype,w(E))}}),"./node_modules/core-js/internals/iterate-simple.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js");A.exports=function(v,m,N){for(var w=N?v:v.iterator,E=v.next,F,M;!(F=g(E,w)).done;)if(M=m(F.value),M!==void 0)return M}}),"./node_modules/core-js/internals/iterate.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-bind-context.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/an-object.js"),N=l("./node_modules/core-js/internals/try-to-string.js"),w=l("./node_modules/core-js/internals/is-array-iterator-method.js"),E=l("./node_modules/core-js/internals/length-of-array-like.js"),F=l("./node_modules/core-js/internals/object-is-prototype-of.js"),M=l("./node_modules/core-js/internals/get-iterator.js"),k=l("./node_modules/core-js/internals/get-iterator-method.js"),K=l("./node_modules/core-js/internals/iterator-close.js"),G=TypeError,ee=function(X,J){this.stopped=X,this.result=J},V=ee.prototype;A.exports=function(X,J,he){var q=he&&he.that,ie=!!(he&&he.AS_ENTRIES),Ae=!!(he&&he.IS_RECORD),ce=!!(he&&he.IS_ITERATOR),oe=!!(he&&he.INTERRUPTED),ne=g(J,q),re,se,je,De,ge,Z,fe,ue=function(Ce){return re&&K(re,"normal"),new ee(!0,Ce)},pe=function(Ce){return ie?(m(Ce),oe?ne(Ce[0],Ce[1],ue):ne(Ce[0],Ce[1])):oe?ne(Ce,ue):ne(Ce)};if(Ae)re=X.iterator;else if(ce)re=X;else{if(se=k(X),!se)throw new G(N(X)+" is not iterable");if(w(se)){for(je=0,De=E(X);De>je;je++)if(ge=pe(X[je]),ge&&F(V,ge))return ge;return new ee(!1)}re=M(X,se)}for(Z=Ae?X.next:re.next;!(fe=v(Z,re)).done;){try{ge=pe(fe.value)}catch(Ce){K(re,"throw",Ce)}if(typeof ge=="object"&&ge&&F(V,ge))return ge}return new ee(!1)}}),"./node_modules/core-js/internals/iterator-close-all.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/iterator-close.js");A.exports=function(v,m,N){for(var w=v.length-1;w>=0;w--)if(v[w]!==void 0)try{N=g(v[w].iterator,m,N)}catch(E){m="throw",N=E}if(m==="throw")throw N;return N}}),"./node_modules/core-js/internals/iterator-close.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/an-object.js"),m=l("./node_modules/core-js/internals/get-method.js");A.exports=function(N,w,E){var F,M;v(N);try{if(F=m(N,"return"),!F){if(w==="throw")throw E;return E}F=g(F,N)}catch(k){M=!0,F=k}if(w==="throw")throw E;if(M)throw F;return v(F),E}}),"./node_modules/core-js/internals/iterator-create-constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,v=l("./node_modules/core-js/internals/object-create.js"),m=l("./node_modules/core-js/internals/create-property-descriptor.js"),N=l("./node_modules/core-js/internals/set-to-string-tag.js"),w=l("./node_modules/core-js/internals/iterators.js"),E=function(){return this};A.exports=function(F,M,k,K){var G=M+" Iterator";return F.prototype=v(g,{next:m(+!K,k)}),N(F,G,!1,!0),w[G]=E,F}}),"./node_modules/core-js/internals/iterator-create-proxy.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/object-create.js"),m=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=l("./node_modules/core-js/internals/define-built-ins.js"),w=l("./node_modules/core-js/internals/well-known-symbol.js"),E=l("./node_modules/core-js/internals/internal-state.js"),F=l("./node_modules/core-js/internals/get-method.js"),M=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,k=l("./node_modules/core-js/internals/create-iter-result-object.js"),K=l("./node_modules/core-js/internals/iterator-close.js"),G=l("./node_modules/core-js/internals/iterator-close-all.js"),ee=w("toStringTag"),V="IteratorHelper",X="WrapForValidIterator",J="normal",he="throw",q=E.set,ie=function(oe){var ne=E.getterFor(oe?X:V);return N(v(M),{next:function(){var se=ne(this);if(oe)return se.nextHandler();if(se.done)return k(void 0,!0);try{var je=se.nextHandler();return se.returnHandlerResult?je:k(je,se.done)}catch(De){throw se.done=!0,De}},return:function(){var re=ne(this),se=re.iterator;if(re.done=!0,oe){var je=F(se,"return");return je?g(je,se):k(void 0,!0)}if(re.inner)try{K(re.inner.iterator,J)}catch(De){return K(se,he,De)}if(re.openIters)try{G(re.openIters,J)}catch(De){return K(se,he,De)}return se&&K(se,J),k(void 0,!0)}})},Ae=ie(!0),ce=ie(!1);m(ce,ee,"Iterator Helper"),A.exports=function(oe,ne,re){var se=function(De,ge){ge?(ge.iterator=De.iterator,ge.next=De.next):ge=De,ge.type=ne?X:V,ge.returnHandlerResult=!!re,ge.nextHandler=oe,ge.counter=0,ge.done=!1,q(this,ge)};return se.prototype=ne?Ae:ce,se}}),"./node_modules/core-js/internals/iterator-define.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/is-pure.js"),N=l("./node_modules/core-js/internals/function-name.js"),w=l("./node_modules/core-js/internals/is-callable.js"),E=l("./node_modules/core-js/internals/iterator-create-constructor.js"),F=l("./node_modules/core-js/internals/object-get-prototype-of.js"),M=l("./node_modules/core-js/internals/object-set-prototype-of.js"),k=l("./node_modules/core-js/internals/set-to-string-tag.js"),K=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),G=l("./node_modules/core-js/internals/define-built-in.js"),ee=l("./node_modules/core-js/internals/well-known-symbol.js"),V=l("./node_modules/core-js/internals/iterators.js"),X=l("./node_modules/core-js/internals/iterators-core.js"),J=N.PROPER,he=N.CONFIGURABLE,q=X.IteratorPrototype,ie=X.BUGGY_SAFARI_ITERATORS,Ae=ee("iterator"),ce="keys",oe="values",ne="entries",re=function(){return this};A.exports=function(se,je,De,ge,Z,fe,ue){E(De,je,ge);var pe=function(Se){if(Se===Z&&Te)return Te;if(!ie&&Se&&Se in ye)return ye[Se];switch(Se){case ce:return function(){return new De(this,Se)};case oe:return function(){return new De(this,Se)};case ne:return function(){return new De(this,Se)}}return function(){return new De(this)}},Ce=je+" Iterator",Ne=!1,ye=se.prototype,we=ye[Ae]||ye["@@iterator"]||Z&&ye[Z],Te=!ie&&we||pe(Z),qe=je==="Array"&&ye.entries||we,ve,Ge,at;if(qe&&(ve=F(qe.call(new se)),ve!==Object.prototype&&ve.next&&(!m&&F(ve)!==q&&(M?M(ve,q):w(ve[Ae])||G(ve,Ae,re)),k(ve,Ce,!0,!0),m&&(V[Ce]=re))),J&&Z===oe&&we&&we.name!==oe&&(!m&&he?K(ye,"name",oe):(Ne=!0,Te=function(){return v(we,this)})),Z)if(Ge={values:pe(oe),keys:fe?Te:pe(ce),entries:pe(ne)},ue)for(at in Ge)(ie||Ne||!(at in ye))&&G(ye,at,Ge[at]);else g({target:je,proto:!0,forced:ie||Ne},Ge);return(!m||ue)&&ye[Ae]!==Te&&G(ye,Ae,Te,{name:Z}),V[je]=Te,Ge}}),"./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js":(function(A){A.exports=function(h,l){var g=typeof Iterator=="function"&&Iterator.prototype[h];if(g)try{g.call({next:null},l).next()}catch{return!0}}}),"./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js");A.exports=function(v,m){var N=g.Iterator,w=N&&N.prototype,E=w&&w[v],F=!1;if(E)try{E.call({next:function(){return{done:!0}},return:function(){F=!0}},-1)}catch(M){M instanceof m||(F=!1)}if(!F)return E}}),"./node_modules/core-js/internals/iterators-core.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/is-object.js"),N=l("./node_modules/core-js/internals/object-create.js"),w=l("./node_modules/core-js/internals/object-get-prototype-of.js"),E=l("./node_modules/core-js/internals/define-built-in.js"),F=l("./node_modules/core-js/internals/well-known-symbol.js"),M=l("./node_modules/core-js/internals/is-pure.js"),k=F("iterator"),K=!1,G,ee,V;[].keys&&(V=[].keys(),"next"in V?(ee=w(w(V)),ee!==Object.prototype&&(G=ee)):K=!0);var X=!m(G)||g(function(){var J={};return G[k].call(J)!==J});X?G={}:M&&(G=N(G)),v(G[k])||E(G,k,function(){return this}),A.exports={IteratorPrototype:G,BUGGY_SAFARI_ITERATORS:K}}),"./node_modules/core-js/internals/iterators.js":(function(A){A.exports={}}),"./node_modules/core-js/internals/length-of-array-like.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-length.js");A.exports=function(v){return g(v.length)}}),"./node_modules/core-js/internals/make-built-in.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/is-callable.js"),N=l("./node_modules/core-js/internals/has-own-property.js"),w=l("./node_modules/core-js/internals/descriptors.js"),E=l("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,F=l("./node_modules/core-js/internals/inspect-source.js"),M=l("./node_modules/core-js/internals/internal-state.js"),k=M.enforce,K=M.get,G=String,ee=Object.defineProperty,V=g("".slice),X=g("".replace),J=g([].join),he=w&&!v(function(){return ee(function(){},"length",{value:8}).length!==8}),q=String(String).split("String"),ie=A.exports=function(Ae,ce,oe){V(G(ce),0,7)==="Symbol("&&(ce="["+X(G(ce),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),oe&&oe.getter&&(ce="get "+ce),oe&&oe.setter&&(ce="set "+ce),(!N(Ae,"name")||E&&Ae.name!==ce)&&(w?ee(Ae,"name",{value:ce,configurable:!0}):Ae.name=ce),he&&oe&&N(oe,"arity")&&Ae.length!==oe.arity&&ee(Ae,"length",{value:oe.arity});try{oe&&N(oe,"constructor")&&oe.constructor?w&&ee(Ae,"prototype",{writable:!1}):Ae.prototype&&(Ae.prototype=void 0)}catch{}var ne=k(Ae);return N(ne,"source")||(ne.source=J(q,typeof ce=="string"?ce:"")),Ae};Function.prototype.toString=ie(function(){return m(this)&&K(this).source||F(this)},"toString")}),"./node_modules/core-js/internals/math-trunc.js":(function(A){var h=Math.ceil,l=Math.floor;A.exports=Math.trunc||function(v){var m=+v;return(m>0?l:h)(m)}}),"./node_modules/core-js/internals/microtask.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/safe-get-built-in.js"),m=l("./node_modules/core-js/internals/function-bind-context.js"),N=l("./node_modules/core-js/internals/task.js").set,w=l("./node_modules/core-js/internals/queue.js"),E=l("./node_modules/core-js/internals/environment-is-ios.js"),F=l("./node_modules/core-js/internals/environment-is-ios-pebble.js"),M=l("./node_modules/core-js/internals/environment-is-webos-webkit.js"),k=l("./node_modules/core-js/internals/environment-is-node.js"),K=g.MutationObserver||g.WebKitMutationObserver,G=g.document,ee=g.process,V=g.Promise,X=v("queueMicrotask"),J,he,q,ie,Ae;if(!X){var ce=new w,oe=function(){var ne,re;for(k&&(ne=ee.domain)&&ne.exit();re=ce.get();)try{re()}catch(se){throw ce.head&&J(),se}ne&&ne.enter()};!E&&!k&&!M&&K&&G?(he=!0,q=G.createTextNode(""),new K(oe).observe(q,{characterData:!0}),J=function(){q.data=he=!he}):!F&&V&&V.resolve?(ie=V.resolve(void 0),ie.constructor=V,Ae=m(ie.then,ie),J=function(){Ae(oe)}):k?J=function(){ee.nextTick(oe)}:(N=m(N,g),J=function(){N(oe)}),X=function(ne){ce.head||J(),ce.add(ne)}}A.exports=X}),"./node_modules/core-js/internals/new-promise-capability.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-callable.js"),v=TypeError,m=function(N){var w,E;this.promise=new N(function(F,M){if(w!==void 0||E!==void 0)throw new v("Bad Promise constructor");w=F,E=M}),this.resolve=g(w),this.reject=g(E)};A.exports.f=function(N){return new m(N)}}),"./node_modules/core-js/internals/object-assign.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/function-call.js"),N=l("./node_modules/core-js/internals/fails.js"),w=l("./node_modules/core-js/internals/object-keys.js"),E=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),F=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),M=l("./node_modules/core-js/internals/to-object.js"),k=l("./node_modules/core-js/internals/indexed-object.js"),K=Object.assign,G=Object.defineProperty,ee=v([].concat);A.exports=!K||N(function(){if(g&&K({b:1},K(G({},"a",{enumerable:!0,get:function(){G(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var V={},X={},J=Symbol("assign detection"),he="abcdefghijklmnopqrst";return V[J]=7,he.split("").forEach(function(q){X[q]=q}),K({},V)[J]!==7||w(K({},X)).join("")!==he})?function(X,J){for(var he=M(X),q=arguments.length,ie=1,Ae=E.f,ce=F.f;q>ie;)for(var oe=k(arguments[ie++]),ne=Ae?ee(w(oe),Ae(oe)):w(oe),re=ne.length,se=0,je;re>se;)je=ne[se++],(!g||m(ce,oe,je))&&(he[je]=oe[je]);return he}:K}),"./node_modules/core-js/internals/object-create.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/an-object.js"),v=l("./node_modules/core-js/internals/object-define-properties.js"),m=l("./node_modules/core-js/internals/enum-bug-keys.js"),N=l("./node_modules/core-js/internals/hidden-keys.js"),w=l("./node_modules/core-js/internals/html.js"),E=l("./node_modules/core-js/internals/document-create-element.js"),F=l("./node_modules/core-js/internals/shared-key.js"),M=">",k="<",K="prototype",G="script",ee=F("IE_PROTO"),V=function(){},X=function(Ae){return k+G+M+Ae+k+"/"+G+M},J=function(Ae){Ae.write(X("")),Ae.close();var ce=Ae.parentWindow.Object;return Ae=null,ce},he=function(){var Ae=E("iframe"),ce="java"+G+":",oe;return Ae.style.display="none",w.appendChild(Ae),Ae.src=String(ce),oe=Ae.contentWindow.document,oe.open(),oe.write(X("document.F=Object")),oe.close(),oe.F},q,ie=function(){try{q=new ActiveXObject("htmlfile")}catch{}ie=typeof document<"u"?document.domain&&q?J(q):he():J(q);for(var Ae=m.length;Ae--;)delete ie[K][m[Ae]];return ie()};N[ee]=!0,A.exports=Object.create||function(ce,oe){var ne;return ce!==null?(V[K]=g(ce),ne=new V,V[K]=null,ne[ee]=ce):ne=ie(),oe===void 0?ne:v.f(ne,oe)}}),"./node_modules/core-js/internals/object-define-properties.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/v8-prototype-define-bug.js"),m=l("./node_modules/core-js/internals/object-define-property.js"),N=l("./node_modules/core-js/internals/an-object.js"),w=l("./node_modules/core-js/internals/to-indexed-object.js"),E=l("./node_modules/core-js/internals/object-keys.js");h.f=g&&!v?Object.defineProperties:function(M,k){N(M);for(var K=w(k),G=E(k),ee=G.length,V=0,X;ee>V;)m.f(M,X=G[V++],K[X]);return M}}),"./node_modules/core-js/internals/object-define-property.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/ie8-dom-define.js"),m=l("./node_modules/core-js/internals/v8-prototype-define-bug.js"),N=l("./node_modules/core-js/internals/an-object.js"),w=l("./node_modules/core-js/internals/to-property-key.js"),E=TypeError,F=Object.defineProperty,M=Object.getOwnPropertyDescriptor,k="enumerable",K="configurable",G="writable";h.f=g?m?function(V,X,J){if(N(V),X=w(X),N(J),typeof V=="function"&&X==="prototype"&&"value"in J&&G in J&&!J[G]){var he=M(V,X);he&&he[G]&&(V[X]=J.value,J={configurable:K in J?J[K]:he[K],enumerable:k in J?J[k]:he[k],writable:!1})}return F(V,X,J)}:F:function(V,X,J){if(N(V),X=w(X),N(J),v)try{return F(V,X,J)}catch{}if("get"in J||"set"in J)throw new E("Accessors not supported");return"value"in J&&(V[X]=J.value),V}}),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),N=l("./node_modules/core-js/internals/create-property-descriptor.js"),w=l("./node_modules/core-js/internals/to-indexed-object.js"),E=l("./node_modules/core-js/internals/to-property-key.js"),F=l("./node_modules/core-js/internals/has-own-property.js"),M=l("./node_modules/core-js/internals/ie8-dom-define.js"),k=Object.getOwnPropertyDescriptor;h.f=g?k:function(G,ee){if(G=w(G),ee=E(ee),M)try{return k(G,ee)}catch{}if(F(G,ee))return N(!v(m.f,G,ee),G[ee])}}),"./node_modules/core-js/internals/object-get-own-property-names-external.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/classof-raw.js"),v=l("./node_modules/core-js/internals/to-indexed-object.js"),m=l("./node_modules/core-js/internals/object-get-own-property-names.js").f,N=l("./node_modules/core-js/internals/array-slice.js"),w=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],E=function(F){try{return m(F)}catch{return N(w)}};A.exports.f=function(M){return w&&g(M)==="Window"?E(M):m(v(M))}}),"./node_modules/core-js/internals/object-get-own-property-names.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/object-keys-internal.js"),v=l("./node_modules/core-js/internals/enum-bug-keys.js"),m=v.concat("length","prototype");h.f=Object.getOwnPropertyNames||function(w){return g(w,m)}}),"./node_modules/core-js/internals/object-get-own-property-symbols.js":(function(A,h){h.f=Object.getOwnPropertySymbols}),"./node_modules/core-js/internals/object-get-prototype-of.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/has-own-property.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/to-object.js"),N=l("./node_modules/core-js/internals/shared-key.js"),w=l("./node_modules/core-js/internals/correct-prototype-getter.js"),E=N("IE_PROTO"),F=Object,M=F.prototype;A.exports=w?F.getPrototypeOf:function(k){var K=m(k);if(g(K,E))return K[E];var G=K.constructor;return v(G)&&K instanceof G?G.prototype:K instanceof F?M:null}}),"./node_modules/core-js/internals/object-is-extensible.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js"),v=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),N=l("./node_modules/core-js/internals/array-buffer-non-extensible.js"),w=Object.isExtensible,E=g(function(){});A.exports=E||N?function(M){return!v(M)||N&&m(M)==="ArrayBuffer"?!1:w?w(M):!0}:w}),"./node_modules/core-js/internals/object-is-prototype-of.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=g({}.isPrototypeOf)}),"./node_modules/core-js/internals/object-keys-internal.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/to-indexed-object.js"),N=l("./node_modules/core-js/internals/array-includes.js").indexOf,w=l("./node_modules/core-js/internals/hidden-keys.js"),E=g([].push);A.exports=function(F,M){var k=m(F),K=0,G=[],ee;for(ee in k)!v(w,ee)&&v(k,ee)&&E(G,ee);for(;M.length>K;)v(k,ee=M[K++])&&(~N(G,ee)||E(G,ee));return G}}),"./node_modules/core-js/internals/object-keys.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/object-keys-internal.js"),v=l("./node_modules/core-js/internals/enum-bug-keys.js");A.exports=Object.keys||function(N){return g(N,v)}}),"./node_modules/core-js/internals/object-property-is-enumerable.js":(function(A,h){var l={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,v=g&&!l.call({1:2},1);h.f=v?function(N){var w=g(this,N);return!!w&&w.enumerable}:l}),"./node_modules/core-js/internals/object-set-prototype-of.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),v=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/require-object-coercible.js"),N=l("./node_modules/core-js/internals/a-possible-prototype.js");A.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var w=!1,E={},F;try{F=g(Object.prototype,"__proto__","set"),F(E,[]),w=E instanceof Array}catch{}return function(k,K){return m(k),N(K),v(k)&&(w?F(k,K):k.__proto__=K),k}})():void 0)}),"./node_modules/core-js/internals/object-to-string.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-string-tag-support.js"),v=l("./node_modules/core-js/internals/classof.js");A.exports=g?{}.toString:function(){return"[object "+v(this)+"]"}}),"./node_modules/core-js/internals/ordinary-to-primitive.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/is-object.js"),N=TypeError;A.exports=function(w,E){var F,M;if(E==="string"&&v(F=w.toString)&&!m(M=g(F,w))||v(F=w.valueOf)&&!m(M=g(F,w))||E!=="string"&&v(F=w.toString)&&!m(M=g(F,w)))return M;throw new N("Can't convert object to primitive value")}}),"./node_modules/core-js/internals/own-keys.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/get-built-in.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/object-get-own-property-names.js"),N=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),w=l("./node_modules/core-js/internals/an-object.js"),E=v([].concat);A.exports=g("Reflect","ownKeys")||function(M){var k=m.f(w(M)),K=N.f;return K?E(k,K(M)):k}}),"./node_modules/core-js/internals/path.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js");A.exports=g}),"./node_modules/core-js/internals/perform.js":(function(A){A.exports=function(h){try{return{error:!1,value:h()}}catch(l){return{error:!0,value:l}}}}),"./node_modules/core-js/internals/promise-constructor-detection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/promise-native-constructor.js"),m=l("./node_modules/core-js/internals/is-callable.js"),N=l("./node_modules/core-js/internals/is-forced.js"),w=l("./node_modules/core-js/internals/inspect-source.js"),E=l("./node_modules/core-js/internals/well-known-symbol.js"),F=l("./node_modules/core-js/internals/environment.js"),M=l("./node_modules/core-js/internals/is-pure.js"),k=l("./node_modules/core-js/internals/environment-v8-version.js"),K=v&&v.prototype,G=E("species"),ee=!1,V=m(g.PromiseRejectionEvent),X=N("Promise",function(){var J=w(v),he=J!==String(v);if(!he&&k===66||M&&!(K.catch&&K.finally))return!0;if(!k||k<51||!/native code/.test(J)){var q=new v(function(ce){ce(1)}),ie=function(ce){ce(function(){},function(){})},Ae=q.constructor={};if(Ae[G]=ie,ee=q.then(function(){})instanceof ie,!ee)return!0}return!he&&(F==="BROWSER"||F==="DENO")&&!V});A.exports={CONSTRUCTOR:X,REJECTION_EVENT:V,SUBCLASSING:ee}}),"./node_modules/core-js/internals/promise-native-constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js");A.exports=g.Promise}),"./node_modules/core-js/internals/promise-resolve.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/an-object.js"),v=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/new-promise-capability.js");A.exports=function(N,w){if(g(N),v(w)&&w.constructor===N)return w;var E=m.f(N),F=E.resolve;return F(w),E.promise}}),"./node_modules/core-js/internals/promise-statics-incorrect-iteration.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/promise-native-constructor.js"),v=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),m=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;A.exports=m||!v(function(N){g.all(N).then(void 0,function(){})})}),"./node_modules/core-js/internals/queue.js":(function(A){var h=function(){this.head=null,this.tail=null};h.prototype={add:function(l){var g={item:l,next:null},v=this.tail;v?v.next=g:this.head=g,this.tail=g},get:function(){var l=this.head;if(l){var g=this.head=l.next;return g===null&&(this.tail=null),l.item}}},A.exports=h}),"./node_modules/core-js/internals/regexp-exec.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/to-string.js"),N=l("./node_modules/core-js/internals/regexp-flags.js"),w=l("./node_modules/core-js/internals/regexp-sticky-helpers.js"),E=l("./node_modules/core-js/internals/shared.js"),F=l("./node_modules/core-js/internals/object-create.js"),M=l("./node_modules/core-js/internals/internal-state.js").get,k=l("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),K=l("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),G=E("native-string-replace",String.prototype.replace),ee=RegExp.prototype.exec,V=ee,X=v("".charAt),J=v("".indexOf),he=v("".replace),q=v("".slice),ie=(function(){var ne=/a/,re=/b*/g;return g(ee,ne,"a"),g(ee,re,"a"),ne.lastIndex!==0||re.lastIndex!==0})(),Ae=w.BROKEN_CARET,ce=/()??/.exec("")[1]!==void 0,oe=ie||ce||Ae||k||K;oe&&(V=function(re){var se=this,je=M(se),De=m(re),ge=je.raw,Z,fe,ue,pe,Ce,Ne,ye;if(ge)return ge.lastIndex=se.lastIndex,Z=g(V,ge,De),se.lastIndex=ge.lastIndex,Z;var we=je.groups,Te=Ae&&se.sticky,qe=g(N,se),ve=se.source,Ge=0,at=De;if(Te&&(qe=he(qe,"y",""),J(qe,"g")===-1&&(qe+="g"),at=q(De,se.lastIndex),se.lastIndex>0&&(!se.multiline||se.multiline&&X(De,se.lastIndex-1)!==`
`)&&(ve="(?: "+ve+")",at=" "+at,Ge++),fe=new RegExp("^(?:"+ve+")",qe)),ce&&(fe=new RegExp("^"+ve+"$(?!\\s)",qe)),ie&&(ue=se.lastIndex),pe=g(ee,Te?fe:se,at),Te?pe?(pe.input=q(pe.input,Ge),pe[0]=q(pe[0],Ge),pe.index=se.lastIndex,se.lastIndex+=pe[0].length):se.lastIndex=0:ie&&pe&&(se.lastIndex=se.global?pe.index+pe[0].length:ue),ce&&pe&&pe.length>1&&g(G,pe[0],fe,function(){for(Ce=1;Ce<arguments.length-2;Ce++)arguments[Ce]===void 0&&(pe[Ce]=void 0)}),pe&&we)for(pe.groups=Ne=F(null),Ce=0;Ce<we.length;Ce++)ye=we[Ce],Ne[ye[0]]=pe[ye[1]];return pe}),A.exports=V}),"./node_modules/core-js/internals/regexp-flags-detection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/fails.js"),m=g.RegExp,N=!v(function(){var w=!0;try{m(".","d")}catch{w=!1}var E={},F="",M=w?"dgimsy":"gimsy",k=function(V,X){Object.defineProperty(E,V,{get:function(){return F+=X,!0}})},K={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};w&&(K.hasIndices="d");for(var G in K)k(G,K[G]);var ee=Object.getOwnPropertyDescriptor(m.prototype,"flags").get.call(E);return ee!==M||F!==M});A.exports={correct:N}}),"./node_modules/core-js/internals/regexp-flags.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/an-object.js");A.exports=function(){var v=g(this),m="";return v.hasIndices&&(m+="d"),v.global&&(m+="g"),v.ignoreCase&&(m+="i"),v.multiline&&(m+="m"),v.dotAll&&(m+="s"),v.unicode&&(m+="u"),v.unicodeSets&&(m+="v"),v.sticky&&(m+="y"),m}}),"./node_modules/core-js/internals/regexp-get-flags.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/object-is-prototype-of.js"),N=l("./node_modules/core-js/internals/regexp-flags-detection.js"),w=l("./node_modules/core-js/internals/regexp-flags.js"),E=RegExp.prototype;A.exports=N.correct?function(F){return F.flags}:function(F){return!N.correct&&m(E,F)&&!v(F,"flags")?g(w,F):F.flags}}),"./node_modules/core-js/internals/regexp-sticky-helpers.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=v.RegExp,N=g(function(){var F=m("a","y");return F.lastIndex=2,F.exec("abcd")!==null}),w=N||g(function(){return!m("a","y").sticky}),E=N||g(function(){var F=m("^r","gy");return F.lastIndex=2,F.exec("str")!==null});A.exports={BROKEN_CARET:E,MISSED_STICKY:w,UNSUPPORTED_Y:N}}),"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=v.RegExp;A.exports=g(function(){var N=m(".","s");return!(N.dotAll&&N.test(`
`)&&N.flags==="s")})}),"./node_modules/core-js/internals/regexp-unsupported-ncg.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=v.RegExp;A.exports=g(function(){var N=m("(?<a>b)","g");return N.exec("b").groups.a!=="b"||"b".replace(N,"$<a>c")!=="bc"})}),"./node_modules/core-js/internals/require-object-coercible.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-null-or-undefined.js"),v=TypeError;A.exports=function(m){if(g(m))throw new v("Can't call method on "+m);return m}}),"./node_modules/core-js/internals/safe-get-built-in.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/descriptors.js"),m=Object.getOwnPropertyDescriptor;A.exports=function(N){if(!v)return g[N];var w=m(g,N);return w&&w.value}}),"./node_modules/core-js/internals/schedulers-fix.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/function-apply.js"),m=l("./node_modules/core-js/internals/is-callable.js"),N=l("./node_modules/core-js/internals/environment.js"),w=l("./node_modules/core-js/internals/environment-user-agent.js"),E=l("./node_modules/core-js/internals/array-slice.js"),F=l("./node_modules/core-js/internals/validate-arguments-length.js"),M=g.Function,k=/MSIE .\./.test(w)||N==="BUN"&&(function(){var K=g.Bun.version.split(".");return K.length<3||K[0]==="0"&&(K[1]<3||K[1]==="3"&&K[2]==="0")})();A.exports=function(K,G){var ee=G?2:1;return k?function(V,X){var J=F(arguments.length,1)>ee,he=m(V)?V:M(V),q=J?E(arguments,ee):[],ie=J?function(){v(he,this,q)}:he;return G?K(ie,X):K(ie)}:K}}),"./node_modules/core-js/internals/set-clone.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/set-helpers.js"),v=l("./node_modules/core-js/internals/set-iterate.js"),m=g.Set,N=g.add;A.exports=function(w){var E=new m;return v(w,function(F){N(E,F)}),E}}),"./node_modules/core-js/internals/set-difference.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-set.js"),v=l("./node_modules/core-js/internals/set-helpers.js"),m=l("./node_modules/core-js/internals/set-clone.js"),N=l("./node_modules/core-js/internals/set-size.js"),w=l("./node_modules/core-js/internals/get-set-record.js"),E=l("./node_modules/core-js/internals/set-iterate.js"),F=l("./node_modules/core-js/internals/iterate-simple.js"),M=v.has,k=v.remove;A.exports=function(G){var ee=g(this),V=w(G),X=m(ee);return N(ee)<=V.size?E(ee,function(J){V.includes(J)&&k(X,J)}):F(V.getIterator(),function(J){M(X,J)&&k(X,J)}),X}}),"./node_modules/core-js/internals/set-helpers.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=Set.prototype;A.exports={Set,add:g(v.add),has:g(v.has),remove:g(v.delete),proto:v}}),"./node_modules/core-js/internals/set-intersection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-set.js"),v=l("./node_modules/core-js/internals/set-helpers.js"),m=l("./node_modules/core-js/internals/set-size.js"),N=l("./node_modules/core-js/internals/get-set-record.js"),w=l("./node_modules/core-js/internals/set-iterate.js"),E=l("./node_modules/core-js/internals/iterate-simple.js"),F=v.Set,M=v.add,k=v.has;A.exports=function(G){var ee=g(this),V=N(G),X=new F;return m(ee)>V.size?E(V.getIterator(),function(J){k(ee,J)&&M(X,J)}):w(ee,function(J){V.includes(J)&&M(X,J)}),X}}),"./node_modules/core-js/internals/set-is-disjoint-from.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-set.js"),v=l("./node_modules/core-js/internals/set-helpers.js").has,m=l("./node_modules/core-js/internals/set-size.js"),N=l("./node_modules/core-js/internals/get-set-record.js"),w=l("./node_modules/core-js/internals/set-iterate.js"),E=l("./node_modules/core-js/internals/iterate-simple.js"),F=l("./node_modules/core-js/internals/iterator-close.js");A.exports=function(k){var K=g(this),G=N(k);if(m(K)<=G.size)return w(K,function(V){if(G.includes(V))return!1},!0)!==!1;var ee=G.getIterator();return E(ee,function(V){if(v(K,V))return F(ee,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-is-subset-of.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-set.js"),v=l("./node_modules/core-js/internals/set-size.js"),m=l("./node_modules/core-js/internals/set-iterate.js"),N=l("./node_modules/core-js/internals/get-set-record.js");A.exports=function(E){var F=g(this),M=N(E);return v(F)>M.size?!1:m(F,function(k){if(!M.includes(k))return!1},!0)!==!1}}),"./node_modules/core-js/internals/set-is-superset-of.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-set.js"),v=l("./node_modules/core-js/internals/set-helpers.js").has,m=l("./node_modules/core-js/internals/set-size.js"),N=l("./node_modules/core-js/internals/get-set-record.js"),w=l("./node_modules/core-js/internals/iterate-simple.js"),E=l("./node_modules/core-js/internals/iterator-close.js");A.exports=function(M){var k=g(this),K=N(M);if(m(k)<K.size)return!1;var G=K.getIterator();return w(G,function(ee){if(!v(k,ee))return E(G,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-iterate.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/iterate-simple.js"),m=l("./node_modules/core-js/internals/set-helpers.js"),N=m.Set,w=m.proto,E=g(w.forEach),F=g(w.keys),M=F(new N).next;A.exports=function(k,K,G){return G?v({iterator:F(k),next:M},K):E(k,K)}}),"./node_modules/core-js/internals/set-size.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),v=l("./node_modules/core-js/internals/set-helpers.js");A.exports=g(v.proto,"size","get")||function(m){return m.size}}),"./node_modules/core-js/internals/set-species.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/get-built-in.js"),v=l("./node_modules/core-js/internals/define-built-in-accessor.js"),m=l("./node_modules/core-js/internals/well-known-symbol.js"),N=l("./node_modules/core-js/internals/descriptors.js"),w=m("species");A.exports=function(E){var F=g(E);N&&F&&!F[w]&&v(F,w,{configurable:!0,get:function(){return this}})}}),"./node_modules/core-js/internals/set-symmetric-difference.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-set.js"),v=l("./node_modules/core-js/internals/set-helpers.js"),m=l("./node_modules/core-js/internals/set-clone.js"),N=l("./node_modules/core-js/internals/get-set-record.js"),w=l("./node_modules/core-js/internals/iterate-simple.js"),E=v.add,F=v.has,M=v.remove;A.exports=function(K){var G=g(this),ee=N(K).getIterator(),V=m(G);return w(ee,function(X){F(G,X)?M(V,X):E(V,X)}),V}}),"./node_modules/core-js/internals/set-to-string-tag.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/object-define-property.js").f,v=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/well-known-symbol.js"),N=m("toStringTag");A.exports=function(w,E,F){w&&!F&&(w=w.prototype),w&&!v(w,N)&&g(w,N,{configurable:!0,value:E})}}),"./node_modules/core-js/internals/set-union.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/a-set.js"),v=l("./node_modules/core-js/internals/set-helpers.js").add,m=l("./node_modules/core-js/internals/set-clone.js"),N=l("./node_modules/core-js/internals/get-set-record.js"),w=l("./node_modules/core-js/internals/iterate-simple.js");A.exports=function(F){var M=g(this),k=N(F).getIterator(),K=m(M);return w(k,function(G){v(K,G)}),K}}),"./node_modules/core-js/internals/shared-key.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/shared.js"),v=l("./node_modules/core-js/internals/uid.js"),m=g("keys");A.exports=function(N){return m[N]||(m[N]=v(N))}}),"./node_modules/core-js/internals/shared-store.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/is-pure.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/define-global-property.js"),N="__core-js_shared__",w=A.exports=v[N]||m(N,{});(w.versions||(w.versions=[])).push({version:"3.45.1",mode:g?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),"./node_modules/core-js/internals/shared.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/shared-store.js");A.exports=function(v,m){return g[v]||(g[v]=m||{})}}),"./node_modules/core-js/internals/species-constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/an-object.js"),v=l("./node_modules/core-js/internals/a-constructor.js"),m=l("./node_modules/core-js/internals/is-null-or-undefined.js"),N=l("./node_modules/core-js/internals/well-known-symbol.js"),w=N("species");A.exports=function(E,F){var M=g(E).constructor,k;return M===void 0||m(k=g(M)[w])?F:v(k)}}),"./node_modules/core-js/internals/string-html-forced.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/fails.js");A.exports=function(v){return g(function(){var m=""[v]('"');return m!==m.toLowerCase()||m.split('"').length>3})}}),"./node_modules/core-js/internals/string-multibyte.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),m=l("./node_modules/core-js/internals/to-string.js"),N=l("./node_modules/core-js/internals/require-object-coercible.js"),w=g("".charAt),E=g("".charCodeAt),F=g("".slice),M=function(k){return function(K,G){var ee=m(N(K)),V=v(G),X=ee.length,J,he;return V<0||V>=X?k?"":void 0:(J=E(ee,V),J<55296||J>56319||V+1===X||(he=E(ee,V+1))<56320||he>57343?k?w(ee,V):J:k?F(ee,V,V+2):(J-55296<<10)+(he-56320)+65536)}};A.exports={codeAt:M(!1),charAt:M(!0)}}),"./node_modules/core-js/internals/string-trim.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=l("./node_modules/core-js/internals/require-object-coercible.js"),m=l("./node_modules/core-js/internals/to-string.js"),N=l("./node_modules/core-js/internals/whitespaces.js"),w=g("".replace),E=RegExp("^["+N+"]+"),F=RegExp("(^|[^"+N+"])["+N+"]+$"),M=function(k){return function(K){var G=m(v(K));return k&1&&(G=w(G,E,"")),k&2&&(G=w(G,F,"$1")),G}};A.exports={start:M(1),end:M(2),trim:M(3)}}),"./node_modules/core-js/internals/symbol-constructor-detection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/environment-v8-version.js"),v=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/global-this.js"),N=m.String;A.exports=!!Object.getOwnPropertySymbols&&!v(function(){var w=Symbol("symbol detection");return!N(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&g&&g<41})}),"./node_modules/core-js/internals/symbol-define-to-primitive.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/well-known-symbol.js"),N=l("./node_modules/core-js/internals/define-built-in.js");A.exports=function(){var w=v("Symbol"),E=w&&w.prototype,F=E&&E.valueOf,M=m("toPrimitive");E&&!E[M]&&N(E,M,function(k){return g(F,this)},{arity:1})}}),"./node_modules/core-js/internals/symbol-registry-detection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/symbol-constructor-detection.js");A.exports=g&&!!Symbol.for&&!!Symbol.keyFor}),"./node_modules/core-js/internals/task.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/function-apply.js"),m=l("./node_modules/core-js/internals/function-bind-context.js"),N=l("./node_modules/core-js/internals/is-callable.js"),w=l("./node_modules/core-js/internals/has-own-property.js"),E=l("./node_modules/core-js/internals/fails.js"),F=l("./node_modules/core-js/internals/html.js"),M=l("./node_modules/core-js/internals/array-slice.js"),k=l("./node_modules/core-js/internals/document-create-element.js"),K=l("./node_modules/core-js/internals/validate-arguments-length.js"),G=l("./node_modules/core-js/internals/environment-is-ios.js"),ee=l("./node_modules/core-js/internals/environment-is-node.js"),V=g.setImmediate,X=g.clearImmediate,J=g.process,he=g.Dispatch,q=g.Function,ie=g.MessageChannel,Ae=g.String,ce=0,oe={},ne="onreadystatechange",re,se,je,De;E(function(){re=g.location});var ge=function(pe){if(w(oe,pe)){var Ce=oe[pe];delete oe[pe],Ce()}},Z=function(pe){return function(){ge(pe)}},fe=function(pe){ge(pe.data)},ue=function(pe){g.postMessage(Ae(pe),re.protocol+"//"+re.host)};(!V||!X)&&(V=function(Ce){K(arguments.length,1);var Ne=N(Ce)?Ce:q(Ce),ye=M(arguments,1);return oe[++ce]=function(){v(Ne,void 0,ye)},se(ce),ce},X=function(Ce){delete oe[Ce]},ee?se=function(pe){J.nextTick(Z(pe))}:he&&he.now?se=function(pe){he.now(Z(pe))}:ie&&!G?(je=new ie,De=je.port2,je.port1.onmessage=fe,se=m(De.postMessage,De)):g.addEventListener&&N(g.postMessage)&&!g.importScripts&&re&&re.protocol!=="file:"&&!E(ue)?(se=ue,g.addEventListener("message",fe,!1)):ne in k("script")?se=function(pe){F.appendChild(k("script"))[ne]=function(){F.removeChild(this),ge(pe)}}:se=function(pe){setTimeout(Z(pe),0)}),A.exports={set:V,clear:X}}),"./node_modules/core-js/internals/this-number-value.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=g(1.1.valueOf)}),"./node_modules/core-js/internals/to-absolute-index.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),v=Math.max,m=Math.min;A.exports=function(N,w){var E=g(N);return E<0?v(E+w,0):m(E,w)}}),"./node_modules/core-js/internals/to-indexed-object.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/indexed-object.js"),v=l("./node_modules/core-js/internals/require-object-coercible.js");A.exports=function(m){return g(v(m))}}),"./node_modules/core-js/internals/to-integer-or-infinity.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/math-trunc.js");A.exports=function(v){var m=+v;return m!==m||m===0?0:g(m)}}),"./node_modules/core-js/internals/to-length.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),v=Math.min;A.exports=function(m){var N=g(m);return N>0?v(N,9007199254740991):0}}),"./node_modules/core-js/internals/to-object.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/require-object-coercible.js"),v=Object;A.exports=function(m){return v(g(m))}}),"./node_modules/core-js/internals/to-primitive.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-call.js"),v=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/is-symbol.js"),N=l("./node_modules/core-js/internals/get-method.js"),w=l("./node_modules/core-js/internals/ordinary-to-primitive.js"),E=l("./node_modules/core-js/internals/well-known-symbol.js"),F=TypeError,M=E("toPrimitive");A.exports=function(k,K){if(!v(k)||m(k))return k;var G=N(k,M),ee;if(G){if(K===void 0&&(K="default"),ee=g(G,k,K),!v(ee)||m(ee))return ee;throw new F("Can't convert object to primitive value")}return K===void 0&&(K="number"),w(k,K)}}),"./node_modules/core-js/internals/to-property-key.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-primitive.js"),v=l("./node_modules/core-js/internals/is-symbol.js");A.exports=function(m){var N=g(m,"string");return v(N)?N:N+""}}),"./node_modules/core-js/internals/to-set-like.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/get-built-in.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/is-iterable.js"),N=l("./node_modules/core-js/internals/is-object.js"),w=g("Set"),E=function(F){return N(F)&&typeof F.size=="number"&&v(F.has)&&v(F.keys)};A.exports=function(F){return E(F)?F:m(F)?new w(F):F}}),"./node_modules/core-js/internals/to-string-tag-support.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/well-known-symbol.js"),v=g("toStringTag"),m={};m[v]="z",A.exports=String(m)==="[object z]"}),"./node_modules/core-js/internals/to-string.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/classof.js"),v=String;A.exports=function(m){if(g(m)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return v(m)}}),"./node_modules/core-js/internals/try-to-string.js":(function(A){var h=String;A.exports=function(l){try{return h(l)}catch{return"Object"}}}),"./node_modules/core-js/internals/uid.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-uncurry-this.js"),v=0,m=Math.random(),N=g(1.1.toString);A.exports=function(w){return"Symbol("+(w===void 0?"":w)+")_"+N(++v+m,36)}}),"./node_modules/core-js/internals/use-symbol-as-uid.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/symbol-constructor-detection.js");A.exports=g&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),"./node_modules/core-js/internals/v8-prototype-define-bug.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/fails.js");A.exports=g&&v(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),"./node_modules/core-js/internals/validate-arguments-length.js":(function(A){var h=TypeError;A.exports=function(l,g){if(l<g)throw new h("Not enough arguments");return l}}),"./node_modules/core-js/internals/weak-map-basic-detection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/is-callable.js"),m=g.WeakMap;A.exports=v(m)&&/native code/.test(String(m))}),"./node_modules/core-js/internals/well-known-symbol-define.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/path.js"),v=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),N=l("./node_modules/core-js/internals/object-define-property.js").f;A.exports=function(w){var E=g.Symbol||(g.Symbol={});v(E,w)||N(E,w,{value:m.f(w)})}}),"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/well-known-symbol.js");h.f=g}),"./node_modules/core-js/internals/well-known-symbol.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/shared.js"),m=l("./node_modules/core-js/internals/has-own-property.js"),N=l("./node_modules/core-js/internals/uid.js"),w=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),E=l("./node_modules/core-js/internals/use-symbol-as-uid.js"),F=g.Symbol,M=v("wks"),k=E?F.for||F:F&&F.withoutSetter||N;A.exports=function(K){return m(M,K)||(M[K]=w&&m(F,K)?F[K]:k("Symbol."+K)),M[K]}}),"./node_modules/core-js/internals/whitespaces.js":(function(A){A.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),"./node_modules/core-js/modules/es.array.concat.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/is-array.js"),N=l("./node_modules/core-js/internals/is-object.js"),w=l("./node_modules/core-js/internals/to-object.js"),E=l("./node_modules/core-js/internals/length-of-array-like.js"),F=l("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),M=l("./node_modules/core-js/internals/create-property.js"),k=l("./node_modules/core-js/internals/array-species-create.js"),K=l("./node_modules/core-js/internals/array-method-has-species-support.js"),G=l("./node_modules/core-js/internals/well-known-symbol.js"),ee=l("./node_modules/core-js/internals/environment-v8-version.js"),V=G("isConcatSpreadable"),X=ee>=51||!v(function(){var q=[];return q[V]=!1,q.concat()[0]!==q}),J=function(q){if(!N(q))return!1;var ie=q[V];return ie!==void 0?!!ie:m(q)},he=!X||!K("concat");g({target:"Array",proto:!0,arity:1,forced:he},{concat:function(ie){var Ae=w(this),ce=k(Ae,0),oe=0,ne,re,se,je,De;for(ne=-1,se=arguments.length;ne<se;ne++)if(De=ne===-1?Ae:arguments[ne],J(De))for(je=E(De),F(oe+je),re=0;re<je;re++,oe++)re in De&&M(ce,oe,De[re]);else F(oe+1),M(ce,oe++,De);return ce.length=oe,ce}})}),"./node_modules/core-js/modules/es.array.from.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/array-from.js"),m=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),N=!m(function(w){Array.from(w)});g({target:"Array",stat:!0,forced:N},{from:v})}),"./node_modules/core-js/modules/es.array.iterator.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-indexed-object.js"),v=l("./node_modules/core-js/internals/add-to-unscopables.js"),m=l("./node_modules/core-js/internals/iterators.js"),N=l("./node_modules/core-js/internals/internal-state.js"),w=l("./node_modules/core-js/internals/object-define-property.js").f,E=l("./node_modules/core-js/internals/iterator-define.js"),F=l("./node_modules/core-js/internals/create-iter-result-object.js"),M=l("./node_modules/core-js/internals/is-pure.js"),k=l("./node_modules/core-js/internals/descriptors.js"),K="Array Iterator",G=N.set,ee=N.getterFor(K);A.exports=E(Array,"Array",function(X,J){G(this,{type:K,target:g(X),index:0,kind:J})},function(){var X=ee(this),J=X.target,he=X.index++;if(!J||he>=J.length)return X.target=null,F(void 0,!0);switch(X.kind){case"keys":return F(he,!1);case"values":return F(J[he],!1)}return F([he,J[he]],!1)},"values");var V=m.Arguments=m.Array;if(v("keys"),v("values"),v("entries"),!M&&k&&V.name!=="values")try{w(V,"name",{value:"values"})}catch{}}),"./node_modules/core-js/modules/es.array.join.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/indexed-object.js"),N=l("./node_modules/core-js/internals/to-indexed-object.js"),w=l("./node_modules/core-js/internals/array-method-is-strict.js"),E=v([].join),F=m!==Object,M=F||!w("join",",");g({target:"Array",proto:!0,forced:M},{join:function(K){return E(N(this),K===void 0?",":K)}})}),"./node_modules/core-js/modules/es.array.map.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/array-iteration.js").map,m=l("./node_modules/core-js/internals/array-method-has-species-support.js"),N=m("map");g({target:"Array",proto:!0,forced:!N},{map:function(E){return v(this,E,arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.slice.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/is-array.js"),m=l("./node_modules/core-js/internals/is-constructor.js"),N=l("./node_modules/core-js/internals/is-object.js"),w=l("./node_modules/core-js/internals/to-absolute-index.js"),E=l("./node_modules/core-js/internals/length-of-array-like.js"),F=l("./node_modules/core-js/internals/to-indexed-object.js"),M=l("./node_modules/core-js/internals/create-property.js"),k=l("./node_modules/core-js/internals/well-known-symbol.js"),K=l("./node_modules/core-js/internals/array-method-has-species-support.js"),G=l("./node_modules/core-js/internals/array-slice.js"),ee=K("slice"),V=k("species"),X=Array,J=Math.max;g({target:"Array",proto:!0,forced:!ee},{slice:function(q,ie){var Ae=F(this),ce=E(Ae),oe=w(q,ce),ne=w(ie===void 0?ce:ie,ce),re,se,je;if(v(Ae)&&(re=Ae.constructor,m(re)&&(re===X||v(re.prototype))?re=void 0:N(re)&&(re=re[V],re===null&&(re=void 0)),re===X||re===void 0))return G(Ae,oe,ne);for(se=new(re===void 0?X:re)(J(ne-oe,0)),je=0;oe<ne;oe++,je++)oe in Ae&&M(se,je,Ae[oe]);return se.length=je,se}})}),"./node_modules/core-js/modules/es.function.name.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/descriptors.js"),v=l("./node_modules/core-js/internals/function-name.js").EXISTS,m=l("./node_modules/core-js/internals/function-uncurry-this.js"),N=l("./node_modules/core-js/internals/define-built-in-accessor.js"),w=Function.prototype,E=m(w.toString),F=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,M=m(F.exec),k="name";g&&!v&&N(w,k,{configurable:!0,get:function(){try{return M(F,E(this))[1]}catch{return""}}})}),"./node_modules/core-js/modules/es.iterator.constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/an-instance.js"),N=l("./node_modules/core-js/internals/an-object.js"),w=l("./node_modules/core-js/internals/is-callable.js"),E=l("./node_modules/core-js/internals/object-get-prototype-of.js"),F=l("./node_modules/core-js/internals/define-built-in-accessor.js"),M=l("./node_modules/core-js/internals/create-property.js"),k=l("./node_modules/core-js/internals/fails.js"),K=l("./node_modules/core-js/internals/has-own-property.js"),G=l("./node_modules/core-js/internals/well-known-symbol.js"),ee=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,V=l("./node_modules/core-js/internals/descriptors.js"),X=l("./node_modules/core-js/internals/is-pure.js"),J="constructor",he="Iterator",q=G("toStringTag"),ie=TypeError,Ae=v[he],ce=X||!w(Ae)||Ae.prototype!==ee||!k(function(){Ae({})}),oe=function(){if(m(this,ee),E(this)===ee)throw new ie("Abstract class Iterator not directly constructable")},ne=function(re,se){V?F(ee,re,{configurable:!0,get:function(){return se},set:function(je){if(N(this),this===ee)throw new ie("You can't redefine this property");K(this,re)?this[re]=je:M(this,re,je)}}):ee[re]=se};K(ee,q)||ne(q,he),(ce||!K(ee,J)||ee[J]===Object)&&ne(J,oe),oe.prototype=ee,g({global:!0,constructor:!0,forced:ce},{Iterator:oe})}),"./node_modules/core-js/modules/es.iterator.for-each.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/iterate.js"),N=l("./node_modules/core-js/internals/a-callable.js"),w=l("./node_modules/core-js/internals/an-object.js"),E=l("./node_modules/core-js/internals/get-iterator-direct.js"),F=l("./node_modules/core-js/internals/iterator-close.js"),M=l("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),k=M("forEach",TypeError);g({target:"Iterator",proto:!0,real:!0,forced:k},{forEach:function(G){w(this);try{N(G)}catch(X){F(this,"throw",X)}if(k)return v(k,this,G);var ee=E(this),V=0;m(ee,function(X){G(X,V++)},{IS_RECORD:!0})}})}),"./node_modules/core-js/modules/es.iterator.map.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/a-callable.js"),N=l("./node_modules/core-js/internals/an-object.js"),w=l("./node_modules/core-js/internals/get-iterator-direct.js"),E=l("./node_modules/core-js/internals/iterator-create-proxy.js"),F=l("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),M=l("./node_modules/core-js/internals/iterator-close.js"),k=l("./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js"),K=l("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),G=l("./node_modules/core-js/internals/is-pure.js"),ee=!G&&!k("map",function(){}),V=!G&&!ee&&K("map",TypeError),X=G||ee||V,J=E(function(){var he=this.iterator,q=N(v(this.next,he)),ie=this.done=!!q.done;if(!ie)return F(he,this.mapper,[q.value,this.counter++],!0)});g({target:"Iterator",proto:!0,real:!0,forced:X},{map:function(q){N(this);try{m(q)}catch(ie){M(this,"throw",ie)}return V?v(V,this,q):new J(w(this),{mapper:q})}})}),"./node_modules/core-js/modules/es.json.stringify.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/function-apply.js"),N=l("./node_modules/core-js/internals/function-call.js"),w=l("./node_modules/core-js/internals/function-uncurry-this.js"),E=l("./node_modules/core-js/internals/fails.js"),F=l("./node_modules/core-js/internals/is-callable.js"),M=l("./node_modules/core-js/internals/is-symbol.js"),k=l("./node_modules/core-js/internals/array-slice.js"),K=l("./node_modules/core-js/internals/get-json-replacer-function.js"),G=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),ee=String,V=v("JSON","stringify"),X=w(/./.exec),J=w("".charAt),he=w("".charCodeAt),q=w("".replace),ie=w(1.1.toString),Ae=/[\uD800-\uDFFF]/g,ce=/^[\uD800-\uDBFF]$/,oe=/^[\uDC00-\uDFFF]$/,ne=!G||E(function(){var De=v("Symbol")("stringify detection");return V([De])!=="[null]"||V({a:De})!=="{}"||V(Object(De))!=="{}"}),re=E(function(){return V("\uDF06\uD834")!=='"\\udf06\\ud834"'||V("\uDEAD")!=='"\\udead"'}),se=function(De,ge){var Z=k(arguments),fe=K(ge);if(!(!F(fe)&&(De===void 0||M(De))))return Z[1]=function(ue,pe){if(F(fe)&&(pe=N(fe,this,ee(ue),pe)),!M(pe))return pe},m(V,null,Z)},je=function(De,ge,Z){var fe=J(Z,ge-1),ue=J(Z,ge+1);return X(ce,De)&&!X(oe,ue)||X(oe,De)&&!X(ce,fe)?"\\u"+ie(he(De,0),16):De};V&&g({target:"JSON",stat:!0,arity:3,forced:ne||re},{stringify:function(ge,Z,fe){var ue=k(arguments),pe=m(ne?se:V,null,ue);return re&&typeof pe=="string"?q(pe,Ae,je):pe}})}),"./node_modules/core-js/modules/es.number.constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/is-pure.js"),m=l("./node_modules/core-js/internals/descriptors.js"),N=l("./node_modules/core-js/internals/global-this.js"),w=l("./node_modules/core-js/internals/path.js"),E=l("./node_modules/core-js/internals/function-uncurry-this.js"),F=l("./node_modules/core-js/internals/is-forced.js"),M=l("./node_modules/core-js/internals/has-own-property.js"),k=l("./node_modules/core-js/internals/inherit-if-required.js"),K=l("./node_modules/core-js/internals/object-is-prototype-of.js"),G=l("./node_modules/core-js/internals/is-symbol.js"),ee=l("./node_modules/core-js/internals/to-primitive.js"),V=l("./node_modules/core-js/internals/fails.js"),X=l("./node_modules/core-js/internals/object-get-own-property-names.js").f,J=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,he=l("./node_modules/core-js/internals/object-define-property.js").f,q=l("./node_modules/core-js/internals/this-number-value.js"),ie=l("./node_modules/core-js/internals/string-trim.js").trim,Ae="Number",ce=N[Ae],oe=w[Ae],ne=ce.prototype,re=N.TypeError,se=E("".slice),je=E("".charCodeAt),De=function(Ce){var Ne=ee(Ce,"number");return typeof Ne=="bigint"?Ne:ge(Ne)},ge=function(Ce){var Ne=ee(Ce,"number"),ye,we,Te,qe,ve,Ge,at,Se;if(G(Ne))throw new re("Cannot convert a Symbol value to a number");if(typeof Ne=="string"&&Ne.length>2){if(Ne=ie(Ne),ye=je(Ne,0),ye===43||ye===45){if(we=je(Ne,2),we===88||we===120)return NaN}else if(ye===48){switch(je(Ne,1)){case 66:case 98:Te=2,qe=49;break;case 79:case 111:Te=8,qe=55;break;default:return+Ne}for(ve=se(Ne,2),Ge=ve.length,at=0;at<Ge;at++)if(Se=je(ve,at),Se<48||Se>qe)return NaN;return parseInt(ve,Te)}}return+Ne},Z=F(Ae,!ce(" 0o1")||!ce("0b1")||ce("+0x1")),fe=function(Ce){return K(ne,Ce)&&V(function(){q(Ce)})},ue=function(Ne){var ye=arguments.length<1?0:ce(De(Ne));return fe(this)?k(Object(ye),this,ue):ye};ue.prototype=ne,Z&&!v&&(ne.constructor=ue),g({global:!0,constructor:!0,wrap:!0,forced:Z},{Number:ue});var pe=function(Ce,Ne){for(var ye=m?X(Ne):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),we=0,Te;ye.length>we;we++)M(Ne,Te=ye[we])&&!M(Ce,Te)&&he(Ce,Te,J(Ne,Te))};v&&oe&&pe(w[Ae],oe),(Z||v)&&pe(w[Ae],ce)}),"./node_modules/core-js/modules/es.object.assign.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/object-assign.js");g({target:"Object",stat:!0,arity:2,forced:Object.assign!==v},{assign:v})}),"./node_modules/core-js/modules/es.object.get-own-property-symbols.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),m=l("./node_modules/core-js/internals/fails.js"),N=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),w=l("./node_modules/core-js/internals/to-object.js"),E=!v||m(function(){N.f(1)});g({target:"Object",stat:!0,forced:E},{getOwnPropertySymbols:function(M){var k=N.f;return k?k(w(M)):[]}})}),"./node_modules/core-js/modules/es.object.keys.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/to-object.js"),m=l("./node_modules/core-js/internals/object-keys.js"),N=l("./node_modules/core-js/internals/fails.js"),w=N(function(){m(1)});g({target:"Object",stat:!0,forced:w},{keys:function(F){return m(v(F))}})}),"./node_modules/core-js/modules/es.object.to-string.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/to-string-tag-support.js"),v=l("./node_modules/core-js/internals/define-built-in.js"),m=l("./node_modules/core-js/internals/object-to-string.js");g||v(Object.prototype,"toString",m,{unsafe:!0})}),"./node_modules/core-js/modules/es.promise.all.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/a-callable.js"),N=l("./node_modules/core-js/internals/new-promise-capability.js"),w=l("./node_modules/core-js/internals/perform.js"),E=l("./node_modules/core-js/internals/iterate.js"),F=l("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");g({target:"Promise",stat:!0,forced:F},{all:function(k){var K=this,G=N.f(K),ee=G.resolve,V=G.reject,X=w(function(){var J=m(K.resolve),he=[],q=0,ie=1;E(k,function(Ae){var ce=q++,oe=!1;ie++,v(J,K,Ae).then(function(ne){oe||(oe=!0,he[ce]=ne,--ie||ee(he))},V)}),--ie||ee(he)});return X.error&&V(X.value),G.promise}})}),"./node_modules/core-js/modules/es.promise.catch.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/is-pure.js"),m=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,N=l("./node_modules/core-js/internals/promise-native-constructor.js"),w=l("./node_modules/core-js/internals/get-built-in.js"),E=l("./node_modules/core-js/internals/is-callable.js"),F=l("./node_modules/core-js/internals/define-built-in.js"),M=N&&N.prototype;if(g({target:"Promise",proto:!0,forced:m,real:!0},{catch:function(K){return this.then(void 0,K)}}),!v&&E(N)){var k=w("Promise").prototype.catch;M.catch!==k&&F(M,"catch",k,{unsafe:!0})}}),"./node_modules/core-js/modules/es.promise.constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/is-pure.js"),m=l("./node_modules/core-js/internals/environment-is-node.js"),N=l("./node_modules/core-js/internals/global-this.js"),w=l("./node_modules/core-js/internals/path.js"),E=l("./node_modules/core-js/internals/function-call.js"),F=l("./node_modules/core-js/internals/define-built-in.js"),M=l("./node_modules/core-js/internals/object-set-prototype-of.js"),k=l("./node_modules/core-js/internals/set-to-string-tag.js"),K=l("./node_modules/core-js/internals/set-species.js"),G=l("./node_modules/core-js/internals/a-callable.js"),ee=l("./node_modules/core-js/internals/is-callable.js"),V=l("./node_modules/core-js/internals/is-object.js"),X=l("./node_modules/core-js/internals/an-instance.js"),J=l("./node_modules/core-js/internals/species-constructor.js"),he=l("./node_modules/core-js/internals/task.js").set,q=l("./node_modules/core-js/internals/microtask.js"),ie=l("./node_modules/core-js/internals/host-report-errors.js"),Ae=l("./node_modules/core-js/internals/perform.js"),ce=l("./node_modules/core-js/internals/queue.js"),oe=l("./node_modules/core-js/internals/internal-state.js"),ne=l("./node_modules/core-js/internals/promise-native-constructor.js"),re=l("./node_modules/core-js/internals/promise-constructor-detection.js"),se=l("./node_modules/core-js/internals/new-promise-capability.js"),je="Promise",De=re.CONSTRUCTOR,ge=re.REJECTION_EVENT,Z=re.SUBCLASSING,fe=oe.getterFor(je),ue=oe.set,pe=ne&&ne.prototype,Ce=ne,Ne=pe,ye=N.TypeError,we=N.document,Te=N.process,qe=se.f,ve=qe,Ge=!!(we&&we.createEvent&&N.dispatchEvent),at="unhandledrejection",Se="rejectionhandled",vt=0,ht=1,pt=2,Ze=1,Ht=2,At,Ct,It,Wt,Es=function(dt){var qt;return V(dt)&&ee(qt=dt.then)?qt:!1},Ss=function(dt,qt){var Vt=qt.value,vs=qt.state===ht,ns=vs?dt.ok:dt.fail,js=dt.resolve,ln=dt.reject,ys=dt.domain,gt,Dt,xt;try{ns?(vs||(qt.rejection===Ht&&tt(qt),qt.rejection=Ze),ns===!0?gt=Vt:(ys&&ys.enter(),gt=ns(Vt),ys&&(ys.exit(),xt=!0)),gt===dt.promise?ln(new ye("Promise-chain cycle")):(Dt=Es(gt))?E(Dt,gt,js,ln):js(gt)):ln(Vt)}catch(rs){ys&&!xt&&ys.exit(),ln(rs)}},_s=function(dt,qt){dt.notified||(dt.notified=!0,q(function(){for(var Vt=dt.reactions,vs;vs=Vt.get();)Ss(vs,dt);dt.notified=!1,qt&&!dt.rejection&&ke(dt)}))},$e=function(dt,qt,Vt){var vs,ns;Ge?(vs=we.createEvent("Event"),vs.promise=qt,vs.reason=Vt,vs.initEvent(dt,!1,!0),N.dispatchEvent(vs)):vs={promise:qt,reason:Vt},!ge&&(ns=N["on"+dt])?ns(vs):dt===at&&ie("Unhandled promise rejection",Vt)},ke=function(dt){E(he,N,function(){var qt=dt.facade,Vt=dt.value,vs=it(dt),ns;if(vs&&(ns=Ae(function(){m?Te.emit("unhandledRejection",Vt,qt):$e(at,qt,Vt)}),dt.rejection=m||it(dt)?Ht:Ze,ns.error))throw ns.value})},it=function(dt){return dt.rejection!==Ze&&!dt.parent},tt=function(dt){E(he,N,function(){var qt=dt.facade;m?Te.emit("rejectionHandled",qt):$e(Se,qt,dt.value)})},Jt=function(dt,qt,Vt){return function(vs){dt(qt,vs,Vt)}},Qt=function(dt,qt,Vt){dt.done||(dt.done=!0,Vt&&(dt=Vt),dt.value=qt,dt.state=pt,_s(dt,!0))},ss=function(dt,qt,Vt){if(!dt.done){dt.done=!0,Vt&&(dt=Vt);try{if(dt.facade===qt)throw new ye("Promise can't be resolved itself");var vs=Es(qt);vs?q(function(){var ns={done:!1};try{E(vs,qt,Jt(ss,ns,dt),Jt(Qt,ns,dt))}catch(js){Qt(ns,js,dt)}}):(dt.value=qt,dt.state=ht,_s(dt,!1))}catch(ns){Qt({done:!1},ns,dt)}}};if(De&&(Ce=function(qt){X(this,Ne),G(qt),E(At,this);var Vt=fe(this);try{qt(Jt(ss,Vt),Jt(Qt,Vt))}catch(vs){Qt(Vt,vs)}},Ne=Ce.prototype,At=function(qt){ue(this,{type:je,done:!1,notified:!1,parent:!1,reactions:new ce,rejection:!1,state:vt,value:null})},At.prototype=F(Ne,"then",function(qt,Vt){var vs=fe(this),ns=qe(J(this,Ce));return vs.parent=!0,ns.ok=ee(qt)?qt:!0,ns.fail=ee(Vt)&&Vt,ns.domain=m?Te.domain:void 0,vs.state===vt?vs.reactions.add(ns):q(function(){Ss(ns,vs)}),ns.promise}),Ct=function(){var dt=new At,qt=fe(dt);this.promise=dt,this.resolve=Jt(ss,qt),this.reject=Jt(Qt,qt)},se.f=qe=function(dt){return dt===Ce||dt===It?new Ct(dt):ve(dt)},!v&&ee(ne)&&pe!==Object.prototype)){Wt=pe.then,Z||F(pe,"then",function(qt,Vt){var vs=this;return new Ce(function(ns,js){E(Wt,vs,ns,js)}).then(qt,Vt)},{unsafe:!0});try{delete pe.constructor}catch{}M&&M(pe,Ne)}g({global:!0,constructor:!0,wrap:!0,forced:De},{Promise:Ce}),It=w.Promise,k(Ce,je,!1,!0),K(je)}),"./node_modules/core-js/modules/es.promise.js":(function(A,h,l){l("./node_modules/core-js/modules/es.promise.constructor.js"),l("./node_modules/core-js/modules/es.promise.all.js"),l("./node_modules/core-js/modules/es.promise.catch.js"),l("./node_modules/core-js/modules/es.promise.race.js"),l("./node_modules/core-js/modules/es.promise.reject.js"),l("./node_modules/core-js/modules/es.promise.resolve.js")}),"./node_modules/core-js/modules/es.promise.race.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/a-callable.js"),N=l("./node_modules/core-js/internals/new-promise-capability.js"),w=l("./node_modules/core-js/internals/perform.js"),E=l("./node_modules/core-js/internals/iterate.js"),F=l("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");g({target:"Promise",stat:!0,forced:F},{race:function(k){var K=this,G=N.f(K),ee=G.reject,V=w(function(){var X=m(K.resolve);E(k,function(J){v(X,K,J).then(G.resolve,ee)})});return V.error&&ee(V.value),G.promise}})}),"./node_modules/core-js/modules/es.promise.reject.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/new-promise-capability.js"),m=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;g({target:"Promise",stat:!0,forced:m},{reject:function(w){var E=v.f(this),F=E.reject;return F(w),E.promise}})}),"./node_modules/core-js/modules/es.promise.resolve.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/is-pure.js"),N=l("./node_modules/core-js/internals/promise-native-constructor.js"),w=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,E=l("./node_modules/core-js/internals/promise-resolve.js"),F=v("Promise"),M=m&&!w;g({target:"Promise",stat:!0,forced:m||w},{resolve:function(K){return E(M&&this===F?N:this,K)}})}),"./node_modules/core-js/modules/es.regexp.exec.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/regexp-exec.js");g({target:"RegExp",proto:!0,forced:/./.exec!==v},{exec:v})}),"./node_modules/core-js/modules/es.regexp.test.js":(function(A,h,l){l("./node_modules/core-js/modules/es.regexp.exec.js");var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/is-callable.js"),N=l("./node_modules/core-js/internals/an-object.js"),w=l("./node_modules/core-js/internals/to-string.js"),E=(function(){var M=!1,k=/[ac]/;return k.exec=function(){return M=!0,/./.exec.apply(this,arguments)},k.test("abc")===!0&&M})(),F=/./.test;g({target:"RegExp",proto:!0,forced:!E},{test:function(M){var k=N(this),K=w(M),G=k.exec;if(!m(G))return v(F,k,K);var ee=v(G,k,K);return ee===null?!1:(N(ee),!0)}})}),"./node_modules/core-js/modules/es.regexp.to-string.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/function-name.js").PROPER,v=l("./node_modules/core-js/internals/define-built-in.js"),m=l("./node_modules/core-js/internals/an-object.js"),N=l("./node_modules/core-js/internals/to-string.js"),w=l("./node_modules/core-js/internals/fails.js"),E=l("./node_modules/core-js/internals/regexp-get-flags.js"),F="toString",M=RegExp.prototype,k=M[F],K=w(function(){return k.call({source:"a",flags:"b"})!=="/a/b"}),G=g&&k.name!==F;(K||G)&&v(M,F,function(){var V=m(this),X=N(V.source),J=N(E(V));return"/"+X+"/"+J},{unsafe:!0})}),"./node_modules/core-js/modules/es.set.constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/collection.js"),v=l("./node_modules/core-js/internals/collection-strong.js");g("Set",function(m){return function(){return m(this,arguments.length?arguments[0]:void 0)}},v)}),"./node_modules/core-js/modules/es.set.js":(function(A,h,l){l("./node_modules/core-js/modules/es.set.constructor.js")}),"./node_modules/core-js/modules/es.string.iterator.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/string-multibyte.js").charAt,v=l("./node_modules/core-js/internals/to-string.js"),m=l("./node_modules/core-js/internals/internal-state.js"),N=l("./node_modules/core-js/internals/iterator-define.js"),w=l("./node_modules/core-js/internals/create-iter-result-object.js"),E="String Iterator",F=m.set,M=m.getterFor(E);N(String,"String",function(k){F(this,{type:E,string:v(k),index:0})},function(){var K=M(this),G=K.string,ee=K.index,V;return ee>=G.length?w(void 0,!0):(V=g(G,ee),K.index+=V.length,w(V,!1))})}),"./node_modules/core-js/modules/es.string.link.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/create-html.js"),m=l("./node_modules/core-js/internals/string-html-forced.js");g({target:"String",proto:!0,forced:m("link")},{link:function(w){return v(this,"a","href",w)}})}),"./node_modules/core-js/modules/es.symbol.constructor.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/function-call.js"),N=l("./node_modules/core-js/internals/function-uncurry-this.js"),w=l("./node_modules/core-js/internals/is-pure.js"),E=l("./node_modules/core-js/internals/descriptors.js"),F=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),M=l("./node_modules/core-js/internals/fails.js"),k=l("./node_modules/core-js/internals/has-own-property.js"),K=l("./node_modules/core-js/internals/object-is-prototype-of.js"),G=l("./node_modules/core-js/internals/an-object.js"),ee=l("./node_modules/core-js/internals/to-indexed-object.js"),V=l("./node_modules/core-js/internals/to-property-key.js"),X=l("./node_modules/core-js/internals/to-string.js"),J=l("./node_modules/core-js/internals/create-property-descriptor.js"),he=l("./node_modules/core-js/internals/object-create.js"),q=l("./node_modules/core-js/internals/object-keys.js"),ie=l("./node_modules/core-js/internals/object-get-own-property-names.js"),Ae=l("./node_modules/core-js/internals/object-get-own-property-names-external.js"),ce=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),oe=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),ne=l("./node_modules/core-js/internals/object-define-property.js"),re=l("./node_modules/core-js/internals/object-define-properties.js"),se=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),je=l("./node_modules/core-js/internals/define-built-in.js"),De=l("./node_modules/core-js/internals/define-built-in-accessor.js"),ge=l("./node_modules/core-js/internals/shared.js"),Z=l("./node_modules/core-js/internals/shared-key.js"),fe=l("./node_modules/core-js/internals/hidden-keys.js"),ue=l("./node_modules/core-js/internals/uid.js"),pe=l("./node_modules/core-js/internals/well-known-symbol.js"),Ce=l("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Ne=l("./node_modules/core-js/internals/well-known-symbol-define.js"),ye=l("./node_modules/core-js/internals/symbol-define-to-primitive.js"),we=l("./node_modules/core-js/internals/set-to-string-tag.js"),Te=l("./node_modules/core-js/internals/internal-state.js"),qe=l("./node_modules/core-js/internals/array-iteration.js").forEach,ve=Z("hidden"),Ge="Symbol",at="prototype",Se=Te.set,vt=Te.getterFor(Ge),ht=Object[at],pt=v.Symbol,Ze=pt&&pt[at],Ht=v.RangeError,At=v.TypeError,Ct=v.QObject,It=oe.f,Wt=ne.f,Es=Ae.f,Ss=se.f,_s=N([].push),$e=ge("symbols"),ke=ge("op-symbols"),it=ge("wks"),tt=!Ct||!Ct[at]||!Ct[at].findChild,Jt=function(ys,gt,Dt){var xt=It(ht,gt);xt&&delete ht[gt],Wt(ys,gt,Dt),xt&&ys!==ht&&Wt(ht,gt,xt)},Qt=E&&M(function(){return he(Wt({},"a",{get:function(){return Wt(this,"a",{value:7}).a}})).a!==7})?Jt:Wt,ss=function(ys,gt){var Dt=$e[ys]=he(Ze);return Se(Dt,{type:Ge,tag:ys,description:gt}),E||(Dt.description=gt),Dt},dt=function(gt,Dt,xt){gt===ht&&dt(ke,Dt,xt),G(gt);var rs=V(Dt);return G(xt),k($e,rs)?(xt.enumerable?(k(gt,ve)&&gt[ve][rs]&&(gt[ve][rs]=!1),xt=he(xt,{enumerable:J(0,!1)})):(k(gt,ve)||Wt(gt,ve,J(1,he(null))),gt[ve][rs]=!0),Qt(gt,rs,xt)):Wt(gt,rs,xt)},qt=function(gt,Dt){G(gt);var xt=ee(Dt),rs=q(xt).concat(ln(xt));return qe(rs,function(ps){(!E||m(vs,xt,ps))&&dt(gt,ps,xt[ps])}),gt},Vt=function(gt,Dt){return Dt===void 0?he(gt):qt(he(gt),Dt)},vs=function(gt){var Dt=V(gt),xt=m(Ss,this,Dt);return this===ht&&k($e,Dt)&&!k(ke,Dt)?!1:xt||!k(this,Dt)||!k($e,Dt)||k(this,ve)&&this[ve][Dt]?xt:!0},ns=function(gt,Dt){var xt=ee(gt),rs=V(Dt);if(!(xt===ht&&k($e,rs)&&!k(ke,rs))){var ps=It(xt,rs);return ps&&k($e,rs)&&!(k(xt,ve)&&xt[ve][rs])&&(ps.enumerable=!0),ps}},js=function(gt){var Dt=Es(ee(gt)),xt=[];return qe(Dt,function(rs){!k($e,rs)&&!k(fe,rs)&&_s(xt,rs)}),xt},ln=function(ys){var gt=ys===ht,Dt=Es(gt?ke:ee(ys)),xt=[];return qe(Dt,function(rs){k($e,rs)&&(!gt||k(ht,rs))&&_s(xt,$e[rs])}),xt};F||(pt=function(){if(K(Ze,this))throw new At("Symbol is not a constructor");var gt=!arguments.length||arguments[0]===void 0?void 0:X(arguments[0]),Dt=ue(gt),xt=function(rs){var ps=this===void 0?v:this;ps===ht&&m(xt,ke,rs),k(ps,ve)&&k(ps[ve],Dt)&&(ps[ve][Dt]=!1);var yn=J(1,rs);try{Qt(ps,Dt,yn)}catch(is){if(!(is instanceof Ht))throw is;Jt(ps,Dt,yn)}};return E&&tt&&Qt(ht,Dt,{configurable:!0,set:xt}),ss(Dt,gt)},Ze=pt[at],je(Ze,"toString",function(){return vt(this).tag}),je(pt,"withoutSetter",function(ys){return ss(ue(ys),ys)}),se.f=vs,ne.f=dt,re.f=qt,oe.f=ns,ie.f=Ae.f=js,ce.f=ln,Ce.f=function(ys){return ss(pe(ys),ys)},E&&(De(Ze,"description",{configurable:!0,get:function(){return vt(this).description}}),w||je(ht,"propertyIsEnumerable",vs,{unsafe:!0}))),g({global:!0,constructor:!0,wrap:!0,forced:!F,sham:!F},{Symbol:pt}),qe(q(it),function(ys){Ne(ys)}),g({target:Ge,stat:!0,forced:!F},{useSetter:function(){tt=!0},useSimple:function(){tt=!1}}),g({target:"Object",stat:!0,forced:!F,sham:!E},{create:Vt,defineProperty:dt,defineProperties:qt,getOwnPropertyDescriptor:ns}),g({target:"Object",stat:!0,forced:!F},{getOwnPropertyNames:js}),ye(),we(pt,Ge),fe[ve]=!0}),"./node_modules/core-js/modules/es.symbol.description.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/descriptors.js"),m=l("./node_modules/core-js/internals/global-this.js"),N=l("./node_modules/core-js/internals/function-uncurry-this.js"),w=l("./node_modules/core-js/internals/has-own-property.js"),E=l("./node_modules/core-js/internals/is-callable.js"),F=l("./node_modules/core-js/internals/object-is-prototype-of.js"),M=l("./node_modules/core-js/internals/to-string.js"),k=l("./node_modules/core-js/internals/define-built-in-accessor.js"),K=l("./node_modules/core-js/internals/copy-constructor-properties.js"),G=m.Symbol,ee=G&&G.prototype;if(v&&E(G)&&(!("description"in ee)||G().description!==void 0)){var V={},X=function(){var ne=arguments.length<1||arguments[0]===void 0?void 0:M(arguments[0]),re=F(ee,this)?new G(ne):ne===void 0?G():G(ne);return ne===""&&(V[re]=!0),re};K(X,G),X.prototype=ee,ee.constructor=X;var J=String(G("description detection"))==="Symbol(description detection)",he=N(ee.valueOf),q=N(ee.toString),ie=/^Symbol\((.*)\)[^)]+$/,Ae=N("".replace),ce=N("".slice);k(ee,"description",{configurable:!0,get:function(){var ne=he(this);if(w(V,ne))return"";var re=q(ne),se=J?ce(re,7,-1):Ae(re,ie,"$1");return se===""?void 0:se}}),g({global:!0,constructor:!0,forced:!0},{Symbol:X})}}),"./node_modules/core-js/modules/es.symbol.for.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/has-own-property.js"),N=l("./node_modules/core-js/internals/to-string.js"),w=l("./node_modules/core-js/internals/shared.js"),E=l("./node_modules/core-js/internals/symbol-registry-detection.js"),F=w("string-to-symbol-registry"),M=w("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!E},{for:function(k){var K=N(k);if(m(F,K))return F[K];var G=v("Symbol")(K);return F[K]=G,M[G]=K,G}})}),"./node_modules/core-js/modules/es.symbol.iterator.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/well-known-symbol-define.js");g("iterator")}),"./node_modules/core-js/modules/es.symbol.js":(function(A,h,l){l("./node_modules/core-js/modules/es.symbol.constructor.js"),l("./node_modules/core-js/modules/es.symbol.for.js"),l("./node_modules/core-js/modules/es.symbol.key-for.js"),l("./node_modules/core-js/modules/es.json.stringify.js"),l("./node_modules/core-js/modules/es.object.get-own-property-symbols.js")}),"./node_modules/core-js/modules/es.symbol.key-for.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/is-symbol.js"),N=l("./node_modules/core-js/internals/try-to-string.js"),w=l("./node_modules/core-js/internals/shared.js"),E=l("./node_modules/core-js/internals/symbol-registry-detection.js"),F=w("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!E},{keyFor:function(k){if(!m(k))throw new TypeError(N(k)+" is not a symbol");if(v(F,k))return F[k]}})}),"./node_modules/core-js/modules/esnext.iterator.constructor.js":(function(A,h,l){l("./node_modules/core-js/modules/es.iterator.constructor.js")}),"./node_modules/core-js/modules/esnext.iterator.for-each.js":(function(A,h,l){l("./node_modules/core-js/modules/es.iterator.for-each.js")}),"./node_modules/core-js/modules/esnext.iterator.map.js":(function(A,h,l){l("./node_modules/core-js/modules/es.iterator.map.js")}),"./node_modules/core-js/modules/esnext.set.add-all.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/a-set.js"),m=l("./node_modules/core-js/internals/set-helpers.js").add;g({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var w=v(this),E=0,F=arguments.length;E<F;E++)m(w,arguments[E]);return w}})}),"./node_modules/core-js/modules/esnext.set.delete-all.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/a-set.js"),m=l("./node_modules/core-js/internals/set-helpers.js").remove;g({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var w=v(this),E=!0,F,M=0,k=arguments.length;M<k;M++)F=m(w,arguments[M]),E=E&&F;return!!E}})}),"./node_modules/core-js/modules/esnext.set.difference.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),N=l("./node_modules/core-js/internals/set-difference.js");g({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(E){return v(N,this,m(E))}})}),"./node_modules/core-js/modules/esnext.set.every.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),N=l("./node_modules/core-js/internals/set-iterate.js");g({target:"Set",proto:!0,real:!0,forced:!0},{every:function(E){var F=m(this),M=v(E,arguments.length>1?arguments[1]:void 0);return N(F,function(k){if(!M(k,k,F))return!1},!0)!==!1}})}),"./node_modules/core-js/modules/esnext.set.filter.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),N=l("./node_modules/core-js/internals/set-helpers.js"),w=l("./node_modules/core-js/internals/set-iterate.js"),E=N.Set,F=N.add;g({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(k){var K=m(this),G=v(k,arguments.length>1?arguments[1]:void 0),ee=new E;return w(K,function(V){G(V,V,K)&&F(ee,V)}),ee}})}),"./node_modules/core-js/modules/esnext.set.find.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),N=l("./node_modules/core-js/internals/set-iterate.js");g({target:"Set",proto:!0,real:!0,forced:!0},{find:function(E){var F=m(this),M=v(E,arguments.length>1?arguments[1]:void 0),k=N(F,function(K){if(M(K,K,F))return{value:K}},!0);return k&&k.value}})}),"./node_modules/core-js/modules/esnext.set.intersection.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),N=l("./node_modules/core-js/internals/set-intersection.js");g({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(E){return v(N,this,m(E))}})}),"./node_modules/core-js/modules/esnext.set.is-disjoint-from.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),N=l("./node_modules/core-js/internals/set-is-disjoint-from.js");g({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(E){return v(N,this,m(E))}})}),"./node_modules/core-js/modules/esnext.set.is-subset-of.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),N=l("./node_modules/core-js/internals/set-is-subset-of.js");g({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(E){return v(N,this,m(E))}})}),"./node_modules/core-js/modules/esnext.set.is-superset-of.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),N=l("./node_modules/core-js/internals/set-is-superset-of.js");g({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(E){return v(N,this,m(E))}})}),"./node_modules/core-js/modules/esnext.set.join.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/a-set.js"),N=l("./node_modules/core-js/internals/set-iterate.js"),w=l("./node_modules/core-js/internals/to-string.js"),E=v([].join),F=v([].push);g({target:"Set",proto:!0,real:!0,forced:!0},{join:function(k){var K=m(this),G=k===void 0?",":w(k),ee=[];return N(K,function(V){F(ee,V)}),E(ee,G)}})}),"./node_modules/core-js/modules/esnext.set.map.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),N=l("./node_modules/core-js/internals/set-helpers.js"),w=l("./node_modules/core-js/internals/set-iterate.js"),E=N.Set,F=N.add;g({target:"Set",proto:!0,real:!0,forced:!0},{map:function(k){var K=m(this),G=v(k,arguments.length>1?arguments[1]:void 0),ee=new E;return w(K,function(V){F(ee,G(V,V,K))}),ee}})}),"./node_modules/core-js/modules/esnext.set.reduce.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/a-callable.js"),m=l("./node_modules/core-js/internals/a-set.js"),N=l("./node_modules/core-js/internals/set-iterate.js"),w=TypeError;g({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(F){var M=m(this),k=arguments.length<2,K=k?void 0:arguments[1];if(v(F),N(M,function(G){k?(k=!1,K=G):K=F(K,G,G,M)}),k)throw new w("Reduce of empty set with no initial value");return K}})}),"./node_modules/core-js/modules/esnext.set.some.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),N=l("./node_modules/core-js/internals/set-iterate.js");g({target:"Set",proto:!0,real:!0,forced:!0},{some:function(E){var F=m(this),M=v(E,arguments.length>1?arguments[1]:void 0);return N(F,function(k){if(M(k,k,F))return!0},!0)===!0}})}),"./node_modules/core-js/modules/esnext.set.symmetric-difference.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),N=l("./node_modules/core-js/internals/set-symmetric-difference.js");g({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(E){return v(N,this,m(E))}})}),"./node_modules/core-js/modules/esnext.set.union.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),N=l("./node_modules/core-js/internals/set-union.js");g({target:"Set",proto:!0,real:!0,forced:!0},{union:function(E){return v(N,this,m(E))}})}),"./node_modules/core-js/modules/web.dom-collections.for-each.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/dom-iterables.js"),m=l("./node_modules/core-js/internals/dom-token-list-prototype.js"),N=l("./node_modules/core-js/internals/array-for-each.js"),w=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),E=function(M){if(M&&M.forEach!==N)try{w(M,"forEach",N)}catch{M.forEach=N}};for(var F in v)v[F]&&E(g[F]&&g[F].prototype);E(m)}),"./node_modules/core-js/modules/web.dom-collections.iterator.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/global-this.js"),v=l("./node_modules/core-js/internals/dom-iterables.js"),m=l("./node_modules/core-js/internals/dom-token-list-prototype.js"),N=l("./node_modules/core-js/modules/es.array.iterator.js"),w=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),E=l("./node_modules/core-js/internals/set-to-string-tag.js"),F=l("./node_modules/core-js/internals/well-known-symbol.js"),M=F("iterator"),k=N.values,K=function(ee,V){if(ee){if(ee[M]!==k)try{w(ee,M,k)}catch{ee[M]=k}if(E(ee,V,!0),v[V]){for(var X in N)if(ee[X]!==N[X])try{w(ee,X,N[X])}catch{ee[X]=N[X]}}}};for(var G in v)K(g[G]&&g[G].prototype,G);K(m,"DOMTokenList")}),"./node_modules/core-js/modules/web.set-interval.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/schedulers-fix.js"),N=m(v.setInterval,!0);g({global:!0,bind:!0,forced:v.setInterval!==N},{setInterval:N})}),"./node_modules/core-js/modules/web.set-timeout.js":(function(A,h,l){var g=l("./node_modules/core-js/internals/export.js"),v=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/schedulers-fix.js"),N=m(v.setTimeout,!0);g({global:!0,bind:!0,forced:v.setTimeout!==N},{setTimeout:N})}),"./node_modules/core-js/modules/web.timers.js":(function(A,h,l){l("./node_modules/core-js/modules/web.set-interval.js"),l("./node_modules/core-js/modules/web.set-timeout.js")}),"./src/plugin/hyperlinks.js":(function(A,h,l){l.r(h),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.link.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js");var g=l("./src/worker.js"),v=l("./src/utils.js"),m=[],N={toContainer:g.default.prototype.toContainer,toPdf:g.default.prototype.toPdf};g.default.prototype.toContainer=function(){return N.toContainer.call(this).then(function(){if(this.opt.enableLinks){var F=this.prop.container,M=F.querySelectorAll("a"),k=(0,v.unitConvert)(F.getBoundingClientRect(),this.prop.pageSize.k);m=[],Array.prototype.forEach.call(M,function(K){for(var G=K.getClientRects(),ee=0;ee<G.length;ee++){var V=(0,v.unitConvert)(G[ee],this.prop.pageSize.k);V.left-=k.left,V.top-=k.top;var X=Math.floor(V.top/this.prop.pageSize.inner.height)+1,J=this.opt.margin[0]+V.top%this.prop.pageSize.inner.height,he=this.opt.margin[1]+V.left;m.push({page:X,top:J,left:he,clientRect:V,link:K})}},this)}})},g.default.prototype.toPdf=function(){return N.toPdf.call(this).then(function(){if(this.opt.enableLinks){m.forEach(function(M){this.prop.pdf.setPage(M.page),this.prop.pdf.link(M.left,M.top,M.clientRect.width,M.clientRect.height,{url:M.link.href})},this);var F=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(F)}})}}),"./src/plugin/jspdf-plugin.js":(function(A,h,l){l.r(h),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");var g=l("jspdf");function v(m){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},v(m)}g.jsPDF.getPageSize=function(m,N,w){if(v(m)==="object"){var E=m;m=E.orientation,N=E.unit||N,w=E.format||w}N=N||"mm",w=w||"a4",m=(""+(m||"P")).toLowerCase();var F=(""+w).toLowerCase(),M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(N){case"pt":var k=1;break;case"mm":var k=72/25.4;break;case"cm":var k=72/2.54;break;case"in":var k=72;break;case"px":var k=72/96;break;case"pc":var k=12;break;case"em":var k=12;break;case"ex":var k=6;break;default:throw"Invalid unit: "+N}if(M.hasOwnProperty(F))var K=M[F][1]/k,G=M[F][0]/k;else try{var K=w[1],G=w[0]}catch{throw new Error("Invalid format: "+w)}if(m==="p"||m==="portrait"){if(m="p",G>K){var ee=G;G=K,K=ee}}else if(m==="l"||m==="landscape"){if(m="l",K>G){var ee=G;G=K,K=ee}}else throw"Invalid orientation: "+m;var V={width:G,height:K,unit:N,k};return V},h.default=g.jsPDF}),"./src/plugin/pagebreaks.js":(function(A,h,l){l.r(h),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.join.js"),l("./node_modules/core-js/modules/es.array.slice.js"),l("./node_modules/core-js/modules/es.object.keys.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js");var g=l("./src/worker.js"),v=l("./src/utils.js"),m={toContainer:g.default.prototype.toContainer};g.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},g.default.prototype.toContainer=function(){return m.toContainer.call(this).then(function(){var E=this.prop.container,F=this.prop.pageSize.inner.px.height,M=[].concat(this.opt.pagebreak.mode),k={avoidAll:M.indexOf("avoid-all")!==-1,css:M.indexOf("css")!==-1,legacy:M.indexOf("legacy")!==-1},K={},G=this;["before","after","avoid"].forEach(function(X){var J=k.avoidAll&&X==="avoid";K[X]=J?[]:[].concat(G.opt.pagebreak[X]||[]),K[X].length>0&&(K[X]=Array.prototype.slice.call(E.querySelectorAll(K[X].join(", "))))});var ee=E.querySelectorAll(".html2pdf__page-break");ee=Array.prototype.slice.call(ee);var V=E.querySelectorAll("*");Array.prototype.forEach.call(V,function(J){var he={before:!1,after:k.legacy&&ee.indexOf(J)!==-1,avoid:k.avoidAll};if(k.css){var q=window.getComputedStyle(J),ie=["always","page","left","right"],Ae=["avoid","avoid-page"];he={before:he.before||ie.indexOf(q.breakBefore||q.pageBreakBefore)!==-1,after:he.after||ie.indexOf(q.breakAfter||q.pageBreakAfter)!==-1,avoid:he.avoid||Ae.indexOf(q.breakInside||q.pageBreakInside)!==-1}}Object.keys(he).forEach(function(je){he[je]=he[je]||K[je].indexOf(J)!==-1});var ce=J.getBoundingClientRect();if(he.avoid&&!he.before){var oe=Math.floor(ce.top/F),ne=Math.floor(ce.bottom/F),re=Math.abs(ce.bottom-ce.top)/F;ne!==oe&&re<=1&&(he.before=!0)}if(he.before){var se=(0,v.createElement)("div",{style:{display:"block",height:F-ce.top%F+"px"}});J.parentNode.insertBefore(se,J)}if(he.after){var se=(0,v.createElement)("div",{style:{display:"block",height:F-ce.bottom%F+"px"}});J.parentNode.insertBefore(se,J.nextSibling)}})})}}),"./src/snapdom/clone.js":(function(A,h,l){l.r(h),l.d(h,{deepCloneBasic:function(){return w}}),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.from.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.array.slice.js"),l("./node_modules/core-js/modules/es.function.name.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.regexp.exec.js"),l("./node_modules/core-js/modules/es.regexp.test.js"),l("./node_modules/core-js/modules/es.regexp.to-string.js"),l("./node_modules/core-js/modules/es.set.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/esnext.set.add-all.js"),l("./node_modules/core-js/modules/esnext.set.delete-all.js"),l("./node_modules/core-js/modules/esnext.set.difference.js"),l("./node_modules/core-js/modules/esnext.set.every.js"),l("./node_modules/core-js/modules/esnext.set.filter.js"),l("./node_modules/core-js/modules/esnext.set.find.js"),l("./node_modules/core-js/modules/esnext.set.intersection.js"),l("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),l("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),l("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),l("./node_modules/core-js/modules/esnext.set.join.js"),l("./node_modules/core-js/modules/esnext.set.map.js"),l("./node_modules/core-js/modules/esnext.set.reduce.js"),l("./node_modules/core-js/modules/esnext.set.some.js"),l("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),l("./node_modules/core-js/modules/esnext.set.union.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");function g(E,F){var M=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!M){if(Array.isArray(E)||(M=v(E))||F){M&&(E=M);var k=0,K=function(){};return{s:K,n:function(){return k>=E.length?{done:!0}:{done:!1,value:E[k++]}},e:function(J){throw J},f:K}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G,ee=!0,V=!1;return{s:function(){M=M.call(E)},n:function(){var J=M.next();return ee=J.done,J},e:function(J){V=!0,G=J},f:function(){try{ee||M.return==null||M.return()}finally{if(V)throw G}}}}function v(E,F){if(E){if(typeof E=="string")return m(E,F);var M={}.toString.call(E).slice(8,-1);return M==="Object"&&E.constructor&&(M=E.constructor.name),M==="Map"||M==="Set"?Array.from(E):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?m(E,F):void 0}}function m(E,F){(F==null||F>E.length)&&(F=E.length);for(var M=0,k=Array(F);M<F;M++)k[M]=E[M];return k}function N(E,F){try{var M=E.currentSrc||E.src||"";if(!M)return;F.setAttribute("src",M),F.removeAttribute("srcset"),F.removeAttribute("sizes"),F.loading="eager",F.decoding="sync"}catch{}}function w(E){if(!E)throw new Error("Invalid node");var F=new Set,M=null;if(E.nodeType===Node.TEXT_NODE||E.nodeType!==Node.ELEMENT_NODE)return E.cloneNode(!0);if(E.tagName==="IFRAME"){var k=document.createElement("div");return k.style.cssText="width:".concat(E.offsetWidth,"px;height:").concat(E.offsetHeight,"px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;"),k}if(E.tagName==="CANVAS"){var K=E.toDataURL(),G=document.createElement("img");return G.src=K,G.width=E.width,G.height=E.height,G}var ee;try{ee=E.cloneNode(!1),E.tagName==="IMG"&&N(E,ee)}catch(Ge){throw console.error("[Snapdom] Failed to clone node:",E,Ge),Ge}if(E instanceof HTMLTextAreaElement){ee.textContent=E.value,ee.value=E.value;var V=E.getBoundingClientRect();return ee.style.boxSizing="border-box",ee.style.width="".concat(V.width,"px"),ee.style.height="".concat(V.height,"px"),ee}if(E instanceof HTMLInputElement&&(E.hasAttribute("value")&&(ee.value=E.value,ee.setAttribute("value",E.value)),E.checked!==void 0&&(ee.checked=E.checked,E.checked&&ee.setAttribute("checked",""),E.indeterminate&&(ee.indeterminate=E.indeterminate))),E instanceof HTMLSelectElement&&(M=E.value),E.shadowRoot){var X=Array.from(E.shadowRoot.querySelectorAll("slot")).length>0;if(!X){var J=document.createDocumentFragment(),he=g(E.shadowRoot.childNodes),q;try{for(he.s();!(q=he.n()).done;){var ie=q.value;if(!(ie.nodeType===Node.ELEMENT_NODE&&ie.tagName==="STYLE")){var Ae=w(ie);Ae&&J.appendChild(Ae)}}}catch(Ge){he.e(Ge)}finally{he.f()}ee.appendChild(J)}}if(E.tagName==="SLOT"){var ce,oe=((ce=E.assignedNodes)===null||ce===void 0?void 0:ce.call(E,{flatten:!0}))||[],ne=oe.length>0?oe:Array.from(E.childNodes),re=document.createDocumentFragment(),se=g(ne),je;try{for(se.s();!(je=se.n()).done;){var De=je.value,ge=w(De);ge&&re.appendChild(ge)}}catch(Ge){se.e(Ge)}finally{se.f()}return re}var Z=g(E.childNodes),fe;try{for(Z.s();!(fe=Z.n()).done;){var ue=fe.value;if(!F.has(ue)){var pe=w(ue);pe&&ee.appendChild(pe)}}}catch(Ge){Z.e(Ge)}finally{Z.f()}if(M!==null&&ee instanceof HTMLSelectElement){ee.value=M;var Ce=g(ee.options),Ne;try{for(Ce.s();!(Ne=Ce.n()).done;){var ye=Ne.value;ye.value===M?ye.setAttribute("selected",""):ye.removeAttribute("selected")}}catch(Ge){Ce.e(Ge)}finally{Ce.f()}}var we=E.scrollLeft,Te=E.scrollTop,qe=we||Te;if(qe&&ee instanceof HTMLElement){ee.style.overflow="hidden",ee.style.scrollbarWidth="none",ee.style.msOverflowStyle="none";var ve=document.createElement("div");for(ve.style.transform="translate(".concat(-we,"px, ").concat(-Te,"px)"),ve.style.willChange="transform",ve.style.display="inline-block",ve.style.width="100%";ee.firstChild;)ve.appendChild(ee.firstChild);ee.appendChild(ve)}return ee}}),"./src/utils.js":(function(A,h,l){l.r(h),l.d(h,{createElement:function(){return m},objType:function(){return v},toPx:function(){return w},unitConvert:function(){return N}}),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.number.constructor.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");function g(E){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},g(E)}var v=function(F){var M=g(F);return M==="undefined"?"undefined":M==="string"||F instanceof String?"string":M==="number"||F instanceof Number?"number":M==="function"||F instanceof Function?"function":F&&F.constructor===Array?"array":F&&F.nodeType===1?"element":M==="object"?"object":"unknown"},m=function(F,M){var k=document.createElement(F);if(M.className&&(k.className=M.className),M.innerHTML){k.innerHTML=M.innerHTML;for(var K=k.getElementsByTagName("script"),G=K.length;G-- >0;null)K[G].parentNode.removeChild(K[G])}for(var ee in M.style)k.style[ee]=M.style[ee];return k},N=function(F,M){if(v(F)==="number")return F*72/96/M;var k={};for(var K in F)k[K]=F[K]*72/96/M;return k},w=function(F,M){return Math.floor(F*M/72*96)}}),"./src/worker.js":(function(A,h,l){l.r(h),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.map.js"),l("./node_modules/core-js/modules/es.function.name.js"),l("./node_modules/core-js/modules/es.json.stringify.js"),l("./node_modules/core-js/modules/es.object.assign.js"),l("./node_modules/core-js/modules/es.object.keys.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.promise.js"),l("./node_modules/core-js/modules/es.regexp.to-string.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/esnext.iterator.map.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js"),l("./node_modules/core-js/modules/web.timers.js");var g=l("jspdf"),v=l("html2canvas"),m=l.n(v),N=l("./src/snapdom/clone.js"),w=l("./src/utils.js"),E=function F(M){var k=Object.assign(F.convert(Promise.resolve()),JSON.parse(JSON.stringify(F.template))),K=F.convert(Promise.resolve(),k);return K=K.setProgress(1,F,1,[F]),K=K.set(M),K};E.prototype=Object.create(Promise.prototype),E.prototype.constructor=E,E.convert=function(M,k){return M.__proto__=k||E.prototype,M},E.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},E.prototype.from=function(M,k){function K(G){switch((0,w.objType)(G)){case"string":return"string";case"element":return G.nodeName.toLowerCase&&G.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(k=k||K(M),k){case"string":return this.set({src:(0,w.createElement)("div",{innerHTML:M})});case"element":return this.set({src:M});case"canvas":return this.set({canvas:M});case"img":return this.set({img:M});default:return this.error("Unknown source type.")}})},E.prototype.to=function(M){switch(M){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},E.prototype.toContainer=function(){var M=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(M).then(function(){var K={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},G={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};K.opacity=0;var ee=(0,N.deepCloneBasic)(this.prop.src);return this.prop.overlay=(0,w.createElement)("div",{className:"html2pdf__overlay",style:K}),this.prop.container=(0,w.createElement)("div",{className:"html2pdf__container",style:G}),this.prop.container.appendChild(ee),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),new Promise(function(V){return setTimeout(V,10)})})},E.prototype.toCanvas=function(){var M=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(M).then(function(){var K=Object.assign({},this.opt.html2canvas);return delete K.onrendered,m()(this.prop.container,K)}).then(function(K){var G=this.opt.html2canvas.onrendered||function(){};G(K),this.prop.canvas=K,document.body.removeChild(this.prop.overlay)})},E.prototype.toImg=function(){var M=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(M).then(function(){var K=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=K})},E.prototype.toPdf=function(){var M=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(M).then(function(){var K=this.prop.canvas,G=this.opt,ee=K.height,V=Math.floor(K.width*this.prop.pageSize.inner.ratio),X=Math.ceil(ee/V),J=this.prop.pageSize.inner.height,he=document.createElement("canvas"),q=he.getContext("2d");he.width=K.width,he.height=V,this.prop.pdf=this.prop.pdf||new g.jsPDF(G.jsPDF);for(var ie=0;ie<X;ie++){ie===X-1&&ee%V!==0&&(he.height=ee%V,J=he.height*this.prop.pageSize.inner.width/he.width);var Ae=he.width,ce=he.height;q.fillStyle="white",q.fillRect(0,0,Ae,ce),q.drawImage(K,0,ie*V,Ae,ce,0,0,Ae,ce),ie&&this.prop.pdf.addPage();var oe=he.toDataURL("image/"+G.image.type,G.image.quality);this.prop.pdf.addImage(oe,G.image.type,G.margin[1],G.margin[0],this.prop.pageSize.inner.width,J)}})},E.prototype.output=function(M,k,K){return K=K||"pdf",K.toLowerCase()==="img"||K.toLowerCase()==="image"?this.outputImg(M,k):this.outputPdf(M,k)},E.prototype.outputPdf=function(M,k){var K=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(K).then(function(){return this.prop.pdf.output(M,k)})},E.prototype.outputImg=function(M,k){var K=[function(){return this.prop.img||this.toImg()}];return this.thenList(K).then(function(){switch(M){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+M+'" is not supported.'}})},E.prototype.save=function(M){var k=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(k).set(M?{filename:M}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},E.prototype.set=function(M){if((0,w.objType)(M)!=="object")return this;var k=Object.keys(M||{}).map(function(K){switch(K){case"margin":return this.setMargin.bind(this,M.margin);case"jsPDF":return function(){return this.opt.jsPDF=M.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,M.pageSize);default:return K in E.template.prop?function(){this.prop[K]=M[K]}:function(){this.opt[K]=M[K]}}},this);return this.then(function(){return this.thenList(k)})},E.prototype.get=function(M,k){return this.then(function(){var G=M in E.template.prop?this.prop[M]:this.opt[M];return k?k(G):G})},E.prototype.setMargin=function(M){return this.then(function(){switch((0,w.objType)(M)){case"number":M=[M,M,M,M];case"array":if(M.length===2&&(M=[M[0],M[1],M[0],M[1]]),M.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=M}).then(this.setPageSize)},E.prototype.setPageSize=function(M){return this.then(function(){M=M||g.jsPDF.getPageSize(this.opt.jsPDF),M.hasOwnProperty("inner")||(M.inner={width:M.width-this.opt.margin[1]-this.opt.margin[3],height:M.height-this.opt.margin[0]-this.opt.margin[2]},M.inner.px={width:(0,w.toPx)(M.inner.width,M.k),height:(0,w.toPx)(M.inner.height,M.k)},M.inner.ratio=M.inner.height/M.inner.width),this.prop.pageSize=M})},E.prototype.setProgress=function(M,k,K,G){return M!=null&&(this.progress.val=M),k!=null&&(this.progress.state=k),K!=null&&(this.progress.n=K),G!=null&&(this.progress.stack=G),this.progress.ratio=this.progress.val/this.progress.state,this},E.prototype.updateProgress=function(M,k,K,G){return this.setProgress(M?this.progress.val+M:null,k||null,K?this.progress.n+K:null,G?this.progress.stack.concat(G):null)},E.prototype.then=function(M,k){var K=this;return this.thenCore(M,k,function(ee,V){return K.updateProgress(null,null,1,[ee]),Promise.prototype.then.call(this,function(J){return K.updateProgress(null,ee),J}).then(ee,V).then(function(J){return K.updateProgress(1),J})})},E.prototype.thenCore=function(M,k,K){K=K||Promise.prototype.then;var G=this;M&&(M=M.bind(G)),k&&(k=k.bind(G));var ee=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise",V=ee?G:E.convert(Object.assign({},G),Promise.prototype),X=K.call(V,M,k);return E.convert(X,G.__proto__)},E.prototype.thenExternal=function(M,k){return Promise.prototype.then.call(this,M,k)},E.prototype.thenList=function(M){var k=this;return M.forEach(function(G){k=k.thenCore(G)}),k},E.prototype.catch=function(F){F&&(F=F.bind(this));var M=Promise.prototype.catch.call(this,F);return E.convert(M,this)},E.prototype.catchExternal=function(M){return Promise.prototype.catch.call(this,M)},E.prototype.error=function(M){return this.then(function(){throw new Error(M)})},E.prototype.using=E.prototype.set,E.prototype.saveAs=E.prototype.save,E.prototype.export=E.prototype.output,E.prototype.run=E.prototype.then,h.default=E}),html2canvas:(function(A){A.exports=r}),jspdf:(function(A){A.exports=n})},c={};function p(A){var h=c[A];if(h!==void 0)return h.exports;var l=c[A]={exports:{}};return o[A].call(l.exports,l,l.exports,p),l.exports}(function(){p.n=function(A){var h=A&&A.__esModule?function(){return A.default}:function(){return A};return p.d(h,{a:h}),h}})(),(function(){p.d=function(A,h){for(var l in h)p.o(h,l)&&!p.o(A,l)&&Object.defineProperty(A,l,{enumerable:!0,get:h[l]})}})(),(function(){p.o=function(A,h){return Object.prototype.hasOwnProperty.call(A,h)}})(),(function(){p.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})}})();var f={};return(function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/p.r(f);var A=p("./src/worker.js");p("./src/plugin/jspdf-plugin.js"),p("./src/plugin/pagebreaks.js"),p("./src/plugin/hyperlinks.js");var h=function l(g,v){var m=new l.Worker(v);return g?m.from(g).save():m};h.Worker=A.default,f.default=h})(),f=f.default,f})()})})(p0)),p0.exports}var NK=BK();const vA=Xv(NK),ru=Object.freeze(Object.defineProperty({__proto__:null,default:vA},Symbol.toStringTag,{value:"Module"}));function jf(t,s){return 2*t+s}function wf(t,s){return t*s/9}const Q0="/image.png",CK=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),hr=t=>(t||"").toString().toUpperCase(),rF={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Pg={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},EK=(t,s)=>{const n=hr(t.product),r=hr(t.name),o=hr(t.category),c=hr(t.subCategory),f=(rF[s]||[s.toUpperCase()]).some(l=>n.includes(l)||r.includes(l)||o.includes(l)||c.includes(l)),A=Pg[s],h=A&&hr(n).includes(hr(A));return f||h},yp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function TK(){const{shops:t,materials:s,products:n}=ci(),{toast:r}=Ai(),[o,c]=C.useState(1),p=typeof window<"u"&&window.location.search.includes("step=11"),[f,A]=C.useState(""),[h,l]=C.useState(""),[g,v]=C.useState(null),[m,N]=C.useState(null),[w,E]=C.useState(null),[F,M]=C.useState(null),[k,K]=C.useState(null),[G,ee]=C.useState(null),[V,X]=C.useState(1),[J,he]=C.useState(7),[q,ie]=C.useState(3),[Ae,ce]=C.useState(6),[oe,ne]=C.useState(2),[re,se]=C.useState([]),[je,De]=C.useState([]);C.useEffect(()=>{nt("/api/accumulated-products/doors",{headers:{}}).then(u=>u.json()).then(u=>{De(u.data||[])}).catch(u=>console.error("Failed to load accumulated products",u))},[]),C.useEffect(()=>{if(typeof window<"u"){const b=new URLSearchParams(window.location.search).get("step");if(b){const S=parseInt(b,10);S>=1&&S<=12&&c(S)}}},[]),C.useEffect(()=>{o===12&&nt("/api/accumulated-products/doors",{headers:{}}).then(u=>u.json()).then(u=>{const b=u.data||[];De(b),console.debug("Restored doors_accumulated_products for Step 12:",b.length)}).catch(u=>console.error("Failed to load accumulated products for Step 12",u))},[o]);const ge=u=>{const b=u?.doorType??w,S=u?.panelType??m,R=u?.subOption??F;if(!b)return null;const B=Ce.find(te=>te.value===b);let D=B?B.label:Pg[b]||b;/door/i.test(D)||(D=`${D} Door`);const Q=S==="panel"?"With Panel":"Without Panel",$=R?` - ${R}`:"";return`${Q}  ${D}${$}`},Z=()=>{const u=(h||"").toString();if(!w&&!u)return null;const b=u||ge(),S=u||Pg[w]||w,R=w?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(w):hr(b).includes("GLASS")||hr(b).includes("STILE");return{label:b,productName:S,requiresGlazing:R}},fe=()=>{const u=(h||"").toString();if(!w&&!u||!s.length)return[];const b=u||(w?Pg[w]:"");let S=[];if(b&&(S=s.filter(B=>{const D=(B.product||"").toString();if(!D||!b)return!1;const Q=hr(D),$=hr(b);return Q.includes($)||$.includes(Q)})),(!S||S.length===0)&&!u&&(S=w?s.filter(B=>EK(B,w)):s.filter(B=>{const D=(B.product||"").toString();if(!b)return!1;const Q=hr(D),$=hr(b);return Q.includes($)||$.includes(Q)})),S.length===0)return[];const R=new Map;for(const B of S){const D=`${hr(B.product)}__${hr(B.name)}__${CK(B.code)}`,Q=R.get(D);(!Q||(B.rate||0)<(Q.rate||0))&&R.set(D,B)}return Array.from(R.values())},ue={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],Ce=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],Ne=(u,b)=>{const S=V||1,R=J||7,B=q||3,D=Ae||6,Q=oe||2,$=jf(R,B),te=u.toLowerCase();let Ue=0;return te.includes("frame")||te.includes("door frame")?Ue=$*S:te.includes("door")&&(te.includes("panel")||te.includes("shutter")||te.includes("flush")||te.includes("wooden"))?Ue=S:te.includes("hinge")?Ue=S*3:te.includes("lock")||te.includes("handle")||te.includes("stopper")||te.includes("bolt")?Ue=S:te.includes("glass")?Ue=wf(D,Q)*S:Ue=S,Math.max(1,Math.ceil(Ue))},ye=(u,b)=>{const S=u||re,R=b||Ze;return S.map(B=>{let D=Te.find(gs=>gs.id===B.materialId);if(D||(D=s.find(gs=>gs.id===B.materialId)||null),!D)return null;const Q=s.find(gs=>{const nn=hr(gs.product)===hr(D.product),z=hr(gs.name)===hr(D.name),me=gs.shopId===B.selectedShopId,Qe=yp(gs)===(B.selectedBrand||"Generic");return nn&&z&&me&&Qe})||D,$=t.find(gs=>gs.id===B.selectedShopId),te=B.rowId||(B.batchId?`${B.batchId}-${Q.id}`:Q.id),Ue=R[te]||R[Q.id]||R[D.id],He=Ne(Q.name,Q.unit),st=Ue?.quantity??He,Bt=Ue?.supplyRate??Q.rate??0,Lt=Ue?.installRate??0,$t=(ls||[]).find(gs=>gs.rowId===te||`${gs.batchId||""}-${gs.id}`===te);return{id:Q.id,batchId:B.batchId,rowId:te,name:Q.name,quantity:st,unit:Q.unit,rate:Bt,shopId:B.selectedShopId,shopName:$?.name||"Unknown",installRate:Lt,doorType:$t?.doorType||$t?.door_type||void 0,panelType:$t?.panelType||$t?.panel_type||void 0,subOption:$t?.subOption||$t?.sub_option||void 0,glazingType:$t?.glazingType||$t?.glazing_type||void 0,productLabel:$t?.productLabel||void 0}}).filter(B=>B!==null)},we=()=>ye().reduce((u,b)=>u+b.quantity*b.rate,0),Te=fe(),qe=u=>(u?.name||u?.title||u?.label||u?.productName||u?.product||"").toString(),ve=u=>(u?.category||u?.type||u?.group||u?.section||"").toString(),Ge=u=>(u?.subCategory?.name||u?.subcategory?.name||u?.sub_category?.name||u?.subCategoryName||u?.sub_category_name||u?.subCategory||u?.subcategory||u?.sub_category||"").toString(),Se=u=>{const b=hr(qe(u)),S=hr(ve(u)),R=hr(Ge(u)),B=R.includes("CIVIL")||R.includes("WALL")||R.includes("PARTITION")||S.includes("CIVIL")||S.includes("WALL")||S.includes("PARTITION")||b.includes("CIVIL")||b.includes("WALL")||b.includes("PARTITION"),D=b.includes("DOOR")||b.includes("BLIND")||b.includes("PAINT")||b.includes("ELECTRICAL")||b.includes("SWITCH")||b.includes("SOCKET")||b.includes("PIPE")||b.includes("PLUMB")||b.includes("CEILING")||b.includes("GYPSUM")||b.includes("FLOORING")||S.includes("DOOR")||S.includes("BLIND")||S.includes("PAINT")||S.includes("ELECTRICAL")||S.includes("PIPE")||S.includes("PLUMB")||S.includes("CEILING")||S.includes("FLOORING")||R.includes("DOOR")||R.includes("BLIND")||R.includes("PAINT")||R.includes("ELECTRICAL")||R.includes("PIPE")||R.includes("PLUMB")||R.includes("CEILING")||R.includes("FLOORING");return B&&!D},vt=u=>{const b=hr(u);return b.includes("FLUSH")?"flush":b.includes("WPC")?"wpc":b.includes("STILE")||b.includes("ALUMIN")?"stile":b.includes("GLASS PANEL")?"glasspanel":b.includes("GLASS")?"glassdoor":b.includes("WOOD")||b.includes("TEAK")?"wooden":null},ht=(n||[]).filter(Se).slice().sort((u,b)=>{const S=qe(u),R=qe(b);return S.localeCompare(R)}),pt=u=>{const b=qe(u);A(u.id||b),l(b);const S=vt(b);E(S||w),M(null),K(null),ee(null),se([]),Ht({}),rs({}),yn({}),c(6)},[Ze,Ht]=C.useState({}),[At,Ct]=C.useState([]),[It,Wt]=C.useState({}),[Es,Ss]=C.useState("Concept Trunk Interiors"),[_s,$e]=C.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[ke,it]=C.useState("33ASOPS5560M1Z1"),[tt,Jt]=C.useState(""),[Qt,ss]=C.useState(new Date().toISOString().slice(0,10)),[dt,qt]=C.useState(""),[Vt,vs]=C.useState("50% Advance and 50% on Completion"),[ns,js]=C.useState(""),[ln,ys]=C.useState(""),[gt,Dt]=C.useState(""),[xt,rs]=C.useState({}),[ps,yn]=C.useState({}),[is,Fs]=C.useState({}),[Ns,Nn]=C.useState({}),[Cs,zt]=C.useState({}),[os,Ps]=C.useState({}),[Ye,St]=C.useState([]),[Rt,us]=C.useState([]),[As,as]=C.useState(""),[bs,cs]=C.useState([]),[Us,an]=C.useState([]),[Mr,Un]=C.useState([]),[Ks,Pn]=C.useState(!1);C.useEffect(()=>{(async()=>{if(tt)try{const b=await nt(`/api/estimator-step9-items?session_id=${tt}&estimator=civilwall`,{headers:{}});if(b.ok){const B=await b.json();cs(B.items||[])}const S=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=civilwall`,{headers:{}});if(S.ok){const B=await S.json();an(B.items||[])}const R=await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=civilwall`,{headers:{}});if(R.ok){const B=await R.json();Un(B.items||[])}}catch(b){console.warn("Failed to load data from DB:",b)}})()},[tt]),C.useEffect(()=>{if(o===7){const u=ye(),b={};u.forEach(S=>{b[S.id]={quantity:S.quantity||0,supplyRate:S.rate||0,installRate:0}}),Ht(b)}},[o,re]),C.useEffect(()=>{if(o===9){const u=ye(At,It);if(u.length>0){const b=u[0].shopId,S=t.find(R=>R.id===b);if(S){const R=[S.name||"",S.address||"",S.area||"",S.city||"",S.state||"",S.pincode||"",S.gstNo?`GSTIN: ${S.gstNo}`:"",S.phone||""].filter(Boolean);Dt(R.join(`
`))}}}},[o,At,It,re,t]),C.useEffect(()=>{if(o===9){wn();const u=[],b={},S={},R={};if(ls&&ls.length>0)for(const B of ls){const D=B.rowId||`${B.batchId||""}-${B.id}`;u.findIndex($=>$.materialId===B.id&&$.rowId===D&&($.batchId||"")===(B.batchId||""))===-1&&(u.push({materialId:B.id,selectedShopId:B.shopId||"",selectedBrand:B.brand||void 0,batchId:B.batchId,rowId:D}),b[D]={quantity:Number(B.quantity||0),supplyRate:Number(B.supplyRate??B.rate??0),installRate:Number(B.installRate||0)},B.description&&(S[D]=B.description),B.location&&(R[D]=B.location))}if(bs&&bs.length>0)for(const B of bs){if(!s.find(st=>st.id===B.material_id))continue;const Q=B.material_id,$=B.row_id||(B.batch_id?`${B.batch_id}-${Q}`:Q),te=B.shop_id||"",Ue=B.brand||void 0;u.findIndex(st=>st.materialId===Q&&(st.batchId||"")===(B.batch_id||"")&&(st.rowId||"")===$)===-1&&(u.push({materialId:Q,selectedShopId:te,selectedBrand:Ue,batchId:B.batch_id||(B.row_id?$.replace(`-${Q}`,""):void 0)}),b[$]={quantity:Number(B.quantity||0),supplyRate:Number(B.supply_rate||B.rate||0),installRate:Number(B.install_rate||0)},B.description&&(S[$]=B.description),B.location&&(R[$]=B.location))}re&&re.length>0&&re.forEach(B=>{if(u.findIndex(Q=>Q.materialId===B.materialId&&Q.batchId===B.batchId)===-1){u.push(B);const Q=s.find($=>$.id===B.materialId);if(Q){const $=B.batchId?`${B.batchId}-${B.materialId}`:B.materialId;b[$]={quantity:Ze[B.materialId]?.quantity??Q.quantity??1,supplyRate:Ze[B.materialId]?.supplyRate??Q.rate??0,installRate:Ze[B.materialId]?.installRate??0}}}}),u.length>0&&Ct(u),Object.keys(b).length>0&&Wt(b),Object.keys(S).length>0&&rs(B=>({...B,...S})),Object.keys(R).length>0&&yn(B=>({...B,...R}))}},[o,re,bs]),C.useEffect(()=>{o===11&&(async()=>{if(tt)try{const b=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=civilwall`,{headers:{}});if(b.ok){const R=(await b.json()).items||[],B={},D={},Q={},$={};R.forEach(te=>{const Ue=s.find(He=>He.name===te.item);Ue&&(B[Ue.id]=Number(te.supply_rate||0),D[Ue.id]=Number(te.install_rate||0),Q[Ue.id]=Number(te.qty||0),$[Ue.id]=te.unit||"")}),Ps(te=>({...te,...B})),zt(te=>({...te,...D})),Fs(te=>({...te,...Q})),Nn(te=>({...te,...$}))}}catch(b){console.warn("Failed to load step 11 data:",b)}})()},[o,tt,Us]);const nr=C.useRef(null);C.useEffect(()=>{wn().catch(()=>{})},[]),C.useEffect(()=>{(async()=>{if(tt)try{const b=await nt(`/api/estimator-step9-items?session_id=${tt}&estimator=civilwall`,{headers:{}});if(b.ok){const S=await b.json(),R=S.items.map(B=>({id:B.material_id,rowId:B.row_id,batchId:B.batch_id,name:B.name,unit:B.unit,quantity:B.quantity,supplyRate:B.supply_rate,installRate:B.install_rate,shopId:B.shop_id,shopName:B.shop_name,description:B.description,location:B.location,doorType:B.door_type,panelType:B.panel_type,subOption:B.sub_option,glazingType:B.glazing_type}));if(be(R),S.items.length>0){const B=S.items[0];fs({doorType:B.door_type,panelType:B.panel_type,subOption:B.sub_option,glazingType:B.glazing_type,count:B.qty,height:B.height,width:B.width,glassHeight:B.glass_height,glassWidth:B.glass_width,subtotal:B.subtotal,sgst:B.sgst,cgst:B.cgst,round_off:B.round_off,grand_total:B.grand_total})}}}catch(b){console.warn("Failed to load step 9 from DB",b)}})()},[tt]),C.useEffect(()=>(nr.current&&clearTimeout(nr.current),nr.current=setTimeout(async()=>{new Date().toISOString();try{if(!tt)return;const u=ye().map((b,S)=>{const R=b.rowId||(b.batchId?`${b.batchId}-${b.id}`:b.id);return{estimator:"civilwall",session_id:tt,s_no:S+1,row_id:String(R),batch_id:b.batchId||null,material_id:b.id,name:b.name,unit:b.unit,quantity:Number(Ze[b.id]?.quantity??b.quantity??0),supply_rate:Number(Ze[b.id]?.supplyRate??b.rate??0),install_rate:Number(Ze[b.id]?.installRate??0),shop_id:b.shopId||"",shop_name:b.shopName||"",description:xt[b.id]||"",location:ps[b.id]||"",door_type:w,panel_type:m,sub_option:F,glazing_type:G,qty:V,height:J,width:q,glass_height:Ae,glass_width:oe}});await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:tt,items:u})})}catch{}},800),()=>{nr.current&&clearTimeout(nr.current)}),[re,Ze,xt,ps,w,m,F,G,V,J,q,Ae,oe,tt]);const Yn=u=>{const b=Te.find(te=>te.id===u);if(!b)return;if(re.find(te=>te.materialId===u)){se(te=>te.filter(Ue=>Ue.materialId!==u));return}const R=s.filter(te=>hr(te.product)===hr(b.product)&&hr(te.name)===hr(b.name)).map(te=>({brand:yp(te),shopId:te.shopId,rate:te.rate||0})),D=Array.from(new Set(R.map(te=>te.brand))).sort()[0]||"Generic",$=R.filter(te=>te.brand===D).sort((te,Ue)=>te.rate-Ue.rate)[0];$?.shopId&&se(te=>[...te,{materialId:u,selectedShopId:$.shopId,selectedBrand:D}])},dn=(u,b)=>{se(S=>S.map(R=>R.materialId===u?{...R,selectedShopId:b}:R))},vn=(u,b)=>{const S=Te.find(D=>D.id===u);if(!S)return;const B=s.filter(D=>hr(D.product)===hr(S.product)&&hr(D.name)===hr(S.name)).map(D=>({brand:yp(D),shopId:D.shopId,rate:D.rate||0})).filter(D=>D.brand===b).sort((D,Q)=>D.rate-Q.rate)[0]?.shopId||"";se(D=>D.map(Q=>Q.materialId===u?{...Q,selectedBrand:b,selectedShopId:B||Q.selectedShopId}:Q))},[jn,Jn]=C.useState([]),Zr=()=>{const u=(o===9?ye(At,It):ye()).map(b=>b.rowId||b.id);Jn(b=>b.length===u.length?[]:u)},Ir=async()=>{if(jn.length!==0){try{const u=[],b=[];for(const S of jn){const R=ls?.find(B=>`${B.batchId||""}-${B.id}`===S);if(R&&R.id){const B=bs.find(D=>D.id===R.id);B&&u.push(B)}else{const B=At.find(D=>`${D.batchId||""}-${D.materialId}`===S);B&&b.push(B)}}if(u.length>0&&tt&&(await nt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:tt,estimator:"civilwall",items:u})}),be(S=>S?S.filter(R=>!u.some(B=>B.id===R.id)):null)),b.length>0&&Ct(S=>S.filter(R=>!b.some(B=>`${B.batchId||""}-${B.materialId}`==`${R.batchId||""}-${R.materialId}`))),Ct(S=>S.filter(R=>!jn.includes(`${R.batchId||""}-${R.materialId}`))),Wt(S=>{const R={...S};return jn.forEach(B=>delete R[B]),R}),tt){const R=await(await nt(`/api/estimator-step9-items?session_id=${tt}&estimator=civilwall`,{headers:{}})).json();cs(R.items||[])}r({title:"Success",description:`${jn.length} item(s) deleted successfully!`})}catch(u){console.warn("Failed to delete items",u),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}Jn([])}},[Vn,Ts]=C.useState([]),Ls=C.useRef(""),[ts,Qs]=C.useState(null),[ls,be]=C.useState(null),[xe,lt]=C.useState({}),[Je,fs]=C.useState(null),wn=async()=>{try{const u=await nt("/api/boq");if(u.status===401){Ts([]),Ls.current!=="401"&&(Ls.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!u.ok){const R=await u.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${R||u.status}`)}if(!(u.headers.get("content-type")||"").includes("application/json")){const R=await u.text().catch(()=>"");console.warn("/api/boq returned non-json:",R),Ts([]);return}const S=await u.json();Ts(S.boqs||[]),Ls.current=""}catch(u){console.error("fetchSavedBoqs",u);const b=String(u?.message||u||"");if(!b)return;Ls.current!==b&&(Ls.current=b,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},zn=async()=>{try{if(!tt)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const u={estimator:"civilwall",billNo:tt,doorType:w,panelType:m,subOption:F,glazingType:G,qty:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,materials:ls&&ls.length>0?ls:ye(),subtotal:Js,sgst:ms,cgst:$n,roundOff:qr,grandTotal:Ka},b=await nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!b.ok){const B=await b.text().catch(()=>"");throw new Error(B||"save failed")}const S=b.headers.get("content-type")||"";let R=null;if(S.includes("application/json"))R=await b.json();else{const B=await b.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",B),R={boq:null}}return await wn(),Qs(R?.boq||R?.boqs?.[0]||null),!0}catch(u){return console.error("handleSaveBOQ",u),!1}},di=async u=>{try{if(!(await nt(`/api/boq/${u}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await wn()}catch(b){console.error("handleDeleteSavedBoq",b)}},Oi=()=>{c(1),E(null),N(null),M(null),K(null),X(1),he(7),ie(3),ce(0),ne(0),St([]),Fs({}),rs({}),yn({}),Nn({}),Ps({}),zt({}),lt({}),Qs(null)},ka=async()=>{Pn(!0);try{let u=Us||[];if(tt)try{const D=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=civilwall`);D.ok&&(u=(await D.json()).items||[],an(u))}catch(D){console.warn("Failed to refresh step11 items before save",D)}const b=Fn.map(D=>({estimator:"civilwall",session_id:tt,group_key:(D.groupKey||`${D.doorType||"door"}||${D.panelType||""}||${D.subOption||""}`)+"::"+(D.name||""),group_id:D.groupId||`group_${D.groupKey||""}`,item_name:D.name,unit:D.unit,quantity:D.quantity,location:D.location||"",description:D.description||"",supply_rate:os[D.id]||D.supplyRate||0,install_rate:Cs[D.id]||D.installRate||0,supply_amount:(D.quantity||0)*(os[D.id]||D.supplyRate||0),install_amount:(D.quantity||0)*(Cs[D.id]||D.installRate||0),supply_subtotal:Fn.reduce((Q,$)=>Q+($.quantity||0)*(os[$.id]||$.supplyRate||0),0),install_subtotal:Fn.reduce((Q,$)=>Q+($.quantity||0)*(Cs[$.id]||$.installRate||0),0),sgst:ms,cgst:$n,round_off:qr,grand_total:Fn.reduce((Q,$)=>Q+($.quantity||0)*((os[$.id]||$.supplyRate||0)+(Cs[$.id]||$.installRate||0)),0)+ms+$n+qr})),S=new Set((u||[]).map(D=>D.group_key||D.groupKey)),R=b.filter(D=>!S.has(D.group_key));if(R.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),Pn(!1),!0;const B=await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:R})});if(!B.ok){const D=await B.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${D||B.statusText}`,variant:"destructive"}),Pn(!1),!1}try{const D=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=civilwall`);if(D.ok){const Q=await D.json();an(Q.items||[])}}catch(D){console.warn("Failed to reload step11 items after save",D)}return De([]),r({title:"Success",description:"Step 11 saved to database."}),Pn(!1),!0}catch(u){return console.error("handleSaveAccumulatedBOQ",u),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Pn(!1),!1}},Rr=u=>{if(Jt(u.bill_no||""),E(u.door_type||null),N(u.panel_type||null),M(u.sub_option||null),ee(u.glazing_type||null),X(u.qty||1),he(u.height||7),ie(u.width||3),ce(u.glass_height||6),ne(u.glass_width||2),Array.isArray(u.materials)){const b=u.materials.map(S=>({materialId:S.id,selectedShopId:S.shopId||S.shop_id||S.shopId||"",selectedBrand:S.shopName||S.brand||S.selectedBrand||void 0}));se(b.filter(Boolean))}Qs(u)},Ha=(u,b)=>{if(o===9){Wt(S=>({...S,[u]:{...S[u]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(b))}}));return}Ht(S=>({...S,[u]:{...S[u]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(b))}}))},Na=(u,b)=>{if(o===9){Wt(S=>({...S,[u]:{...S[u]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(b)),installRate:S[u]?.installRate||0}}));return}Ht(S=>({...S,[u]:{...S[u]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(b)),installRate:S[u]?.installRate||0}}))},$r=(u,b)=>{if(o===9){Wt(S=>({...S,[u]:{...S[u]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(b)),supplyRate:S[u]?.supplyRate||0}}));return}Ht(S=>({...S,[u]:{...S[u]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(b)),supplyRate:S[u]?.supplyRate||0}}))},Oa=()=>{const u=document.getElementById("boq-pdf");if(!u){alert("BOQ content not found");return}setTimeout(()=>{vA().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:b=>b.className?.toString().includes("bg-")||b.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(u).save().catch(b=>{console.error("PDF Export Error:",b),alert("PDF export failed. Check console.")})},100)},vi=async()=>{const u=document.getElementById("boq-final-pdf");if(!u){alert("Final BOQ content not found");return}const b=(await Uc(async()=>{const{default:S}=await Promise.resolve().then(()=>ru);return{default:S}},void 0)).default;b().set({margin:10,filename:`BOQ-${tt||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(u).save()},Ui=()=>{const u=ye(),b=Z(),S=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${m==="panel"?"With Panel":"Without Panel"} - ${b?.label}`,`Dimensions: ${J}ft  ${q}ft (Count: ${V})`,...G?[`Glazing: ${G}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];u.forEach(($,te)=>{const Ue=$.quantity*$.rate;S.push(`${te+1},"${$.name}","${$.unit}",${$.quantity},${$.rate},"${$.shopName}",${Ue}`)}),S.push("",`TOTAL COST,,,${we().toFixed(2)}`);const R=S.join(`
`),B=new Blob([R],{type:"text/csv"}),D=window.URL.createObjectURL(B),Q=document.createElement("a");Q.href=D,Q.download=`BOQ-Doors-${new Date().getTime()}.csv`,Q.click(),URL.revokeObjectURL(D)},bi=()=>{const u=Fn||[],b=[];b.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),u.forEach((Q,$)=>{const te=Number(Q.supplyRate??Q.rate??0),Ue=Number(Q.installRate??0),He=Number(Q.quantity||0),st=He*te,Bt=He*Ue,Lt=(Q.location||ps[Q.id]||"").toString().replace(/"/g,'""'),$t=(Q.description||xt[Q.id]||Q.name||"").toString().replace(/"/g,'""'),z=(ge({doorType:Q.doorType||Q.door_type,panelType:Q.panelType||Q.panel_type,subOption:Q.subOption||Q.sub_option,glazingType:Q.glazingType||Q.glazing_type})||Q.name||"").replace(/"/g,'""');b.push(`${$+1},"${z}","${Lt}","${$t}",${Q.unit},${He},${te.toFixed(2)},${Ue.toFixed(2)},${st.toFixed(2)},${Bt.toFixed(2)}`)});const S=b.join(`
`),R=new Blob([S],{type:"text/csv"}),B=window.URL.createObjectURL(R),D=document.createElement("a");D.href=B,D.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,D.click(),URL.revokeObjectURL(B)},ui=async()=>{const u=ye(At,It).map(Q=>{const $=Q.rowId||`${Q.batchId}-${Q.id}`;return{id:Q.id,rowId:$,batchId:Q.batchId||null,name:Q.name,productLabel:Q.productLabel||null,product_label:Q.productLabel||null,unit:Q.unit,quantity:It[$]?.quantity??It[Q.id]?.quantity??Q.quantity,supplyRate:It[$]?.supplyRate??It[Q.id]?.supplyRate??Q.rate,installRate:It[$]?.installRate??It[Q.id]?.installRate??Q.installRate??0,shopId:Q.shopId,shopName:Q.shopName,description:xt[$]||xt[Q.id]||"",location:ps[$]||ps[Q.id]||"",doorType:Q.doorType,panelType:Q.panelType,subOption:Q.subOption,glazingType:Q.glazingType,isSaved:Q.isSaved||!1}}),b=u.filter(Q=>!Q.isSaved);if(b.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let S=tt;(!S||S.trim()==="")&&(S=`DOOR-${Date.now()}`,Jt(S));const R=Je||(()=>{const Q=u.reduce((st,Bt)=>st+Number(Bt.quantity||0)*(Number(Bt.supplyRate||0)+Number(Bt.installRate||0)),0),$=Q*.09,te=Q*.09,Ue=Math.round(Q+$+te)-(Q+$+te),He=Q+$+te+Ue;return{subtotal:Q,sgst:$,cgst:te,round_off:Ue,grand_total:He}})(),B={id:`local-${Date.now()}`,estimator:"civilwall",bill_no:S,door_type:Je?.doorType||Je?.door_type||w,panel_type:Je?.panelType||Je?.panel_type||m,sub_option:Je?.subOption||Je?.sub_option||F,glazing_type:Je?.glazingType||Je?.glazing_type||G,qty:Je?.count||Je?.qty||V,height:Je?.height||J,width:Je?.width||q,glass_height:Je?.glassHeight||Je?.glass_height||Ae,glass_width:Je?.glassWidth||Je?.glass_width||oe,materials:u,subtotal:R.subtotal,sgst:R.sgst,cgst:R.cgst,round_off:R.round_off,grand_total:R.grand_total,created_at:new Date().toISOString()};Qs(B),be(u);try{fs(Q=>({...Q||{},...R}))}catch{}const D=b.map((Q,$)=>({estimator:"civilwall",session_id:S,s_no:$+1,row_id:String(Q.rowId||`${Q.batchId||""}-${Q.id}`),batch_id:Q.batchId||null,material_id:Q.id,name:Q.name,unit:Q.unit,quantity:Number(Q.quantity||0),supply_rate:Number(Q.supplyRate||0),install_rate:Number(Q.installRate||0),shop_id:Q.shopId||"",shop_name:Q.shopName||"",description:Q.description||"",location:Q.location||"",door_type:Q.doorType||Je?.doorType||Je?.door_type||w||null,panel_type:Q.panelType||Je?.panelType||Je?.panel_type||m||null,sub_option:Q.subOption||Je?.subOption||Je?.sub_option||F||null,glazing_type:Q.glazingType||Je?.glazingType||Je?.glazing_type||G||null,qty:Je?.count||Je?.qty||V,height:Je?.height||J,width:Je?.width||q,glass_height:Je?.glassHeight||Je?.glass_height||Ae,glass_width:Je?.glassWidth||Je?.glass_width||oe,subtotal:R.subtotal,sgst:R.sgst,cgst:R.cgst,round_off:R.round_off,grand_total:R.grand_total}));try{await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:S,items:D})});const $=await(await nt(`/api/estimator-step9-items?session_id=${S}&estimator=civilwall`,{headers:{}})).json();cs($.items||[]);const te=(ls||[]).map(Ue=>b.some(st=>Ue.rowId===st.rowId||`${Ue.batchId||""}-${Ue.id}`==`${st.batchId||""}-${st.id}`)?{...Ue,isSaved:!0}:Ue);be(te),r({title:"Success",description:`${b.length} new material(s) saved successfully to database!`})}catch(Q){console.warn("Failed to save step 9 to DB",Q),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},hi=u=>{let b=5381;for(let S=0;S<u.length;S+=1)b=(b<<5)+b^u.charCodeAt(S);return Math.abs(b>>>0).toString(36)},tn=()=>{const u=JSON.stringify({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,selectedMaterials:(re||[]).map(b=>({materialId:b.materialId,selectedShopId:b.selectedShopId,selectedBrand:b.selectedBrand})),editable:Object.keys(Ze||{}).sort().map(b=>({id:b,...Ze[b]}))});return`batch-${hi(u)}`},sn=()=>{const u=tn(),b=ye(re,Ze).map(Q=>({id:Q.id,rowId:`${u}-${Q.id}`,batchId:u,name:Q.name,unit:Q.unit,quantity:Ze[Q.id]?.quantity??Q.quantity,supplyRate:Ze[Q.id]?.supplyRate??Q.rate,installRate:Ze[Q.id]?.installRate??0,shopId:Q.shopId,shopName:Q.shopName,description:xt[Q.id]||"",location:ps[Q.id]||"",doorType:w,productLabel:h||ge(),panelType:m,subOption:F,glazingType:G,isSaved:!1}));if(b.length===0){c(9);return}const B=[...(ls||[]||[]).filter(Q=>Q.batchId!==u),...b];be(B),Ct((re||[]).map(Q=>({materialId:Q.materialId,selectedShopId:Q.selectedShopId,selectedBrand:Q.selectedBrand,batchId:u})));const D={};B.forEach(Q=>{const $=Q.rowId||`${Q.batchId}-${Q.id}`;D[$]={quantity:Number(Q.quantity||0),supplyRate:Number(Q.supplyRate||Q.rate||0),installRate:Number(Q.installRate||0)}}),Wt(D);try{const Q=we(),$=Q*.09,te=Q*.09,Ue=Math.round(Q+$+te)-(Q+$+te),He=Q+$+te+Ue;fs({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,subtotal:Q,sgst:$,cgst:te,round_off:Ue,grand_total:He})}catch{}c(9)},ks=o===9||o===11?ls||[]:ye(),qs=o===9?It:Ze,Js=ks.reduce((u,b)=>u+b.quantity*((qs[b.id]?.supplyRate??b.rate)+(qs[b.id]?.installRate??b.installRate??0)),0),ms=Js*.09,$n=Js*.09,qr=Math.round(Js+ms+$n)-(Js+ms+$n),Ka=Js+ms+$n+qr,Ca=je.length>0?je.flatMap(u=>u.materials||[]):ls&&ls.length>0?ls:ks&&ks.length>0?ks:ts&&ts.materials&&ts.materials.length>0?Array.isArray(ts.materials)?ts.materials:JSON.parse(ts.materials||"[]"):ks,on=(()=>{const u=new Map;for(const S of Ca||[]){const R=S.productLabel||S.doorType||S.door_type||Je?.doorType||Je?.door_type||w||"door",B=S.panelType||S.panel_type||Je?.panelType||Je?.panel_type||m||"",D=S.subOption||S.sub_option||Je?.subOption||Je?.sub_option||"",Q=`${R}||${B}||${D}`;u.has(Q)||u.set(Q,[]),u.get(Q).push(S)}const b=[];for(const[S,R]of u.entries()){const[B,D,Q]=S.split("||"),$=`group_${S}`,te=xt[$]||"",Ue=ps[$]||"";let He=Number(xe[$]??Je?.count??Je?.qty??V??1);const st=String(te).match(/Qty:\s*(\d+(?:\.\d+)?)/);st&&(xe[$]===void 0||xe[$]===null)&&(He=Number(st[1]));const Bt=R.reduce((me,Qe)=>me+Number(Qe.quantity||0)*Number(Qe.supplyRate??Qe.rate??0),0),Lt=He>0?Bt/He:Bt,$t=R.reduce((me,Qe)=>me+Number(Qe.quantity||0)*Number(Qe.installRate??0),0),gs=He>0?$t/He:$t,nn=R[0]&&R[0].productLabel||ge({doorType:B,panelType:D,subOption:Q})||B,z=String(te).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();b.push({id:$,groupKey:S,name:nn,location:Ue||"",description:z||"",unit:"pcs",quantity:He,supplyRate:Number(Lt||0),installRate:Number(Cs[$]??gs??0),supplyAmount:Number(Lt*He||0),installAmount:Number((Cs[$]??gs)*He||0)})}return b})();(Us||[]).filter(u=>u.item||u.item_name).map((u,b)=>{const S=u.group_key||u.groupKey||`${u.door_type||u.doorType||"door"}||${u.panel_type||u.panelType||""}||${u.sub_option||u.subOption||""}`;return{id:u.id,groupKey:S,name:u.productLabel||u.item_name||u.item||u.name||u.door_label||u.doorType||u.door_type||"Door",location:u.location||"",description:u.description||"",unit:u.unit||"pcs",quantity:Number(u.quantity??u.qty??1),supplyRate:Number(u.supply_rate??u.supplyRate??0),installRate:Number(u.install_rate??u.installRate??0),supplyAmount:Number(u.supply_amount??0),installAmount:Number(u.install_amount??0),doorType:u.door_type||u.doorType,panelType:u.panel_type||u.panelType,subOption:u.sub_option||u.subOption}});const Fn=(je.length===0?on.filter(u=>!(Us||[]).some(S=>(S.group_key||S.groupKey||`${S.door_type||""}||${S.panel_type||""}||${S.sub_option||""}`)===u.groupKey)):je.map((u,b)=>({id:`accumulated_${b}`,groupKey:`${u.doorType||"door"}||${u.panelType||""}||${u.subOption||""}`,name:u.productLabel||u.materials?.[0]?.productLabel||u.doorLabel||ge({doorType:u.doorType,panelType:u.panelType,subOption:u.subOption})||u.doorType,location:u.location||"",description:u.description||"",unit:"pcs",quantity:u.count||1,supplyRate:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.supplyRate??R.rate??0),0)||0,installRate:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.installRate??0),0)||0,supplyAmount:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.supplyRate??R.rate??0),0)||0,installAmount:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.installRate??0),0)||0})))||[],Zn=Fn.filter(u=>Rt.includes(u.id)),pa=Fn.reduce((u,b)=>{const S=Number(is[b.id]??(b.quantity||0)),R=Number(os[b.id]??b.supplyRate??b.rate??0);return u+S*R},0);Fn.reduce((u,b)=>{const S=Number(is[b.id]??(b.quantity||0));return u+S*Number(b.installRate||0)},0);const ma=Zn.reduce((u,b)=>{const S=Number(is[b.id]??(b.quantity||0)),R=Number(os[b.id]??b.supplyRate??b.rate??0);return u+S*R},0);ts&&ts.bill_no;const x=ts&&ts.created_at?new Date(ts.created_at).toISOString().slice(0,10):Qt,j=u=>{if(!u)return!1;const b=(u.name||"").toString().trim(),S=Number(u.quantity||0),R=Number(u.supplyRate??u.rate??0),B=Number(u.installRate??0),D=(u.description||"").toString().trim(),Q=(u.location||"").toString().trim();return!!b||S>0||R>0||B>0||!!D||!!Q};return(je||[]).map(u=>{const b=(u.materials||[]).filter(j),S=b.reduce((B,D)=>B+Number(D.quantity||0)*Number(D.supplyRate??D.rate??0),0),R=b.reduce((B,D)=>B+Number(D.quantity||0)*Number(D.installRate??0),0);return{...u,materials:b,supplySubtotal:S,installSubtotal:R,subtotal:S+R}}).filter(u=>(u.materials||[]).length>0),e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Civil Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Vs,{className:"border-border/50",children:e.jsx(fn,{className:"pt-8 min-h-96",children:e.jsxs(gl,{mode:"wait",children:[o===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Civil Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:ht.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No products found under Electrical sub-category in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:ht.map(u=>{const b=qe(u),S=(u?.id||b).toString(),R=f===S;return e.jsx(Ie,{variant:R?"default":"outline",onClick:()=>pt(u),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:b||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ve(u)})]})},S)})})})]},"step-select-product"),o===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Q0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:x})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all-groups",checked:(()=>{const u=(Fn||[]).map(b=>b.id);return u.length>0&&u.every(b=>Ye.includes(b))})(),onCheckedChange:u=>{St(u?(Fn||[]).map(b=>b.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Fn||[]).map((u,b)=>{const S=Number(os[u.id]??u.supplyRate??u.rate??0),R=Number(Cs[u.id]??u.installRate??0);let B=Number(is[u.id]??(u.quantity||0));const D=B*S,Q=B*R;return ps[u.id]??u.location,xt[u.id]??u.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:Ye.includes(u.id),onCheckedChange:()=>{St($=>$.includes(u.id)?$.filter(te=>te!==u.id):[...$,u.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:b+1}),e.jsx("td",{className:"border px-2 py-1",children:u.productLabel||u.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{value:ps[u.id]??u.location??"",onChange:$=>yn(te=>({...te,[u.id]:$.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:xt[u.id]??u.description??"",onChange:$=>rs(te=>({...te,[u.id]:$.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{value:Ns[u.id]??u.unit??"",onChange:$=>Nn(te=>({...te,[u.id]:$.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",value:B,onChange:$=>Fs(te=>({...te,[u.id]:Number($.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:S,onChange:$=>Ps(te=>({...te,[u.id]:Number($.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:R,onChange:$=>zt(te=>({...te,[u.id]:Number($.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",D.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Q.toFixed(2)]})]},u.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(pa||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!p&&e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",disabled:Ye.length===0,onClick:async()=>{if(console.log("Delete selected:",Ye),Us.length>0&&tt)try{await nt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Ye,estimator:"civilwall"})});const u=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=civilwall`,{headers:{}});if(u.ok){const b=await u.json();an(b.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(u){console.warn("Failed to delete step 11 from DB",u),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(je.length===0)if(ts){console.log("Deleting from saved BOQ");const u=Ye.map(B=>B.replace("group_","")),b=Array.isArray(ts.materials)?ts.materials:JSON.parse(ts.materials||"[]");console.log("Current materials:",b.length);const S=b.filter(B=>{const D=B.doorType||B.door_type||Je?.doorType||Je?.door_type||w||"door",Q=B.panelType||B.panel_type||Je?.panelType||Je?.panel_type||m||"",$=B.subOption||B.sub_option||Je?.subOption||Je?.sub_option||F||"",te=`${D}||${Q}||${$}`,Ue=u.includes(te);return console.log("Checking material:",B.id||B.name,te,"match:",Ue),!Ue});console.log("Filtered materials:",S.length);const R={...ts,materials:S};Qs(R),nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)}).then(()=>console.log("Saved updated BOQ")).catch(B=>console.error("Error saving BOQ:",B))}else{console.log("Deleting from Step 11 saved materials");const u=Ye.map(R=>R.replace("group_","")),S=((ls&&ls.length>0?ls:ks)||[]).filter(R=>{const B=R.doorType||R.door_type||Je?.doorType||Je?.door_type||w||"door",D=R.panelType||R.panel_type||Je?.panelType||Je?.panel_type||m||"",Q=R.subOption||R.sub_option||Je?.subOption||Je?.sub_option||F||"",$=`${B}||${D}||${Q}`;return!u.includes($)});be(S)}else if(je.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",je.length);let u;if(Ye.some(b=>b.startsWith("accumulated_"))){const b=Ye.filter(S=>S.startsWith("accumulated_")).map(S=>parseInt(S.replace("accumulated_",""))).sort((S,R)=>R-S);u=[...je],b.forEach(S=>{S>=0&&S<u.length&&u.splice(S,1)})}else{const b=Ye.map(S=>S.replace("group_",""));u=je.filter(S=>{const R=`${S.doorType||"door"}||${S.panelType||""}||${S.subOption||""}`,B=b.includes(R);return console.log("Checking product:",S.id,R,"match:",B),!B})}console.log("Accumulated products after:",u.length),De(u),nt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:u})}).catch(b=>console.error("Failed to save accumulated products after delete",b))}St([])},children:"Delete Selected"}),e.jsx(Ie,{onClick:Oi,children:"Add Product"}),e.jsx(Ie,{onClick:ka,disabled:Ks,children:"Save"}),e.jsx(Ie,{onClick:async()=>{us(Ye);const u=(Zn||[]).map((b,S)=>{const R=Number(os[b.id]??b.supplyRate??b.rate??0),B=Number(Cs[b.id]??b.installRate??0);let D=Number(is[b.id]??(b.quantity||0));return{s_no:S+1,item:b.name,location:ps[b.id]??b.location??"",description:xt[b.id]??b.description??"",unit:Ns[b.id]??b.unit??"",qty:D,supply_rate:R,install_rate:B,supply_amount:D*R,install_amount:D*B}});try{const b=await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=civilwall`,{headers:{}});let S=[];b.ok&&(S=(await b.json()).items||[]);const R=u.filter(Q=>!S.some($=>$.item===Q.item&&$.description===Q.description&&$.unit===Q.unit));if(R.length===0){c(12);return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:tt,items:R})});const D=await(await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=civilwall`,{headers:{}})).json();Un(D.items||[]),r({title:"Success",description:`${R.length} new material(s) saved successfully to database!`}),c(12)}catch(b){console.warn("Failed to save step 12 to DB",b),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),o===4&&w&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(ue[w]||[]).map(u=>e.jsx(Ie,{onClick:()=>{M(u),K(null)},className:`w-full text-black ${F===u?"bg-cyan-500":"bg-white"}`,children:u},u))}),w==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(u=>e.jsx(Ie,{onClick:()=>K(u),className:`w-full text-black ${k===u?"bg-cyan-500":"bg-white"}`,children:u},u))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(5),disabled:!F||w==="flush"&&F==="With Vision Panel"&&!k,children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),o===5&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"count",children:"Count"}),e.jsx(Ve,{id:"count",type:"number",placeholder:"1",value:V||"",onChange:u=>X(u.target.value?parseFloat(u.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"height",children:"Height"}),e.jsx(Ve,{id:"height",type:"number",placeholder:"7",value:J||"",onChange:u=>he(u.target.value?parseFloat(u.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"width",children:"Width"}),e.jsx(Ve,{id:"width",type:"number",placeholder:"3",value:q||"",onChange:u=>ie(u.target.value?parseFloat(u.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Xe,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Ve,{id:"glassHeight",type:"number",placeholder:"72",value:Ae||"",onChange:u=>ce(u.target.value?parseFloat(u.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Ve,{id:"glassWidth",type:"number",placeholder:"24",value:oe||"",onChange:u=>ne(u.target.value?parseFloat(u.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:!V||!J||!q||Z()?.requiresGlazing&&(!Ae||!oe),onClick:()=>c(6),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),o===6&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gn,{id:"select-all-materials",checked:re.length===Te.length&&Te.length>0,onCheckedChange:u=>{if(u){const b=Te.map(S=>{const R=s.filter($=>hr($.product)===hr(S.product)&&hr($.name)===hr(S.name)).map($=>({id:$.id,brand:yp($),shopId:$.shopId,rate:$.rate,unit:$.unit,shopName:t.find(te=>te.id===$.shopId)?.name||"Unknown"})),D=Array.from(new Set(R.map($=>$.brand))).sort()[0]||"Generic",Q=R.filter($=>$.brand===D).sort(($,te)=>($.rate||0)-(te.rate||0));return{materialId:S.id,selectedBrand:D,selectedShopId:Q[0]?.shopId||""}});se(b)}else se([])}}),e.jsx(Xe,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Te.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",w||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(w?rF[w]||[w]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(u=>u.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Te.map(u=>{const b=re.some(te=>te.materialId===u.id),S=re.find(te=>te.materialId===u.id),R=s.filter(te=>hr(te.product)===hr(u.product)&&hr(te.name)===hr(u.name)).map(te=>({id:te.id,brand:yp(te),shopId:te.shopId,rate:te.rate,unit:te.unit,shopName:t.find(Ue=>Ue.id===te.shopId)?.name||"Unknown"})),B=Array.from(new Set(R.map(te=>te.brand))).sort(),Q=re.find(te=>te.materialId===u.id)?.selectedBrand||B[0]||"Generic",$=R.filter(te=>te.brand===Q).sort((te,Ue)=>(te.rate||0)-(Ue.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:u.id,checked:b,onCheckedChange:()=>Yn(u.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:u.id,className:"font-medium cursor-pointer",children:u.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.code}),b&&B.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Lr,{value:Q,onValueChange:te=>vn(u.id,te),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:B.map(te=>e.jsx(wr,{value:te,children:te},te))})]})]}),b&&$.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Lr,{value:S?.selectedShopId||$[0].shopId,onValueChange:te=>dn(u.id,te),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:$.map(te=>e.jsxs(wr,{value:te.shopId||"",children:[te.shopName," - ",te.rate,"/",u.unit,te.rate===$[0].rate&&" (Best)"]},te.shopId))})]})]})]})]})},u.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),o===7&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(u=>{const b=re.find(R=>R.materialId===u.id),S=s.find(R=>R.id===u.id);return e.jsxs("div",{className:Xs("p-3 border rounded grid grid-cols-9 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:u.name}),e.jsx("span",{className:"text-sm",children:xt[u.id]||u.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:b?.selectedBrand||S?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:Ze[u.id]?.quantity??u.quantity,onChange:R=>Ha(u.id,parseInt(R.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:u.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:u.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:Ze[u.id]?.supplyRate??u.rate,onChange:R=>Na(u.id,parseFloat(R.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((Ze[u.id]?.quantity??u.quantity)*((Ze[u.id]?.supplyRate??u.rate)+(Ze[u.id]?.installRate??0))).toFixed(2)]})]},u.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),o===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||ge()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[J," ft  ",q," ft (Qty: ",V,")"]})]}),G&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:G})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[Ae,'"  ',oe,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(u=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:u==="Qty"||u.includes("Rate")||u.includes("Amount")?"right":"left"},children:u},u))})}),e.jsx("tbody",{children:ye().map((u,b)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:b+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:u.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:u.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:u.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:u.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:u.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(u.quantity*u.rate).toFixed(2)})]},u.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((u,b)=>u+b.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ie,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Ui,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(si,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:Oa,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(si,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>sn(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),A(""),l(""),N(null),E(null),ee(null),X(1),he(7),ie(3),ce(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Qn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),o===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Q0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:x})})]}),!Zn||Zn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Zn||[]).map((u,b)=>{const S=Number(os[u.id]??u.supplyRate??u.rate??0),R=Number(Cs[u.id]??u.installRate??0);let B=Number(is[u.id]??(u.quantity||0));const D=B*S,Q=B*R,$=ps[u.id]??u.location??"",te=xt[u.id]??u.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:b+1}),e.jsx("td",{className:"border px-2 py-1",children:u.productLabel||u.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:$||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:te||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ns[u.id]??u.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:B}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",S.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",D.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Q.toFixed(2)]})]},u.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(ma||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ie,{onClick:async()=>{if(Mr.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const u=await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=civilwall`,{headers:{}});let b=[];u.ok&&(b=(await u.json()).items||[]);const R=(Zn||[]).map((Q,$)=>{const te=Number(os[Q.id]??Q.supplyRate??Q.rate??0),Ue=Number(Cs[Q.id]??Q.installRate??0),He=Number(is[Q.id]??(Q.quantity||0));return{s_no:$+1,item:Q.name,location:ps[Q.id]??Q.location??"",description:xt[Q.id]??Q.description??"",unit:Ns[Q.id]??Q.unit??"",qty:He,supply_rate:te,install_rate:Ue,supply_amount:He*te,install_amount:He*Ue}}).filter(Q=>!b.some($=>$.item===Q.item&&$.description===Q.description&&$.unit===Q.unit));if(R.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:tt,items:R})});const D=await(await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=civilwall`,{headers:{}})).json();Un(D.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(u){console.warn("Failed to save step 12 to DB",u),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ie,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ie,{onClick:bi,children:"Export Excel"})]})]},"step-qa-boq"),o===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:tt,onChange:u=>Jt(u.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:Qt,onChange:u=>ss(u.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:dt,onChange:u=>qt(u.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:ns,onChange:u=>js(u.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:ln,onChange:u=>ys(u.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:Vt,onChange:u=>vs(u.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:As,onChange:u=>as(u.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),As&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:xt[As]||"",onChange:u=>rs(b=>({...b,[As]:u.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Q0,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",tt]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:gt})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",Qt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",dt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",Vt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",ns]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(u=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:u},u))})}),e.jsx("tbody",{children:ks.map((u,b)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:b+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.id&&xt[u.id]||u.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(u.quantity||0)*Number(u.rate||0)||0).toFixed(2)})]},u.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Js.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ms.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:$n.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:qr.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Ka.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Ka.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:vi,children:"Export PDF"})]})]}),o===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"destructive",onClick:Ir,disabled:jn.length===0,children:"Delete Selected"}),e.jsx(Ie,{type:"button",onClick:ui,disabled:ks.length===0,children:"Save"}),e.jsx(Ie,{onClick:async()=>{const u=ye(At,It),b=jn.length>0?u.filter(D=>jn.includes(D.rowId||`${D.batchId}-${D.id}`)):u,S=b.map(D=>{const Q=D.rowId||`${D.batchId||""}-${D.id}`;return{id:D.id,rowId:Q,batchId:D.batchId,name:D.name,unit:D.unit,quantity:It[Q]?.quantity??It[D.id]?.quantity??D.quantity,supplyRate:It[Q]?.supplyRate??It[D.id]?.supplyRate??D.rate,installRate:It[Q]?.installRate??It[D.id]?.installRate??D.installRate??0,shopId:D.shopId,shopName:D.shopName,description:xt[Q]||xt[D.id]||"",location:ps[Q]||ps[D.id]||"",doorType:D.doorType,panelType:D.panelType,subOption:D.subOption,glazingType:D.glazingType}});if(S.length===0)return;const R=b[0],B={id:`local-${Date.now()}`,estimator:"civilwall",bill_no:tt,door_type:R?.doorType||Je?.doorType||Je?.door_type||w,panel_type:R?.panelType||Je?.panelType||Je?.panel_type||m,sub_option:R?.subOption||Je?.subOption||Je?.sub_option||F,glazing_type:R?.glazingType||Je?.glazingType||Je?.glazing_type||G,qty:Je?.count||Je?.qty||V,height:Je?.height||J,width:Je?.width||q,glass_height:Je?.glassHeight||Je?.glass_height||Ae,glass_width:Je?.glassWidth||Je?.glass_width||oe,materials:S,subtotal:S.reduce((D,Q)=>D+Number(Q.quantity||0)*(Number(Q.supplyRate||0)+Number(Q.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};Qs(B);try{await zn()}catch{}Jn([]),c(11)},disabled:ks.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-semibold",children:"Saved BOQs"}),Vn.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Vn.map(u=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:u.bill_no||`${u.estimator} - ${u.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(u.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{onClick:()=>Rr(u),size:"sm",children:"Load"}),e.jsx(Ie,{variant:"destructive",onClick:()=>di(u.id),size:"sm",children:"Delete"})]})]},u.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all",checked:(()=>{const u=(o===9?ye(At,It):ye()).map(b=>b.rowId||b.id);return jn.length===u.length&&u.length>0})(),onCheckedChange:Zr})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const u=new Map,b=new Map;ks.forEach(B=>{const D=B.doorType||B.door_type||Je?.doorType||Je?.door_type||w||"door",Q=B.panelType||B.panel_type||Je?.panelType||Je?.panel_type||m||"",$=B.subOption||B.sub_option||Je?.subOption||Je?.sub_option||"",te=`${D}||${Q}||${$}`;if(u.has(te)||u.set(te,[]),u.get(te).push(B),!b.has(te)){const He=(u.get(te)||[])[0]?.productLabel||`${Q==="panel"?"With Panel":"Without Panel"}  ${D}${$?" ("+$+")":""}`;b.set(te,{label:He})}});const S=[];let R=0;for(const[B,D]of u.entries()){const Q=D.map(st=>st.rowId||`${st.batchId||""}-${st.id}`),$=Q.every(st=>jn.includes(st)),te=`group_${B}`,Ue=xt[te]||"",He=Number(xe[te]??Je?.count??Je?.qty??V??1);S.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{id:`group-${B}`,checked:$,onCheckedChange:()=>{Jn($?st=>st.filter(Bt=>!Q.includes(Bt)):st=>Array.from(new Set([...st,...Q])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:b.get(B)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Ve,{placeholder:"Group description",value:Ue?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:st=>rs(Bt=>({...Bt,[te]:st.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:xe[te]??He,onChange:st=>{const Bt=st.target.value?parseFloat(st.target.value):0;lt(Lt=>({...Lt,[te]:Bt})),rs(Lt=>{const $t=(Lt[te]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Lt,[te]:$t?$t+`
Qty: `+Bt:"Qty: "+Bt}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${B}`));for(const st of D){R+=1;const Bt=st.rowId||`${st.batchId}-${st.id}`,Lt=Number(qs[Bt]?.supplyRate??qs[st.id]?.supplyRate??st.rate??0),$t=Number(qs[Bt]?.installRate??qs[st.id]?.installRate??st.installRate??0),gs=Lt+$t,nn=Number(qs[Bt]?.quantity??qs[st.id]?.quantity??st.quantity??0),z=nn*gs,me=xt[Bt]??xt[st.id]??st.description??"",Qe=String(me).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();S.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:R}),e.jsx("td",{className:"border px-2 py-1",children:st.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:xt[Bt]??xt[st.id]??Qe,onChange:We=>rs(ut=>({...ut,[Bt]:We.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ns[Bt]??Ns[st.id]??st.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:nn,onChange:We=>Ha(Bt,We.target.value?parseFloat(We.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:gs,onChange:We=>{const ut=parseFloat(We.target.value||"0"),_t=Number(qs[Bt]?.supplyRate??qs[st.id]?.supplyRate??Lt),es=Math.max(0,ut-_t);Na(Bt,_t),$r(Bt,es)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",z.toFixed(2)]})]},Bt))}}return S})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ie,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ie,{onClick:Oa,children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const M0="/image.png",FK=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),fr=t=>(t||"").toString().toUpperCase(),aF={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},kg={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},IK=(t,s)=>{const n=fr(t.product),r=fr(t.name),o=fr(t.category),c=fr(t.subCategory),f=(aF[s]||[s.toUpperCase()]).some(l=>n.includes(l)||r.includes(l)||o.includes(l)||c.includes(l)),A=kg[s],h=A&&fr(n).includes(fr(A));return f||h},xp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function RK(){const{shops:t,materials:s,products:n}=ci(),{toast:r}=Ai(),[o,c]=C.useState(1),p=typeof window<"u"&&window.location.search.includes("step=11"),[f,A]=C.useState(""),[h,l]=C.useState(""),[g,v]=C.useState(null),[m,N]=C.useState(null),[w,E]=C.useState(null),[F,M]=C.useState(null),[k,K]=C.useState(null),[G,ee]=C.useState(null),[V,X]=C.useState(1),[J,he]=C.useState(7),[q,ie]=C.useState(3),[Ae,ce]=C.useState(6),[oe,ne]=C.useState(2),[re,se]=C.useState([]),[je,De]=C.useState([]);C.useEffect(()=>{nt("/api/accumulated-products/flooring",{headers:{}}).then(x=>x.json()).then(x=>{De(x.data||[])}).catch(x=>console.error("Failed to load accumulated products",x))},[]),C.useEffect(()=>{if(typeof window<"u"){const j=new URLSearchParams(window.location.search).get("step");if(j){const u=parseInt(j,10);u>=1&&u<=12&&c(u)}}},[]),C.useEffect(()=>{o===12&&nt("/api/accumulated-products/flooring",{headers:{}}).then(x=>x.json()).then(x=>{const j=x.data||[];De(j),console.debug("Restored flooring_accumulated_products for Step 12:",j.length)}).catch(x=>console.error("Failed to load accumulated products for Step 12",x))},[o]);const ge=x=>{const j=x?.doorType??w,u=x?.panelType??m,b=x?.subOption??F;if(!j)return null;const S=Ce.find(Q=>Q.value===j);let R=S?S.label:kg[j]||j;/door/i.test(R)||(R=`${R} Door`);const B=u==="panel"?"With Panel":"Without Panel",D=b?` - ${b}`:"";return`${B}  ${R}${D}`},Z=()=>{const x=(h||"").toString();if(!w&&!x)return null;const j=x||ge(),u=x||kg[w]||w,b=w?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(w):fr(j).includes("GLASS")||fr(j).includes("STILE");return{label:j,productName:u,requiresGlazing:b}},fe=()=>{const x=(h||"").toString();if(!w&&!x||!s.length)return[];const j=x||(w?kg[w]:"");let u=[];if(j&&(u=s.filter(S=>{const R=(S.product||"").toString();if(!R||!j)return!1;const B=fr(R),D=fr(j);return B.includes(D)||D.includes(B)})),(!u||u.length===0)&&!x&&(u=w?s.filter(S=>IK(S,w)):s.filter(S=>{const R=(S.product||"").toString();if(!j)return!1;const B=fr(R),D=fr(j);return B.includes(D)||D.includes(B)})),u.length===0)return[];const b=new Map;for(const S of u){const R=`${fr(S.product)}__${fr(S.name)}__${FK(S.code)}`,B=b.get(R);(!B||(S.rate||0)<(B.rate||0))&&b.set(R,S)}return Array.from(b.values())},ue={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],Ce=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],Ne=(x,j)=>{const u=V||1,b=J||7,S=q||3,R=Ae||6,B=oe||2,D=jf(b,S),Q=x.toLowerCase();let $=0;return Q.includes("frame")||Q.includes("door frame")?$=D*u:Q.includes("door")&&(Q.includes("panel")||Q.includes("shutter")||Q.includes("flush")||Q.includes("wooden"))?$=u:Q.includes("hinge")?$=u*3:Q.includes("lock")||Q.includes("handle")||Q.includes("stopper")||Q.includes("bolt")?$=u:Q.includes("glass")?$=wf(R,B)*u:$=u,Math.max(1,Math.ceil($))},ye=(x,j)=>{const u=x||re,b=Array.from(new Map((u||[]).map(R=>[R.rowId||`${R.batchId||""}|${R.materialId}|${R.selectedShopId||""}|${R.selectedBrand||""}`,R])).values()),S=j||ht;return b.map(R=>{let B=Te.find($t=>$t.id===R.materialId);if(B||(B=s.find($t=>$t.id===R.materialId)||null),!B)return null;const D=s.find($t=>{const gs=fr($t.product)===fr(B.product),nn=fr($t.name)===fr(B.name),z=$t.shopId===R.selectedShopId,me=xp($t)===(R.selectedBrand||"Generic");return gs&&nn&&z&&me})||B,Q=t.find($t=>$t.id===R.selectedShopId),$=R.rowId||(R.batchId?`${R.batchId}-${D.id}`:D.id),te=S[$]||S[D.id]||S[B.id],Ue=Ne(D.name,D.unit),He=te?.quantity??Ue,st=te?.supplyRate??D.rate??0,Bt=te?.installRate??0,Lt=(ts||[]).find($t=>$t.rowId===$||`${$t.batchId||""}-${$t.id}`===$);return{id:D.id,batchId:R.batchId,rowId:$,name:D.name,quantity:He,unit:D.unit,rate:st,shopId:R.selectedShopId,shopName:Q?.name||"Unknown",installRate:Bt,doorType:Lt?.doorType||Lt?.door_type||void 0,panelType:Lt?.panelType||Lt?.panel_type||void 0,subOption:Lt?.subOption||Lt?.sub_option||void 0,glazingType:Lt?.glazingType||Lt?.glazing_type||void 0,productLabel:Lt?.productLabel||void 0}}).filter(R=>R!==null)},we=()=>ye().reduce((x,j)=>x+j.quantity*j.rate,0),Te=fe(),qe=x=>(x?.name||x?.title||x?.label||x?.productName||x?.product||"").toString(),ve=x=>(x?.category||x?.type||x?.group||x?.section||"").toString(),Ge=x=>{const j=fr(qe(x)),u=fr(ve(x)),b=fr(x?.subCategory?.name??x?.subcategory?.name??x?.subCategoryName??x?.subcategoryName??x?.subCategory??x?.subcategory??x?.sub_category??x?.sub_category_name??""),S=b.includes("FLOOR")||b.includes("FLOORING")||b.includes("TILE")||b.includes("TILES")||u.includes("FLOOR")||u.includes("FLOORING")||u.includes("TILE")||u.includes("TILES")||j.includes("FLOOR")||j.includes("FLOORING")||j.includes("TILE")||j.includes("TILES"),R=j.includes("DOOR")||j.includes("BLIND")||j.includes("PIPE")||j.includes("PLUMB")||j.includes("ELECTRICAL")||j.includes("SWITCH")||j.includes("SOCKET")||j.includes("CEILING")||j.includes("GYPSUM")||j.includes("PAINT")||j.includes("CIVIL")||j.includes("WALL")||u.includes("DOOR")||u.includes("BLIND")||u.includes("PIPE")||u.includes("PLUMB")||u.includes("ELECTRICAL")||u.includes("CEILING")||u.includes("PAINT")||u.includes("CIVIL")||b.includes("DOOR")||b.includes("BLIND")||b.includes("PIPE")||b.includes("PLUMB")||b.includes("ELECTRICAL")||b.includes("CEILING")||b.includes("PAINT")||b.includes("CIVIL");return S&&!R},at=x=>{const j=fr(x);return j.includes("FLUSH")?"flush":j.includes("WPC")?"wpc":j.includes("STILE")||j.includes("ALUMIN")?"stile":j.includes("GLASS PANEL")?"glasspanel":j.includes("GLASS")?"glassdoor":j.includes("WOOD")||j.includes("TEAK")?"wooden":null},Se=(n||[]).filter(Ge).slice().sort((x,j)=>{const u=qe(x),b=qe(j);return u.localeCompare(b)}),vt=x=>{const j=qe(x);A(x.id||j),l(j);const u=at(j);E(u||w),M(null),K(null),ee(null),se([]),pt({}),Dt({}),rs({}),c(6)},[ht,pt]=C.useState({}),[Ze,Ht]=C.useState([]),[At,Ct]=C.useState({}),[It,Wt]=C.useState("Concept Trunk Interiors"),[Es,Ss]=C.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[_s,$e]=C.useState("33ASOPS5560M1Z1"),[ke,it]=C.useState(""),[tt,Jt]=C.useState(new Date().toISOString().slice(0,10)),[Qt,ss]=C.useState(""),[dt,qt]=C.useState("50% Advance and 50% on Completion"),[Vt,vs]=C.useState(""),[ns,js]=C.useState(""),[ln,ys]=C.useState(""),[gt,Dt]=C.useState({}),[xt,rs]=C.useState({}),[ps,yn]=C.useState({}),[is,Fs]=C.useState({}),[Ns,Nn]=C.useState({}),[Cs,zt]=C.useState({}),[os,Ps]=C.useState([]),[Ye,St]=C.useState([]),[Rt,us]=C.useState(""),[As,as]=C.useState([]),[bs,cs]=C.useState([]),[Us,an]=C.useState([]),[Mr,Un]=C.useState(!1);C.useEffect(()=>{(async()=>{if(ke)try{const j=await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=flooring`,{headers:{}});if(j.ok){const S=await j.json();as(S.items||[])}const u=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=flooring`,{headers:{}});if(u.ok){const S=await u.json();cs(S.items||[])}const b=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=flooring`,{headers:{}});if(b.ok){const S=await b.json();an(S.items||[])}}catch(j){console.warn("Failed to load data from DB:",j)}})()},[ke]),C.useEffect(()=>{if(o===7){const x=ye(),j={};x.forEach(u=>{j[u.id]={quantity:u.quantity||0,supplyRate:u.rate||0,installRate:0}}),pt(j)}},[o,re]),C.useEffect(()=>{if(o===9){const x=ye(Ze,At);if(x.length>0){const j=x[0].shopId,u=t.find(b=>b.id===j);if(u){const b=[u.name||"",u.address||"",u.area||"",u.city||"",u.state||"",u.pincode||"",u.gstNo?`GSTIN: ${u.gstNo}`:"",u.phone||""].filter(Boolean);ys(b.join(`
`))}}}},[o,Ze,At,re,t]),C.useEffect(()=>{if(o===9){Je();const x=[],j={},u={},b={};if(ts&&ts.length>0)for(const S of ts){const R=S.rowId||`${S.batchId||""}-${S.id}`;x.findIndex(D=>D.materialId===S.id&&D.rowId===R&&(D.batchId||"")===(S.batchId||""))===-1&&(x.push({materialId:S.id,selectedShopId:S.shopId||"",selectedBrand:S.brand||void 0,batchId:S.batchId,rowId:R}),j[R]={quantity:Number(S.quantity||0),supplyRate:Number(S.supplyRate??S.rate??0),installRate:Number(S.installRate||0)},S.description&&(u[R]=S.description),S.location&&(b[R]=S.location))}if(As&&As.length>0)for(const S of As){if(!s.find(Ue=>Ue.id===S.material_id))continue;const B=S.material_id,D=S.row_id||(S.batch_id?`${S.batch_id}-${B}`:B),Q=S.shop_id||"",$=S.brand||void 0;x.findIndex(Ue=>Ue.materialId===B&&(Ue.batchId||"")===(S.batch_id||"")&&(Ue.rowId||"")===D)===-1&&(x.push({materialId:B,selectedShopId:Q,selectedBrand:$,batchId:S.batch_id||(S.row_id?D.replace(`-${B}`,""):void 0)}),j[D]={quantity:Number(S.quantity||0),supplyRate:Number(S.supply_rate||S.rate||0),installRate:Number(S.install_rate||0)},S.description&&(u[D]=S.description),S.location&&(b[D]=S.location))}re&&re.length>0&&re.forEach(S=>{if(x.findIndex(B=>B.materialId===S.materialId&&B.batchId===S.batchId)===-1){x.push(S);const B=s.find(D=>D.id===S.materialId);if(B){const D=S.batchId?`${S.batchId}-${S.materialId}`:S.materialId;j[D]={quantity:ht[S.materialId]?.quantity??B.quantity??1,supplyRate:ht[S.materialId]?.supplyRate??B.rate??0,installRate:ht[S.materialId]?.installRate??0}}}}),x.length>0&&Ht(x),Object.keys(j).length>0&&Ct(j),Object.keys(u).length>0&&Dt(S=>({...S,...u})),Object.keys(b).length>0&&rs(S=>({...S,...b}))}},[o,re,As]),C.useEffect(()=>{o===11&&(async()=>{if(ke)try{const j=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=flooring`,{headers:{}});if(j.ok){const b=(await j.json()).items||[],S={},R={},B={},D={};b.forEach(Q=>{const $=s.find(te=>te.name===Q.item);$&&(S[$.id]=Number(Q.supply_rate||0),R[$.id]=Number(Q.install_rate||0),B[$.id]=Number(Q.qty||0),D[$.id]=Q.unit||"")}),zt(Q=>({...Q,...S})),Nn(Q=>({...Q,...R})),yn(Q=>({...Q,...B})),Fs(Q=>({...Q,...D}))}}catch(j){console.warn("Failed to load step 11 data:",j)}})()},[o,ke,bs]);const Ks=C.useRef(null);C.useEffect(()=>{Je().catch(()=>{})},[]),C.useEffect(()=>{(async()=>{if(ke)try{const j=await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=flooring`,{headers:{}});if(j.ok){const u=await j.json(),b=u.items.map(S=>({id:S.material_id,rowId:S.row_id,batchId:S.batch_id,name:S.name,unit:S.unit,quantity:S.quantity,supplyRate:S.supply_rate,installRate:S.install_rate,shopId:S.shop_id,shopName:S.shop_name,description:S.description,location:S.location,doorType:S.door_type,panelType:S.panel_type,subOption:S.sub_option,glazingType:S.glazing_type}));if(Qs(b),u.items.length>0){const S=u.items[0];lt({doorType:S.door_type,panelType:S.panel_type,subOption:S.sub_option,glazingType:S.glazing_type,count:S.qty,height:S.height,width:S.width,glassHeight:S.glass_height,glassWidth:S.glass_width,subtotal:S.subtotal,sgst:S.sgst,cgst:S.cgst,round_off:S.round_off,grand_total:S.grand_total})}}}catch(j){console.warn("Failed to load step 9 from DB",j)}})()},[ke]),C.useEffect(()=>(Ks.current&&clearTimeout(Ks.current),Ks.current=setTimeout(async()=>{new Date().toISOString();try{if(!ke)return;const x=ye().map((j,u)=>{const b=j.rowId||(j.batchId?`${j.batchId}-${j.id}`:j.id);return{estimator:"flooring",session_id:ke,s_no:u+1,row_id:String(b),batch_id:j.batchId||null,material_id:j.id,name:j.name,unit:j.unit,quantity:Number(ht[j.id]?.quantity??j.quantity??0),supply_rate:Number(ht[j.id]?.supplyRate??j.rate??0),install_rate:Number(ht[j.id]?.installRate??0),shop_id:j.shopId||"",shop_name:j.shopName||"",description:gt[j.id]||"",location:xt[j.id]||"",door_type:w,panel_type:m,sub_option:F,glazing_type:G,qty:V,height:J,width:q,glass_height:Ae,glass_width:oe}});await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:ke,items:x})})}catch{}},800),()=>{Ks.current&&clearTimeout(Ks.current)}),[re,ht,gt,xt,w,m,F,G,V,J,q,Ae,oe,ke]);const Pn=x=>{const j=Te.find(Q=>Q.id===x);if(!j)return;if(re.find(Q=>Q.materialId===x)){se(Q=>Q.filter($=>$.materialId!==x));return}const b=s.filter(Q=>fr(Q.product)===fr(j.product)&&fr(Q.name)===fr(j.name)).map(Q=>({brand:xp(Q),shopId:Q.shopId,rate:Q.rate||0})),R=Array.from(new Set(b.map(Q=>Q.brand))).sort()[0]||"Generic",D=b.filter(Q=>Q.brand===R).sort((Q,$)=>Q.rate-$.rate)[0];D?.shopId&&se(Q=>[...Q,{materialId:x,selectedShopId:D.shopId,selectedBrand:R}])},nr=(x,j)=>{se(u=>u.map(b=>b.materialId===x?{...b,selectedShopId:j}:b))},Yn=(x,j)=>{const u=Te.find(R=>R.id===x);if(!u)return;const S=s.filter(R=>fr(R.product)===fr(u.product)&&fr(R.name)===fr(u.name)).map(R=>({brand:xp(R),shopId:R.shopId,rate:R.rate||0})).filter(R=>R.brand===j).sort((R,B)=>R.rate-B.rate)[0]?.shopId||"";se(R=>R.map(B=>B.materialId===x?{...B,selectedBrand:j,selectedShopId:S||B.selectedShopId}:B))},[dn,vn]=C.useState([]),jn=()=>{const x=(o===9?ye(Ze,At):ye()).map(j=>j.rowId||j.id);vn(j=>j.length===x.length?[]:x)},Jn=async()=>{if(dn.length!==0){try{const x=[],j=[];for(const u of dn){const b=ts?.find(S=>`${S.batchId||""}-${S.id}`===u);if(b&&b.id){const S=As.find(R=>R.id===b.id);S&&x.push(S)}else{const S=Ze.find(R=>`${R.batchId||""}-${R.materialId}`===u);S&&j.push(S)}}if(x.length>0&&ke&&(await nt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:ke,estimator:"flooring",items:x})}),Qs(u=>u?u.filter(b=>!x.some(S=>S.id===b.id)):null)),j.length>0&&Ht(u=>u.filter(b=>!j.some(S=>`${S.batchId||""}-${S.materialId}`==`${b.batchId||""}-${b.materialId}`))),Ht(u=>u.filter(b=>!dn.includes(`${b.batchId||""}-${b.materialId}`))),Ct(u=>{const b={...u};return dn.forEach(S=>delete b[S]),b}),ke){const b=await(await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=flooring`,{headers:{}})).json();as(b.items||[])}r({title:"Success",description:`${dn.length} item(s) deleted successfully!`})}catch(x){console.warn("Failed to delete items",x),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}vn([])}},[Zr,Ir]=C.useState([]),Vn=C.useRef(""),[Ts,Ls]=C.useState(null),[ts,Qs]=C.useState(null),[ls,be]=C.useState({}),[xe,lt]=C.useState(null),Je=async()=>{try{const x=await nt("/api/boq");if(x.status===401){Ir([]),Vn.current!=="401"&&(Vn.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!x.ok){const b=await x.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${b||x.status}`)}if(!(x.headers.get("content-type")||"").includes("application/json")){const b=await x.text().catch(()=>"");console.warn("/api/boq returned non-json:",b),Ir([]);return}const u=await x.json();Ir(u.boqs||[]),Vn.current=""}catch(x){console.error("fetchSavedBoqs",x);const j=String(x?.message||x||"");if(!j)return;Vn.current!==j&&(Vn.current=j,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},fs=async()=>{try{if(!ke)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const x={estimator:"flooring",billNo:ke,doorType:w,panelType:m,subOption:F,glazingType:G,qty:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,materials:ts&&ts.length>0?ts:ye(),subtotal:ks,sgst:qs,cgst:Js,roundOff:ms,grandTotal:$n},j=await nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!j.ok){const S=await j.text().catch(()=>"");throw new Error(S||"save failed")}const u=j.headers.get("content-type")||"";let b=null;if(u.includes("application/json"))b=await j.json();else{const S=await j.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",S),b={boq:null}}return await Je(),Ls(b?.boq||b?.boqs?.[0]||null),!0}catch(x){return console.error("handleSaveBOQ",x),!1}},wn=async x=>{try{if(!(await nt(`/api/boq/${x}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await Je()}catch(j){console.error("handleDeleteSavedBoq",j)}},zn=()=>{c(1),E(null),N(null),M(null),K(null),X(1),he(7),ie(3),ce(0),ne(0),Ps([]),yn({}),Dt({}),rs({}),Fs({}),zt({}),Nn({}),be({}),Ls(null)},di=async()=>{Un(!0);try{let x=bs||[];if(ke)try{const R=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=flooring`);R.ok&&(x=(await R.json()).items||[],cs(x))}catch(R){console.warn("Failed to refresh step11 items before save",R)}const j=on.map(R=>({estimator:"flooring",session_id:ke,group_key:(R.groupKey||`${R.doorType||"door"}||${R.panelType||""}||${R.subOption||""}`)+"::"+(R.name||""),group_id:R.groupId||`group_${R.groupKey||""}`,item_name:R.name,unit:R.unit,quantity:R.quantity,location:R.location||"",description:R.description||"",supply_rate:Cs[R.id]||R.supplyRate||0,install_rate:Ns[R.id]||R.installRate||0,supply_amount:(R.quantity||0)*(Cs[R.id]||R.supplyRate||0),install_amount:(R.quantity||0)*(Ns[R.id]||R.installRate||0),supply_subtotal:on.reduce((B,D)=>B+(D.quantity||0)*(Cs[D.id]||D.supplyRate||0),0),install_subtotal:on.reduce((B,D)=>B+(D.quantity||0)*(Ns[D.id]||D.installRate||0),0),sgst:qs,cgst:Js,round_off:ms,grand_total:on.reduce((B,D)=>B+(D.quantity||0)*((Cs[D.id]||D.supplyRate||0)+(Ns[D.id]||D.installRate||0)),0)+qs+Js+ms})),u=new Set((x||[]).map(R=>R.group_key||R.groupKey)),b=j.filter(R=>!u.has(R.group_key));if(b.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),Un(!1),!0;const S=await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:b})});if(!S.ok){const R=await S.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${R||S.statusText}`,variant:"destructive"}),Un(!1),!1}try{const R=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=flooring`);if(R.ok){const B=await R.json();cs(B.items||[])}}catch(R){console.warn("Failed to reload step11 items after save",R)}return De([]),r({title:"Success",description:"Step 11 saved to database."}),Un(!1),!0}catch(x){return console.error("handleSaveAccumulatedBOQ",x),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Un(!1),!1}},Oi=x=>{if(it(x.bill_no||""),E(x.door_type||null),N(x.panel_type||null),M(x.sub_option||null),ee(x.glazing_type||null),X(x.qty||1),he(x.height||7),ie(x.width||3),ce(x.glass_height||6),ne(x.glass_width||2),Array.isArray(x.materials)){const j=x.materials.map(u=>({materialId:u.id,selectedShopId:u.shopId||u.shop_id||u.shopId||"",selectedBrand:u.shopName||u.brand||u.selectedBrand||void 0}));se(j.filter(Boolean))}Ls(x)},ka=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(j))}}));return}pt(u=>({...u,[x]:{...u[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(j))}}))},Rr=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(j)),installRate:u[x]?.installRate||0}}));return}pt(u=>({...u,[x]:{...u[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(j)),installRate:u[x]?.installRate||0}}))},Ha=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(j)),supplyRate:u[x]?.supplyRate||0}}));return}pt(u=>({...u,[x]:{...u[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(j)),supplyRate:u[x]?.supplyRate||0}}))},Na=()=>{const x=document.getElementById("boq-pdf");if(!x){alert("BOQ content not found");return}setTimeout(()=>{vA().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:j=>j.className?.toString().includes("bg-")||j.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save().catch(j=>{console.error("PDF Export Error:",j),alert("PDF export failed. Check console.")})},100)},$r=async()=>{const x=document.getElementById("boq-final-pdf");if(!x){alert("Final BOQ content not found");return}const j=(await Uc(async()=>{const{default:u}=await Promise.resolve().then(()=>ru);return{default:u}},void 0)).default;j().set({margin:10,filename:`BOQ-${ke||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save()},Oa=()=>{const x=ye(),j=Z(),u=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${m==="panel"?"With Panel":"Without Panel"} - ${j?.label}`,`Dimensions: ${J}ft  ${q}ft (Count: ${V})`,...G?[`Glazing: ${G}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];x.forEach((D,Q)=>{const $=D.quantity*D.rate;u.push(`${Q+1},"${D.name}","${D.unit}",${D.quantity},${D.rate},"${D.shopName}",${$}`)}),u.push("",`TOTAL COST,,,${we().toFixed(2)}`);const b=u.join(`
`),S=new Blob([b],{type:"text/csv"}),R=window.URL.createObjectURL(S),B=document.createElement("a");B.href=R,B.download=`BOQ-Doors-${new Date().getTime()}.csv`,B.click(),URL.revokeObjectURL(R)},vi=()=>{const x=on||[],j=[];j.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),x.forEach((B,D)=>{const Q=Number(B.supplyRate??B.rate??0),$=Number(B.installRate??0),te=Number(B.quantity||0),Ue=te*Q,He=te*$,st=(B.location||xt[B.id]||"").toString().replace(/"/g,'""'),Bt=(B.description||gt[B.id]||B.name||"").toString().replace(/"/g,'""'),gs=(ge({doorType:B.doorType||B.door_type,panelType:B.panelType||B.panel_type,subOption:B.subOption||B.sub_option,glazingType:B.glazingType||B.glazing_type})||B.name||"").replace(/"/g,'""');j.push(`${D+1},"${gs}","${st}","${Bt}",${B.unit},${te},${Q.toFixed(2)},${$.toFixed(2)},${Ue.toFixed(2)},${He.toFixed(2)}`)});const u=j.join(`
`),b=new Blob([u],{type:"text/csv"}),S=window.URL.createObjectURL(b),R=document.createElement("a");R.href=S,R.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,R.click(),URL.revokeObjectURL(S)},Ui=async()=>{const x=ye(Ze,At).map(B=>{const D=B.rowId||`${B.batchId}-${B.id}`;return{id:B.id,rowId:D,batchId:B.batchId||null,name:B.name,productLabel:B.productLabel||null,product_label:B.productLabel||null,unit:B.unit,quantity:At[D]?.quantity??At[B.id]?.quantity??B.quantity,supplyRate:At[D]?.supplyRate??At[B.id]?.supplyRate??B.rate,installRate:At[D]?.installRate??At[B.id]?.installRate??B.installRate??0,shopId:B.shopId,shopName:B.shopName,description:gt[D]||gt[B.id]||"",location:xt[D]||xt[B.id]||"",doorType:B.doorType,panelType:B.panelType,subOption:B.subOption,glazingType:B.glazingType,isSaved:B.isSaved||!1}}),j=x.filter(B=>!B.isSaved);if(j.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let u=ke;(!u||u.trim()==="")&&(u=`DOOR-${Date.now()}`,it(u));const b=xe||(()=>{const B=x.reduce((Ue,He)=>Ue+Number(He.quantity||0)*(Number(He.supplyRate||0)+Number(He.installRate||0)),0),D=B*.09,Q=B*.09,$=Math.round(B+D+Q)-(B+D+Q),te=B+D+Q+$;return{subtotal:B,sgst:D,cgst:Q,round_off:$,grand_total:te}})(),S={id:`local-${Date.now()}`,estimator:"flooring",bill_no:u,door_type:xe?.doorType||xe?.door_type||w,panel_type:xe?.panelType||xe?.panel_type||m,sub_option:xe?.subOption||xe?.sub_option||F,glazing_type:xe?.glazingType||xe?.glazing_type||G,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,materials:x,subtotal:b.subtotal,sgst:b.sgst,cgst:b.cgst,round_off:b.round_off,grand_total:b.grand_total,created_at:new Date().toISOString()};Ls(S),Qs(x);try{lt(B=>({...B||{},...b}))}catch{}const R=j.map((B,D)=>({estimator:"flooring",session_id:u,s_no:D+1,row_id:String(B.rowId||`${B.batchId||""}-${B.id}`),batch_id:B.batchId||null,material_id:B.id,name:B.name,unit:B.unit,quantity:Number(B.quantity||0),supply_rate:Number(B.supplyRate||0),install_rate:Number(B.installRate||0),shop_id:B.shopId||"",shop_name:B.shopName||"",description:B.description||"",location:B.location||"",door_type:B.doorType||xe?.doorType||xe?.door_type||w||null,panel_type:B.panelType||xe?.panelType||xe?.panel_type||m||null,sub_option:B.subOption||xe?.subOption||xe?.sub_option||F||null,glazing_type:B.glazingType||xe?.glazingType||xe?.glazing_type||G||null,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,subtotal:b.subtotal,sgst:b.sgst,cgst:b.cgst,round_off:b.round_off,grand_total:b.grand_total}));try{await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:u,items:R})});const D=await(await nt(`/api/estimator-step9-items?session_id=${u}&estimator=flooring`,{headers:{}})).json();as(D.items||[]);const Q=(ts||[]).map($=>j.some(Ue=>$.rowId===Ue.rowId||`${$.batchId||""}-${$.id}`==`${Ue.batchId||""}-${Ue.id}`)?{...$,isSaved:!0}:$);Qs(Q),r({title:"Success",description:`${j.length} new material(s) saved successfully to database!`})}catch(B){console.warn("Failed to save step 9 to DB",B),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},bi=x=>{let j=5381;for(let u=0;u<x.length;u+=1)j=(j<<5)+j^x.charCodeAt(u);return Math.abs(j>>>0).toString(36)},ui=()=>{const x=JSON.stringify({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,selectedMaterials:(re||[]).map(j=>({materialId:j.materialId,selectedShopId:j.selectedShopId,selectedBrand:j.selectedBrand})),editable:Object.keys(ht||{}).sort().map(j=>({id:j,...ht[j]}))});return`batch-${bi(x)}`},hi=()=>{const x=ui(),j=ye(re,ht).map(D=>({id:D.id,rowId:`${x}-${D.id}`,batchId:x,name:D.name,unit:D.unit,quantity:ht[D.id]?.quantity??D.quantity,supplyRate:ht[D.id]?.supplyRate??D.rate,installRate:ht[D.id]?.installRate??0,shopId:D.shopId,shopName:D.shopName,description:gt[D.id]||"",location:xt[D.id]||"",doorType:w,productLabel:h||ge(),panelType:m,subOption:F,glazingType:G,isSaved:!1}));if(j.length===0){c(9);return}const S=[...(ts||[]||[]).filter(D=>D.batchId!==x),...j],R=Array.from(new Map((S||[]).map(D=>[D.rowId||`${D.batchId||""}-${D.id}`,D])).values());Qs(R),Ht((re||[]).map(D=>({materialId:D.materialId,selectedShopId:D.selectedShopId,selectedBrand:D.selectedBrand,batchId:x})));const B={};R.forEach(D=>{const Q=D.rowId||`${D.batchId}-${D.id}`;B[Q]={quantity:Number(D.quantity||0),supplyRate:Number(D.supplyRate||D.rate||0),installRate:Number(D.installRate||0)}}),Ct(B);try{const D=we(),Q=D*.09,$=D*.09,te=Math.round(D+Q+$)-(D+Q+$),Ue=D+Q+$+te;lt({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,subtotal:D,sgst:Q,cgst:$,round_off:te,grand_total:Ue})}catch{}c(9)},tn=o===9||o===11?ts||[]:ye(),sn=o===9?At:ht,ks=tn.reduce((x,j)=>x+j.quantity*((sn[j.id]?.supplyRate??j.rate)+(sn[j.id]?.installRate??j.installRate??0)),0),qs=ks*.09,Js=ks*.09,ms=Math.round(ks+qs+Js)-(ks+qs+Js),$n=ks+qs+Js+ms,qr=je.length>0?je.flatMap(x=>x.materials||[]):ts&&ts.length>0?ts:tn&&tn.length>0?tn:Ts&&Ts.materials&&Ts.materials.length>0?Array.isArray(Ts.materials)?Ts.materials:JSON.parse(Ts.materials||"[]"):tn,Ka=(()=>{const x=new Map;for(const u of qr||[]){const b=u.productLabel||u.doorType||u.door_type||xe?.doorType||xe?.door_type||w||"door",S=u.panelType||u.panel_type||xe?.panelType||xe?.panel_type||m||"",R=u.subOption||u.sub_option||xe?.subOption||xe?.sub_option||"",B=`${b}||${S}||${R}`;x.has(B)||x.set(B,[]),x.get(B).push(u)}const j=[];for(const[u,b]of x.entries()){const[S,R,B]=u.split("||"),D=`group_${u}`,Q=gt[D]||"",$=xt[D]||"";let te=Number(ls[D]??xe?.count??xe?.qty??V??1);const Ue=String(Q).match(/Qty:\s*(\d+(?:\.\d+)?)/);Ue&&(ls[D]===void 0||ls[D]===null)&&(te=Number(Ue[1]));const He=b.reduce((nn,z)=>nn+Number(z.quantity||0)*Number(z.supplyRate??z.rate??0),0),st=te>0?He/te:He,Bt=b.reduce((nn,z)=>nn+Number(z.quantity||0)*Number(z.installRate??0),0),Lt=te>0?Bt/te:Bt,$t=b[0]&&b[0].productLabel||ge({doorType:S,panelType:R,subOption:B})||S,gs=String(Q).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();j.push({id:D,groupKey:u,name:$t,location:$||"",description:gs||"",unit:"pcs",quantity:te,supplyRate:Number(st||0),installRate:Number(Ns[D]??Lt??0),supplyAmount:Number(st*te||0),installAmount:Number((Ns[D]??Lt)*te||0)})}return j})();(bs||[]).filter(x=>x.item||x.item_name).map((x,j)=>{const u=x.group_key||x.groupKey||`${x.door_type||x.doorType||"door"}||${x.panel_type||x.panelType||""}||${x.sub_option||x.subOption||""}`;return{id:x.id,groupKey:u,name:x.productLabel||x.item_name||x.item||x.name||x.door_label||x.doorType||x.door_type||"Door",location:x.location||"",description:x.description||"",unit:x.unit||"pcs",quantity:Number(x.quantity??x.qty??1),supplyRate:Number(x.supply_rate??x.supplyRate??0),installRate:Number(x.install_rate??x.installRate??0),supplyAmount:Number(x.supply_amount??0),installAmount:Number(x.install_amount??0),doorType:x.door_type||x.doorType,panelType:x.panel_type||x.panelType,subOption:x.sub_option||x.subOption}});const on=(je.length===0?Ka.filter(x=>!(bs||[]).some(u=>(u.group_key||u.groupKey||`${u.door_type||""}||${u.panel_type||""}||${u.sub_option||""}`)===x.groupKey)):je.map((x,j)=>({id:`accumulated_${j}`,groupKey:`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,name:x.productLabel||x.materials?.[0]?.productLabel||x.doorLabel||ge({doorType:x.doorType,panelType:x.panelType,subOption:x.subOption})||x.doorType,location:x.location||"",description:x.description||"",unit:"pcs",quantity:x.count||1,supplyRate:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.supplyRate??b.rate??0),0)||0,installRate:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.installRate??0),0)||0,supplyAmount:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.supplyRate??b.rate??0),0)||0,installAmount:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.installRate??0),0)||0})))||[],Bn=on.filter(x=>Ye.includes(x.id)),Fn=on.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0)),b=Number(Cs[j.id]??j.supplyRate??j.rate??0);return x+u*b},0);on.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0));return x+u*Number(j.installRate||0)},0);const Zn=Bn.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0)),b=Number(Cs[j.id]??j.supplyRate??j.rate??0);return x+u*b},0);Ts&&Ts.bill_no;const pa=Ts&&Ts.created_at?new Date(Ts.created_at).toISOString().slice(0,10):tt,ma=x=>{if(!x)return!1;const j=(x.name||"").toString().trim(),u=Number(x.quantity||0),b=Number(x.supplyRate??x.rate??0),S=Number(x.installRate??0),R=(x.description||"").toString().trim(),B=(x.location||"").toString().trim();return!!j||u>0||b>0||S>0||!!R||!!B};return(je||[]).map(x=>{const j=(x.materials||[]).filter(ma),u=j.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.supplyRate??R.rate??0),0),b=j.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.installRate??0),0);return{...x,materials:j,supplySubtotal:u,installSubtotal:b,subtotal:u+b}}).filter(x=>(x.materials||[]).length>0),e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Flooring Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Vs,{className:"border-border/50",children:e.jsx(fn,{className:"pt-8 min-h-96",children:e.jsxs(gl,{mode:"wait",children:[o===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Flooring Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:Se.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No electrical products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have subCategory set to Electrical (or contains Electrical)."})]}):e.jsx("div",{className:"grid gap-3",children:Se.map(x=>{const j=qe(x),u=(x?.id||j).toString(),b=f===u;return e.jsx(Ie,{variant:b?"default":"outline",onClick:()=>vt(x),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:j||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ve(x)})]})},u)})})})]},"step-select-product"),o===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:M0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:pa})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all-groups",checked:(()=>{const x=(on||[]).map(j=>j.id);return x.length>0&&x.every(j=>os.includes(j))})(),onCheckedChange:x=>{Ps(x?(on||[]).map(j=>j.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(on||[]).map((x,j)=>{const u=Number(Cs[x.id]??x.supplyRate??x.rate??0),b=Number(Ns[x.id]??x.installRate??0);let S=Number(ps[x.id]??(x.quantity||0));const R=S*u,B=S*b;return xt[x.id]??x.location,gt[x.id]??x.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:os.includes(x.id),onCheckedChange:()=>{Ps(D=>D.includes(x.id)?D.filter(Q=>Q!==x.id):[...D,x.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:j+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{value:xt[x.id]??x.location??"",onChange:D=>rs(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:gt[x.id]??x.description??"",onChange:D=>Dt(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{value:is[x.id]??x.unit??"",onChange:D=>Fs(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",value:S,onChange:D=>yn(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:u,onChange:D=>zt(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:b,onChange:D=>Nn(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Fn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!p&&e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",disabled:os.length===0,onClick:async()=>{if(console.log("Delete selected:",os),bs.length>0&&ke)try{await nt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:os,estimator:"flooring"})});const x=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=flooring`,{headers:{}});if(x.ok){const j=await x.json();cs(j.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(x){console.warn("Failed to delete step 11 from DB",x),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(je.length===0)if(Ts){console.log("Deleting from saved BOQ");const x=os.map(S=>S.replace("group_","")),j=Array.isArray(Ts.materials)?Ts.materials:JSON.parse(Ts.materials||"[]");console.log("Current materials:",j.length);const u=j.filter(S=>{const R=S.doorType||S.door_type||xe?.doorType||xe?.door_type||w||"door",B=S.panelType||S.panel_type||xe?.panelType||xe?.panel_type||m||"",D=S.subOption||S.sub_option||xe?.subOption||xe?.sub_option||F||"",Q=`${R}||${B}||${D}`,$=x.includes(Q);return console.log("Checking material:",S.id||S.name,Q,"match:",$),!$});console.log("Filtered materials:",u.length);const b={...Ts,materials:u};Ls(b),nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(()=>console.log("Saved updated BOQ")).catch(S=>console.error("Error saving BOQ:",S))}else{console.log("Deleting from Step 11 saved materials");const x=os.map(b=>b.replace("group_","")),u=((ts&&ts.length>0?ts:tn)||[]).filter(b=>{const S=b.doorType||b.door_type||xe?.doorType||xe?.door_type||w||"door",R=b.panelType||b.panel_type||xe?.panelType||xe?.panel_type||m||"",B=b.subOption||b.sub_option||xe?.subOption||xe?.sub_option||F||"",D=`${S}||${R}||${B}`;return!x.includes(D)});Qs(u)}else if(je.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",je.length);let x;if(os.some(j=>j.startsWith("accumulated_"))){const j=os.filter(u=>u.startsWith("accumulated_")).map(u=>parseInt(u.replace("accumulated_",""))).sort((u,b)=>b-u);x=[...je],j.forEach(u=>{u>=0&&u<x.length&&x.splice(u,1)})}else{const j=os.map(u=>u.replace("group_",""));x=je.filter(u=>{const b=`${u.doorType||"door"}||${u.panelType||""}||${u.subOption||""}`,S=j.includes(b);return console.log("Checking product:",u.id,b,"match:",S),!S})}console.log("Accumulated products after:",x.length),De(x),nt("/api/accumulated-products/flooring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:x})}).catch(j=>console.error("Failed to save accumulated products after delete",j))}Ps([])},children:"Delete Selected"}),e.jsx(Ie,{onClick:zn,children:"Add Product"}),e.jsx(Ie,{onClick:di,disabled:Mr,children:"Save"}),e.jsx(Ie,{onClick:async()=>{St(os);const x=(Bn||[]).map((j,u)=>{const b=Number(Cs[j.id]??j.supplyRate??j.rate??0),S=Number(Ns[j.id]??j.installRate??0);let R=Number(ps[j.id]??(j.quantity||0));return{s_no:u+1,item:j.name,location:xt[j.id]??j.location??"",description:gt[j.id]??j.description??"",unit:is[j.id]??j.unit??"",qty:R,supply_rate:b,install_rate:S,supply_amount:R*b,install_amount:R*S}});try{const j=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=flooring`,{headers:{}});let u=[];j.ok&&(u=(await j.json()).items||[]);const b=x.filter(B=>!u.some(D=>D.item===B.item&&D.description===B.description&&D.unit===B.unit));if(b.length===0){c(12);return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:ke,items:b})});const R=await(await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=flooring`,{headers:{}})).json();an(R.items||[]),r({title:"Success",description:`${b.length} new material(s) saved successfully to database!`}),c(12)}catch(j){console.warn("Failed to save step 12 to DB",j),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),o===4&&w&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(ue[w]||[]).map(x=>e.jsx(Ie,{onClick:()=>{M(x),K(null)},className:`w-full text-black ${F===x?"bg-cyan-500":"bg-white"}`,children:x},x))}),w==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(x=>e.jsx(Ie,{onClick:()=>K(x),className:`w-full text-black ${k===x?"bg-cyan-500":"bg-white"}`,children:x},x))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(5),disabled:!F||w==="flush"&&F==="With Vision Panel"&&!k,children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),o===5&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"count",children:"Count"}),e.jsx(Ve,{id:"count",type:"number",placeholder:"1",value:V||"",onChange:x=>X(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"height",children:"Height"}),e.jsx(Ve,{id:"height",type:"number",placeholder:"7",value:J||"",onChange:x=>he(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"width",children:"Width"}),e.jsx(Ve,{id:"width",type:"number",placeholder:"3",value:q||"",onChange:x=>ie(x.target.value?parseFloat(x.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Xe,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Ve,{id:"glassHeight",type:"number",placeholder:"72",value:Ae||"",onChange:x=>ce(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Ve,{id:"glassWidth",type:"number",placeholder:"24",value:oe||"",onChange:x=>ne(x.target.value?parseFloat(x.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:!V||!J||!q||Z()?.requiresGlazing&&(!Ae||!oe),onClick:()=>c(6),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),o===6&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gn,{id:"select-all-materials",checked:re.length===Te.length&&Te.length>0,onCheckedChange:x=>{if(x){const j=Te.map(u=>{const b=s.filter(D=>fr(D.product)===fr(u.product)&&fr(D.name)===fr(u.name)).map(D=>({id:D.id,brand:xp(D),shopId:D.shopId,rate:D.rate,unit:D.unit,shopName:t.find(Q=>Q.id===D.shopId)?.name||"Unknown"})),R=Array.from(new Set(b.map(D=>D.brand))).sort()[0]||"Generic",B=b.filter(D=>D.brand===R).sort((D,Q)=>(D.rate||0)-(Q.rate||0));return{materialId:u.id,selectedBrand:R,selectedShopId:B[0]?.shopId||""}});se(j)}else se([])}}),e.jsx(Xe,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Te.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",w||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(w?aF[w]||[w]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(x=>x.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Te.map(x=>{const j=re.some(Q=>Q.materialId===x.id),u=re.find(Q=>Q.materialId===x.id),b=s.filter(Q=>fr(Q.product)===fr(x.product)&&fr(Q.name)===fr(x.name)).map(Q=>({id:Q.id,brand:xp(Q),shopId:Q.shopId,rate:Q.rate,unit:Q.unit,shopName:t.find($=>$.id===Q.shopId)?.name||"Unknown"})),S=Array.from(new Set(b.map(Q=>Q.brand))).sort(),B=re.find(Q=>Q.materialId===x.id)?.selectedBrand||S[0]||"Generic",D=b.filter(Q=>Q.brand===B).sort((Q,$)=>(Q.rate||0)-($.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:x.id,checked:j,onCheckedChange:()=>Pn(x.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:x.id,className:"font-medium cursor-pointer",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.code}),j&&S.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Lr,{value:B,onValueChange:Q=>Yn(x.id,Q),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:S.map(Q=>e.jsx(wr,{value:Q,children:Q},Q))})]})]}),j&&D.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Lr,{value:u?.selectedShopId||D[0].shopId,onValueChange:Q=>nr(x.id,Q),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:D.map(Q=>e.jsxs(wr,{value:Q.shopId||"",children:[Q.shopName," - ",Q.rate,"/",x.unit,Q.rate===D[0].rate&&" (Best)"]},Q.shopId))})]})]})]})]})},x.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),o===7&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(x=>{const j=re.find(b=>b.materialId===x.id),u=s.find(b=>b.id===x.id);return e.jsxs("div",{className:Xs("p-3 border rounded grid grid-cols-9 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:x.name}),e.jsx("span",{className:"text-sm",children:gt[x.id]||x.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:j?.selectedBrand||u?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:ht[x.id]?.quantity??x.quantity,onChange:b=>ka(x.id,parseInt(b.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:x.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:x.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:ht[x.id]?.supplyRate??x.rate,onChange:b=>Rr(x.id,parseFloat(b.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((ht[x.id]?.quantity??x.quantity)*((ht[x.id]?.supplyRate??x.rate)+(ht[x.id]?.installRate??0))).toFixed(2)]})]},x.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),o===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||ge()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[J," ft  ",q," ft (Qty: ",V,")"]})]}),G&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:G})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[Ae,'"  ',oe,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(x=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:x==="Qty"||x.includes("Rate")||x.includes("Amount")?"right":"left"},children:x},x))})}),e.jsx("tbody",{children:ye().map((x,j)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:j+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:x.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:x.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(x.quantity*x.rate).toFixed(2)})]},x.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((x,j)=>x+j.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ie,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(si,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:Na,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(si,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>hi(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),A(""),l(""),N(null),E(null),ee(null),X(1),he(7),ie(3),ce(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Qn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),o===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:M0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:pa})})]}),!Bn||Bn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Bn||[]).map((x,j)=>{const u=Number(Cs[x.id]??x.supplyRate??x.rate??0),b=Number(Ns[x.id]??x.installRate??0);let S=Number(ps[x.id]??(x.quantity||0));const R=S*u,B=S*b,D=xt[x.id]??x.location??"",Q=gt[x.id]??x.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:j+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:D||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Q||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:is[x.id]??x.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:S}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",u.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",b.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Zn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ie,{onClick:async()=>{if(Us.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const x=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=flooring`,{headers:{}});let j=[];x.ok&&(j=(await x.json()).items||[]);const b=(Bn||[]).map((B,D)=>{const Q=Number(Cs[B.id]??B.supplyRate??B.rate??0),$=Number(Ns[B.id]??B.installRate??0),te=Number(ps[B.id]??(B.quantity||0));return{s_no:D+1,item:B.name,location:xt[B.id]??B.location??"",description:gt[B.id]??B.description??"",unit:is[B.id]??B.unit??"",qty:te,supply_rate:Q,install_rate:$,supply_amount:te*Q,install_amount:te*$}}).filter(B=>!j.some(D=>D.item===B.item&&D.description===B.description&&D.unit===B.unit));if(b.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:ke,items:b})});const R=await(await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=flooring`,{headers:{}})).json();an(R.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(x){console.warn("Failed to save step 12 to DB",x),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ie,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ie,{onClick:vi,children:"Export Excel"})]})]},"step-qa-boq"),o===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:ke,onChange:x=>it(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:tt,onChange:x=>Jt(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:Qt,onChange:x=>ss(x.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:Vt,onChange:x=>vs(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:ns,onChange:x=>js(x.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:dt,onChange:x=>qt(x.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Rt,onChange:x=>us(x.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]}),Rt&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:gt[Rt]||"",onChange:x=>Dt(j=>({...j,[Rt]:x.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:M0,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",ke]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:ln})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",tt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Qt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",dt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Vt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(x=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:x},x))})}),e.jsx("tbody",{children:tn.map((x,j)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.id&&gt[x.id]||x.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(x.quantity||0)*Number(x.rate||0)||0).toFixed(2)})]},x.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:ks.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:qs.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Js.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:ms.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",$n.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",$n.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:$r,children:"Export PDF"})]})]}),o===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"destructive",onClick:Jn,disabled:dn.length===0,children:"Delete Selected"}),e.jsx(Ie,{type:"button",onClick:Ui,disabled:tn.length===0,children:"Save"}),e.jsx(Ie,{onClick:async()=>{const x=ye(Ze,At),j=dn.length>0?x.filter(R=>dn.includes(R.rowId||`${R.batchId}-${R.id}`)):x,u=j.map(R=>{const B=R.rowId||`${R.batchId||""}-${R.id}`;return{id:R.id,rowId:B,batchId:R.batchId,name:R.name,unit:R.unit,quantity:At[B]?.quantity??At[R.id]?.quantity??R.quantity,supplyRate:At[B]?.supplyRate??At[R.id]?.supplyRate??R.rate,installRate:At[B]?.installRate??At[R.id]?.installRate??R.installRate??0,shopId:R.shopId,shopName:R.shopName,description:gt[B]||gt[R.id]||"",location:xt[B]||xt[R.id]||"",doorType:R.doorType,panelType:R.panelType,subOption:R.subOption,glazingType:R.glazingType}});if(u.length===0)return;const b=j[0],S={id:`local-${Date.now()}`,estimator:"flooring",bill_no:ke,door_type:b?.doorType||xe?.doorType||xe?.door_type||w,panel_type:b?.panelType||xe?.panelType||xe?.panel_type||m,sub_option:b?.subOption||xe?.subOption||xe?.sub_option||F,glazing_type:b?.glazingType||xe?.glazingType||xe?.glazing_type||G,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,materials:u,subtotal:u.reduce((R,B)=>R+Number(B.quantity||0)*(Number(B.supplyRate||0)+Number(B.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};Ls(S);try{await fs()}catch{}vn([]),c(11)},disabled:tn.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-semibold",children:"Saved BOQs"}),Zr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Zr.map(x=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.bill_no||`${x.estimator} - ${x.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{onClick:()=>Oi(x),size:"sm",children:"Load"}),e.jsx(Ie,{variant:"destructive",onClick:()=>wn(x.id),size:"sm",children:"Delete"})]})]},x.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all",checked:(()=>{const x=(o===9?ye(Ze,At):ye()).map(j=>j.rowId||j.id);return dn.length===x.length&&x.length>0})(),onCheckedChange:jn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const x=new Map,j=new Map;tn.forEach(S=>{const R=S.doorType||S.door_type||xe?.doorType||xe?.door_type||w||"door",B=S.panelType||S.panel_type||xe?.panelType||xe?.panel_type||m||"",D=S.subOption||S.sub_option||xe?.subOption||xe?.sub_option||"",Q=`${R}||${B}||${D}`;if(x.has(Q)||x.set(Q,[]),x.get(Q).push(S),!j.has(Q)){const te=(x.get(Q)||[])[0]?.productLabel||`${B==="panel"?"With Panel":"Without Panel"}  ${R}${D?" ("+D+")":""}`;j.set(Q,{label:te})}});const u=[];let b=0;for(const[S,R]of x.entries()){const B=R.map(Ue=>Ue.rowId||`${Ue.batchId||""}-${Ue.id}`),D=B.every(Ue=>dn.includes(Ue)),Q=`group_${S}`,$=gt[Q]||"",te=Number(ls[Q]??xe?.count??xe?.qty??V??1);u.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{id:`group-${S}`,checked:D,onCheckedChange:()=>{vn(D?Ue=>Ue.filter(He=>!B.includes(He)):Ue=>Array.from(new Set([...Ue,...B])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:j.get(S)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Ve,{placeholder:"Group description",value:$?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ue=>Dt(He=>({...He,[Q]:Ue.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:ls[Q]??te,onChange:Ue=>{const He=Ue.target.value?parseFloat(Ue.target.value):0;be(st=>({...st,[Q]:He})),Dt(st=>{const Bt=(st[Q]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...st,[Q]:Bt?Bt+`
Qty: `+He:"Qty: "+He}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${S}`));for(const Ue of R){b+=1;const He=Ue.rowId||`${Ue.batchId}-${Ue.id}`,st=Number(sn[He]?.supplyRate??sn[Ue.id]?.supplyRate??Ue.rate??0),Bt=Number(sn[He]?.installRate??sn[Ue.id]?.installRate??Ue.installRate??0),Lt=st+Bt,$t=Number(sn[He]?.quantity??sn[Ue.id]?.quantity??Ue.quantity??0),gs=$t*Lt,nn=gt[He]??gt[Ue.id]??Ue.description??"",z=String(nn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();u.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:b}),e.jsx("td",{className:"border px-2 py-1",children:Ue.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:gt[He]??gt[Ue.id]??z,onChange:me=>Dt(Qe=>({...Qe,[He]:me.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:is[He]??is[Ue.id]??Ue.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:$t,onChange:me=>ka(He,me.target.value?parseFloat(me.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:Lt,onChange:me=>{const Qe=parseFloat(me.target.value||"0"),We=Number(sn[He]?.supplyRate??sn[Ue.id]?.supplyRate??st),ut=Math.max(0,Qe-We);Rr(He,We),Ha(He,ut)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",gs.toFixed(2)]})]},He))}}return u})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ie,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ie,{onClick:Na,children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const _0="/image.png",OK=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),pr=t=>(t||"").toString().toUpperCase(),iF={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Hg={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},UK=(t,s)=>{const n=pr(t.product),r=pr(t.name),o=pr(t.category),c=pr(t.subCategory),f=(iF[s]||[s.toUpperCase()]).some(l=>n.includes(l)||r.includes(l)||o.includes(l)||c.includes(l)),A=Hg[s],h=A&&pr(n).includes(pr(A));return f||h},vp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function LK(){const{shops:t,materials:s,products:n}=ci(),{toast:r}=Ai(),[o,c]=C.useState(1),p=typeof window<"u"&&window.location.search.includes("step=11"),[f,A]=C.useState(""),[h,l]=C.useState(""),[g,v]=C.useState(null),[m,N]=C.useState(null),[w,E]=C.useState(null),[F,M]=C.useState(null),[k,K]=C.useState(null),[G,ee]=C.useState(null),[V,X]=C.useState(1),[J,he]=C.useState(7),[q,ie]=C.useState(3),[Ae,ce]=C.useState(6),[oe,ne]=C.useState(2),[re,se]=C.useState([]),[je,De]=C.useState([]);C.useEffect(()=>{nt("/api/accumulated-products/doors",{headers:{}}).then(j=>j.json()).then(j=>{De(j.data||[])}).catch(j=>console.error("Failed to load accumulated products",j))},[]),C.useEffect(()=>{if(typeof window<"u"){const u=new URLSearchParams(window.location.search).get("step");if(u){const b=parseInt(u,10);b>=1&&b<=12&&c(b)}}},[]),C.useEffect(()=>{o===12&&nt("/api/accumulated-products/doors",{headers:{}}).then(j=>j.json()).then(j=>{const u=j.data||[];De(u),console.debug("Restored doors_accumulated_products for Step 12:",u.length)}).catch(j=>console.error("Failed to load accumulated products for Step 12",j))},[o]);const ge=j=>{const u=j?.doorType??w,b=j?.panelType??m,S=j?.subOption??F;if(!u)return null;const R=Ce.find($=>$.value===u);let B=R?R.label:Hg[u]||u;/door/i.test(B)||(B=`${B} Door`);const D=b==="panel"?"With Panel":"Without Panel",Q=S?` - ${S}`:"";return`${D}  ${B}${Q}`},Z=()=>{const j=(h||"").toString();if(!w&&!j)return null;const u=j||ge(),b=j||Hg[w]||w,S=w?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(w):pr(u).includes("GLASS")||pr(u).includes("STILE");return{label:u,productName:b,requiresGlazing:S}},fe=()=>{const j=(h||"").toString();if(!w&&!j||!s.length)return[];const u=j||(w?Hg[w]:"");let b=[];if(u&&(b=s.filter(R=>{const B=(R.product||"").toString();if(!B||!u)return!1;const D=pr(B),Q=pr(u);return D.includes(Q)||Q.includes(D)})),(!b||b.length===0)&&!j&&(b=w?s.filter(R=>UK(R,w)):s.filter(R=>{const B=(R.product||"").toString();if(!u)return!1;const D=pr(B),Q=pr(u);return D.includes(Q)||Q.includes(D)})),b.length===0)return[];const S=new Map;for(const R of b){const B=`${pr(R.product)}__${pr(R.name)}__${OK(R.code)}`,D=S.get(B);(!D||(R.rate||0)<(D.rate||0))&&S.set(B,R)}return Array.from(S.values())},ue={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],Ce=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],Ne=(j,u)=>{const b=V||1,S=J||7,R=q||3,B=Ae||6,D=oe||2,Q=jf(S,R),$=j.toLowerCase();let te=0;return $.includes("frame")||$.includes("door frame")?te=Q*b:$.includes("door")&&($.includes("panel")||$.includes("shutter")||$.includes("flush")||$.includes("wooden"))?te=b:$.includes("hinge")?te=b*3:$.includes("lock")||$.includes("handle")||$.includes("stopper")||$.includes("bolt")?te=b:$.includes("glass")?te=wf(B,D)*b:te=b,Math.max(1,Math.ceil(te))},ye=(j,u)=>{const b=j||re,S=u||pt;return b.map(R=>{let B=Te.find($t=>$t.id===R.materialId);if(B||(B=s.find($t=>$t.id===R.materialId)||null),!B)return null;const D=s.find($t=>{const gs=pr($t.product)===pr(B.product),nn=pr($t.name)===pr(B.name),z=$t.shopId===R.selectedShopId,me=vp($t)===(R.selectedBrand||"Generic");return gs&&nn&&z&&me})||B,Q=t.find($t=>$t.id===R.selectedShopId),$=R.rowId||(R.batchId?`${R.batchId}-${D.id}`:D.id),te=S[$]||S[D.id]||S[B.id],Ue=Ne(D.name,D.unit),He=te?.quantity??Ue,st=te?.supplyRate??D.rate??0,Bt=te?.installRate??0,Lt=(Qs||[]).find($t=>$t.rowId===$||`${$t.batchId||""}-${$t.id}`===$);return{id:D.id,batchId:R.batchId,rowId:$,name:D.name,quantity:He,unit:D.unit,rate:st,shopId:R.selectedShopId,shopName:Q?.name||"Unknown",installRate:Bt,doorType:Lt?.doorType||Lt?.door_type||void 0,panelType:Lt?.panelType||Lt?.panel_type||void 0,subOption:Lt?.subOption||Lt?.sub_option||void 0,glazingType:Lt?.glazingType||Lt?.glazing_type||void 0,productLabel:Lt?.productLabel||void 0}}).filter(R=>R!==null)},we=()=>ye().reduce((j,u)=>j+u.quantity*u.rate,0),Te=fe(),qe=j=>(j?.name||j?.title||j?.label||j?.productName||j?.product||"").toString(),ve=j=>(j?.category||j?.type||j?.group||j?.section||"").toString(),Ge=j=>(j?.subCategory?.name||j?.subCategoryName||j?.subcategory||j?.sub_category||j?.subCategory||"").toString(),at=j=>{const u=pr(qe(j)),b=pr(ve(j)),S=pr(Ge(j)),R=S.includes("FALSE")&&S.includes("CEIL")||S.includes("FALSECEIL")||S.includes("GYPSUM")||S.includes("POP")||S.includes("GRID")||b.includes("FALSE")&&b.includes("CEIL")||b.includes("FALSECEIL")||u.includes("FALSE")&&u.includes("CEIL")||u.includes("FALSECEIL")||u.includes("GYPSUM")||u.includes("POP")||u.includes("GRID CEIL")||u.includes("GRID CEILING"),B=u.includes("DOOR")||u.includes("BLIND")||u.includes("FLOORING")||u.includes("PIPE")||u.includes("PLUMB")||u.includes("ELECTRICAL")||u.includes("SWITCH")||u.includes("SOCKET")||u.includes("PAINT")||u.includes("CIVIL")||u.includes("WALL")||b.includes("DOOR")||b.includes("BLIND")||b.includes("FLOORING")||b.includes("PIPE")||b.includes("PLUMB")||b.includes("ELECTRICAL")||b.includes("PAINT")||b.includes("CIVIL")||S.includes("DOOR")||S.includes("BLIND")||S.includes("FLOORING")||S.includes("PIPE")||S.includes("PLUMB")||S.includes("ELECTRICAL")||S.includes("PAINT")||S.includes("CIVIL");return R&&!B},Se=j=>{const u=pr(j);return u.includes("FLUSH")?"flush":u.includes("WPC")?"wpc":u.includes("STILE")||u.includes("ALUMIN")?"stile":u.includes("GLASS PANEL")?"glasspanel":u.includes("GLASS")?"glassdoor":u.includes("WOOD")||u.includes("TEAK")?"wooden":null},vt=(n||[]).filter(at).slice().sort((j,u)=>{const b=qe(j),S=qe(u);return b.localeCompare(S)}),ht=j=>{const u=qe(j);A(j.id||u),l(u);const b=Se(u);E(b||w),M(null),K(null),ee(null),se([]),Ze({}),xt({}),ps({}),c(6)},[pt,Ze]=C.useState({}),[Ht,At]=C.useState([]),[Ct,It]=C.useState({}),[Wt,Es]=C.useState("Concept Trunk Interiors"),[Ss,_s]=C.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[$e,ke]=C.useState("33ASOPS5560M1Z1"),[it,tt]=C.useState(""),[Jt,Qt]=C.useState(new Date().toISOString().slice(0,10)),[ss,dt]=C.useState(""),[qt,Vt]=C.useState("50% Advance and 50% on Completion"),[vs,ns]=C.useState(""),[js,ln]=C.useState(""),[ys,gt]=C.useState(""),[Dt,xt]=C.useState({}),[rs,ps]=C.useState({}),[yn,is]=C.useState({}),[Fs,Ns]=C.useState({}),[Nn,Cs]=C.useState({}),[zt,os]=C.useState({}),[Ps,Ye]=C.useState([]),[St,Rt]=C.useState([]),[us,As]=C.useState(""),[as,bs]=C.useState([]),[cs,Us]=C.useState([]),[an,Mr]=C.useState([]),[Un,Ks]=C.useState(!1);C.useEffect(()=>{(async()=>{if(it)try{const u=await nt(`/api/estimator-step9-items?session_id=${it}&estimator=falseceiling`,{headers:{}});if(u.ok){const R=await u.json();bs(R.items||[])}const b=await nt(`/api/estimator-step11-groups?session_id=${it}&estimator=falseceiling`,{headers:{}});if(b.ok){const R=await b.json();Us(R.items||[])}const S=await nt(`/api/estimator-step12-qa-selection?session_id=${it}&estimator=falseceiling`,{headers:{}});if(S.ok){const R=await S.json();Mr(R.items||[])}}catch(u){console.warn("Failed to load data from DB:",u)}})()},[it]),C.useEffect(()=>{if(o===7){const j=ye(),u={};j.forEach(b=>{u[b.id]={quantity:b.quantity||0,supplyRate:b.rate||0,installRate:0}}),Ze(u)}},[o,re]),C.useEffect(()=>{if(o===9){const j=ye(Ht,Ct);if(j.length>0){const u=j[0].shopId,b=t.find(S=>S.id===u);if(b){const S=[b.name||"",b.address||"",b.area||"",b.city||"",b.state||"",b.pincode||"",b.gstNo?`GSTIN: ${b.gstNo}`:"",b.phone||""].filter(Boolean);gt(S.join(`
`))}}}},[o,Ht,Ct,re,t]),C.useEffect(()=>{if(o===9){fs();const j=[],u={},b={},S={};if(Qs&&Qs.length>0)for(const R of Qs){const B=R.rowId||`${R.batchId||""}-${R.id}`;j.findIndex(Q=>Q.materialId===R.id&&Q.rowId===B&&(Q.batchId||"")===(R.batchId||""))===-1&&(j.push({materialId:R.id,selectedShopId:R.shopId||"",selectedBrand:R.brand||void 0,batchId:R.batchId,rowId:B}),u[B]={quantity:Number(R.quantity||0),supplyRate:Number(R.supplyRate??R.rate??0),installRate:Number(R.installRate||0)},R.description&&(b[B]=R.description),R.location&&(S[B]=R.location))}if(as&&as.length>0)for(const R of as){if(!s.find(He=>He.id===R.material_id))continue;const D=R.material_id,Q=R.row_id||(R.batch_id?`${R.batch_id}-${D}`:D),$=R.shop_id||"",te=R.brand||void 0;j.findIndex(He=>He.materialId===D&&(He.batchId||"")===(R.batch_id||"")&&(He.rowId||"")===Q)===-1&&(j.push({materialId:D,selectedShopId:$,selectedBrand:te,batchId:R.batch_id||(R.row_id?Q.replace(`-${D}`,""):void 0)}),u[Q]={quantity:Number(R.quantity||0),supplyRate:Number(R.supply_rate||R.rate||0),installRate:Number(R.install_rate||0)},R.description&&(b[Q]=R.description),R.location&&(S[Q]=R.location))}re&&re.length>0&&re.forEach(R=>{if(j.findIndex(D=>D.materialId===R.materialId&&D.batchId===R.batchId)===-1){j.push(R);const D=s.find(Q=>Q.id===R.materialId);if(D){const Q=R.batchId?`${R.batchId}-${R.materialId}`:R.materialId;u[Q]={quantity:pt[R.materialId]?.quantity??D.quantity??1,supplyRate:pt[R.materialId]?.supplyRate??D.rate??0,installRate:pt[R.materialId]?.installRate??0}}}}),j.length>0&&At(j),Object.keys(u).length>0&&It(u),Object.keys(b).length>0&&xt(R=>({...R,...b})),Object.keys(S).length>0&&ps(R=>({...R,...S}))}},[o,re,as]),C.useEffect(()=>{o===11&&(async()=>{if(it)try{const u=await nt(`/api/estimator-step11-groups?session_id=${it}&estimator=falseceiling`,{headers:{}});if(u.ok){const S=(await u.json()).items||[],R={},B={},D={},Q={};S.forEach($=>{const te=s.find(Ue=>Ue.name===$.item);te&&(R[te.id]=Number($.supply_rate||0),B[te.id]=Number($.install_rate||0),D[te.id]=Number($.qty||0),Q[te.id]=$.unit||"")}),os($=>({...$,...R})),Cs($=>({...$,...B})),is($=>({...$,...D})),Ns($=>({...$,...Q}))}}catch(u){console.warn("Failed to load step 11 data:",u)}})()},[o,it,cs]);const Pn=C.useRef(null);C.useEffect(()=>{fs().catch(()=>{})},[]),C.useEffect(()=>{(async()=>{if(it)try{const u=await nt(`/api/estimator-step9-items?session_id=${it}&estimator=falseceiling`,{headers:{}});if(u.ok){const b=await u.json(),S=b.items.map(R=>({id:R.material_id,rowId:R.row_id,batchId:R.batch_id,name:R.name,unit:R.unit,quantity:R.quantity,supplyRate:R.supply_rate,installRate:R.install_rate,shopId:R.shop_id,shopName:R.shop_name,description:R.description,location:R.location,doorType:R.door_type,panelType:R.panel_type,subOption:R.sub_option,glazingType:R.glazing_type}));if(ls(S),b.items.length>0){const R=b.items[0];Je({doorType:R.door_type,panelType:R.panel_type,subOption:R.sub_option,glazingType:R.glazing_type,count:R.qty,height:R.height,width:R.width,glassHeight:R.glass_height,glassWidth:R.glass_width,subtotal:R.subtotal,sgst:R.sgst,cgst:R.cgst,round_off:R.round_off,grand_total:R.grand_total})}}}catch(u){console.warn("Failed to load step 9 from DB",u)}})()},[it]),C.useEffect(()=>(Pn.current&&clearTimeout(Pn.current),Pn.current=setTimeout(async()=>{new Date().toISOString();try{if(!it)return;const j=ye().map((u,b)=>{const S=u.rowId||(u.batchId?`${u.batchId}-${u.id}`:u.id);return{estimator:"falseceiling",session_id:it,s_no:b+1,row_id:String(S),batch_id:u.batchId||null,material_id:u.id,name:u.name,unit:u.unit,quantity:Number(pt[u.id]?.quantity??u.quantity??0),supply_rate:Number(pt[u.id]?.supplyRate??u.rate??0),install_rate:Number(pt[u.id]?.installRate??0),shop_id:u.shopId||"",shop_name:u.shopName||"",description:Dt[u.id]||"",location:rs[u.id]||"",door_type:w,panel_type:m,sub_option:F,glazing_type:G,qty:V,height:J,width:q,glass_height:Ae,glass_width:oe}});await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:it,items:j})})}catch{}},800),()=>{Pn.current&&clearTimeout(Pn.current)}),[re,pt,Dt,rs,w,m,F,G,V,J,q,Ae,oe,it]);const nr=j=>{const u=Te.find($=>$.id===j);if(!u)return;if(re.find($=>$.materialId===j)){se($=>$.filter(te=>te.materialId!==j));return}const S=s.filter($=>pr($.product)===pr(u.product)&&pr($.name)===pr(u.name)).map($=>({brand:vp($),shopId:$.shopId,rate:$.rate||0})),B=Array.from(new Set(S.map($=>$.brand))).sort()[0]||"Generic",Q=S.filter($=>$.brand===B).sort(($,te)=>$.rate-te.rate)[0];Q?.shopId&&se($=>[...$,{materialId:j,selectedShopId:Q.shopId,selectedBrand:B}])},Yn=(j,u)=>{se(b=>b.map(S=>S.materialId===j?{...S,selectedShopId:u}:S))},dn=(j,u)=>{const b=Te.find(B=>B.id===j);if(!b)return;const R=s.filter(B=>pr(B.product)===pr(b.product)&&pr(B.name)===pr(b.name)).map(B=>({brand:vp(B),shopId:B.shopId,rate:B.rate||0})).filter(B=>B.brand===u).sort((B,D)=>B.rate-D.rate)[0]?.shopId||"";se(B=>B.map(D=>D.materialId===j?{...D,selectedBrand:u,selectedShopId:R||D.selectedShopId}:D))},[vn,jn]=C.useState([]),Jn=()=>{const j=(o===9?ye(Ht,Ct):ye()).map(u=>u.rowId||u.id);jn(u=>u.length===j.length?[]:j)},Zr=async()=>{if(vn.length!==0){try{const j=[],u=[];for(const b of vn){const S=Qs?.find(R=>`${R.batchId||""}-${R.id}`===b);if(S&&S.id){const R=as.find(B=>B.id===S.id);R&&j.push(R)}else{const R=Ht.find(B=>`${B.batchId||""}-${B.materialId}`===b);R&&u.push(R)}}if(j.length>0&&it&&(await nt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:it,estimator:"falseceiling",items:j})}),ls(b=>b?b.filter(S=>!j.some(R=>R.id===S.id)):null)),u.length>0&&At(b=>b.filter(S=>!u.some(R=>`${R.batchId||""}-${R.materialId}`==`${S.batchId||""}-${S.materialId}`))),At(b=>b.filter(S=>!vn.includes(`${S.batchId||""}-${S.materialId}`))),It(b=>{const S={...b};return vn.forEach(R=>delete S[R]),S}),it){const S=await(await nt(`/api/estimator-step9-items?session_id=${it}&estimator=falseceiling`,{headers:{}})).json();bs(S.items||[])}r({title:"Success",description:`${vn.length} item(s) deleted successfully!`})}catch(j){console.warn("Failed to delete items",j),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}jn([])}},[Ir,Vn]=C.useState([]),Ts=C.useRef(""),[Ls,ts]=C.useState(null),[Qs,ls]=C.useState(null),[be,xe]=C.useState({}),[lt,Je]=C.useState(null),fs=async()=>{try{const j=await nt("/api/boq");if(j.status===401){Vn([]),Ts.current!=="401"&&(Ts.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!j.ok){const S=await j.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${S||j.status}`)}if(!(j.headers.get("content-type")||"").includes("application/json")){const S=await j.text().catch(()=>"");console.warn("/api/boq returned non-json:",S),Vn([]);return}const b=await j.json();Vn(b.boqs||[]),Ts.current=""}catch(j){console.error("fetchSavedBoqs",j);const u=String(j?.message||j||"");if(!u)return;Ts.current!==u&&(Ts.current=u,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},wn=async()=>{try{if(!it)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const j={estimator:"falseceiling",billNo:it,doorType:w,panelType:m,subOption:F,glazingType:G,qty:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,materials:Qs&&Qs.length>0?Qs:ye(),subtotal:qs,sgst:Js,cgst:ms,roundOff:$n,grandTotal:qr},u=await nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!u.ok){const R=await u.text().catch(()=>"");throw new Error(R||"save failed")}const b=u.headers.get("content-type")||"";let S=null;if(b.includes("application/json"))S=await u.json();else{const R=await u.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",R),S={boq:null}}return await fs(),ts(S?.boq||S?.boqs?.[0]||null),!0}catch(j){return console.error("handleSaveBOQ",j),!1}},zn=async j=>{try{if(!(await nt(`/api/boq/${j}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await fs()}catch(u){console.error("handleDeleteSavedBoq",u)}},di=()=>{c(1),E(null),N(null),M(null),K(null),X(1),he(7),ie(3),ce(0),ne(0),Ye([]),is({}),xt({}),ps({}),Ns({}),os({}),Cs({}),xe({}),ts(null)},Oi=async()=>{Ks(!0);try{let j=cs||[];if(it)try{const B=await nt(`/api/estimator-step11-groups?session_id=${it}&estimator=falseceiling`);B.ok&&(j=(await B.json()).items||[],Us(j))}catch(B){console.warn("Failed to refresh step11 items before save",B)}const u=Bn.map(B=>({estimator:"falseceiling",session_id:it,group_key:(B.groupKey||`${B.doorType||"door"}||${B.panelType||""}||${B.subOption||""}`)+"::"+(B.name||""),group_id:B.groupId||`group_${B.groupKey||""}`,item_name:B.name,unit:B.unit,quantity:B.quantity,location:B.location||"",description:B.description||"",supply_rate:zt[B.id]||B.supplyRate||0,install_rate:Nn[B.id]||B.installRate||0,supply_amount:(B.quantity||0)*(zt[B.id]||B.supplyRate||0),install_amount:(B.quantity||0)*(Nn[B.id]||B.installRate||0),supply_subtotal:Bn.reduce((D,Q)=>D+(Q.quantity||0)*(zt[Q.id]||Q.supplyRate||0),0),install_subtotal:Bn.reduce((D,Q)=>D+(Q.quantity||0)*(Nn[Q.id]||Q.installRate||0),0),sgst:Js,cgst:ms,round_off:$n,grand_total:Bn.reduce((D,Q)=>D+(Q.quantity||0)*((zt[Q.id]||Q.supplyRate||0)+(Nn[Q.id]||Q.installRate||0)),0)+Js+ms+$n})),b=new Set((j||[]).map(B=>B.group_key||B.groupKey)),S=u.filter(B=>!b.has(B.group_key));if(S.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),Ks(!1),!0;const R=await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:S})});if(!R.ok){const B=await R.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${B||R.statusText}`,variant:"destructive"}),Ks(!1),!1}try{const B=await nt(`/api/estimator-step11-groups?session_id=${it}&estimator=falseceiling`);if(B.ok){const D=await B.json();Us(D.items||[])}}catch(B){console.warn("Failed to reload step11 items after save",B)}return De([]),r({title:"Success",description:"Step 11 saved to database."}),Ks(!1),!0}catch(j){return console.error("handleSaveAccumulatedBOQ",j),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Ks(!1),!1}},ka=j=>{if(tt(j.bill_no||""),E(j.door_type||null),N(j.panel_type||null),M(j.sub_option||null),ee(j.glazing_type||null),X(j.qty||1),he(j.height||7),ie(j.width||3),ce(j.glass_height||6),ne(j.glass_width||2),Array.isArray(j.materials)){const u=j.materials.map(b=>({materialId:b.id,selectedShopId:b.shopId||b.shop_id||b.shopId||"",selectedBrand:b.shopName||b.brand||b.selectedBrand||void 0}));se(u.filter(Boolean))}ts(j)},Rr=(j,u)=>{if(o===9){It(b=>({...b,[j]:{...b[j]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(u))}}));return}Ze(b=>({...b,[j]:{...b[j]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(u))}}))},Ha=(j,u)=>{if(o===9){It(b=>({...b,[j]:{...b[j]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(u)),installRate:b[j]?.installRate||0}}));return}Ze(b=>({...b,[j]:{...b[j]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(u)),installRate:b[j]?.installRate||0}}))},Na=(j,u)=>{if(o===9){It(b=>({...b,[j]:{...b[j]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(u)),supplyRate:b[j]?.supplyRate||0}}));return}Ze(b=>({...b,[j]:{...b[j]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(u)),supplyRate:b[j]?.supplyRate||0}}))},$r=()=>{const j=document.getElementById("boq-pdf");if(!j){alert("BOQ content not found");return}setTimeout(()=>{vA().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:u=>u.className?.toString().includes("bg-")||u.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(j).save().catch(u=>{console.error("PDF Export Error:",u),alert("PDF export failed. Check console.")})},100)},Oa=async()=>{const j=document.getElementById("boq-final-pdf");if(!j){alert("Final BOQ content not found");return}const u=(await Uc(async()=>{const{default:b}=await Promise.resolve().then(()=>ru);return{default:b}},void 0)).default;u().set({margin:10,filename:`BOQ-${it||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(j).save()},vi=()=>{const j=ye(),u=Z(),b=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${m==="panel"?"With Panel":"Without Panel"} - ${u?.label}`,`Dimensions: ${J}ft  ${q}ft (Count: ${V})`,...G?[`Glazing: ${G}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];j.forEach((Q,$)=>{const te=Q.quantity*Q.rate;b.push(`${$+1},"${Q.name}","${Q.unit}",${Q.quantity},${Q.rate},"${Q.shopName}",${te}`)}),b.push("",`TOTAL COST,,,${we().toFixed(2)}`);const S=b.join(`
`),R=new Blob([S],{type:"text/csv"}),B=window.URL.createObjectURL(R),D=document.createElement("a");D.href=B,D.download=`BOQ-FalseCeiling-${new Date().getTime()}.csv`,D.click(),URL.revokeObjectURL(B)},Ui=()=>{const j=Bn||[],u=[];u.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),j.forEach((D,Q)=>{const $=Number(D.supplyRate??D.rate??0),te=Number(D.installRate??0),Ue=Number(D.quantity||0),He=Ue*$,st=Ue*te,Bt=(D.location||rs[D.id]||"").toString().replace(/"/g,'""'),Lt=(D.description||Dt[D.id]||D.name||"").toString().replace(/"/g,'""'),nn=(ge({doorType:D.doorType||D.door_type,panelType:D.panelType||D.panel_type,subOption:D.subOption||D.sub_option,glazingType:D.glazingType||D.glazing_type})||D.name||"").replace(/"/g,'""');u.push(`${Q+1},"${nn}","${Bt}","${Lt}",${D.unit},${Ue},${$.toFixed(2)},${te.toFixed(2)},${He.toFixed(2)},${st.toFixed(2)}`)});const b=u.join(`
`),S=new Blob([b],{type:"text/csv"}),R=window.URL.createObjectURL(S),B=document.createElement("a");B.href=R,B.download=`BOQ-FalseCeiling-Step11-${new Date().getTime()}.csv`,B.click(),URL.revokeObjectURL(R)},bi=async()=>{const j=ye(Ht,Ct).map(D=>{const Q=D.rowId||`${D.batchId}-${D.id}`;return{id:D.id,rowId:Q,batchId:D.batchId||null,name:D.name,productLabel:D.productLabel||null,product_label:D.productLabel||null,unit:D.unit,quantity:Ct[Q]?.quantity??Ct[D.id]?.quantity??D.quantity,supplyRate:Ct[Q]?.supplyRate??Ct[D.id]?.supplyRate??D.rate,installRate:Ct[Q]?.installRate??Ct[D.id]?.installRate??D.installRate??0,shopId:D.shopId,shopName:D.shopName,description:Dt[Q]||Dt[D.id]||"",location:rs[Q]||rs[D.id]||"",doorType:D.doorType,panelType:D.panelType,subOption:D.subOption,glazingType:D.glazingType,isSaved:D.isSaved||!1}}),u=j.filter(D=>!D.isSaved);if(u.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let b=it;(!b||b.trim()==="")&&(b=`DOOR-${Date.now()}`,tt(b));const S=lt||(()=>{const D=j.reduce((He,st)=>He+Number(st.quantity||0)*(Number(st.supplyRate||0)+Number(st.installRate||0)),0),Q=D*.09,$=D*.09,te=Math.round(D+Q+$)-(D+Q+$),Ue=D+Q+$+te;return{subtotal:D,sgst:Q,cgst:$,round_off:te,grand_total:Ue}})(),R={id:`local-${Date.now()}`,estimator:"falseceiling",bill_no:b,door_type:lt?.doorType||lt?.door_type||w,panel_type:lt?.panelType||lt?.panel_type||m,sub_option:lt?.subOption||lt?.sub_option||F,glazing_type:lt?.glazingType||lt?.glazing_type||G,qty:lt?.count||lt?.qty||V,height:lt?.height||J,width:lt?.width||q,glass_height:lt?.glassHeight||lt?.glass_height||Ae,glass_width:lt?.glassWidth||lt?.glass_width||oe,materials:j,subtotal:S.subtotal,sgst:S.sgst,cgst:S.cgst,round_off:S.round_off,grand_total:S.grand_total,created_at:new Date().toISOString()};ts(R),ls(j);try{Je(D=>({...D||{},...S}))}catch{}const B=u.map((D,Q)=>({estimator:"falseceiling",session_id:b,s_no:Q+1,row_id:String(D.rowId||`${D.batchId||""}-${D.id}`),batch_id:D.batchId||null,material_id:D.id,name:D.name,unit:D.unit,quantity:Number(D.quantity||0),supply_rate:Number(D.supplyRate||0),install_rate:Number(D.installRate||0),shop_id:D.shopId||"",shop_name:D.shopName||"",description:D.description||"",location:D.location||"",door_type:D.doorType||lt?.doorType||lt?.door_type||w||null,panel_type:D.panelType||lt?.panelType||lt?.panel_type||m||null,sub_option:D.subOption||lt?.subOption||lt?.sub_option||F||null,glazing_type:D.glazingType||lt?.glazingType||lt?.glazing_type||G||null,qty:lt?.count||lt?.qty||V,height:lt?.height||J,width:lt?.width||q,glass_height:lt?.glassHeight||lt?.glass_height||Ae,glass_width:lt?.glassWidth||lt?.glass_width||oe,subtotal:S.subtotal,sgst:S.sgst,cgst:S.cgst,round_off:S.round_off,grand_total:S.grand_total}));try{await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:b,items:B})});const Q=await(await nt(`/api/estimator-step9-items?session_id=${b}&estimator=falseceiling`,{headers:{}})).json();bs(Q.items||[]);const $=(Qs||[]).map(te=>u.some(He=>te.rowId===He.rowId||`${te.batchId||""}-${te.id}`==`${He.batchId||""}-${He.id}`)?{...te,isSaved:!0}:te);ls($),r({title:"Success",description:`${u.length} new material(s) saved successfully to database!`})}catch(D){console.warn("Failed to save step 9 to DB",D),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},ui=j=>{let u=5381;for(let b=0;b<j.length;b+=1)u=(u<<5)+u^j.charCodeAt(b);return Math.abs(u>>>0).toString(36)},hi=()=>{const j=JSON.stringify({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,selectedMaterials:(re||[]).map(u=>({materialId:u.materialId,selectedShopId:u.selectedShopId,selectedBrand:u.selectedBrand})),editable:Object.keys(pt||{}).sort().map(u=>({id:u,...pt[u]}))});return`batch-${ui(j)}`},tn=()=>{const j=hi(),u=Array.from(new Map((re||[]).map(te=>[te.materialId,te])).values()),b=ye(u,pt).map(te=>({id:te.id,rowId:`${j}-${te.id}`,batchId:j,name:te.name,unit:te.unit,quantity:pt[te.id]?.quantity??te.quantity,supplyRate:pt[te.id]?.supplyRate??te.rate,installRate:pt[te.id]?.installRate??0,shopId:te.shopId,shopName:te.shopName,description:Dt[te.id]||"",location:rs[te.id]||"",doorType:w,productLabel:h||ge(),panelType:m,subOption:F,glazingType:G,isSaved:!1})),S=Array.from(new Map(b.map(te=>[te.id,te])).values());if(S.length===0){c(9);return}const D=[...(Qs||[]||[]).filter(te=>te.batchId!==j),...S],Q=Array.from(new Map(D.map(te=>[te.rowId||`${te.batchId}-${te.id}`,te])).values());ls(Q),At(u.map(te=>({materialId:te.materialId,selectedShopId:te.selectedShopId,selectedBrand:te.selectedBrand,batchId:j})));const $={};Q.forEach(te=>{const Ue=te.rowId||`${te.batchId}-${te.id}`;$[Ue]={quantity:Number(te.quantity||0),supplyRate:Number(te.supplyRate||te.rate||0),installRate:Number(te.installRate||0)}}),It($);try{const te=we(),Ue=te*.09,He=te*.09,st=Math.round(te+Ue+He)-(te+Ue+He),Bt=te+Ue+He+st;Je({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,subtotal:te,sgst:Ue,cgst:He,round_off:st,grand_total:Bt})}catch{}c(9)},sn=o===9||o===11?Qs||[]:ye(),ks=o===9?Ct:pt,qs=sn.reduce((j,u)=>j+u.quantity*((ks[u.id]?.supplyRate??u.rate)+(ks[u.id]?.installRate??u.installRate??0)),0),Js=qs*.09,ms=qs*.09,$n=Math.round(qs+Js+ms)-(qs+Js+ms),qr=qs+Js+ms+$n,Ka=je.length>0?je.flatMap(j=>j.materials||[]):Qs&&Qs.length>0?Qs:sn&&sn.length>0?sn:Ls&&Ls.materials&&Ls.materials.length>0?Array.isArray(Ls.materials)?Ls.materials:JSON.parse(Ls.materials||"[]"):sn,Ca=(()=>{const j=new Map;for(const b of Ka||[]){const S=b.productLabel||b.doorType||b.door_type||lt?.doorType||lt?.door_type||w||"door",R=b.panelType||b.panel_type||lt?.panelType||lt?.panel_type||m||"",B=b.subOption||b.sub_option||lt?.subOption||lt?.sub_option||"",D=`${S}||${R}||${B}`;j.has(D)||j.set(D,[]),j.get(D).push(b)}const u=[];for(const[b,S]of j.entries()){const[R,B,D]=b.split("||"),Q=`group_${b}`,$=Dt[Q]||"",te=rs[Q]||"";let Ue=Number(be[Q]??lt?.count??lt?.qty??V??1);const He=String($).match(/Qty:\s*(\d+(?:\.\d+)?)/);He&&(be[Q]===void 0||be[Q]===null)&&(Ue=Number(He[1]));const st=S.reduce((z,me)=>z+Number(me.quantity||0)*Number(me.supplyRate??me.rate??0),0),Bt=Ue>0?st/Ue:st,Lt=S.reduce((z,me)=>z+Number(me.quantity||0)*Number(me.installRate??0),0),$t=Ue>0?Lt/Ue:Lt,gs=S[0]&&S[0].productLabel||ge({doorType:R,panelType:B,subOption:D})||R,nn=String($).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();u.push({id:Q,groupKey:b,name:gs,location:te||"",description:nn||"",unit:"pcs",quantity:Ue,supplyRate:Number(Bt||0),installRate:Number(Nn[Q]??$t??0),supplyAmount:Number(Bt*Ue||0),installAmount:Number((Nn[Q]??$t)*Ue||0)})}return u})();(cs||[]).filter(j=>j.item||j.item_name).map((j,u)=>{const b=j.group_key||j.groupKey||`${j.door_type||j.doorType||"door"}||${j.panel_type||j.panelType||""}||${j.sub_option||j.subOption||""}`;return{id:j.id,groupKey:b,name:j.productLabel||j.item_name||j.item||j.name||j.door_label||j.doorType||j.door_type||"Door",location:j.location||"",description:j.description||"",unit:j.unit||"pcs",quantity:Number(j.quantity??j.qty??1),supplyRate:Number(j.supply_rate??j.supplyRate??0),installRate:Number(j.install_rate??j.installRate??0),supplyAmount:Number(j.supply_amount??0),installAmount:Number(j.install_amount??0),doorType:j.door_type||j.doorType,panelType:j.panel_type||j.panelType,subOption:j.sub_option||j.subOption}});const Bn=(je.length===0?Ca.filter(j=>!(cs||[]).some(b=>(b.group_key||b.groupKey||`${b.door_type||""}||${b.panel_type||""}||${b.sub_option||""}`)===j.groupKey)):je.map((j,u)=>({id:`accumulated_${u}`,groupKey:`${j.doorType||"door"}||${j.panelType||""}||${j.subOption||""}`,name:j.productLabel||j.materials?.[0]?.productLabel||j.doorLabel||ge({doorType:j.doorType,panelType:j.panelType,subOption:j.subOption})||j.doorType,location:j.location||"",description:j.description||"",unit:"pcs",quantity:j.count||1,supplyRate:j.materials?.reduce((b,S)=>b+Number(S.quantity||0)*Number(S.supplyRate??S.rate??0),0)||0,installRate:j.materials?.reduce((b,S)=>b+Number(S.quantity||0)*Number(S.installRate??0),0)||0,supplyAmount:j.materials?.reduce((b,S)=>b+Number(S.quantity||0)*Number(S.supplyRate??S.rate??0),0)||0,installAmount:j.materials?.reduce((b,S)=>b+Number(S.quantity||0)*Number(S.installRate??0),0)||0})))||[],Fn=Bn.filter(j=>St.includes(j.id)),Zn=Bn.reduce((j,u)=>{const b=Number(yn[u.id]??(u.quantity||0)),S=Number(zt[u.id]??u.supplyRate??u.rate??0);return j+b*S},0);Bn.reduce((j,u)=>{const b=Number(yn[u.id]??(u.quantity||0));return j+b*Number(u.installRate||0)},0);const pa=Fn.reduce((j,u)=>{const b=Number(yn[u.id]??(u.quantity||0)),S=Number(zt[u.id]??u.supplyRate??u.rate??0);return j+b*S},0);Ls&&Ls.bill_no;const ma=Ls&&Ls.created_at?new Date(Ls.created_at).toISOString().slice(0,10):Jt,x=j=>{if(!j)return!1;const u=(j.name||"").toString().trim(),b=Number(j.quantity||0),S=Number(j.supplyRate??j.rate??0),R=Number(j.installRate??0),B=(j.description||"").toString().trim(),D=(j.location||"").toString().trim();return!!u||b>0||S>0||R>0||!!B||!!D};return(je||[]).map(j=>{const u=(j.materials||[]).filter(x),b=u.reduce((R,B)=>R+Number(B.quantity||0)*Number(B.supplyRate??B.rate??0),0),S=u.reduce((R,B)=>R+Number(B.quantity||0)*Number(B.installRate??0),0);return{...j,materials:u,supplySubtotal:b,installSubtotal:S,subtotal:b+S}}).filter(j=>(j.materials||[]).length>0),e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"False Ceiling Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Vs,{className:"border-border/50",children:e.jsx(fn,{className:"pt-8 min-h-96",children:e.jsxs(gl,{mode:"wait",children:[o===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select False Ceiling Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:vt.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No false ceiling products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:vt.map(j=>{const u=qe(j),b=(j?.id||u).toString(),S=f===b;return e.jsx(Ie,{variant:S?"default":"outline",onClick:()=>ht(j),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:u||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ve(j)})]})},b)})})})]},"step-select-product"),o===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:_0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:ma})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all-groups",checked:(()=>{const j=(Bn||[]).map(u=>u.id);return j.length>0&&j.every(u=>Ps.includes(u))})(),onCheckedChange:j=>{Ye(j?(Bn||[]).map(u=>u.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Bn||[]).map((j,u)=>{const b=Number(zt[j.id]??j.supplyRate??j.rate??0),S=Number(Nn[j.id]??j.installRate??0);let R=Number(yn[j.id]??(j.quantity||0));const B=R*b,D=R*S;return rs[j.id]??j.location,Dt[j.id]??j.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:Ps.includes(j.id),onCheckedChange:()=>{Ye(Q=>Q.includes(j.id)?Q.filter($=>$!==j.id):[...Q,j.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:u+1}),e.jsx("td",{className:"border px-2 py-1",children:j.productLabel||j.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{value:rs[j.id]??j.location??"",onChange:Q=>ps($=>({...$,[j.id]:Q.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:Dt[j.id]??j.description??"",onChange:Q=>xt($=>({...$,[j.id]:Q.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{value:Fs[j.id]??j.unit??"",onChange:Q=>Ns($=>({...$,[j.id]:Q.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",value:R,onChange:Q=>is($=>({...$,[j.id]:Number(Q.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:b,onChange:Q=>os($=>({...$,[j.id]:Number(Q.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:S,onChange:Q=>Cs($=>({...$,[j.id]:Number(Q.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",D.toFixed(2)]})]},j.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Zn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!p&&e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",disabled:Ps.length===0,onClick:async()=>{if(console.log("Delete selected:",Ps),cs.length>0&&it)try{await nt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Ps,estimator:"falseceiling"})});const j=await nt(`/api/estimator-step11-groups?session_id=${it}&estimator=falseceiling`,{headers:{}});if(j.ok){const u=await j.json();Us(u.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(j){console.warn("Failed to delete step 11 from DB",j),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(je.length===0)if(Ls){console.log("Deleting from saved BOQ");const j=Ps.map(R=>R.replace("group_","")),u=Array.isArray(Ls.materials)?Ls.materials:JSON.parse(Ls.materials||"[]");console.log("Current materials:",u.length);const b=u.filter(R=>{const B=R.doorType||R.door_type||lt?.doorType||lt?.door_type||w||"door",D=R.panelType||R.panel_type||lt?.panelType||lt?.panel_type||m||"",Q=R.subOption||R.sub_option||lt?.subOption||lt?.sub_option||F||"",$=`${B}||${D}||${Q}`,te=j.includes($);return console.log("Checking material:",R.id||R.name,$,"match:",te),!te});console.log("Filtered materials:",b.length);const S={...Ls,materials:b};ts(S),nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}).then(()=>console.log("Saved updated BOQ")).catch(R=>console.error("Error saving BOQ:",R))}else{console.log("Deleting from Step 11 saved materials");const j=Ps.map(S=>S.replace("group_","")),b=((Qs&&Qs.length>0?Qs:sn)||[]).filter(S=>{const R=S.doorType||S.door_type||lt?.doorType||lt?.door_type||w||"door",B=S.panelType||S.panel_type||lt?.panelType||lt?.panel_type||m||"",D=S.subOption||S.sub_option||lt?.subOption||lt?.sub_option||F||"",Q=`${R}||${B}||${D}`;return!j.includes(Q)});ls(b)}else if(je.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",je.length);let j;if(Ps.some(u=>u.startsWith("accumulated_"))){const u=Ps.filter(b=>b.startsWith("accumulated_")).map(b=>parseInt(b.replace("accumulated_",""))).sort((b,S)=>S-b);j=[...je],u.forEach(b=>{b>=0&&b<j.length&&j.splice(b,1)})}else{const u=Ps.map(b=>b.replace("group_",""));j=je.filter(b=>{const S=`${b.doorType||"door"}||${b.panelType||""}||${b.subOption||""}`,R=u.includes(S);return console.log("Checking product:",b.id,S,"match:",R),!R})}console.log("Accumulated products after:",j.length),De(j),nt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:j})}).catch(u=>console.error("Failed to save accumulated products after delete",u))}Ye([])},children:"Delete Selected"}),e.jsx(Ie,{onClick:di,children:"Add Product"}),e.jsx(Ie,{onClick:Oi,disabled:Un,children:"Save"}),e.jsx(Ie,{onClick:async()=>{Rt(Ps);const j=(Fn||[]).map((u,b)=>{const S=Number(zt[u.id]??u.supplyRate??u.rate??0),R=Number(Nn[u.id]??u.installRate??0);let B=Number(yn[u.id]??(u.quantity||0));return{s_no:b+1,item:u.name,location:rs[u.id]??u.location??"",description:Dt[u.id]??u.description??"",unit:Fs[u.id]??u.unit??"",qty:B,supply_rate:S,install_rate:R,supply_amount:B*S,install_amount:B*R}});try{const u=await nt(`/api/estimator-step12-qa-selection?session_id=${it}&estimator=falseceiling`,{headers:{}});let b=[];u.ok&&(b=(await u.json()).items||[]);const S=j.filter(D=>!b.some(Q=>Q.item===D.item&&Q.description===D.description&&Q.unit===D.unit));if(S.length===0){c(12);return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:it,items:S})});const B=await(await nt(`/api/estimator-step12-qa-selection?session_id=${it}&estimator=falseceiling`,{headers:{}})).json();Mr(B.items||[]),r({title:"Success",description:`${S.length} new material(s) saved successfully to database!`}),c(12)}catch(u){console.warn("Failed to save step 12 to DB",u),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),o===4&&w&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(ue[w]||[]).map(j=>e.jsx(Ie,{onClick:()=>{M(j),K(null)},className:`w-full text-black ${F===j?"bg-cyan-500":"bg-white"}`,children:j},j))}),w==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(j=>e.jsx(Ie,{onClick:()=>K(j),className:`w-full text-black ${k===j?"bg-cyan-500":"bg-white"}`,children:j},j))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(5),disabled:!F||w==="flush"&&F==="With Vision Panel"&&!k,children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),o===5&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"count",children:"Count"}),e.jsx(Ve,{id:"count",type:"number",placeholder:"1",value:V||"",onChange:j=>X(j.target.value?parseFloat(j.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"height",children:"Height"}),e.jsx(Ve,{id:"height",type:"number",placeholder:"7",value:J||"",onChange:j=>he(j.target.value?parseFloat(j.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"width",children:"Width"}),e.jsx(Ve,{id:"width",type:"number",placeholder:"3",value:q||"",onChange:j=>ie(j.target.value?parseFloat(j.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Xe,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Ve,{id:"glassHeight",type:"number",placeholder:"72",value:Ae||"",onChange:j=>ce(j.target.value?parseFloat(j.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Ve,{id:"glassWidth",type:"number",placeholder:"24",value:oe||"",onChange:j=>ne(j.target.value?parseFloat(j.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:!V||!J||!q||Z()?.requiresGlazing&&(!Ae||!oe),onClick:()=>c(6),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),o===6&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gn,{id:"select-all-materials",checked:re.length===Te.length&&Te.length>0,onCheckedChange:j=>{if(j){const u=Te.map(b=>{const S=s.filter(Q=>pr(Q.product)===pr(b.product)&&pr(Q.name)===pr(b.name)).map(Q=>({id:Q.id,brand:vp(Q),shopId:Q.shopId,rate:Q.rate,unit:Q.unit,shopName:t.find($=>$.id===Q.shopId)?.name||"Unknown"})),B=Array.from(new Set(S.map(Q=>Q.brand))).sort()[0]||"Generic",D=S.filter(Q=>Q.brand===B).sort((Q,$)=>(Q.rate||0)-($.rate||0));return{materialId:b.id,selectedBrand:B,selectedShopId:D[0]?.shopId||""}});se(u)}else se([])}}),e.jsx(Xe,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Te.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",w||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(w?iF[w]||[w]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(j=>j.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Te.map(j=>{const u=re.some($=>$.materialId===j.id),b=re.find($=>$.materialId===j.id),S=s.filter($=>pr($.product)===pr(j.product)&&pr($.name)===pr(j.name)).map($=>({id:$.id,brand:vp($),shopId:$.shopId,rate:$.rate,unit:$.unit,shopName:t.find(te=>te.id===$.shopId)?.name||"Unknown"})),R=Array.from(new Set(S.map($=>$.brand))).sort(),D=re.find($=>$.materialId===j.id)?.selectedBrand||R[0]||"Generic",Q=S.filter($=>$.brand===D).sort(($,te)=>($.rate||0)-(te.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:j.id,checked:u,onCheckedChange:()=>nr(j.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:j.id,className:"font-medium cursor-pointer",children:j.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j.code}),u&&R.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Lr,{value:D,onValueChange:$=>dn(j.id,$),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:R.map($=>e.jsx(wr,{value:$,children:$},$))})]})]}),u&&Q.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Lr,{value:b?.selectedShopId||Q[0].shopId,onValueChange:$=>Yn(j.id,$),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:Q.map($=>e.jsxs(wr,{value:$.shopId||"",children:[$.shopName," - ",$.rate,"/",j.unit,$.rate===Q[0].rate&&" (Best)"]},$.shopId))})]})]})]})]})},j.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),o===7&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(j=>{const u=re.find(S=>S.materialId===j.id),b=s.find(S=>S.id===j.id);return e.jsxs("div",{className:Xs("p-3 border rounded grid grid-cols-9 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:j.name}),e.jsx("span",{className:"text-sm",children:Dt[j.id]||j.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:u?.selectedBrand||b?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:pt[j.id]?.quantity??j.quantity,onChange:S=>Rr(j.id,parseInt(S.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:j.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:j.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:pt[j.id]?.supplyRate??j.rate,onChange:S=>Ha(j.id,parseFloat(S.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((pt[j.id]?.quantity??j.quantity)*((pt[j.id]?.supplyRate??j.rate)+(pt[j.id]?.installRate??0))).toFixed(2)]})]},j.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),o===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||ge()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[J," ft  ",q," ft (Qty: ",V,")"]})]}),G&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:G})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[Ae,'"  ',oe,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(j=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:j==="Qty"||j.includes("Rate")||j.includes("Amount")?"right":"left"},children:j},j))})}),e.jsx("tbody",{children:ye().map((j,u)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:u+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:j.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:j.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:j.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:j.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:j.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(j.quantity*j.rate).toFixed(2)})]},j.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((j,u)=>j+u.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ie,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:vi,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(si,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:$r,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(si,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>tn(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),A(""),l(""),N(null),E(null),ee(null),X(1),he(7),ie(3),ce(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Qn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),o===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:_0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:ma})})]}),!Fn||Fn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Fn||[]).map((j,u)=>{const b=Number(zt[j.id]??j.supplyRate??j.rate??0),S=Number(Nn[j.id]??j.installRate??0);let R=Number(yn[j.id]??(j.quantity||0));const B=R*b,D=R*S,Q=rs[j.id]??j.location??"",$=Dt[j.id]??j.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:u+1}),e.jsx("td",{className:"border px-2 py-1",children:j.productLabel||j.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:Q||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:$||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Fs[j.id]??j.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:R}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",b.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",S.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",D.toFixed(2)]})]},j.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(pa||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ie,{onClick:async()=>{if(an.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const j=await nt(`/api/estimator-step12-qa-selection?session_id=${it}&estimator=falseceiling`,{headers:{}});let u=[];j.ok&&(u=(await j.json()).items||[]);const S=(Fn||[]).map((D,Q)=>{const $=Number(zt[D.id]??D.supplyRate??D.rate??0),te=Number(Nn[D.id]??D.installRate??0),Ue=Number(yn[D.id]??(D.quantity||0));return{s_no:Q+1,item:D.name,location:rs[D.id]??D.location??"",description:Dt[D.id]??D.description??"",unit:Fs[D.id]??D.unit??"",qty:Ue,supply_rate:$,install_rate:te,supply_amount:Ue*$,install_amount:Ue*te}}).filter(D=>!u.some(Q=>Q.item===D.item&&Q.description===D.description&&Q.unit===D.unit));if(S.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:it,items:S})});const B=await(await nt(`/api/estimator-step12-qa-selection?session_id=${it}&estimator=falseceiling`,{headers:{}})).json();Mr(B.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(j){console.warn("Failed to save step 12 to DB",j),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ie,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ie,{onClick:Ui,children:"Export Excel"})]})]},"step-qa-boq"),o===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:it,onChange:j=>tt(j.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:Jt,onChange:j=>Qt(j.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:ss,onChange:j=>dt(j.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:vs,onChange:j=>ns(j.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:js,onChange:j=>ln(j.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:qt,onChange:j=>Vt(j.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:us,onChange:j=>As(j.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]}),us&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:Dt[us]||"",onChange:j=>xt(u=>({...u,[us]:j.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:_0,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",it]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:ys})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",Jt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",ss]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",qt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",vs]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(j=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:j},j))})}),e.jsx("tbody",{children:sn.map((j,u)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j.id&&Dt[j.id]||j.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(j.quantity||0)*Number(j.rate||0)||0).toFixed(2)})]},j.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:qs.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Js.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ms.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:$n.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",qr.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",qr.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:Oa,children:"Export PDF"})]})]}),o===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"destructive",onClick:Zr,disabled:vn.length===0,children:"Delete Selected"}),e.jsx(Ie,{type:"button",onClick:bi,disabled:sn.length===0,children:"Save"}),e.jsx(Ie,{onClick:async()=>{const j=ye(Ht,Ct),u=vn.length>0?j.filter(B=>vn.includes(B.rowId||`${B.batchId}-${B.id}`)):j,b=u.map(B=>{const D=B.rowId||`${B.batchId||""}-${B.id}`;return{id:B.id,rowId:D,batchId:B.batchId,name:B.name,unit:B.unit,quantity:Ct[D]?.quantity??Ct[B.id]?.quantity??B.quantity,supplyRate:Ct[D]?.supplyRate??Ct[B.id]?.supplyRate??B.rate,installRate:Ct[D]?.installRate??Ct[B.id]?.installRate??B.installRate??0,shopId:B.shopId,shopName:B.shopName,description:Dt[D]||Dt[B.id]||"",location:rs[D]||rs[B.id]||"",doorType:B.doorType,panelType:B.panelType,subOption:B.subOption,glazingType:B.glazingType}});if(b.length===0)return;const S=u[0],R={id:`local-${Date.now()}`,estimator:"falseceiling",bill_no:it,door_type:S?.doorType||lt?.doorType||lt?.door_type||w,panel_type:S?.panelType||lt?.panelType||lt?.panel_type||m,sub_option:S?.subOption||lt?.subOption||lt?.sub_option||F,glazing_type:S?.glazingType||lt?.glazingType||lt?.glazing_type||G,qty:lt?.count||lt?.qty||V,height:lt?.height||J,width:lt?.width||q,glass_height:lt?.glassHeight||lt?.glass_height||Ae,glass_width:lt?.glassWidth||lt?.glass_width||oe,materials:b,subtotal:b.reduce((B,D)=>B+Number(D.quantity||0)*(Number(D.supplyRate||0)+Number(D.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};ts(R);try{await wn()}catch{}jn([]),c(11)},disabled:sn.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-semibold",children:"Saved BOQs"}),Ir.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Ir.map(j=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.bill_no||`${j.estimator} - ${j.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(j.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{onClick:()=>ka(j),size:"sm",children:"Load"}),e.jsx(Ie,{variant:"destructive",onClick:()=>zn(j.id),size:"sm",children:"Delete"})]})]},j.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all",checked:(()=>{const j=(o===9?ye(Ht,Ct):ye()).map(u=>u.rowId||u.id);return vn.length===j.length&&j.length>0})(),onCheckedChange:Jn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const j=new Map,u=new Map;sn.forEach(R=>{const B=R.doorType||R.door_type||lt?.doorType||lt?.door_type||w||"door",D=R.panelType||R.panel_type||lt?.panelType||lt?.panel_type||m||"",Q=R.subOption||R.sub_option||lt?.subOption||lt?.sub_option||"",$=`${B}||${D}||${Q}`;if(j.has($)||j.set($,[]),j.get($).push(R),!u.has($)){const Ue=(j.get($)||[])[0]?.productLabel||`${D==="panel"?"With Panel":"Without Panel"}  ${B}${Q?" ("+Q+")":""}`;u.set($,{label:Ue})}});const b=[];let S=0;for(const[R,B]of j.entries()){const D=B.map(He=>He.rowId||`${He.batchId||""}-${He.id}`),Q=D.every(He=>vn.includes(He)),$=`group_${R}`,te=Dt[$]||"",Ue=Number(be[$]??lt?.count??lt?.qty??V??1);b.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{id:`group-${R}`,checked:Q,onCheckedChange:()=>{jn(Q?He=>He.filter(st=>!D.includes(st)):He=>Array.from(new Set([...He,...D])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:u.get(R)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Ve,{placeholder:"Group description",value:te?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:He=>xt(st=>({...st,[$]:He.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:be[$]??Ue,onChange:He=>{const st=He.target.value?parseFloat(He.target.value):0;xe(Bt=>({...Bt,[$]:st})),xt(Bt=>{const Lt=(Bt[$]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Bt,[$]:Lt?Lt+`
Qty: `+st:"Qty: "+st}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${R}`));for(const He of B){S+=1;const st=He.rowId||`${He.batchId}-${He.id}`,Bt=Number(ks[st]?.supplyRate??ks[He.id]?.supplyRate??He.rate??0),Lt=Number(ks[st]?.installRate??ks[He.id]?.installRate??He.installRate??0),$t=Bt+Lt,gs=Number(ks[st]?.quantity??ks[He.id]?.quantity??He.quantity??0),nn=gs*$t,z=Dt[st]??Dt[He.id]??He.description??"",me=String(z).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();b.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:S}),e.jsx("td",{className:"border px-2 py-1",children:He.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:Dt[st]??Dt[He.id]??me,onChange:Qe=>xt(We=>({...We,[st]:Qe.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Fs[st]??Fs[He.id]??He.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:gs,onChange:Qe=>Rr(st,Qe.target.value?parseFloat(Qe.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:$t,onChange:Qe=>{const We=parseFloat(Qe.target.value||"0"),ut=Number(ks[st]?.supplyRate??ks[He.id]?.supplyRate??Bt),_t=Math.max(0,We-ut);Ha(st,ut),Na(st,_t)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",nn.toFixed(2)]})]},st))}}return b})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ie,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ie,{onClick:$r,children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const Bg="/image.png";function DK(){const{shops:t,materials:s,products:n}=ci(),{toast:r}=Ai();C.useMemo(()=>n?n.filter(Ye=>Ye.subcategory?.toLowerCase()==="painting").map(Ye=>Ye.id):[],[n]);const[o,c]=C.useState(1),[p,f]=C.useState(null),[A,h]=C.useState(""),[l,g]=C.useState(20),[v,m]=C.useState(10),[N,w]=C.useState([]),[E,F]=C.useState({}),[M,k]=C.useState(`PNT-${Math.floor(Math.random()*1e4)}`),[K,G]=C.useState(new Date().toISOString().split("T")[0]),[ee,V]=C.useState(""),[X,J]=C.useState(""),[he,q]=C.useState(""),[ie,Ae]=C.useState("Payment: 50% Advance, 50% on Completion"),[ce,oe]=C.useState(`Main Showroom
Chennai`),[ne,re]=C.useState({}),[se,je]=C.useState(""),[De,ge]=C.useState([]),[Z,fe]=C.useState(!1),ue=C.useMemo(()=>{if(!s||!p||!n)return[];const Ye=n.find(St=>St.id===p);return Ye?s.filter(St=>{const Rt=Ye.name?.toLowerCase()||"",us=(St.product||"").toLowerCase();return(St.subCategory||"").toLowerCase()==="painting"&&(us.includes(Rt)||us===p)}):[]},[s,p,n]),pe=Ye=>{const St=l*v;return Ye.code?.includes("PAINT")?Math.ceil(St/100):Ye.code?.includes("PUTTY")?Math.ceil(St/50):1},Ce=()=>N.map(Ye=>{const St=s.find(as=>as.id===Ye.materialId),Rt=t.find(as=>as.id===Ye.selectedShopId),us=St?.id?E[St.id]?.quantity??pe(St):pe(St),As=St?.id?E[St.id]?.rate??(St?.rate||0):St?.rate||0;return{...St,quantity:us,rate:As,shopName:Rt?.name||"Market",amount:us*As}}),Ne=Ce(),ye=Ne.reduce((Ye,St)=>Ye+St.amount,0),we=ye*.09,Te=ye*.09,qe=ye+we+Te,ve=Math.round(qe)-qe,Ge=()=>{const Ye=Us=>{try{const an=document.createElement("canvas").getContext("2d");return an?(an.fillStyle=Us,an.fillStyle):Us}catch{return"#000"}},St=document.createElement("div");St.style.width="210mm",St.style.minHeight="297mm",St.style.padding="20mm",St.style.background=Ye("#fff"),St.style.color=Ye("#000"),St.style.fontFamily="Arial, sans-serif",St.style.fontSize="12px";const Rt=document.createElement("div");Rt.style.display="flex",Rt.style.justifyContent="space-between",Rt.style.alignItems="center";const us=document.createElement("img");us.src=Bg,us.style.height="60px";const As=document.createElement("div");As.innerHTML='<h2 style="margin:0">Concept Trunk Interiors</h2><div>12/36A, Indira Nagar, Medavakkam, Chennai  600100</div>',As.style.textAlign="center",As.style.flex="1",As.style.marginLeft="20px",Rt.appendChild(us),Rt.appendChild(As),St.appendChild(Rt),St.appendChild(document.createElement("hr"));const as=document.getElementById("boq-add-table-pdf");if(!as)return alert("Table not found for PDF export");const bs=as.cloneNode(!0),cs=Us=>{const an=getComputedStyle(Us);return Us.style.backgroundColor=Ye(an.backgroundColor),Us.style.color=Ye(an.color),Us.style.fontFamily=an.fontFamily,Us.style.fontSize=an.fontSize,Us.style.fontWeight=an.fontWeight,Us.style.border=an.border,Us.style.padding=an.padding,Us.style.margin=an.margin,Us.style.textAlign=an.textAlign,Us.style.lineHeight=an.lineHeight,Array.from(Us.children).forEach(Mr=>cs(Mr)),Us};cs(bs),bs.style.marginTop="20px",St.appendChild(bs),vA().from(St).set({margin:0,filename:`BOQ_${M}.pdf`,html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).save()},at=()=>{const Ye=document.getElementById("boq-final-pdf");Ye&&vA().from(Ye).set({margin:0,filename:`Painting_Invoice_${M}.pdf`}).save()},Se=C.useMemo(()=>!p||!n?"":n.find(St=>St.id===p)?.name||"",[p,n]),vt=C.useMemo(()=>l*v,[l,v]),ht=2,pt="wall",Ze=()=>Ce().reduce((Ye,St)=>Ye+St.amount,0),Ht=()=>{alert("Export to Excel feature coming soon")},At=()=>{Ge()},Ct=()=>{c(9)},[It,Wt]=C.useState([]),Es=Ce(),Ss=vt,_s=()=>{const Ye=N.filter(St=>!It.includes(St.materialId));w(Ye),Wt([])},$e=async()=>{const Ye=Ce().map(Rt=>({id:Rt.id,name:Rt.name,productLabel:Rt.productLabel||null,product_label:Rt.productLabel||null,unit:Rt.unit,quantity:Vt[Rt.id]??Rt.quantity,rate:ns[Rt.id]??Rt.rate,shopId:Rt.shopId,shopName:Rt.shopName,description:ne[Rt.id]||""}));if(Ye.length===0){alert("No materials to save");return}const St={id:`paint-${Date.now()}`,estimator:"painting",bill_no:M,area:Ss,coats:ht,materials:Ye,subtotal:Ye.reduce((Rt,us)=>Rt+Number(us.quantity||0)*Number(us.rate||0),0),created_at:new Date().toISOString()};try{const Rt=await fetch("/api/estimator/step9-cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:St})});if(!Rt.ok){const As=await Rt.text();throw new Error(As||"Failed to save")}const us=await Rt.json();ss(St),alert("Saved to cart successfully")}catch(Rt){console.error("Save step9 error",Rt),alert("Save failed: "+(Rt?.message||Rt))}},ke=()=>{},it=()=>{It.length===Es.length?Wt([]):Wt(Es.map(Ye=>Ye.id||""))},tt=Ye=>{It.includes(Ye)?Wt(St=>St.filter(Rt=>Rt!==Ye)):Wt(St=>[...St,Ye])},Jt=(Ye,St)=>{F(Rt=>({...Rt,[Ye]:{...Rt[Ye],quantity:St}}))},Qt=(Ye,St)=>{F(Rt=>({...Rt,[Ye]:{...Rt[Ye],rate:St}}))},ss=Ye=>{console.log("BOQ saved:",Ye)},[dt,qt]=C.useState([]),[Vt,vs]=C.useState({}),[ns,js]=C.useState({}),[ln,ys]=C.useState({}),[gt,Dt]=C.useState({}),xt=Ce(),rs=C.useMemo(()=>{if(!xt||xt.length===0)return[];const Ye=A||xt[0]?.product||"Painting Project",St=xt.reduce((us,As)=>{const as=ns[As.id]??As.rate??0;return us+Number(As.quantity||0)*Number(as)},0),Rt=xt.reduce((us,As)=>{const as=ln[As.id]??0;return us+Number(As.quantity||0)*Number(as)},0);return[{id:"painting_product",name:Ye,location:"",description:ne.product||"",unit:"project",quantity:1,supplyRate:St,installRate:Rt,supplyAmount:St,installAmount:Rt}]},[xt,ns,ln,ne,A]),ps=K,yn=()=>{const Ye=N.filter(St=>!dt.includes(St.materialId));w(Ye),qt([])},is=async()=>{fe(!0);try{let Ye=De||[];if(M)try{const as=await nt(`/api/estimator-step11-groups?session_id=${M}&estimator=painting`);as.ok&&(Ye=(await as.json()).items||[],ge(Ye))}catch(as){console.warn("Failed to refresh step11 items before save",as)}const St=rs.map(as=>({estimator:"painting",session_id:M,group_key:as.name,group_id:`group_${as.id}`,item_name:as.name,unit:as.unit,quantity:as.quantity,location:as.location||"",description:ne.product||"",supply_rate:as.supplyRate,install_rate:as.installRate,supply_amount:as.supplyAmount,install_amount:as.installAmount,supply_subtotal:as.supplyAmount,install_subtotal:as.installAmount,sgst:we,cgst:Te,round_off:ve,grand_total:as.supplyAmount+as.installAmount+we+Te+ve})),Rt=new Set((Ye||[]).map(as=>as.group_key||as.groupKey)),us=St.filter(as=>!Rt.has(as.group_key));if(us.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),fe(!1),!0;const As=await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:us})});if(!As.ok){const as=await As.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${as||As.statusText}`,variant:"destructive"}),fe(!1),!1}try{const as=await nt(`/api/estimator-step11-groups?session_id=${M}&estimator=painting`);if(as.ok){const bs=await as.json();ge(bs.items||[])}}catch(as){console.warn("Failed to reload step11 items after save",as)}return r({title:"Success",description:"Step 11 saved to database."}),fe(!1),!0}catch(Ye){return console.error("handleSavePaintingBOQ",Ye),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),fe(!1),!1}},Fs=xt,Ns=Fs.reduce((Ye,St)=>{const Rt=Number(Vt[St.id]??St.quantity??0),us=Number(ns[St.id]??St.supplyRate??St.rate??0);return Ye+Rt*us},0),Nn=()=>{alert("Export to Excel coming soon")},[Cs,zt]=C.useState({}),os=(Ye,St)=>{w(Rt=>Rt.map(us=>us.materialId===Ye?{...us,selectedBrand:St}:us))},Ps=(Ye,St)=>{w(Rt=>Rt.map(us=>us.materialId===Ye?{...us,selectedShopId:St}:us))};return e.jsx(ni,{children:e.jsx("div",{className:"max-w-6xl mx-auto space-y-8 pb-20",children:e.jsxs(gl,{mode:"wait",children:[o===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Painting Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a painting product to continue"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n?.filter(Ye=>Ye.subcategory?.toLowerCase()==="painting").map(Ye=>{const St=p===Ye.id;return e.jsx(Vs,{onClick:()=>{f(Ye.id),h(Ye.name||Ye.label||"Painting"),c(6)},className:Xs("cursor-pointer border-2 transition-all",St?"border-primary bg-primary/10":"border-border bg-white"),children:e.jsxs(fn,{className:"p-6 flex items-center gap-4",children:[e.jsx(uO,{className:Xs("h-6 w-6",St?"text-primary":"text-muted-foreground")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:Ye.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Ye.subcategory})]})]})},Ye.id)}),(!n||n.filter(Ye=>Ye.subcategory?.toLowerCase()==="painting").length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No painting products found"})]})]},"step-1-painting"),o===6&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Available materials for painting. Best price shop is pre-selected."}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(gn,{checked:N.length===ue.length&&ue.length>0,onCheckedChange:Ye=>{w(Ye?ue.map(St=>{const us=s.filter(As=>As.name===St.name&&As.product===St.product).map(As=>({id:As.id,brand:As.product,shopId:As.shopId,rate:As.rate})).sort((As,as)=>(As.rate||0)-(as.rate||0))[0];return{materialId:St.id,selectedShopId:us?.shopId||"",selectedBrand:us?.brand||"Generic"}}):[])}}),e.jsx("span",{className:"font-semibold",children:"Select All Materials"})]}),e.jsx("div",{className:"space-y-3 max-h-500 overflow-y-auto border rounded-lg p-4 bg-white",children:ue.map(Ye=>{const St=N.some(cs=>cs.materialId===Ye.id),Rt=N.find(cs=>cs.materialId===Ye.id),us=s.filter(cs=>cs.name===Ye.name&&cs.product===Ye.product).map(cs=>({id:cs.id,brand:cs.brandName||"Generic",shopId:cs.shopId||"",rate:cs.rate,unit:cs.unit,shopName:t.find(Us=>Us.id===cs.shopId)?.name||"Unknown"})),As=Array.from(new Set(us.map(cs=>cs.brand))).sort(),as=Rt?.selectedBrand||As[0]||"Generic",bs=us.filter(cs=>cs.brand===as).sort((cs,Us)=>(cs.rate||0)-(Us.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:Ye.id,checked:St,onCheckedChange:()=>{w(St?cs=>cs.filter(Us=>Us.materialId!==Ye.id):cs=>[...cs,{materialId:Ye.id,selectedShopId:bs[0]?.shopId||"",selectedBrand:as}])}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:Ye.id,className:"font-medium cursor-pointer",children:Ye.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ye.code,"  ",Ye.unit]}),St&&As.length>0&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Xe,{className:"text-xs",children:"Brand:"}),e.jsxs(Lr,{value:as,onValueChange:cs=>os(Ye.id,cs),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:As.map(cs=>e.jsx(wr,{value:cs,children:cs},cs))})]})]}),bs.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(Xe,{className:"text-xs",children:"Shop:"}),e.jsxs(Lr,{value:Rt?.selectedShopId||bs[0].shopId,onValueChange:cs=>Ps(Ye.id,cs),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:bs.map(cs=>e.jsxs(wr,{value:cs.shopId||"",children:[cs.shopName," - ",cs.rate,"/",cs.unit,cs.rate===bs[0].rate&&" (Best)"]},cs.shopId))})]})]})]})]})]})},Ye.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:N.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step6"),o===7&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review and edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:N.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-2 text-xs font-semibold text-muted-foreground uppercase",children:[e.jsx("div",{className:"col-span-2",children:"Material"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),N.map(Ye=>{const St=s.find(bs=>bs.id===Ye.materialId);if(!St)return null;const Rt=t.find(bs=>bs.id===Ye.selectedShopId),us=E[St.id]?.quantity??pe(St)??1,As=E[St.id]?.rate??St.rate??0,as=us*As;return e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-3 border rounded items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:St.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:St.name}),e.jsx("div",{className:"text-center font-semibold",children:Ye.selectedBrand||"-"}),e.jsx("div",{className:"text-center",children:e.jsx(Ve,{type:"number",className:"w-20 mx-auto h-8",value:us,onChange:bs=>F(cs=>({...cs,[St.id]:{...cs[St.id],quantity:Number(bs.target.value||0)}}))})}),e.jsx("span",{className:"text-center text-muted-foreground",children:St.unit}),e.jsx("div",{className:"text-center font-semibold",children:Rt?.name||"-"}),e.jsx("div",{className:"text-center",children:e.jsx(Ve,{type:"number",className:"w-20 mx-auto h-8",value:As,onChange:bs=>F(cs=>({...cs,[St.id]:{...cs[St.id],rate:Number(bs.target.value||0)}}))})}),e.jsxs("div",{className:"text-right font-semibold",children:["",as.toFixed(2)]})]},St.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(8),disabled:N.length===0,children:["Generate BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step7"),o===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:64,height:64,backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Bill of Materials(BOM)"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:16},children:[e.jsx("div",{className:"border rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"PAINT TYPE"}),e.jsx("p",{className:"font-semibold",children:Se})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"AREA"}),e.jsxs("p",{className:"font-semibold",children:[vt," sq.ft"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"COATS"}),e.jsx("p",{className:"font-semibold",children:ht})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"SURFACE"}),e.jsx("p",{className:"font-semibold capitalize",children:pt})]})]})}),e.jsx("div",{className:"border rounded-lg overflow-hidden mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Materials Schedule"}),e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsx("tr",{children:["S.No","Material","Brand","Unit","Qty","Rate ()","Shop","Amount ()"].map(Ye=>e.jsx("th",{className:"border px-2 py-2 text-left",children:Ye},Ye))})}),e.jsx("tbody",{children:Ce().map((Ye,St)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:St+1}),e.jsx("td",{className:"border px-2 py-2 font-medium",children:Ye.name}),e.jsx("td",{className:"border px-2 py-2",children:Ye.brandName||"-"}),e.jsx("td",{className:"border px-2 py-2 text-center",children:Ye.unit}),e.jsx("td",{className:"border px-2 py-2 text-center",children:Ye.quantity}),e.jsx("td",{className:"border px-2 py-2 text-right",children:Ye.rate}),e.jsx("td",{className:"border px-2 py-2",children:Ye.shopName||"-"}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(Ye.quantity*Ye.rate).toFixed(2)]})]},Ye.id))})]})]})}),e.jsxs("div",{className:"border rounded-lg p-4 flex justify-between bg-blue-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Materials"}),e.jsx("p",{className:"font-semibold",children:Ce().length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quantity"}),e.jsx("p",{className:"font-semibold",children:Ce().reduce((Ye,St)=>Ye+St.quantity,0)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Grand Total"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["",Ze().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end pt-4",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(7),children:"Back"}),e.jsxs("button",{onClick:Ht,className:"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",children:[e.jsx(si,{className:"w-4 h-4"}),"Export Excel"]}),e.jsxs("button",{onClick:At,className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:[e.jsx(si,{className:"w-4 h-4"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>Ct(),children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step8"),o===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-widest text-muted-foreground",children:"Painting Estimator"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Add to BOQ"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review selected painting materials before finalizing BOQ"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"destructive",onClick:_s,disabled:It.length===0,children:"Delete Selected"}),e.jsx(Ie,{onClick:$e,disabled:Ce().length===0,children:"Save"}),e.jsx(Ie,{onClick:async()=>{const Ye=Ce().map(Rt=>({id:Rt.id,name:Rt.name,unit:Rt.unit,quantity:Vt[Rt.id]??Rt.quantity,supplyRate:ns[Rt.id]??Rt.rate,shopId:Rt.shopId,shopName:Rt.shopName,description:ne[Rt.id]||""}));if(Ye.length===0)return;const St={id:`paint-${Date.now()}`,estimator:"painting",bill_no:M,area:Ss,coats:ht,materials:Ye,subtotal:Ye.reduce((Rt,us)=>Rt+Number(us.quantity||0)*Number(us.supplyRate||0),0),created_at:new Date().toISOString()};ss(St);try{await ke()}catch{}Wt([]),c(11)},disabled:Ce().length===0,children:"Add to BOQ"})]})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{checked:(()=>{const Ye=Ce().map(St=>St.id);return Ye.length>0&&Ye.every(St=>It.includes(St))})(),onCheckedChange:it})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2 text-center",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const Ye=Ce(),St=new Map,Rt=new Map;Ye.forEach(bs=>{const cs=bs.product||Se||"Painting";St.has(cs)||St.set(cs,[]),St.get(cs).push(bs),Rt.has(cs)||Rt.set(cs,{label:cs})});const us=[];let As=0;const as=Array.from(St.entries());for(const[bs,cs]of as){const Us=cs.map(Ks=>Ks.id),an=Us.length>0&&Us.every(Ks=>It.includes(Ks)),Mr=`group_${bs}`,Un=ne[Mr]||"";us.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{id:`group-${bs}`,checked:an,onCheckedChange:()=>{Wt(an?Ks=>Ks.filter(Pn=>!Us.includes(Pn)):Ks=>Array.from(new Set([...Ks,...Us])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:Rt.get(bs)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Ve,{placeholder:"Group description",value:Un?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ks=>re(Pn=>({...Pn,[Mr]:Ks.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${bs}`)),cs.forEach(Ks=>{As+=1;const Pn=Vt[Ks.id]??Ks.quantity,nr=ns[Ks.id]??Ks.rate,Yn=Number(Pn||0)*Number(nr||0);us.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:It.includes(Ks.id),onCheckedChange:()=>tt(Ks.id)})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:As}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:Ks.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450},children:e.jsx("textarea",{className:"h-20 w-full p-2 border rounded",placeholder:"Description",value:ne[Ks.id]??"",onChange:dn=>re(vn=>({...vn,[Ks.id]:dn.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ks.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:Pn,onChange:dn=>Jt(Ks.id,Number(dn.target.value||0))})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",className:"h-8 text-right",value:nr,onChange:dn=>Qt(Ks.id,Number(dn.target.value||0))})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",Yn.toFixed(2)]})]},Ks.id))})}return us})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ie,{onClick:()=>c(11),disabled:Ce().length===0,children:"Finalize PO"}),e.jsxs(Ie,{onClick:At,children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step-add-to-boq"),o===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:Bg,alt:"logo",className:"h-14"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"BILL OF QUANTITIES (PAINTING)"})]}),e.jsx("div",{className:"text-right text-xs",children:ps})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-slate-100",children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2 text-center",children:e.jsx(gn,{checked:rs.length>0&&rs.every(Ye=>dt.includes(Ye.id)),onCheckedChange:Ye=>qt(Ye?rs.map(St=>St.id):[])})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{className:"bg-slate-50",children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Install"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Install"})]})]}),e.jsx("tbody",{children:rs.map((Ye,St)=>{const Rt=Number(Ye.quantity??1),us=Number(Ye.supplyRate??0),As=Number(Ye.installRate??0);return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:dt.includes(Ye.id),onCheckedChange:()=>qt(as=>as.includes(Ye.id)?as.filter(bs=>bs!==Ye.id):[...as,Ye.id])})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:St+1}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:Ye.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{value:Ye.location??"",onChange:as=>re(bs=>({...bs,location:as.target.value})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:ne.product??Ye.description??"",onChange:as=>re(bs=>({...bs,product:as.target.value})),className:"w-full min-h-16 border rounded p-2"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ye.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Rt}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("div",{className:"text-right",children:["",us.toFixed(2)]})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("div",{className:"text-right",children:["",As.toFixed(2)]})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",(Rt*us).toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",(Rt*As).toFixed(2)]})]},Ye.id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",disabled:!dt.length,onClick:yn,children:"Delete Selected"}),e.jsx(Ie,{onClick:is,children:"Save"}),e.jsx(Ie,{onClick:()=>c(1),children:"Add Product"}),e.jsx(Ie,{onClick:()=>c(12),children:"Create BOQ"})]})]},"step11-painting-finalize-boq"),o===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Bg,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES  PAINTING"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:ps})})]}),!Fs||Fs.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No finalized painting BOQ lines found. Complete Step 11 first."}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Material"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:Fs.map((Ye,St)=>{const Rt=Number(ns[Ye.id]??Ye.supplyRate??Ye.rate??0),us=Number(ln[Ye.id]??Ye.installRate??0),As=Number(Vt[Ye.id]??Ye.quantity??0),as=As*Rt,bs=As*us,cs=Cs[Ye.id]??Ye.location??"",Us=ne[Ye.id]??Ye.description??"",an=gt[Ye.id]??Ye.unit??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:St+1}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:Ye.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:cs}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"whitespace-pre-wrap",children:Us})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:an}),e.jsx("td",{className:"border px-2 py-1 text-center",children:As}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",Rt.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",us.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",as.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",bs.toFixed(2)]})]},Ye.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Ns||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ie,{onClick:()=>c(1),children:"Add More Painting Items"}),e.jsx(Ie,{onClick:Nn,children:"Export Excel"})]})]},"step-12-qa-boq-painting"),o===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:M,onChange:Ye=>k(Ye.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:K,onChange:Ye=>G(Ye.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:ee,onChange:Ye=>V(Ye.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:X,onChange:Ye=>J(Ye.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:he,onChange:Ye=>q(Ye.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:ie,onChange:Ye=>Ae(Ye.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:se,onChange:Ye=>je(Ye.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ne.map(Ye=>e.jsx("option",{value:Ye.id,children:Ye.name},Ye.id))]}),se&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:ne[se]||"",onChange:Ye=>re(St=>({...St,[se]:Ye.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Bg,alt:"Logo",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",M]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar, Medavakkam, Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:ce})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",K]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",ee]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",ie]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer"})," : ",X]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(Ye=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:Ye},Ye))})}),e.jsx("tbody",{children:Ne.map((Ye,St)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:St+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:Ye.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:Ye.id&&ne[Ye.id]||Ye.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"3208"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:Ye.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:Ye.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:Ye.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:Ye.amount.toFixed(2)})]},St))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:250},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:ye.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:we.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Te.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:ve.toFixed(2)})]}),e.jsxs("tr",{style:{borderTop:"1px solid #000"},children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Math.round(qe).toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:at,children:"Export PDF"})]})]})]})})})}function QK(t){const s=t.subcategory?.toLowerCase()||"",n=t.name?.toLowerCase()||"";return n.includes("flush")||s.includes("flush")?"flush-door":n.includes("wpc")||s.includes("wpc")?"wpc-door":n.includes("glass")||s.includes("glass")?"glass-door":n.includes("wood")||s.includes("wood")?"wooden-door":n.includes("stile")||s.includes("stile")?"stile-door":"flush-door"}const P0="/image.png",MK=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),jr=t=>(t||"").toString().toUpperCase(),oF={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Vh={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},_K=(t,s)=>{const n=jr(t.product),r=jr(t.name),o=jr(t.category),c=jr(t.subCategory),f=(oF[s]||[s.toUpperCase()]).some(l=>n.includes(l)||r.includes(l)||o.includes(l)||c.includes(l)),A=Vh[s],h=A&&jr(n).includes(jr(A));return f||h},bp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function PK(){const[,t]=el(),{shops:s,materials:n,products:r}=ci(),{toast:o}=Ai(),[c,p]=C.useState(1),f=typeof window<"u"&&window.location.search.includes("step=11"),[A,h]=C.useState(""),[l,g]=C.useState(""),[v,m]=C.useState(null),[N,w]=C.useState(null),[E,F]=C.useState(null),[M,k]=C.useState(null),[K,G]=C.useState(null),[ee,V]=C.useState(null),[X,J]=C.useState(1),[he,q]=C.useState(7),[ie,Ae]=C.useState(3),[ce,oe]=C.useState(6),[ne,re]=C.useState(2),[se,je]=C.useState([]),[De,ge]=C.useState([]);C.useEffect(()=>{nt("/api/accumulated-products/doors",{headers:{}}).then(u=>u.json()).then(u=>{ge(u.data||[])}).catch(u=>console.error("Failed to load accumulated products",u))},[]),C.useEffect(()=>{if(typeof window<"u"){const b=new URLSearchParams(window.location.search).get("step");if(b){const S=parseInt(b,10);S>=1&&S<=12&&p(S)}}},[]),C.useEffect(()=>{if(typeof window<"u"&&c===11){const b=new URLSearchParams(window.location.search).get("product");b&&(async()=>{try{const R=await nt(`/api/products/${b}`,{headers:{}});if(R.ok){const D=(await R.json()).product,Q=QK(D);Q&&(F(Q),g(D.name),h(D.id))}}catch(R){console.error("Failed to load product data:",R)}})()}},[c]),C.useEffect(()=>{c===12&&nt("/api/accumulated-products/doors",{headers:{}}).then(u=>u.json()).then(u=>{const b=u.data||[];ge(b),console.debug("Restored doors_accumulated_products for Step 12:",b.length)}).catch(u=>console.error("Failed to load accumulated products for Step 12",u))},[c]);const Z=u=>{const b=u?.doorType??E;if(!b)return null;const S=ye.find(B=>B.value===b);let R=S?S.label:Vh[b]||b;return/door/i.test(R)||(R=`${R} Door`),R},fe=u=>{const b=u?.doorType??E,S=u?.panelType??N,R=u?.subOption??M;if(!b)return null;const B=ye.find(te=>te.value===b);let D=B?B.label:Vh[b]||b;/door/i.test(D)||(D=`${D} Door`);const Q=S==="panel"?"With Panel":"Without Panel",$=R?` - ${R}`:"";return`${Q}  ${D}${$}`},ue=()=>{const u=(l||"").toString();if(!E&&!u)return null;const b=u||fe(),S=u||Vh[E]||E,R=E?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(E):jr(b).includes("GLASS")||jr(b).includes("STILE");return{label:b,productName:S,requiresGlazing:R}},pe=()=>{const u=(l||"").toString();if(!E&&!u||!n.length)return[];const b=u||(E?Vh[E]:"");let S=[];if(b&&(S=n.filter(B=>{const D=(B.product||"").toString();if(!D||!b)return!1;const Q=jr(D),$=jr(b);return Q.includes($)||$.includes(Q)})),(!S||S.length===0)&&!u&&(S=E?n.filter(B=>_K(B,E)):n.filter(B=>{const D=(B.product||"").toString();if(!b)return!1;const Q=jr(D),$=jr(b);return Q.includes($)||$.includes(Q)})),S.length===0)return[];const R=new Map;for(const B of S){const D=`${jr(B.product)}__${jr(B.name)}__${MK(B.code)}`,Q=R.get(D);(!Q||(B.rate||0)<(Q.rate||0))&&R.set(D,B)}return Array.from(R.values())},Ce={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},Ne=["Single Glass","Double Glass"],ye=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],we=(u,b)=>{const S=X||1,R=he||7,B=ie||3,D=ce||6,Q=ne||2,$=jf(R,B),te=u.toLowerCase();let Ue=0;return te.includes("frame")||te.includes("door frame")?Ue=$*S:te.includes("door")&&(te.includes("panel")||te.includes("shutter")||te.includes("flush")||te.includes("wooden"))?Ue=S:te.includes("hinge")?Ue=S*3:te.includes("lock")||te.includes("handle")||te.includes("stopper")||te.includes("bolt")?Ue=S:te.includes("glass")?Ue=wf(D,Q)*S:Ue=S,Math.max(1,Math.ceil(Ue))},Te=(u,b)=>{const S=u||se,R=b||Ze;return S.map(B=>{let D=ve.find(gs=>gs.id===B.materialId);if(D||(D=n.find(gs=>gs.id===B.materialId)||null),!D)return null;const Q=n.find(gs=>{const nn=jr(gs.product)===jr(D.product),z=jr(gs.name)===jr(D.name),me=gs.shopId===B.selectedShopId,Qe=bp(gs)===(B.selectedBrand||"Generic");return nn&&z&&me&&Qe})||D,$=s.find(gs=>gs.id===B.selectedShopId),te=B.rowId||(B.batchId?`${B.batchId}-${Q.id}`:Q.id),Ue=R[te]||R[Q.id]||R[D.id],He=we(Q.name,Q.unit),st=Ue?.quantity??He,Bt=Ue?.supplyRate??Q.rate??0,Lt=Ue?.installRate??0,$t=(ls||[]).find(gs=>gs.rowId===te||`${gs.batchId||""}-${gs.id}`===te);return{id:Q.id,batchId:B.batchId,rowId:te,name:Q.name,quantity:st,unit:Q.unit,rate:Bt,shopId:B.selectedShopId,shopName:$?.name||"Unknown",installRate:Lt,doorType:$t?.doorType||$t?.door_type||void 0,panelType:$t?.panelType||$t?.panel_type||void 0,subOption:$t?.subOption||$t?.sub_option||void 0,glazingType:$t?.glazingType||$t?.glazing_type||void 0,productLabel:$t?.productLabel||void 0}}).filter(B=>B!==null)},qe=()=>Te().reduce((u,b)=>u+b.quantity*b.rate,0),ve=pe(),Ge=u=>(u?.name||u?.title||u?.label||u?.productName||u?.product||"").toString(),at=u=>(u?.category||u?.type||u?.group||u?.section||"").toString(),Se=u=>{const b=jr(Ge(u)),S=jr(at(u));return b.includes("DOOR")||S.includes("DOOR")},vt=u=>{const b=jr(u);return b.includes("FLUSH")?"flush":b.includes("WPC")?"wpc":b.includes("STILE")||b.includes("ALUMIN")?"stile":b.includes("GLASS PANEL")?"glasspanel":b.includes("GLASS")?"glassdoor":b.includes("WOOD")||b.includes("TEAK")?"wooden":null},ht=(r||[]).filter(Se).slice().sort((u,b)=>{const S=Ge(u),R=Ge(b);return S.localeCompare(R)}),pt=u=>{const b=Ge(u);h(u.id||b),g(b);const S=vt(b);F(S||E),k(null),G(null),V(null),je([]),Ht({}),rs({}),yn({}),p(6)},[Ze,Ht]=C.useState({}),[At,Ct]=C.useState([]),[It,Wt]=C.useState({}),[Es,Ss]=C.useState("Concept Trunk Interiors"),[_s,$e]=C.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[ke,it]=C.useState("33ASOPS5560M1Z1"),[tt,Jt]=C.useState(""),[Qt,ss]=C.useState(new Date().toISOString().slice(0,10)),[dt,qt]=C.useState(""),[Vt,vs]=C.useState("50% Advance and 50% on Completion"),[ns,js]=C.useState(""),[ln,ys]=C.useState(""),[gt,Dt]=C.useState(""),[xt,rs]=C.useState({}),[ps,yn]=C.useState({}),[is,Fs]=C.useState({}),[Ns,Nn]=C.useState({}),[Cs,zt]=C.useState({}),[os,Ps]=C.useState({}),[Ye,St]=C.useState([]),[Rt,us]=C.useState([]),[As,as]=C.useState(""),[bs,cs]=C.useState([]),[Us,an]=C.useState([]),[Mr,Un]=C.useState([]),[Ks,Pn]=C.useState(!1);C.useEffect(()=>{(async()=>{if(tt)try{const b=await nt(`/api/estimator-step9-items?session_id=${tt}&estimator=doors`,{headers:{}});if(b.ok){const B=await b.json();cs(B.items||[])}const S=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=doors`,{headers:{}});if(S.ok){const B=await S.json();an(B.items||[])}const R=await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=doors`,{headers:{}});if(R.ok){const B=await R.json();Un(B.items||[])}}catch(b){console.warn("Failed to load data from DB:",b)}})()},[tt]),C.useEffect(()=>{if(c===7){const u=Te(),b={};u.forEach(S=>{b[S.id]={quantity:S.quantity||0,supplyRate:S.rate||0,installRate:0}}),Ht(b)}},[c,se]),C.useEffect(()=>{if(c===9){const u=Te(At,It);if(u.length>0){const b=u[0].shopId,S=s.find(R=>R.id===b);if(S){const R=[S.name||"",S.address||"",S.area||"",S.city||"",S.state||"",S.pincode||"",S.gstNo?`GSTIN: ${S.gstNo}`:"",S.phone||""].filter(Boolean);Dt(R.join(`
`))}}}},[c,At,It,se,s]),C.useEffect(()=>{if(c===9){wn();const u=[],b={},S={},R={};if(ls&&ls.length>0)for(const B of ls){const D=B.rowId||`${B.batchId||""}-${B.id}`;u.findIndex($=>$.materialId===B.id&&$.rowId===D&&($.batchId||"")===(B.batchId||""))===-1&&(u.push({materialId:B.id,selectedShopId:B.shopId||"",selectedBrand:B.brand||void 0,batchId:B.batchId,rowId:D}),b[D]={quantity:Number(B.quantity||0),supplyRate:Number(B.supplyRate??B.rate??0),installRate:Number(B.installRate||0)},B.description&&(S[D]=B.description),B.location&&(R[D]=B.location))}if(bs&&bs.length>0)for(const B of bs){if(!n.find(st=>st.id===B.material_id))continue;const Q=B.material_id,$=B.row_id||(B.batch_id?`${B.batch_id}-${Q}`:Q),te=B.shop_id||"",Ue=B.brand||void 0;u.findIndex(st=>st.materialId===Q&&(st.batchId||"")===(B.batch_id||"")&&(st.rowId||"")===$)===-1&&(u.push({materialId:Q,selectedShopId:te,selectedBrand:Ue,batchId:B.batch_id||(B.row_id?$.replace(`-${Q}`,""):void 0)}),b[$]={quantity:Number(B.quantity||0),supplyRate:Number(B.supply_rate||B.rate||0),installRate:Number(B.install_rate||0)},B.description&&(S[$]=B.description),B.location&&(R[$]=B.location))}se&&se.length>0&&se.forEach(B=>{if(u.findIndex(Q=>Q.materialId===B.materialId&&Q.batchId===B.batchId)===-1){u.push(B);const Q=n.find($=>$.id===B.materialId);if(Q){const $=B.batchId?`${B.batchId}-${B.materialId}`:B.materialId;b[$]={quantity:Ze[B.materialId]?.quantity??Q.quantity??1,supplyRate:Ze[B.materialId]?.supplyRate??Q.rate??0,installRate:Ze[B.materialId]?.installRate??0}}}}),u.length>0&&Ct(u),Object.keys(b).length>0&&Wt(b),Object.keys(S).length>0&&rs(B=>({...B,...S})),Object.keys(R).length>0&&yn(B=>({...B,...R}))}},[c,se,bs]),C.useEffect(()=>{c===11&&(async()=>{if(tt)try{const b=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=doors`,{headers:{}});if(b.ok){const R=(await b.json()).items||[],B={},D={},Q={},$={};R.forEach(te=>{const Ue=n.find(He=>He.name===te.item);Ue&&(B[Ue.id]=Number(te.supply_rate||0),D[Ue.id]=Number(te.install_rate||0),Q[Ue.id]=Number(te.qty||0),$[Ue.id]=te.unit||"")}),Ps(te=>({...te,...B})),zt(te=>({...te,...D})),Fs(te=>({...te,...Q})),Nn(te=>({...te,...$}))}}catch(b){console.warn("Failed to load step 11 data:",b)}})()},[c,tt,Us]);const nr=C.useRef(null);C.useEffect(()=>{wn().catch(()=>{})},[]),C.useEffect(()=>{(async()=>{if(tt)try{const b=await nt(`/api/estimator-step9-items?session_id=${tt}&estimator=doors`,{headers:{}});if(b.ok){const S=await b.json(),R=S.items.map(B=>({id:B.material_id,rowId:B.row_id,batchId:B.batch_id,name:B.name,unit:B.unit,quantity:B.quantity,supplyRate:B.supply_rate,installRate:B.install_rate,shopId:B.shop_id,shopName:B.shop_name,description:B.description,location:B.location,doorType:B.door_type,panelType:B.panel_type,subOption:B.sub_option,glazingType:B.glazing_type}));if(be(R),S.items.length>0){const B=S.items[0];fs({doorType:B.door_type,panelType:B.panel_type,subOption:B.sub_option,glazingType:B.glazing_type,count:B.qty,height:B.height,width:B.width,glassHeight:B.glass_height,glassWidth:B.glass_width,subtotal:B.subtotal,sgst:B.sgst,cgst:B.cgst,round_off:B.round_off,grand_total:B.grand_total})}}}catch(b){console.warn("Failed to load step 9 from DB",b)}})()},[tt]),C.useEffect(()=>(nr.current&&clearTimeout(nr.current),nr.current=setTimeout(async()=>{new Date().toISOString();try{if(!tt)return;const u=Te().map((b,S)=>{const R=b.rowId||(b.batchId?`${b.batchId}-${b.id}`:b.id);return{estimator:"doors",session_id:tt,s_no:S+1,row_id:String(R),batch_id:b.batchId||null,material_id:b.id,name:b.name,unit:b.unit,quantity:Number(Ze[b.id]?.quantity??b.quantity??0),supply_rate:Number(Ze[b.id]?.supplyRate??b.rate??0),install_rate:Number(Ze[b.id]?.installRate??0),shop_id:b.shopId||"",shop_name:b.shopName||"",description:xt[b.id]||"",location:ps[b.id]||"",door_type:E,panel_type:N,sub_option:M,glazing_type:ee,qty:X,height:he,width:ie,glass_height:ce,glass_width:ne}});await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:tt,items:u})})}catch{}},800),()=>{nr.current&&clearTimeout(nr.current)}),[se,Ze,xt,ps,E,N,M,ee,X,he,ie,ce,ne,tt]);const Yn=u=>{const b=ve.find(te=>te.id===u);if(!b)return;if(se.find(te=>te.materialId===u)){je(te=>te.filter(Ue=>Ue.materialId!==u));return}const R=n.filter(te=>jr(te.product)===jr(b.product)&&jr(te.name)===jr(b.name)).map(te=>({brand:bp(te),shopId:te.shopId,rate:te.rate||0})),D=Array.from(new Set(R.map(te=>te.brand))).sort()[0]||"Generic",$=R.filter(te=>te.brand===D).sort((te,Ue)=>te.rate-Ue.rate)[0];$?.shopId&&je(te=>[...te,{materialId:u,selectedShopId:$.shopId,selectedBrand:D}])},dn=(u,b)=>{je(S=>S.map(R=>R.materialId===u?{...R,selectedShopId:b}:R))},vn=(u,b)=>{const S=ve.find(D=>D.id===u);if(!S)return;const B=n.filter(D=>jr(D.product)===jr(S.product)&&jr(D.name)===jr(S.name)).map(D=>({brand:bp(D),shopId:D.shopId,rate:D.rate||0})).filter(D=>D.brand===b).sort((D,Q)=>D.rate-Q.rate)[0]?.shopId||"";je(D=>D.map(Q=>Q.materialId===u?{...Q,selectedBrand:b,selectedShopId:B||Q.selectedShopId}:Q))},[jn,Jn]=C.useState([]),Zr=()=>{const u=(c===9?Te(At,It):Te()).map(b=>b.rowId||b.id);Jn(b=>b.length===u.length?[]:u)},Ir=async()=>{if(jn.length!==0){try{const u=[],b=[];for(const S of jn){const R=ls?.find(B=>`${B.batchId||""}-${B.id}`===S);if(R&&R.id){const B=bs.find(D=>D.id===R.id);B&&u.push(B)}else{const B=At.find(D=>`${D.batchId||""}-${D.materialId}`===S);B&&b.push(B)}}if(u.length>0&&tt&&(await nt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:tt,estimator:"doors",items:u})}),be(S=>S?S.filter(R=>!u.some(B=>B.id===R.id)):null)),b.length>0&&Ct(S=>S.filter(R=>!b.some(B=>`${B.batchId||""}-${B.materialId}`==`${R.batchId||""}-${R.materialId}`))),Ct(S=>S.filter(R=>!jn.includes(`${R.batchId||""}-${R.materialId}`))),Wt(S=>{const R={...S};return jn.forEach(B=>delete R[B]),R}),tt){const R=await(await nt(`/api/estimator-step9-items?session_id=${tt}&estimator=doors`,{headers:{}})).json();cs(R.items||[])}o({title:"Success",description:`${jn.length} item(s) deleted successfully!`})}catch(u){console.warn("Failed to delete items",u),o({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}Jn([])}},[Vn,Ts]=C.useState([]),Ls=C.useRef(""),[ts,Qs]=C.useState(null),[ls,be]=C.useState(null),[xe,lt]=C.useState({}),[Je,fs]=C.useState(null),wn=async()=>{try{const u=await nt("/api/boq");if(u.status===401){Ts([]),Ls.current!=="401"&&(Ls.current="401",o({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!u.ok){const R=await u.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${R||u.status}`)}if(!(u.headers.get("content-type")||"").includes("application/json")){const R=await u.text().catch(()=>"");console.warn("/api/boq returned non-json:",R),Ts([]);return}const S=await u.json();Ts(S.boqs||[]),Ls.current=""}catch(u){console.error("fetchSavedBoqs",u);const b=String(u?.message||u||"");if(!b)return;Ls.current!==b&&(Ls.current=b,o({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},zn=async()=>{try{if(!tt)return o({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const u={estimator:"doors",billNo:tt,doorType:E,panelType:N,subOption:M,glazingType:ee,qty:X,height:he,width:ie,glassHeight:ce,glassWidth:ne,materials:ls&&ls.length>0?ls:Te(),subtotal:Js,sgst:ms,cgst:$n,roundOff:qr,grandTotal:Ka},b=await nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!b.ok){const B=await b.text().catch(()=>"");throw new Error(B||"save failed")}const S=b.headers.get("content-type")||"";let R=null;if(S.includes("application/json"))R=await b.json();else{const B=await b.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",B),R={boq:null}}return await wn(),Qs(R?.boq||R?.boqs?.[0]||null),!0}catch(u){return console.error("handleSaveBOQ",u),!1}},di=async u=>{try{if(!(await nt(`/api/boq/${u}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await wn()}catch(b){console.error("handleDeleteSavedBoq",b)}},Oi=()=>{p(1),F(null),w(null),k(null),G(null),J(1),q(7),Ae(3),oe(0),re(0),St([]),Fs({}),rs({}),yn({}),Nn({}),Ps({}),zt({}),lt({}),Qs(null)},ka=async()=>{Pn(!0);try{let u=Us||[];if(tt)try{const D=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=doors`);D.ok&&(u=(await D.json()).items||[],an(u))}catch(D){console.warn("Failed to refresh step11 items before save",D)}const b=Fn.map(D=>({estimator:"doors",session_id:tt,group_key:(D.groupKey||`${D.doorType||"door"}||${D.panelType||""}||${D.subOption||""}`)+"::"+(D.name||""),group_id:D.groupId||`group_${D.groupKey||""}`,item_name:D.name,unit:D.unit,quantity:D.quantity,location:D.location||"",description:D.description||"",supply_rate:os[D.id]||D.supplyRate||0,install_rate:Cs[D.id]||D.installRate||0,supply_amount:(D.quantity||0)*(os[D.id]||D.supplyRate||0),install_amount:(D.quantity||0)*(Cs[D.id]||D.installRate||0),supply_subtotal:Fn.reduce((Q,$)=>Q+($.quantity||0)*(os[$.id]||$.supplyRate||0),0),install_subtotal:Fn.reduce((Q,$)=>Q+($.quantity||0)*(Cs[$.id]||$.installRate||0),0),sgst:ms,cgst:$n,round_off:qr,grand_total:Fn.reduce((Q,$)=>Q+($.quantity||0)*((os[$.id]||$.supplyRate||0)+(Cs[$.id]||$.installRate||0)),0)+ms+$n+qr})),S=new Set((u||[]).map(D=>D.group_key||D.groupKey)),R=b.filter(D=>!S.has(D.group_key));if(R.length===0)return o({title:"No changes",description:"No new Step 11 items to save."}),Pn(!1),!0;const B=await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:R})});if(!B.ok){const D=await B.text().catch(()=>"");return o({title:"Error",description:`Failed saving Step 11: ${D||B.statusText}`,variant:"destructive"}),Pn(!1),!1}try{const D=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=doors`);if(D.ok){const Q=await D.json();an(Q.items||[])}}catch(D){console.warn("Failed to reload step11 items after save",D)}return ge([]),o({title:"Success",description:"Step 11 saved to database."}),Pn(!1),!0}catch(u){return console.error("handleSaveAccumulatedBOQ",u),o({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Pn(!1),!1}},Rr=u=>{if(Jt(u.bill_no||""),F(u.door_type||null),w(u.panel_type||null),k(u.sub_option||null),V(u.glazing_type||null),J(u.qty||1),q(u.height||7),Ae(u.width||3),oe(u.glass_height||6),re(u.glass_width||2),Array.isArray(u.materials)){const b=u.materials.map(S=>({materialId:S.id,selectedShopId:S.shopId||S.shop_id||S.shopId||"",selectedBrand:S.shopName||S.brand||S.selectedBrand||void 0}));je(b.filter(Boolean))}Qs(u)},Ha=(u,b)=>{if(c===9){Wt(S=>({...S,[u]:{...S[u]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(b))}}));return}Ht(S=>({...S,[u]:{...S[u]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(b))}}))},Na=(u,b)=>{if(c===9){Wt(S=>({...S,[u]:{...S[u]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(b)),installRate:S[u]?.installRate||0}}));return}Ht(S=>({...S,[u]:{...S[u]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(b)),installRate:S[u]?.installRate||0}}))},$r=(u,b)=>{if(c===9){Wt(S=>({...S,[u]:{...S[u]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(b)),supplyRate:S[u]?.supplyRate||0}}));return}Ht(S=>({...S,[u]:{...S[u]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(b)),supplyRate:S[u]?.supplyRate||0}}))},Oa=()=>{const u=document.getElementById("boq-pdf");if(!u){alert("BOQ content not found");return}setTimeout(()=>{vA().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:b=>b.className?.toString().includes("bg-")||b.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(u).save().catch(b=>{console.error("PDF Export Error:",b),alert("PDF export failed. Check console.")})},100)},vi=async()=>{const u=document.getElementById("boq-final-pdf");if(!u){alert("Final BOQ content not found");return}const b=(await Uc(async()=>{const{default:S}=await Promise.resolve().then(()=>ru);return{default:S}},void 0)).default;b().set({margin:10,filename:`BOQ-${tt||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(u).save()},Ui=()=>{const u=Te(),b=ue(),S=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${N==="panel"?"With Panel":"Without Panel"} - ${b?.label}`,`Dimensions: ${he}ft  ${ie}ft (Count: ${X})`,...ee?[`Glazing: ${ee}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];u.forEach(($,te)=>{const Ue=$.quantity*$.rate;S.push(`${te+1},"${$.name}","${$.unit}",${$.quantity},${$.rate},"${$.shopName}",${Ue}`)}),S.push("",`TOTAL COST,,,${qe().toFixed(2)}`);const R=S.join(`
`),B=new Blob([R],{type:"text/csv"}),D=window.URL.createObjectURL(B),Q=document.createElement("a");Q.href=D,Q.download=`BOQ-Doors-${new Date().getTime()}.csv`,Q.click(),URL.revokeObjectURL(D)},bi=()=>{const u=Fn||[],b=[];b.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),u.forEach((Q,$)=>{const te=Number(Q.supplyRate??Q.rate??0),Ue=Number(Q.installRate??0),He=Number(Q.quantity||0),st=He*te,Bt=He*Ue,Lt=(Q.location||ps[Q.id]||"").toString().replace(/"/g,'""'),$t=(Q.description||xt[Q.id]||Q.name||"").toString().replace(/"/g,'""'),z=(fe({doorType:Q.doorType||Q.door_type,panelType:Q.panelType||Q.panel_type,subOption:Q.subOption||Q.sub_option,glazingType:Q.glazingType||Q.glazing_type})||Q.name||"").replace(/"/g,'""');b.push(`${$+1},"${z}","${Lt}","${$t}",${Q.unit},${He},${te.toFixed(2)},${Ue.toFixed(2)},${st.toFixed(2)},${Bt.toFixed(2)}`)});const S=b.join(`
`),R=new Blob([S],{type:"text/csv"}),B=window.URL.createObjectURL(R),D=document.createElement("a");D.href=B,D.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,D.click(),URL.revokeObjectURL(B)},ui=async()=>{const u=Te(At,It).map(te=>{const Ue=te.rowId||`${te.batchId}-${te.id}`;return{id:te.id,rowId:Ue,batchId:te.batchId||null,name:te.name,unit:te.unit,quantity:It[Ue]?.quantity??It[te.id]?.quantity??te.quantity,supplyRate:It[Ue]?.supplyRate??It[te.id]?.supplyRate??te.rate,installRate:It[Ue]?.installRate??It[te.id]?.installRate??te.installRate??0,shopId:te.shopId,shopName:te.shopName,description:xt[Ue]||xt[te.id]||"",location:ps[Ue]||ps[te.id]||"",doorType:te.doorType,panelType:te.panelType,subOption:te.subOption,glazingType:te.glazingType,isSaved:te.isSaved||!1}}),b=u.filter(te=>!te.isSaved);if(b.length===0){o({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let S=tt;const B=(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams).get("project");B&&B.trim()!==""?(S=B,Jt(S)):(!S||S.trim()==="")&&(S=`DOOR-${Date.now()}`,Jt(S));const D=Je||(()=>{const te=u.reduce((Lt,$t)=>Lt+Number($t.quantity||0)*(Number($t.supplyRate||0)+Number($t.installRate||0)),0),Ue=te*.09,He=te*.09,st=Math.round(te+Ue+He)-(te+Ue+He),Bt=te+Ue+He+st;return{subtotal:te,sgst:Ue,cgst:He,round_off:st,grand_total:Bt}})(),Q={id:`local-${Date.now()}`,estimator:"doors",bill_no:S,door_type:Je?.doorType||Je?.door_type||E,panel_type:Je?.panelType||Je?.panel_type||N,sub_option:Je?.subOption||Je?.sub_option||M,glazing_type:Je?.glazingType||Je?.glazing_type||ee,qty:Je?.count||Je?.qty||X,height:Je?.height||he,width:Je?.width||ie,glass_height:Je?.glassHeight||Je?.glass_height||ce,glass_width:Je?.glassWidth||Je?.glass_width||ne,materials:u,subtotal:D.subtotal,sgst:D.sgst,cgst:D.cgst,round_off:D.round_off,grand_total:D.grand_total,created_at:new Date().toISOString()};Qs(Q),be(u);try{fs(te=>({...te||{},...D}))}catch{}const $=b.map((te,Ue)=>({estimator:"doors",session_id:S,s_no:Ue+1,row_id:String(te.rowId||`${te.batchId||""}-${te.id}`),batch_id:te.batchId||null,material_id:te.id,name:te.name,unit:te.unit,quantity:Number(te.quantity||0),supply_rate:Number(te.supplyRate||0),install_rate:Number(te.installRate||0),shop_id:te.shopId||"",shop_name:te.shopName||"",description:te.description||"",location:te.location||"",door_type:te.doorType||Je?.doorType||Je?.door_type||E||null,panel_type:te.panelType||Je?.panelType||Je?.panel_type||N||null,sub_option:te.subOption||Je?.subOption||Je?.sub_option||M||null,glazing_type:te.glazingType||Je?.glazingType||Je?.glazing_type||ee||null,qty:Je?.count||Je?.qty||X,height:Je?.height||he,width:Je?.width||ie,glass_height:Je?.glassHeight||Je?.glass_height||ce,glass_width:Je?.glassWidth||Je?.glass_width||ne,subtotal:D.subtotal,sgst:D.sgst,cgst:D.cgst,round_off:D.round_off,grand_total:D.grand_total}));try{await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:S,items:$})});const Ue=await(await nt(`/api/estimator-step9-items?session_id=${S}&estimator=doors`,{headers:{}})).json();cs(Ue.items||[]);const He=(ls||[]).map(st=>b.some(Lt=>st.rowId===Lt.rowId||`${st.batchId||""}-${st.id}`==`${Lt.batchId||""}-${Lt.id}`)?{...st,isSaved:!0}:st);be(He),o({title:"Success",description:`${b.length} new material(s) saved successfully to database!`})}catch(te){console.warn("Failed to save step 9 to DB",te),o({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},hi=u=>{let b=5381;for(let S=0;S<u.length;S+=1)b=(b<<5)+b^u.charCodeAt(S);return Math.abs(b>>>0).toString(36)},tn=()=>{const u=JSON.stringify({doorType:E,panelType:N,subOption:M,glazingType:ee,count:X,height:he,width:ie,glassHeight:ce,glassWidth:ne,selectedMaterials:(se||[]).map(b=>({materialId:b.materialId,selectedShopId:b.selectedShopId,selectedBrand:b.selectedBrand})),editable:Object.keys(Ze||{}).sort().map(b=>({id:b,...Ze[b]}))});return`batch-${hi(u)}`},sn=()=>{const b=`${tn()}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,S=Te(se,Ze).map(He=>({id:He.id,rowId:`${b}-${He.id}`,batchId:b,name:He.name,unit:He.unit,quantity:Ze[He.id]?.quantity??He.quantity,supplyRate:Ze[He.id]?.supplyRate??He.rate,installRate:Ze[He.id]?.installRate??0,shopId:He.shopId,shopName:He.shopName,description:xt[He.id]||"",location:ps[He.id]||"",doorType:E,panelType:N,subOption:M,glazingType:ee,isSaved:!1}));if(S.length===0){p(9);return}const R=new Set((ls||[]).map(He=>He.id)),B=S.filter(He=>!R.has(He.id));if(B.length===0){p(9);return}const Q=[...ls||[],...B],$=new Map;for(const He of Q){const st=`${He.id}`;$.has(st)||$.set(st,He)}const te=Array.from($.values());be(te),Ct(te.map(He=>({materialId:He.id,selectedShopId:He.shopId||"",selectedBrand:He.brand||void 0,batchId:He.batchId,rowId:He.rowId})));const Ue={};te.forEach(He=>{const st=He.rowId||`${He.batchId}-${He.id}`;Ue[st]={quantity:Number(He.quantity||0),supplyRate:Number(He.supplyRate||He.rate||0),installRate:Number(He.installRate||0)}}),Wt(Ue);try{const He=qe(),st=He*.09,Bt=He*.09,Lt=Math.round(He+st+Bt)-(He+st+Bt),$t=He+st+Bt+Lt;fs({doorType:E,panelType:N,subOption:M,glazingType:ee,count:X,height:he,width:ie,glassHeight:ce,glassWidth:ne,subtotal:He,sgst:st,cgst:Bt,round_off:Lt,grand_total:$t})}catch{}je([]),Ht({}),rs(He=>{const st={...He};return Object.keys(st).forEach(Bt=>{Bt.startsWith("group_")||delete st[Bt]}),st}),yn(He=>{const st={...He};return Object.keys(st).forEach(Bt=>{Bt.startsWith("group_")||delete st[Bt]}),st}),p(9)},ks=c===9||c===11?Te(At,It):Te(),qs=c===9?It:Ze,Js=ks.reduce((u,b)=>u+b.quantity*((qs[b.id]?.supplyRate??b.rate)+(qs[b.id]?.installRate??b.installRate??0)),0),ms=Js*.09,$n=Js*.09,qr=Math.round(Js+ms+$n)-(Js+ms+$n),Ka=Js+ms+$n+qr,Ca=De.length>0?De.flatMap(u=>u.materials||[]):ls&&ls.length>0?ls:ks&&ks.length>0?ks:ts&&ts.materials&&ts.materials.length>0?Array.isArray(ts.materials)?ts.materials:JSON.parse(ts.materials||"[]"):ks,on=(()=>{const u=new Map;for(const S of Ca||[]){const R=S.doorType||S.door_type||Je?.doorType||Je?.door_type||E||"door",B=S.panelType||S.panel_type||Je?.panelType||Je?.panel_type||N||"",D=S.subOption||S.sub_option||Je?.subOption||Je?.sub_option||"",Q=`${R}||${B}||${D}`;u.has(Q)||u.set(Q,[]),u.get(Q).push(S)}const b=[];for(const[S,R]of u.entries()){const[B,D,Q]=S.split("||"),$=`group_${S}`,te=xt[$]||"",Ue=ps[$]||"";let He=Number(xe[$]??Je?.count??Je?.qty??X??1);const st=String(te).match(/Qty:\s*(\d+(?:\.\d+)?)/);st&&(xe[$]===void 0||xe[$]===null)&&(He=Number(st[1]));const Bt=R.reduce((me,Qe)=>me+Number(Qe.quantity||0)*Number(Qe.supplyRate??Qe.rate??0),0),Lt=He>0?Bt/He:Bt,$t=R.reduce((me,Qe)=>me+Number(Qe.quantity||0)*Number(Qe.installRate??0),0),gs=He>0?$t/He:$t,nn=Z({doorType:B})||B,z=String(te).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();b.push({id:$,groupKey:S,name:nn,location:Ue||"",description:z||"",unit:"pcs",quantity:He,supplyRate:Number(Lt||0),installRate:Number(Cs[$]??gs??0),supplyAmount:Number(Lt*He||0),installAmount:Number((Cs[$]??gs)*He||0)})}return b})();(Us||[]).filter(u=>u.item||u.item_name).map((u,b)=>{const S=u.group_key||u.groupKey||`${u.door_type||u.doorType||"door"}||${u.panel_type||u.panelType||""}||${u.sub_option||u.subOption||""}`;return{id:u.id,groupKey:S,name:u.item_name||u.item||u.name||u.door_label||u.doorType||u.door_type||"Door",location:u.location||"",description:u.description||"",unit:u.unit||"pcs",quantity:Number(u.quantity??u.qty??1),supplyRate:Number(u.supply_rate??u.supplyRate??0),installRate:Number(u.install_rate??u.installRate??0),supplyAmount:Number(u.supply_amount??0),installAmount:Number(u.install_amount??0),doorType:u.door_type||u.doorType,panelType:u.panel_type||u.panelType,subOption:u.sub_option||u.subOption}});const Fn=(De.length===0?on.filter(u=>!(Us||[]).some(S=>(S.group_key||S.groupKey||`${S.door_type||""}||${S.panel_type||""}||${S.sub_option||""}`)===u.groupKey)):De.map((u,b)=>({id:`accumulated_${b}`,groupKey:`${u.doorType||"door"}||${u.panelType||""}||${u.subOption||""}`,name:u.doorLabel||fe({doorType:u.doorType,panelType:u.panelType,subOption:u.subOption})||u.doorType,location:u.location||"",description:u.description||"",unit:"pcs",quantity:u.count||1,supplyRate:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.supplyRate??R.rate??0),0)||0,installRate:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.installRate??0),0)||0,supplyAmount:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.supplyRate??R.rate??0),0)||0,installAmount:u.materials?.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.installRate??0),0)||0})))||[],Zn=Fn.filter(u=>Rt.includes(u.id)),pa=Fn.reduce((u,b)=>{const S=Number(is[b.id]??(b.quantity||0)),R=Number(os[b.id]??b.supplyRate??b.rate??0);return u+S*R},0);Fn.reduce((u,b)=>{const S=Number(is[b.id]??(b.quantity||0));return u+S*Number(b.installRate||0)},0);const ma=Zn.reduce((u,b)=>{const S=Number(is[b.id]??(b.quantity||0)),R=Number(os[b.id]??b.supplyRate??b.rate??0);return u+S*R},0);ts&&ts.bill_no;const x=ts&&ts.created_at?new Date(ts.created_at).toISOString().slice(0,10):Qt,j=u=>{if(!u)return!1;const b=(u.name||"").toString().trim(),S=Number(u.quantity||0),R=Number(u.supplyRate??u.rate??0),B=Number(u.installRate??0),D=(u.description||"").toString().trim(),Q=(u.location||"").toString().trim();return!!b||S>0||R>0||B>0||!!D||!!Q};return(De||[]).map(u=>{const b=(u.materials||[]).filter(j),S=b.reduce((B,D)=>B+Number(D.quantity||0)*Number(D.supplyRate??D.rate??0),0),R=b.reduce((B,D)=>B+Number(D.quantity||0)*Number(D.installRate??0),0);return{...u,materials:b,supplySubtotal:S,installSubtotal:R,subtotal:S+R}}).filter(u=>(u.materials||[]).length>0),e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Door Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Vs,{className:"border-border/50",children:e.jsx(fn,{className:"pt-8 min-h-96",children:e.jsxs(gl,{mode:"wait",children:[c===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Door Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:ht.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No door products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:ht.map(u=>{const b=Ge(u),S=(u?.id||b).toString(),R=A===S;return e.jsx(Ie,{variant:R?"default":"outline",onClick:()=>pt(u),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:b||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:at(u)})]})},S)})})})]},"step-select-product"),c===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:P0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:x})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all-groups",checked:(()=>{const u=(Fn||[]).map(b=>b.id);return u.length>0&&u.every(b=>Ye.includes(b))})(),onCheckedChange:u=>{St(u?(Fn||[]).map(b=>b.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Fn||[]).map((u,b)=>{const S=Number(os[u.id]??u.supplyRate??u.rate??0),R=Number(Cs[u.id]??u.installRate??0);let B=Number(is[u.id]??(u.quantity||0));const D=B*S,Q=B*R;return ps[u.id]??u.location,xt[u.id]??u.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:Ye.includes(u.id),onCheckedChange:()=>{St($=>$.includes(u.id)?$.filter(te=>te!==u.id):[...$,u.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:b+1}),e.jsx("td",{className:"border px-2 py-1",children:u.productLabel||u.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{value:ps[u.id]??u.location??"",onChange:$=>yn(te=>({...te,[u.id]:$.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:xt[u.id]??u.description??"",onChange:$=>rs(te=>({...te,[u.id]:$.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{value:Ns[u.id]??u.unit??"",onChange:$=>Nn(te=>({...te,[u.id]:$.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",value:B,onChange:$=>Fs(te=>({...te,[u.id]:Number($.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:S,onChange:$=>Ps(te=>({...te,[u.id]:Number($.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:R,onChange:$=>zt(te=>({...te,[u.id]:Number($.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",D.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Q.toFixed(2)]})]},u.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(pa||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!f&&e.jsx(Ie,{variant:"outline",onClick:()=>p(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",disabled:Ye.length===0,onClick:async()=>{if(console.log("Delete selected:",Ye),Us.length>0&&tt)try{await nt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Ye,estimator:"doors"})});const u=await nt(`/api/estimator-step11-groups?session_id=${tt}&estimator=doors`,{headers:{}});if(u.ok){const b=await u.json();an(b.items||[])}o({title:"Success",description:"Step 11 data deleted from database!"})}catch(u){console.warn("Failed to delete step 11 from DB",u),o({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(De.length===0)if(ts){console.log("Deleting from saved BOQ");const u=Ye.map(B=>B.replace("group_","")),b=Array.isArray(ts.materials)?ts.materials:JSON.parse(ts.materials||"[]");console.log("Current materials:",b.length);const S=b.filter(B=>{const D=B.doorType||B.door_type||Je?.doorType||Je?.door_type||E||"door",Q=B.panelType||B.panel_type||Je?.panelType||Je?.panel_type||N||"",$=B.subOption||B.sub_option||Je?.subOption||Je?.sub_option||M||"",te=`${D}||${Q}||${$}`,Ue=u.includes(te);return console.log("Checking material:",B.id||B.name,te,"match:",Ue),!Ue});console.log("Filtered materials:",S.length);const R={...ts,materials:S};Qs(R),nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)}).then(()=>console.log("Saved updated BOQ")).catch(B=>console.error("Error saving BOQ:",B))}else{console.log("Deleting from Step 11 saved materials");const u=Ye.map(R=>R.replace("group_","")),S=((ls&&ls.length>0?ls:ks)||[]).filter(R=>{const B=R.doorType||R.door_type||Je?.doorType||Je?.door_type||E||"door",D=R.panelType||R.panel_type||Je?.panelType||Je?.panel_type||N||"",Q=R.subOption||R.sub_option||Je?.subOption||Je?.sub_option||M||"",$=`${B}||${D}||${Q}`;return!u.includes($)});be(S)}else if(De.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",De.length);let u;if(Ye.some(b=>b.startsWith("accumulated_"))){const b=Ye.filter(S=>S.startsWith("accumulated_")).map(S=>parseInt(S.replace("accumulated_",""))).sort((S,R)=>R-S);u=[...De],b.forEach(S=>{S>=0&&S<u.length&&u.splice(S,1)})}else{const b=Ye.map(S=>S.replace("group_",""));u=De.filter(S=>{const R=`${S.doorType||"door"}||${S.panelType||""}||${S.subOption||""}`,B=b.includes(R);return console.log("Checking product:",S.id,R,"match:",B),!B})}console.log("Accumulated products after:",u.length),ge(u),nt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:u})}).catch(b=>console.error("Failed to save accumulated products after delete",b))}St([])},children:"Delete Selected"}),e.jsx(Ie,{onClick:Oi,children:"Add Product"}),e.jsx(Ie,{onClick:ka,disabled:Ks,children:"Save"}),e.jsx(Ie,{onClick:async()=>{us(Ye);const u=(Zn||[]).map((b,S)=>{const R=Number(os[b.id]??b.supplyRate??b.rate??0),B=Number(Cs[b.id]??b.installRate??0);let D=Number(is[b.id]??(b.quantity||0));return{s_no:S+1,item:b.name,location:ps[b.id]??b.location??"",description:xt[b.id]??b.description??"",unit:Ns[b.id]??b.unit??"",qty:D,supply_rate:R,install_rate:B,supply_amount:D*R,install_amount:D*B}});try{const b=await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=doors`,{headers:{}});let S=[];b.ok&&(S=(await b.json()).items||[]);const R=u.filter(Q=>!S.some($=>$.item===Q.item&&$.description===Q.description&&$.unit===Q.unit));if(R.length===0){p(12);return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:tt,items:R})});const D=await(await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=doors`,{headers:{}})).json();Un(D.items||[]),o({title:"Success",description:`${R.length} new material(s) saved successfully to database!`}),p(12)}catch(b){console.warn("Failed to save step 12 to DB",b),o({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),c===4&&E&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(Ce[E]||[]).map(u=>e.jsx(Ie,{onClick:()=>{k(u),G(null)},className:`w-full text-black ${M===u?"bg-cyan-500":"bg-white"}`,children:u},u))}),E==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:Ne.map(u=>e.jsx(Ie,{onClick:()=>G(u),className:`w-full text-black ${K===u?"bg-cyan-500":"bg-white"}`,children:u},u))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>p(3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>p(5),disabled:!M||E==="flush"&&M==="With Vision Panel"&&!K,children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),c===5&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"count",children:"Count"}),e.jsx(Ve,{id:"count",type:"number",placeholder:"1",value:X||"",onChange:u=>J(u.target.value?parseFloat(u.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"height",children:"Height"}),e.jsx(Ve,{id:"height",type:"number",placeholder:"7",value:he||"",onChange:u=>q(u.target.value?parseFloat(u.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"width",children:"Width"}),e.jsx(Ve,{id:"width",type:"number",placeholder:"3",value:ie||"",onChange:u=>Ae(u.target.value?parseFloat(u.target.value):null)})]})]}),ue()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Xe,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Ve,{id:"glassHeight",type:"number",placeholder:"72",value:ce||"",onChange:u=>oe(u.target.value?parseFloat(u.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Ve,{id:"glassWidth",type:"number",placeholder:"24",value:ne||"",onChange:u=>re(u.target.value?parseFloat(u.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>p(ue()?.requiresGlazing?4:3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:!X||!he||!ie||ue()?.requiresGlazing&&(!ce||!ne),onClick:()=>p(6),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),c===6&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",ue()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gn,{id:"select-all-materials",checked:se.length===ve.length&&ve.length>0,onCheckedChange:u=>{if(u){const b=ve.map(S=>{const R=n.filter($=>jr($.product)===jr(S.product)&&jr($.name)===jr(S.name)).map($=>({id:$.id,brand:bp($),shopId:$.shopId,rate:$.rate,unit:$.unit,shopName:s.find(te=>te.id===$.shopId)?.name||"Unknown"})),D=Array.from(new Set(R.map($=>$.brand))).sort()[0]||"Generic",Q=R.filter($=>$.brand===D).sort(($,te)=>($.rate||0)-(te.rate||0));return{materialId:S.id,selectedBrand:D,selectedShopId:Q[0]?.shopId||""}});je(b)}else je([])}}),e.jsx(Xe,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:ve.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",E||l||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(E?oF[E]||[E]:[l||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",n.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(n.map(u=>u.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):ve.map(u=>{const b=se.some(te=>te.materialId===u.id),S=se.find(te=>te.materialId===u.id),R=n.filter(te=>jr(te.product)===jr(u.product)&&jr(te.name)===jr(u.name)).map(te=>({id:te.id,brand:bp(te),shopId:te.shopId,rate:te.rate,unit:te.unit,shopName:s.find(Ue=>Ue.id===te.shopId)?.name||"Unknown"})),B=Array.from(new Set(R.map(te=>te.brand))).sort(),Q=se.find(te=>te.materialId===u.id)?.selectedBrand||B[0]||"Generic",$=R.filter(te=>te.brand===Q).sort((te,Ue)=>(te.rate||0)-(Ue.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:u.id,checked:b,onCheckedChange:()=>Yn(u.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:u.id,className:"font-medium cursor-pointer",children:u.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.code}),b&&B.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Lr,{value:Q,onValueChange:te=>vn(u.id,te),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:B.map(te=>e.jsx(wr,{value:te,children:te},te))})]})]}),b&&$.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Lr,{value:S?.selectedShopId||$[0].shopId,onValueChange:te=>dn(u.id,te),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:$.map(te=>e.jsxs(wr,{value:te.shopId||"",children:[te.shopName," - ",te.rate,"/",u.unit,te.rate===$[0].rate&&" (Best)"]},te.shopId))})]})]})]})]})},u.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>p(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:se.length===0,onClick:()=>p(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),c===7&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Te().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Te().map(u=>{const b=se.find(R=>R.materialId===u.id),S=n.find(R=>R.id===u.id);return e.jsxs("div",{className:Xs("p-3 border rounded grid grid-cols-9 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:u.name}),e.jsx("span",{className:"text-sm",children:xt[u.id]||u.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:b?.selectedBrand||S?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:Ze[u.id]?.quantity??u.quantity,onChange:R=>Ha(u.id,parseInt(R.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:u.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:u.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:Ze[u.id]?.supplyRate??u.rate,onChange:R=>Na(u.id,parseFloat(R.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((Ze[u.id]?.quantity??u.quantity)*((Ze[u.id]?.supplyRate??u.rate)+(Ze[u.id]?.installRate??0))).toFixed(2)]})]},u.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>p(6),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>p(8),disabled:Te().length===0,children:["Next: Generate BOM"," ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),c===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:Z()||"Door"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[he," ft  ",ie," ft (Qty: ",X,")"]})]}),ee&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:ee})]}),ue()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ce,'"  ',ne,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(u=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:u==="Qty"||u.includes("Rate")||u.includes("Amount")?"right":"left"},children:u},u))})}),e.jsx("tbody",{children:Te().map((u,b)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:b+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:u.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:u.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:u.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:u.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:u.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(u.quantity*u.rate).toFixed(2)})]},u.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:se.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Te().reduce((u,b)=>u+b.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",qe().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ie,{onClick:()=>p(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Ui,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(si,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:Oa,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(si,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>sn(),disabled:Te().length===0,children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{p(1),h(""),g(""),w(null),F(null),V(null),J(1),q(7),Ae(3),oe(6),re(2),je([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Qn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),c===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:P0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:x})})]}),!Zn||Zn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Zn||[]).map((u,b)=>{const S=Number(os[u.id]??u.supplyRate??u.rate??0),R=Number(Cs[u.id]??u.installRate??0);let B=Number(is[u.id]??(u.quantity||0));const D=B*S,Q=B*R,$=ps[u.id]??u.location??"",te=xt[u.id]??u.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:b+1}),e.jsx("td",{className:"border px-2 py-1",children:u.productLabel||u.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:$||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:te||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ns[u.id]??u.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:B}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",S.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",D.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Q.toFixed(2)]})]},u.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(ma||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>p(11),children:"Back"}),e.jsx(Ie,{onClick:async()=>{if(Mr.length>0){o({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const u=await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=doors`,{headers:{}});let b=[];u.ok&&(b=(await u.json()).items||[]);const R=(Zn||[]).map((Q,$)=>{const te=Number(os[Q.id]??Q.supplyRate??Q.rate??0),Ue=Number(Cs[Q.id]??Q.installRate??0),He=Number(is[Q.id]??(Q.quantity||0));return{s_no:$+1,item:Q.name,location:ps[Q.id]??Q.location??"",description:xt[Q.id]??Q.description??"",unit:Ns[Q.id]??Q.unit??"",qty:He,supply_rate:te,install_rate:Ue,supply_amount:He*te,install_amount:He*Ue}}).filter(Q=>!b.some($=>$.item===Q.item&&$.description===Q.description&&$.unit===Q.unit));if(R.length===0){o({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:tt,items:R})});const D=await(await nt(`/api/estimator-step12-qa-selection?session_id=${tt}&estimator=doors`,{headers:{}})).json();Un(D.items||[]),o({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(u){console.warn("Failed to save step 12 to DB",u),o({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ie,{onClick:()=>p(1),children:"Add More Products"}),e.jsx(Ie,{onClick:bi,children:"Export Excel"})]})]},"step-qa-boq"),c===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:tt,onChange:u=>Jt(u.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:Qt,onChange:u=>ss(u.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:dt,onChange:u=>qt(u.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:ns,onChange:u=>js(u.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:ln,onChange:u=>ys(u.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:Vt,onChange:u=>vs(u.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:As,onChange:u=>as(u.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Te().map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),As&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:xt[As]||"",onChange:u=>rs(b=>({...b,[As]:u.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:P0,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",tt]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:gt})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",Qt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",dt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",Vt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",ns]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(u=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:u},u))})}),e.jsx("tbody",{children:ks.map((u,b)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:b+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.id&&xt[u.id]||u.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:u.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(u.quantity||0)*Number(u.rate||0)||0).toFixed(2)})]},u.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Js.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ms.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:$n.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:qr.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Ka.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Ka.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:()=>p(8),variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:vi,children:"Export PDF"})]})]}),c===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"destructive",onClick:Ir,disabled:jn.length===0,children:"Delete Selected"}),e.jsx(Ie,{type:"button",onClick:ui,disabled:ks.length===0,children:"Save"}),e.jsx(Ie,{onClick:async()=>{const u=Te(At,It),b=jn.length>0?u.filter(Q=>jn.includes(Q.rowId||`${Q.batchId}-${Q.id}`)):u,S=b.map(Q=>{const $=Q.rowId||`${Q.batchId||""}-${Q.id}`;return{id:Q.id,rowId:$,batchId:Q.batchId,name:Q.name,unit:Q.unit,quantity:It[$]?.quantity??It[Q.id]?.quantity??Q.quantity,supplyRate:It[$]?.supplyRate??It[Q.id]?.supplyRate??Q.rate,installRate:It[$]?.installRate??It[Q.id]?.installRate??Q.installRate??0,shopId:Q.shopId,shopName:Q.shopName,description:xt[$]||xt[Q.id]||"",location:ps[$]||ps[Q.id]||"",doorType:Q.doorType,panelType:Q.panelType,subOption:Q.subOption,glazingType:Q.glazingType}});if(S.length===0)return;const R=b[0],B={id:`local-${Date.now()}`,estimator:"doors",bill_no:tt,door_type:R?.doorType||Je?.doorType||Je?.door_type||E,panel_type:R?.panelType||Je?.panelType||Je?.panel_type||N,sub_option:R?.subOption||Je?.subOption||Je?.sub_option||M,glazing_type:R?.glazingType||Je?.glazingType||Je?.glazing_type||ee,qty:Je?.count||Je?.qty||X,height:Je?.height||he,width:Je?.width||ie,glass_height:Je?.glassHeight||Je?.glass_height||ce,glass_width:Je?.glassWidth||Je?.glass_width||ne,materials:S,subtotal:S.reduce((Q,$)=>Q+Number($.quantity||0)*(Number($.supplyRate||0)+Number($.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};Qs(B);try{await zn()}catch{}const D=typeof window<"u"?new URLSearchParams(window.location.search).get("project"):null;if(D)try{const Q=S.map(($t,gs)=>({s_no:gs+1,item:$t.name,description:$t.description,unit:$t.unit,qty:$t.quantity,supply_rate:Number($t.supplyRate||0),install_rate:Number($t.installRate||0)})),$=Q.reduce(($t,gs)=>$t+Number(gs.qty||0)*(Number(gs.supply_rate||0)+Number(gs.install_rate||0)),0),te=+(+$*.09).toFixed(2),Ue=+(+$*.09).toFixed(2),He=+($+te+Ue).toFixed(2),st=`${B.sub_option||""}${B.sub_option?"  ":""}${B.door_type||""}`.trim(),Bt={groups:[{id:`g-${Date.now()}`,title:st||"Item Group",description:"",unit:"",qty:1,supply_rate:Number(Je?.grand_total??He),install_rate:0,rows:Q,totals:{subtotal:$,sgst:te,cgst:Ue,grand_total:He}}]};(await nt("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:D,estimator:"doors",table_data:Bt})})).ok&&(o({title:"Success",description:"Added to BOQ"}),t(`/create-boq?project=${encodeURIComponent(D)}`))}catch(Q){console.error("Failed to save BOQ item:",Q),o({title:"Error",description:"Failed to add to BOQ",variant:"destructive"})}Jn([]),p(11)},disabled:ks.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-semibold",children:"Saved BOQs"}),Vn.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Vn.map(u=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:u.bill_no||`${u.estimator} - ${u.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(u.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{onClick:()=>Rr(u),size:"sm",children:"Load"}),e.jsx(Ie,{variant:"destructive",onClick:()=>di(u.id),size:"sm",children:"Delete"})]})]},u.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all",checked:(()=>{const u=(c===9?Te(At,It):Te()).map(b=>b.rowId||b.id);return jn.length===u.length&&u.length>0})(),onCheckedChange:Zr})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const u=new Map,b=new Map;ks.forEach(B=>{const D=B.doorType||B.door_type||Je?.doorType||Je?.door_type||E||"door",Q=B.panelType||B.panel_type||Je?.panelType||Je?.panel_type||N||"",$=B.subOption||B.sub_option||Je?.subOption||Je?.sub_option||"",te=`${D}||${Q}||${$}`;if(u.has(te)||u.set(te,[]),u.get(te).push(B),!b.has(te)){const Ue=ye.find(Bt=>Bt.value===D);let He=Ue?Ue.label:Vh[D]||D;/door/i.test(He)||(He=`${He} Door`);const st=`${He}${$?" ("+$+")":""}`;b.set(te,{label:st})}});const S=[];let R=0;for(const[B,D]of u.entries()){const Q=D.map(st=>st.rowId||`${st.batchId||""}-${st.id}`),$=Q.every(st=>jn.includes(st)),te=`group_${B}`,Ue=xt[te]||"",He=Number(xe[te]??Je?.count??Je?.qty??X??1);S.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{id:`group-${B}`,checked:$,onCheckedChange:()=>{Jn($?st=>st.filter(Bt=>!Q.includes(Bt)):st=>Array.from(new Set([...st,...Q])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:b.get(B)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Ve,{placeholder:"Group description",value:Ue?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:st=>rs(Bt=>({...Bt,[te]:st.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:xe[te]??He,onChange:st=>{const Bt=st.target.value?parseFloat(st.target.value):0;lt(Lt=>({...Lt,[te]:Bt})),rs(Lt=>{const $t=(Lt[te]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Lt,[te]:$t?$t+`
Qty: `+Bt:"Qty: "+Bt}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${B}`));for(const st of D){R+=1;const Bt=st.rowId||`${st.batchId}-${st.id}`,Lt=Number(qs[Bt]?.supplyRate??qs[st.id]?.supplyRate??st.rate??0),$t=Number(qs[Bt]?.installRate??qs[st.id]?.installRate??st.installRate??0),gs=Lt+$t,nn=Number(qs[Bt]?.quantity??qs[st.id]?.quantity??st.quantity??0),z=nn*gs,me=xt[Bt]??xt[st.id]??st.description??"",Qe=String(me).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();S.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:R}),e.jsx("td",{className:"border px-2 py-1",children:st.productLabel||st.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:xt[Bt]??xt[st.id]??Qe,onChange:We=>rs(ut=>({...ut,[Bt]:We.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ns[Bt]??Ns[st.id]??st.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:nn,onChange:We=>Ha(Bt,We.target.value?parseFloat(We.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:gs,onChange:We=>{const ut=parseFloat(We.target.value||"0"),_t=Number(qs[Bt]?.supplyRate??qs[st.id]?.supplyRate??Lt),es=Math.max(0,ut-_t);Na(Bt,_t),$r(Bt,es)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",z.toFixed(2)]})]},Bt))}}return S})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>p(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ie,{onClick:()=>p(10),children:"Finalize PO"}),e.jsxs(Ie,{onClick:Oa,children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const k0="/image.png",kK=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),mr=t=>(t||"").toString().toUpperCase(),lF={roller:["ROLLER","ROLLER BLIND","ROLLER BLINDS","CHAIN","TUBE"],zebra:["ZEBRA","DAY NIGHT","DAY-NIGHT","SHEER","D/N"],roman:["ROMAN","ROMAN BLIND","ROMAN BLINDS","PLEATED"],venetian:["VENETIAN","SLAT","ALUMINIUM SLAT","WOOD SLAT"],vertical:["VERTICAL","LOUVER","VERTICAL BLIND","VERTICAL BLINDS"],wooden:["WOOD","BAMBOO","WOODEN","WOODEN BLIND","WOODEN BLINDS"]},Kg={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},HK=(t,s)=>{const n=mr(t.product),r=mr(t.name),o=mr(t.category),c=mr(t.subCategory),f=(lF[s]||[s.toUpperCase()]).some(l=>n.includes(l)||r.includes(l)||o.includes(l)||c.includes(l)),A=Kg[s],h=A&&mr(n).includes(mr(A));return f||h},jp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function KK(){const{shops:t,materials:s,products:n}=ci(),{toast:r}=Ai(),[o,c]=C.useState(1),p=typeof window<"u"&&window.location.search.includes("step=11"),[f,A]=C.useState(""),[h,l]=C.useState(""),[g,v]=C.useState(null),[m,N]=C.useState(null),[w,E]=C.useState(null),[F,M]=C.useState(null),[k,K]=C.useState(null),[G,ee]=C.useState(null),[V,X]=C.useState(1),[J,he]=C.useState(7),[q,ie]=C.useState(3),[Ae,ce]=C.useState(6),[oe,ne]=C.useState(2),[re,se]=C.useState([]),[je,De]=C.useState([]);C.useEffect(()=>{nt("/api/accumulated-products/doors",{headers:{}}).then(x=>x.json()).then(x=>{De(x.data||[])}).catch(x=>console.error("Failed to load accumulated products",x))},[]),C.useEffect(()=>{if(typeof window<"u"){const j=new URLSearchParams(window.location.search).get("step");if(j){const u=parseInt(j,10);u>=1&&u<=12&&c(u)}}},[]),C.useEffect(()=>{o===12&&nt("/api/accumulated-products/doors",{headers:{}}).then(x=>x.json()).then(x=>{const j=x.data||[];De(j),console.debug("Restored doors_accumulated_products for Step 12:",j.length)}).catch(x=>console.error("Failed to load accumulated products for Step 12",x))},[o]);const ge=x=>{const j=x?.doorType??w,u=x?.panelType??m,b=x?.subOption??F;if(!j)return null;const S=Ce.find(Q=>Q.value===j);let R=S?S.label:Kg[j]||j;/door/i.test(R)||(R=`${R} Door`);const B=u==="panel"?"With Panel":"Without Panel",D=b?` - ${b}`:"";return`${B}  ${R}${D}`},Z=()=>{const x=(h||"").toString();if(!w&&!x)return null;const j=x||ge(),u=x||Kg[w]||w,b=w?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(w):mr(j).includes("GLASS")||mr(j).includes("STILE");return{label:j,productName:u,requiresGlazing:b}},fe=()=>{const x=(h||"").toString();if(!w&&!x||!s.length)return[];const j=x||(w?Kg[w]:"");let u=[];if(j&&(u=s.filter(S=>{const R=(S.product||"").toString();if(!R||!j)return!1;const B=mr(R),D=mr(j);return B.includes(D)||D.includes(B)})),(!u||u.length===0)&&!x&&(u=w?s.filter(S=>HK(S,w)):s.filter(S=>{const R=(S.product||"").toString();if(!j)return!1;const B=mr(R),D=mr(j);return B.includes(D)||D.includes(B)})),u.length===0)return[];const b=new Map;for(const S of u){const R=`${mr(S.product)}__${mr(S.name)}__${kK(S.code)}`,B=b.get(R);(!B||(S.rate||0)<(B.rate||0))&&b.set(R,S)}return Array.from(b.values())},ue={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],Ce=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],Ne=(x,j)=>{const u=V||1,b=J||7,S=q||3,R=Ae||6,B=oe||2,D=jf(b,S),Q=x.toLowerCase();let $=0;return Q.includes("frame")||Q.includes("door frame")?$=D*u:Q.includes("door")&&(Q.includes("panel")||Q.includes("shutter")||Q.includes("flush")||Q.includes("wooden"))?$=u:Q.includes("hinge")?$=u*3:Q.includes("lock")||Q.includes("handle")||Q.includes("stopper")||Q.includes("bolt")?$=u:Q.includes("glass")?$=wf(R,B)*u:$=u,Math.max(1,Math.ceil($))},ye=(x,j)=>{const u=x||re,b=j||ht;return u.map(S=>{let R=Te.find(Lt=>Lt.id===S.materialId);if(R||(R=s.find(Lt=>Lt.id===S.materialId)||null),!R)return null;const B=s.find(Lt=>{const $t=mr(Lt.product)===mr(R.product),gs=mr(Lt.name)===mr(R.name),nn=Lt.shopId===S.selectedShopId,z=jp(Lt)===(S.selectedBrand||"Generic");return $t&&gs&&nn&&z})||R,D=t.find(Lt=>Lt.id===S.selectedShopId),Q=S.rowId||(S.batchId?`${S.batchId}-${B.id}`:B.id),$=b[Q]||b[B.id]||b[R.id],te=Ne(B.name,B.unit),Ue=$?.quantity??te,He=$?.supplyRate??B.rate??0,st=$?.installRate??0,Bt=(ts||[]).find(Lt=>Lt.rowId===Q||`${Lt.batchId||""}-${Lt.id}`===Q);return{id:B.id,batchId:S.batchId,rowId:Q,name:B.name,quantity:Ue,unit:B.unit,rate:He,shopId:S.selectedShopId,shopName:D?.name||"Unknown",installRate:st,doorType:Bt?.doorType||Bt?.door_type||void 0,panelType:Bt?.panelType||Bt?.panel_type||void 0,subOption:Bt?.subOption||Bt?.sub_option||void 0,glazingType:Bt?.glazingType||Bt?.glazing_type||void 0,productLabel:Bt?.productLabel||void 0}}).filter(S=>S!==null)},we=()=>ye().reduce((x,j)=>x+j.quantity*j.rate,0),Te=fe(),qe=x=>(x?.name||x?.title||x?.label||x?.productName||x?.product||"").toString(),ve=x=>(x?.category||x?.type||x?.group||x?.section||"").toString(),Ge=x=>{const j=mr(qe(x)),u=mr(ve(x)),b=mr(x?.subCategory?.name||x?.subCategory||""),S=j.includes("BLIND")||j.includes("BLINDS")||j.includes("ROLLER")||j.includes("ZEBRA")||j.includes("ROMAN")||j.includes("VENETIAN")||j.includes("VERTICAL")||u.includes("BLIND")||u.includes("BLINDS")||b.includes("BLIND")||b.includes("BLINDS"),R=j.includes("DOOR")||j.includes("PIPE")||j.includes("PLUMB")||j.includes("ELECTRICAL")||j.includes("SWITCH")||j.includes("SOCKET")||j.includes("CEILING")||j.includes("GYPSUM")||j.includes("FLOORING")||j.includes("PAINT")||j.includes("CIVIL")||j.includes("WALL")||u.includes("DOOR")||u.includes("PIPE")||u.includes("PLUMB")||u.includes("ELECTRICAL")||u.includes("CEILING")||u.includes("FLOORING")||u.includes("PAINT")||u.includes("CIVIL")||b.includes("DOOR")||b.includes("PIPE")||b.includes("PLUMB")||b.includes("ELECTRICAL")||b.includes("CEILING")||b.includes("FLOORING")||b.includes("PAINT");return S&&!R},at=x=>{const j=mr(x);return j.includes("ROLLER")?"roller":j.includes("ZEBRA")||j.includes("DAY")||j.includes("NIGHT")?"zebra":j.includes("ROMAN")?"roman":j.includes("VENETIAN")?"venetian":j.includes("VERTICAL")?"vertical":j.includes("WOOD")||j.includes("BAMBOO")?"wooden":null},Se=(n||[]).filter(Ge).slice().sort((x,j)=>{const u=qe(x),b=qe(j);return u.localeCompare(b)}),vt=x=>{const j=qe(x);A(x.id||j),l(j);const u=at(j);E(u||w),M(null),K(null),ee(null),se([]),pt({}),Dt({}),rs({}),c(6)},[ht,pt]=C.useState({}),[Ze,Ht]=C.useState([]),[At,Ct]=C.useState({}),[It,Wt]=C.useState("Concept Trunk Interiors"),[Es,Ss]=C.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[_s,$e]=C.useState("33ASOPS5560M1Z1"),[ke,it]=C.useState(""),[tt,Jt]=C.useState(new Date().toISOString().slice(0,10)),[Qt,ss]=C.useState(""),[dt,qt]=C.useState("50% Advance and 50% on Completion"),[Vt,vs]=C.useState(""),[ns,js]=C.useState(""),[ln,ys]=C.useState(""),[gt,Dt]=C.useState({}),[xt,rs]=C.useState({}),[ps,yn]=C.useState({}),[is,Fs]=C.useState({}),[Ns,Nn]=C.useState({}),[Cs,zt]=C.useState({}),[os,Ps]=C.useState([]),[Ye,St]=C.useState([]),[Rt,us]=C.useState(""),[As,as]=C.useState([]),[bs,cs]=C.useState([]),[Us,an]=C.useState([]),[Mr,Un]=C.useState(!1);C.useEffect(()=>{(async()=>{if(ke)try{const j=await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=blinds`,{headers:{}});if(j.ok){const S=await j.json();as(S.items||[])}const u=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=blinds`,{headers:{}});if(u.ok){const S=await u.json();cs(S.items||[])}const b=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=blinds`,{headers:{}});if(b.ok){const S=await b.json();an(S.items||[])}}catch(j){console.warn("Failed to load data from DB:",j)}})()},[ke]),C.useEffect(()=>{if(o===7){const x=ye(),j={};x.forEach(u=>{j[u.id]={quantity:u.quantity||0,supplyRate:u.rate||0,installRate:0}}),pt(j)}},[o,re]),C.useEffect(()=>{if(o===9){const x=ye(Ze,At);if(x.length>0){const j=x[0].shopId,u=t.find(b=>b.id===j);if(u){const b=[u.name||"",u.address||"",u.area||"",u.city||"",u.state||"",u.pincode||"",u.gstNo?`GSTIN: ${u.gstNo}`:"",u.phone||""].filter(Boolean);ys(b.join(`
`))}}}},[o,Ze,At,re,t]),C.useEffect(()=>{if(o===9){Je();const x=[],j={},u={},b={};if(ts&&ts.length>0)for(const S of ts){const R=S.rowId||`${S.batchId||""}-${S.id}`;x.findIndex(D=>D.materialId===S.id&&D.rowId===R&&(D.batchId||"")===(S.batchId||""))===-1&&(x.push({materialId:S.id,selectedShopId:S.shopId||"",selectedBrand:S.brand||void 0,batchId:S.batchId,rowId:R}),j[R]={quantity:Number(S.quantity||0),supplyRate:Number(S.supplyRate??S.rate??0),installRate:Number(S.installRate||0)},S.description&&(u[R]=S.description),S.location&&(b[R]=S.location))}if(As&&As.length>0)for(const S of As){if(!s.find(Ue=>Ue.id===S.material_id))continue;const B=S.material_id,D=S.row_id||(S.batch_id?`${S.batch_id}-${B}`:B),Q=S.shop_id||"",$=S.brand||void 0;x.findIndex(Ue=>Ue.materialId===B&&(Ue.batchId||"")===(S.batch_id||"")&&(Ue.rowId||"")===D)===-1&&(x.push({materialId:B,selectedShopId:Q,selectedBrand:$,batchId:S.batch_id||(S.row_id?D.replace(`-${B}`,""):void 0)}),j[D]={quantity:Number(S.quantity||0),supplyRate:Number(S.supply_rate||S.rate||0),installRate:Number(S.install_rate||0)},S.description&&(u[D]=S.description),S.location&&(b[D]=S.location))}re&&re.length>0&&re.forEach(S=>{if(x.findIndex(B=>B.materialId===S.materialId&&B.batchId===S.batchId)===-1){x.push(S);const B=s.find(D=>D.id===S.materialId);if(B){const D=S.batchId?`${S.batchId}-${S.materialId}`:S.materialId;j[D]={quantity:ht[S.materialId]?.quantity??B.quantity??1,supplyRate:ht[S.materialId]?.supplyRate??B.rate??0,installRate:ht[S.materialId]?.installRate??0}}}}),x.length>0&&Ht(x),Object.keys(j).length>0&&Ct(j),Object.keys(u).length>0&&Dt(S=>({...S,...u})),Object.keys(b).length>0&&rs(S=>({...S,...b}))}},[o,re,As]),C.useEffect(()=>{o===11&&(async()=>{if(ke)try{const j=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=blinds`,{headers:{}});if(j.ok){const b=(await j.json()).items||[],S={},R={},B={},D={};b.forEach(Q=>{const $=s.find(te=>te.name===Q.item);$&&(S[$.id]=Number(Q.supply_rate||0),R[$.id]=Number(Q.install_rate||0),B[$.id]=Number(Q.qty||0),D[$.id]=Q.unit||"")}),zt(Q=>({...Q,...S})),Nn(Q=>({...Q,...R})),yn(Q=>({...Q,...B})),Fs(Q=>({...Q,...D}))}}catch(j){console.warn("Failed to load step 11 data:",j)}})()},[o,ke,bs]);const Ks=C.useRef(null);C.useEffect(()=>{Je().catch(()=>{})},[]),C.useEffect(()=>{(async()=>{if(ke)try{const j=await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=blinds`,{headers:{}});if(j.ok){const u=await j.json(),b=u.items.map(S=>({id:S.material_id,rowId:S.row_id,batchId:S.batch_id,name:S.name,unit:S.unit,quantity:S.quantity,supplyRate:S.supply_rate,installRate:S.install_rate,shopId:S.shop_id,shopName:S.shop_name,description:S.description,location:S.location,doorType:S.door_type,panelType:S.panel_type,subOption:S.sub_option,glazingType:S.glazing_type}));if(Qs(b),u.items.length>0){const S=u.items[0];lt({doorType:S.door_type,panelType:S.panel_type,subOption:S.sub_option,glazingType:S.glazing_type,count:S.qty,height:S.height,width:S.width,glassHeight:S.glass_height,glassWidth:S.glass_width,subtotal:S.subtotal,sgst:S.sgst,cgst:S.cgst,round_off:S.round_off,grand_total:S.grand_total})}}}catch(j){console.warn("Failed to load step 9 from DB",j)}})()},[ke]),C.useEffect(()=>(Ks.current&&clearTimeout(Ks.current),Ks.current=setTimeout(async()=>{new Date().toISOString();try{if(!ke)return;const x=ye().map((j,u)=>{const b=j.rowId||(j.batchId?`${j.batchId}-${j.id}`:j.id);return{estimator:"blinds",session_id:ke,s_no:u+1,row_id:String(b),batch_id:j.batchId||null,material_id:j.id,name:j.name,unit:j.unit,quantity:Number(ht[j.id]?.quantity??j.quantity??0),supply_rate:Number(ht[j.id]?.supplyRate??j.rate??0),install_rate:Number(ht[j.id]?.installRate??0),shop_id:j.shopId||"",shop_name:j.shopName||"",description:gt[j.id]||"",location:xt[j.id]||"",door_type:w,panel_type:m,sub_option:F,glazing_type:G,qty:V,height:J,width:q,glass_height:Ae,glass_width:oe}});await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:ke,items:x})})}catch{}},800),()=>{Ks.current&&clearTimeout(Ks.current)}),[re,ht,gt,xt,w,m,F,G,V,J,q,Ae,oe,ke]);const Pn=x=>{const j=Te.find(Q=>Q.id===x);if(!j)return;if(re.find(Q=>Q.materialId===x)){se(Q=>Q.filter($=>$.materialId!==x));return}const b=s.filter(Q=>mr(Q.product)===mr(j.product)&&mr(Q.name)===mr(j.name)).map(Q=>({brand:jp(Q),shopId:Q.shopId,rate:Q.rate||0})),R=Array.from(new Set(b.map(Q=>Q.brand))).sort()[0]||"Generic",D=b.filter(Q=>Q.brand===R).sort((Q,$)=>Q.rate-$.rate)[0];D?.shopId&&se(Q=>[...Q,{materialId:x,selectedShopId:D.shopId,selectedBrand:R}])},nr=(x,j)=>{se(u=>u.map(b=>b.materialId===x?{...b,selectedShopId:j}:b))},Yn=(x,j)=>{const u=Te.find(R=>R.id===x);if(!u)return;const S=s.filter(R=>mr(R.product)===mr(u.product)&&mr(R.name)===mr(u.name)).map(R=>({brand:jp(R),shopId:R.shopId,rate:R.rate||0})).filter(R=>R.brand===j).sort((R,B)=>R.rate-B.rate)[0]?.shopId||"";se(R=>R.map(B=>B.materialId===x?{...B,selectedBrand:j,selectedShopId:S||B.selectedShopId}:B))},[dn,vn]=C.useState([]),jn=()=>{const x=(o===9?ye(Ze,At):ye()).map(j=>j.rowId||j.id);vn(j=>j.length===x.length?[]:x)},Jn=async()=>{if(dn.length!==0){try{const x=[],j=[];for(const u of dn){const b=ts?.find(S=>`${S.batchId||""}-${S.id}`===u);if(b&&b.id){const S=As.find(R=>R.id===b.id);S&&x.push(S)}else{const S=Ze.find(R=>`${R.batchId||""}-${R.materialId}`===u);S&&j.push(S)}}if(x.length>0&&ke&&(await nt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:ke,estimator:"blinds",items:x})}),Qs(u=>u?u.filter(b=>!x.some(S=>S.id===b.id)):null)),j.length>0&&Ht(u=>u.filter(b=>!j.some(S=>`${S.batchId||""}-${S.materialId}`==`${b.batchId||""}-${b.materialId}`))),Ht(u=>u.filter(b=>!dn.includes(`${b.batchId||""}-${b.materialId}`))),Ct(u=>{const b={...u};return dn.forEach(S=>delete b[S]),b}),ke){const b=await(await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=blinds`,{headers:{}})).json();as(b.items||[])}r({title:"Success",description:`${dn.length} item(s) deleted successfully!`})}catch(x){console.warn("Failed to delete items",x),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}vn([])}},[Zr,Ir]=C.useState([]),Vn=C.useRef(""),[Ts,Ls]=C.useState(null),[ts,Qs]=C.useState(null),[ls,be]=C.useState({}),[xe,lt]=C.useState(null),Je=async()=>{try{const x=await nt("/api/boq");if(x.status===401){Ir([]),Vn.current!=="401"&&(Vn.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!x.ok){const b=await x.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${b||x.status}`)}if(!(x.headers.get("content-type")||"").includes("application/json")){const b=await x.text().catch(()=>"");console.warn("/api/boq returned non-json:",b),Ir([]);return}const u=await x.json();Ir(u.boqs||[]),Vn.current=""}catch(x){console.error("fetchSavedBoqs",x);const j=String(x?.message||x||"");if(!j)return;Vn.current!==j&&(Vn.current=j,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},fs=async()=>{try{if(!ke)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const x={estimator:"blinds",billNo:ke,doorType:w,panelType:m,subOption:F,glazingType:G,qty:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,materials:ts&&ts.length>0?ts:ye(),subtotal:ks,sgst:qs,cgst:Js,roundOff:ms,grandTotal:$n},j=await nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!j.ok){const S=await j.text().catch(()=>"");throw new Error(S||"save failed")}const u=j.headers.get("content-type")||"";let b=null;if(u.includes("application/json"))b=await j.json();else{const S=await j.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",S),b={boq:null}}return await Je(),Ls(b?.boq||b?.boqs?.[0]||null),!0}catch(x){return console.error("handleSaveBOQ",x),!1}},wn=async x=>{try{if(!(await nt(`/api/boq/${x}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await Je()}catch(j){console.error("handleDeleteSavedBoq",j)}},zn=()=>{c(1),E(null),N(null),M(null),K(null),X(1),he(7),ie(3),ce(0),ne(0),Ps([]),yn({}),Dt({}),rs({}),Fs({}),zt({}),Nn({}),be({}),Ls(null)},di=async()=>{Un(!0);try{let x=bs||[];if(ke)try{const R=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=blinds`);R.ok&&(x=(await R.json()).items||[],cs(x))}catch(R){console.warn("Failed to refresh step11 items before save",R)}const j=on.map(R=>({estimator:"blinds",session_id:ke,group_key:(R.groupKey||`${R.doorType||"door"}||${R.panelType||""}||${R.subOption||""}`)+"::"+(R.name||""),group_id:R.groupId||`group_${R.groupKey||""}`,item_name:R.name,unit:R.unit,quantity:R.quantity,location:R.location||"",description:R.description||"",supply_rate:Cs[R.id]||R.supplyRate||0,install_rate:Ns[R.id]||R.installRate||0,supply_amount:(R.quantity||0)*(Cs[R.id]||R.supplyRate||0),install_amount:(R.quantity||0)*(Ns[R.id]||R.installRate||0),supply_subtotal:on.reduce((B,D)=>B+(D.quantity||0)*(Cs[D.id]||D.supplyRate||0),0),install_subtotal:on.reduce((B,D)=>B+(D.quantity||0)*(Ns[D.id]||D.installRate||0),0),sgst:qs,cgst:Js,round_off:ms,grand_total:on.reduce((B,D)=>B+(D.quantity||0)*((Cs[D.id]||D.supplyRate||0)+(Ns[D.id]||D.installRate||0)),0)+qs+Js+ms})),u=new Set((x||[]).map(R=>R.group_key||R.groupKey)),b=j.filter(R=>!u.has(R.group_key));if(b.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),Un(!1),!0;const S=await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:b})});if(!S.ok){const R=await S.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${R||S.statusText}`,variant:"destructive"}),Un(!1),!1}try{const R=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=blinds`);if(R.ok){const B=await R.json();cs(B.items||[])}}catch(R){console.warn("Failed to reload step11 items after save",R)}return De([]),r({title:"Success",description:"Step 11 saved to database."}),Un(!1),!0}catch(x){return console.error("handleSaveAccumulatedBOQ",x),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Un(!1),!1}},Oi=x=>{if(it(x.bill_no||""),E(x.door_type||null),N(x.panel_type||null),M(x.sub_option||null),ee(x.glazing_type||null),X(x.qty||1),he(x.height||7),ie(x.width||3),ce(x.glass_height||6),ne(x.glass_width||2),Array.isArray(x.materials)){const j=x.materials.map(u=>({materialId:u.id,selectedShopId:u.shopId||u.shop_id||u.shopId||"",selectedBrand:u.shopName||u.brand||u.selectedBrand||void 0}));se(j.filter(Boolean))}Ls(x)},ka=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(j))}}));return}pt(u=>({...u,[x]:{...u[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(j))}}))},Rr=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(j)),installRate:u[x]?.installRate||0}}));return}pt(u=>({...u,[x]:{...u[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(j)),installRate:u[x]?.installRate||0}}))},Ha=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(j)),supplyRate:u[x]?.supplyRate||0}}));return}pt(u=>({...u,[x]:{...u[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(j)),supplyRate:u[x]?.supplyRate||0}}))},Na=()=>{const x=document.getElementById("boq-pdf");if(!x){alert("BOQ content not found");return}setTimeout(()=>{vA().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:j=>j.className?.toString().includes("bg-")||j.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save().catch(j=>{console.error("PDF Export Error:",j),alert("PDF export failed. Check console.")})},100)},$r=async()=>{const x=document.getElementById("boq-final-pdf");if(!x){alert("Final BOQ content not found");return}const j=(await Uc(async()=>{const{default:u}=await Promise.resolve().then(()=>ru);return{default:u}},void 0)).default;j().set({margin:10,filename:`BOQ-${ke||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save()},Oa=()=>{const x=ye(),j=Z(),u=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${m==="panel"?"With Panel":"Without Panel"} - ${j?.label}`,`Dimensions: ${J}ft  ${q}ft (Count: ${V})`,...G?[`Glazing: ${G}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];x.forEach((D,Q)=>{const $=D.quantity*D.rate;u.push(`${Q+1},"${D.name}","${D.unit}",${D.quantity},${D.rate},"${D.shopName}",${$}`)}),u.push("",`TOTAL COST,,,${we().toFixed(2)}`);const b=u.join(`
`),S=new Blob([b],{type:"text/csv"}),R=window.URL.createObjectURL(S),B=document.createElement("a");B.href=R,B.download=`BOQ-Blinds-${new Date().getTime()}.csv`,B.click(),URL.revokeObjectURL(R)},vi=()=>{const x=on||[],j=[];j.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),x.forEach((B,D)=>{const Q=Number(B.supplyRate??B.rate??0),$=Number(B.installRate??0),te=Number(B.quantity||0),Ue=te*Q,He=te*$,st=(B.location||xt[B.id]||"").toString().replace(/"/g,'""'),Bt=(B.description||gt[B.id]||B.name||"").toString().replace(/"/g,'""'),gs=(ge({doorType:B.doorType||B.door_type,panelType:B.panelType||B.panel_type,subOption:B.subOption||B.sub_option,glazingType:B.glazingType||B.glazing_type})||B.name||"").replace(/"/g,'""');j.push(`${D+1},"${gs}","${st}","${Bt}",${B.unit},${te},${Q.toFixed(2)},${$.toFixed(2)},${Ue.toFixed(2)},${He.toFixed(2)}`)});const u=j.join(`
`),b=new Blob([u],{type:"text/csv"}),S=window.URL.createObjectURL(b),R=document.createElement("a");R.href=S,R.download=`BOQ-Blinds-Step11-${new Date().getTime()}.csv`,R.click(),URL.revokeObjectURL(S)},Ui=async()=>{const x=ye(Ze,At).map(B=>{const D=B.rowId||`${B.batchId}-${B.id}`;return{id:B.id,rowId:D,batchId:B.batchId||null,name:B.name,productLabel:B.productLabel||null,product_label:B.productLabel||null,unit:B.unit,quantity:At[D]?.quantity??At[B.id]?.quantity??B.quantity,supplyRate:At[D]?.supplyRate??At[B.id]?.supplyRate??B.rate,installRate:At[D]?.installRate??At[B.id]?.installRate??B.installRate??0,shopId:B.shopId,shopName:B.shopName,description:gt[D]||gt[B.id]||"",location:xt[D]||xt[B.id]||"",doorType:B.doorType,panelType:B.panelType,subOption:B.subOption,glazingType:B.glazingType,isSaved:B.isSaved||!1}}),j=x.filter(B=>!B.isSaved);if(j.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let u=ke;(!u||u.trim()==="")&&(u=`DOOR-${Date.now()}`,it(u));const b=xe||(()=>{const B=x.reduce((Ue,He)=>Ue+Number(He.quantity||0)*(Number(He.supplyRate||0)+Number(He.installRate||0)),0),D=B*.09,Q=B*.09,$=Math.round(B+D+Q)-(B+D+Q),te=B+D+Q+$;return{subtotal:B,sgst:D,cgst:Q,round_off:$,grand_total:te}})(),S={id:`local-${Date.now()}`,estimator:"blinds",bill_no:u,door_type:xe?.doorType||xe?.door_type||w,panel_type:xe?.panelType||xe?.panel_type||m,sub_option:xe?.subOption||xe?.sub_option||F,glazing_type:xe?.glazingType||xe?.glazing_type||G,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,materials:x,subtotal:b.subtotal,sgst:b.sgst,cgst:b.cgst,round_off:b.round_off,grand_total:b.grand_total,created_at:new Date().toISOString()};Ls(S),Qs(x);try{lt(B=>({...B||{},...b}))}catch{}const R=j.map((B,D)=>({estimator:"blinds",session_id:u,s_no:D+1,row_id:String(B.rowId||`${B.batchId||""}-${B.id}`),batch_id:B.batchId||null,material_id:B.id,name:B.name,unit:B.unit,quantity:Number(B.quantity||0),supply_rate:Number(B.supplyRate||0),install_rate:Number(B.installRate||0),shop_id:B.shopId||"",shop_name:B.shopName||"",description:B.description||"",location:B.location||"",door_type:B.doorType||xe?.doorType||xe?.door_type||w||null,panel_type:B.panelType||xe?.panelType||xe?.panel_type||m||null,sub_option:B.subOption||xe?.subOption||xe?.sub_option||F||null,glazing_type:B.glazingType||xe?.glazingType||xe?.glazing_type||G||null,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,subtotal:b.subtotal,sgst:b.sgst,cgst:b.cgst,round_off:b.round_off,grand_total:b.grand_total}));try{await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:u,items:R})});const D=await(await nt(`/api/estimator-step9-items?session_id=${u}&estimator=blinds`,{headers:{}})).json();as(D.items||[]);const Q=(ts||[]).map($=>j.some(Ue=>$.rowId===Ue.rowId||`${$.batchId||""}-${$.id}`==`${Ue.batchId||""}-${Ue.id}`)?{...$,isSaved:!0}:$);Qs(Q),r({title:"Success",description:`${j.length} new material(s) saved successfully to database!`})}catch(B){console.warn("Failed to save step 9 to DB",B),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},bi=x=>{let j=5381;for(let u=0;u<x.length;u+=1)j=(j<<5)+j^x.charCodeAt(u);return Math.abs(j>>>0).toString(36)},ui=()=>{const x=JSON.stringify({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,selectedMaterials:(re||[]).map(j=>({materialId:j.materialId,selectedShopId:j.selectedShopId,selectedBrand:j.selectedBrand})),editable:Object.keys(ht||{}).sort().map(j=>({id:j,...ht[j]}))});return`batch-${bi(x)}`},hi=()=>{const x=ui(),j=ye(re,ht).map(B=>({id:B.id,rowId:`${x}-${B.id}`,batchId:x,name:B.name,unit:B.unit,quantity:ht[B.id]?.quantity??B.quantity,supplyRate:ht[B.id]?.supplyRate??B.rate,installRate:ht[B.id]?.installRate??0,shopId:B.shopId,shopName:B.shopName,description:gt[B.id]||"",location:xt[B.id]||"",doorType:w,productLabel:h||ge(),panelType:m,subOption:F,glazingType:G,isSaved:!1}));if(j.length===0){c(9);return}const S=[...(ts||[]||[]).filter(B=>B.batchId!==x),...j];Qs(S),Ht((re||[]).map(B=>({materialId:B.materialId,selectedShopId:B.selectedShopId,selectedBrand:B.selectedBrand,batchId:x})));const R={};S.forEach(B=>{const D=B.rowId||`${B.batchId}-${B.id}`;R[D]={quantity:Number(B.quantity||0),supplyRate:Number(B.supplyRate||B.rate||0),installRate:Number(B.installRate||0)}}),Ct(R);try{const B=we(),D=B*.09,Q=B*.09,$=Math.round(B+D+Q)-(B+D+Q),te=B+D+Q+$;lt({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,subtotal:B,sgst:D,cgst:Q,round_off:$,grand_total:te})}catch{}c(9)},tn=o===9||o===11?ts||[]:ye(),sn=o===9?At:ht,ks=tn.reduce((x,j)=>x+j.quantity*((sn[j.id]?.supplyRate??j.rate)+(sn[j.id]?.installRate??j.installRate??0)),0),qs=ks*.09,Js=ks*.09,ms=Math.round(ks+qs+Js)-(ks+qs+Js),$n=ks+qs+Js+ms,qr=je.length>0?je.flatMap(x=>x.materials||[]):ts&&ts.length>0?ts:tn&&tn.length>0?tn:Ts&&Ts.materials&&Ts.materials.length>0?Array.isArray(Ts.materials)?Ts.materials:JSON.parse(Ts.materials||"[]"):tn,Ka=(()=>{const x=new Map;for(const u of qr||[]){const b=u.productLabel||u.doorType||u.door_type||xe?.doorType||xe?.door_type||w||"door",S=u.panelType||u.panel_type||xe?.panelType||xe?.panel_type||m||"",R=u.subOption||u.sub_option||xe?.subOption||xe?.sub_option||"",B=`${b}||${S}||${R}`;x.has(B)||x.set(B,[]),x.get(B).push(u)}const j=[];for(const[u,b]of x.entries()){const[S,R,B]=u.split("||"),D=`group_${u}`,Q=gt[D]||"",$=xt[D]||"";let te=Number(ls[D]??xe?.count??xe?.qty??V??1);const Ue=String(Q).match(/Qty:\s*(\d+(?:\.\d+)?)/);Ue&&(ls[D]===void 0||ls[D]===null)&&(te=Number(Ue[1]));const He=b.reduce((nn,z)=>nn+Number(z.quantity||0)*Number(z.supplyRate??z.rate??0),0),st=te>0?He/te:He,Bt=b.reduce((nn,z)=>nn+Number(z.quantity||0)*Number(z.installRate??0),0),Lt=te>0?Bt/te:Bt,$t=b[0]&&b[0].productLabel||ge({doorType:S,panelType:R,subOption:B})||S,gs=String(Q).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();j.push({id:D,groupKey:u,name:$t,location:$||"",description:gs||"",unit:"pcs",quantity:te,supplyRate:Number(st||0),installRate:Number(Ns[D]??Lt??0),supplyAmount:Number(st*te||0),installAmount:Number((Ns[D]??Lt)*te||0)})}return j})();(bs||[]).filter(x=>x.item||x.item_name).map((x,j)=>{const u=x.group_key||x.groupKey||`${x.door_type||x.doorType||"door"}||${x.panel_type||x.panelType||""}||${x.sub_option||x.subOption||""}`;return{id:x.id,groupKey:u,name:x.productLabel||x.item_name||x.item||x.name||x.door_label||x.doorType||x.door_type||"Door",location:x.location||"",description:x.description||"",unit:x.unit||"pcs",quantity:Number(x.quantity??x.qty??1),supplyRate:Number(x.supply_rate??x.supplyRate??0),installRate:Number(x.install_rate??x.installRate??0),supplyAmount:Number(x.supply_amount??0),installAmount:Number(x.install_amount??0),doorType:x.door_type||x.doorType,panelType:x.panel_type||x.panelType,subOption:x.sub_option||x.subOption}});const on=(je.length===0?Ka.filter(x=>!(bs||[]).some(u=>(u.group_key||u.groupKey||`${u.door_type||""}||${u.panel_type||""}||${u.sub_option||""}`)===x.groupKey)):je.map((x,j)=>({id:`accumulated_${j}`,groupKey:`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,name:x.productLabel||x.materials?.[0]?.productLabel||x.doorLabel||ge({doorType:x.doorType,panelType:x.panelType,subOption:x.subOption})||x.doorType,location:x.location||"",description:x.description||"",unit:"pcs",quantity:x.count||1,supplyRate:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.supplyRate??b.rate??0),0)||0,installRate:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.installRate??0),0)||0,supplyAmount:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.supplyRate??b.rate??0),0)||0,installAmount:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.installRate??0),0)||0})))||[],Bn=on.filter(x=>Ye.includes(x.id)),Fn=on.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0)),b=Number(Cs[j.id]??j.supplyRate??j.rate??0);return x+u*b},0);on.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0));return x+u*Number(j.installRate||0)},0);const Zn=Bn.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0)),b=Number(Cs[j.id]??j.supplyRate??j.rate??0);return x+u*b},0);Ts&&Ts.bill_no;const pa=Ts&&Ts.created_at?new Date(Ts.created_at).toISOString().slice(0,10):tt,ma=x=>{if(!x)return!1;const j=(x.name||"").toString().trim(),u=Number(x.quantity||0),b=Number(x.supplyRate??x.rate??0),S=Number(x.installRate??0),R=(x.description||"").toString().trim(),B=(x.location||"").toString().trim();return!!j||u>0||b>0||S>0||!!R||!!B};return(je||[]).map(x=>{const j=(x.materials||[]).filter(ma),u=j.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.supplyRate??R.rate??0),0),b=j.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.installRate??0),0);return{...x,materials:j,supplySubtotal:u,installSubtotal:b,subtotal:u+b}}).filter(x=>(x.materials||[]).length>0),e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Blinds Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Vs,{className:"border-border/50",children:e.jsx(fn,{className:"pt-8 min-h-96",children:e.jsxs(gl,{mode:"wait",children:[o===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Door Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:Se.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No door products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:Se.map(x=>{const j=qe(x),u=(x?.id||j).toString(),b=f===u;return e.jsx(Ie,{variant:b?"default":"outline",onClick:()=>vt(x),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:j||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ve(x)})]})},u)})})})]},"step-select-product"),o===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:k0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:pa})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all-groups",checked:(()=>{const x=(on||[]).map(j=>j.id);return x.length>0&&x.every(j=>os.includes(j))})(),onCheckedChange:x=>{Ps(x?(on||[]).map(j=>j.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(on||[]).map((x,j)=>{const u=Number(Cs[x.id]??x.supplyRate??x.rate??0),b=Number(Ns[x.id]??x.installRate??0);let S=Number(ps[x.id]??(x.quantity||0));const R=S*u,B=S*b;return xt[x.id]??x.location,gt[x.id]??x.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:os.includes(x.id),onCheckedChange:()=>{Ps(D=>D.includes(x.id)?D.filter(Q=>Q!==x.id):[...D,x.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:j+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{value:xt[x.id]??x.location??"",onChange:D=>rs(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:gt[x.id]??x.description??"",onChange:D=>Dt(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{value:is[x.id]??x.unit??"",onChange:D=>Fs(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",value:S,onChange:D=>yn(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:u,onChange:D=>zt(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:b,onChange:D=>Nn(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Fn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!p&&e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",disabled:os.length===0,onClick:async()=>{if(console.log("Delete selected:",os),bs.length>0&&ke)try{await nt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:os,estimator:"blinds"})});const x=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=blinds`,{headers:{}});if(x.ok){const j=await x.json();cs(j.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(x){console.warn("Failed to delete step 11 from DB",x),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(je.length===0)if(Ts){console.log("Deleting from saved BOQ");const x=os.map(S=>S.replace("group_","")),j=Array.isArray(Ts.materials)?Ts.materials:JSON.parse(Ts.materials||"[]");console.log("Current materials:",j.length);const u=j.filter(S=>{const R=S.doorType||S.door_type||xe?.doorType||xe?.door_type||w||"door",B=S.panelType||S.panel_type||xe?.panelType||xe?.panel_type||m||"",D=S.subOption||S.sub_option||xe?.subOption||xe?.sub_option||F||"",Q=`${R}||${B}||${D}`,$=x.includes(Q);return console.log("Checking material:",S.id||S.name,Q,"match:",$),!$});console.log("Filtered materials:",u.length);const b={...Ts,materials:u};Ls(b),nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(()=>console.log("Saved updated BOQ")).catch(S=>console.error("Error saving BOQ:",S))}else{console.log("Deleting from Step 11 saved materials");const x=os.map(b=>b.replace("group_","")),u=((ts&&ts.length>0?ts:tn)||[]).filter(b=>{const S=b.doorType||b.door_type||xe?.doorType||xe?.door_type||w||"door",R=b.panelType||b.panel_type||xe?.panelType||xe?.panel_type||m||"",B=b.subOption||b.sub_option||xe?.subOption||xe?.sub_option||F||"",D=`${S}||${R}||${B}`;return!x.includes(D)});Qs(u)}else if(je.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",je.length);let x;if(os.some(j=>j.startsWith("accumulated_"))){const j=os.filter(u=>u.startsWith("accumulated_")).map(u=>parseInt(u.replace("accumulated_",""))).sort((u,b)=>b-u);x=[...je],j.forEach(u=>{u>=0&&u<x.length&&x.splice(u,1)})}else{const j=os.map(u=>u.replace("group_",""));x=je.filter(u=>{const b=`${u.doorType||"door"}||${u.panelType||""}||${u.subOption||""}`,S=j.includes(b);return console.log("Checking product:",u.id,b,"match:",S),!S})}console.log("Accumulated products after:",x.length),De(x),nt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:x})}).catch(j=>console.error("Failed to save accumulated products after delete",j))}Ps([])},children:"Delete Selected"}),e.jsx(Ie,{onClick:zn,children:"Add Product"}),e.jsx(Ie,{onClick:di,disabled:Mr,children:"Save"}),e.jsx(Ie,{onClick:async()=>{St(os);const x=(Bn||[]).map((j,u)=>{const b=Number(Cs[j.id]??j.supplyRate??j.rate??0),S=Number(Ns[j.id]??j.installRate??0);let R=Number(ps[j.id]??(j.quantity||0));return{s_no:u+1,item:j.name,location:xt[j.id]??j.location??"",description:gt[j.id]??j.description??"",unit:is[j.id]??j.unit??"",qty:R,supply_rate:b,install_rate:S,supply_amount:R*b,install_amount:R*S}});try{const j=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=blinds`,{headers:{}});let u=[];j.ok&&(u=(await j.json()).items||[]);const b=x.filter(B=>!u.some(D=>D.item===B.item&&D.description===B.description&&D.unit===B.unit));if(b.length===0){c(12);return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:ke,items:b})});const R=await(await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=blinds`,{headers:{}})).json();an(R.items||[]),r({title:"Success",description:`${b.length} new material(s) saved successfully to database!`}),c(12)}catch(j){console.warn("Failed to save step 12 to DB",j),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),o===4&&w&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(ue[w]||[]).map(x=>e.jsx(Ie,{onClick:()=>{M(x),K(null)},className:`w-full text-black ${F===x?"bg-cyan-500":"bg-white"}`,children:x},x))}),w==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(x=>e.jsx(Ie,{onClick:()=>K(x),className:`w-full text-black ${k===x?"bg-cyan-500":"bg-white"}`,children:x},x))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(5),disabled:!F||w==="flush"&&F==="With Vision Panel"&&!k,children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),o===5&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"count",children:"Count"}),e.jsx(Ve,{id:"count",type:"number",placeholder:"1",value:V||"",onChange:x=>X(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"height",children:"Height"}),e.jsx(Ve,{id:"height",type:"number",placeholder:"7",value:J||"",onChange:x=>he(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"width",children:"Width"}),e.jsx(Ve,{id:"width",type:"number",placeholder:"3",value:q||"",onChange:x=>ie(x.target.value?parseFloat(x.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Xe,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Ve,{id:"glassHeight",type:"number",placeholder:"72",value:Ae||"",onChange:x=>ce(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Ve,{id:"glassWidth",type:"number",placeholder:"24",value:oe||"",onChange:x=>ne(x.target.value?parseFloat(x.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:!V||!J||!q||Z()?.requiresGlazing&&(!Ae||!oe),onClick:()=>c(6),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),o===6&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gn,{id:"select-all-materials",checked:re.length===Te.length&&Te.length>0,onCheckedChange:x=>{if(x){const j=Te.map(u=>{const b=s.filter(D=>mr(D.product)===mr(u.product)&&mr(D.name)===mr(u.name)).map(D=>({id:D.id,brand:jp(D),shopId:D.shopId,rate:D.rate,unit:D.unit,shopName:t.find(Q=>Q.id===D.shopId)?.name||"Unknown"})),R=Array.from(new Set(b.map(D=>D.brand))).sort()[0]||"Generic",B=b.filter(D=>D.brand===R).sort((D,Q)=>(D.rate||0)-(Q.rate||0));return{materialId:u.id,selectedBrand:R,selectedShopId:B[0]?.shopId||""}});se(j)}else se([])}}),e.jsx(Xe,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Te.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",w||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(w?lF[w]||[w]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(x=>x.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Te.map(x=>{const j=re.some(Q=>Q.materialId===x.id),u=re.find(Q=>Q.materialId===x.id),b=s.filter(Q=>mr(Q.product)===mr(x.product)&&mr(Q.name)===mr(x.name)).map(Q=>({id:Q.id,brand:jp(Q),shopId:Q.shopId,rate:Q.rate,unit:Q.unit,shopName:t.find($=>$.id===Q.shopId)?.name||"Unknown"})),S=Array.from(new Set(b.map(Q=>Q.brand))).sort(),B=re.find(Q=>Q.materialId===x.id)?.selectedBrand||S[0]||"Generic",D=b.filter(Q=>Q.brand===B).sort((Q,$)=>(Q.rate||0)-($.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:x.id,checked:j,onCheckedChange:()=>Pn(x.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:x.id,className:"font-medium cursor-pointer",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.code}),j&&S.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Lr,{value:B,onValueChange:Q=>Yn(x.id,Q),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:S.map(Q=>e.jsx(wr,{value:Q,children:Q},Q))})]})]}),j&&D.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Lr,{value:u?.selectedShopId||D[0].shopId,onValueChange:Q=>nr(x.id,Q),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:D.map(Q=>e.jsxs(wr,{value:Q.shopId||"",children:[Q.shopName," - ",Q.rate,"/",x.unit,Q.rate===D[0].rate&&" (Best)"]},Q.shopId))})]})]})]})]})},x.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),o===7&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(x=>{const j=re.find(b=>b.materialId===x.id),u=s.find(b=>b.id===x.id);return e.jsxs("div",{className:Xs("p-3 border rounded grid grid-cols-9 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:x.name}),e.jsx("span",{className:"text-sm",children:gt[x.id]||x.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:j?.selectedBrand||u?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:ht[x.id]?.quantity??x.quantity,onChange:b=>ka(x.id,parseInt(b.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:x.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:x.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:ht[x.id]?.supplyRate??x.rate,onChange:b=>Rr(x.id,parseFloat(b.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((ht[x.id]?.quantity??x.quantity)*((ht[x.id]?.supplyRate??x.rate)+(ht[x.id]?.installRate??0))).toFixed(2)]})]},x.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),o===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||ge()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[J," ft  ",q," ft (Qty: ",V,")"]})]}),G&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:G})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[Ae,'"  ',oe,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(x=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:x==="Qty"||x.includes("Rate")||x.includes("Amount")?"right":"left"},children:x},x))})}),e.jsx("tbody",{children:ye().map((x,j)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:j+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:x.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:x.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(x.quantity*x.rate).toFixed(2)})]},x.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((x,j)=>x+j.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ie,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(si,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:Na,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(si,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>hi(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),A(""),l(""),N(null),E(null),ee(null),X(1),he(7),ie(3),ce(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Qn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),o===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:k0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:pa})})]}),!Bn||Bn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Bn||[]).map((x,j)=>{const u=Number(Cs[x.id]??x.supplyRate??x.rate??0),b=Number(Ns[x.id]??x.installRate??0);let S=Number(ps[x.id]??(x.quantity||0));const R=S*u,B=S*b,D=xt[x.id]??x.location??"",Q=gt[x.id]??x.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:j+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:D||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Q||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:is[x.id]??x.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:S}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",u.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",b.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Zn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ie,{onClick:async()=>{if(Us.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const x=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=blinds`,{headers:{}});let j=[];x.ok&&(j=(await x.json()).items||[]);const b=(Bn||[]).map((B,D)=>{const Q=Number(Cs[B.id]??B.supplyRate??B.rate??0),$=Number(Ns[B.id]??B.installRate??0),te=Number(ps[B.id]??(B.quantity||0));return{s_no:D+1,item:B.name,location:xt[B.id]??B.location??"",description:gt[B.id]??B.description??"",unit:is[B.id]??B.unit??"",qty:te,supply_rate:Q,install_rate:$,supply_amount:te*Q,install_amount:te*$}}).filter(B=>!j.some(D=>D.item===B.item&&D.description===B.description&&D.unit===B.unit));if(b.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:ke,items:b})});const R=await(await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=blinds`,{headers:{}})).json();an(R.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(x){console.warn("Failed to save step 12 to DB",x),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ie,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ie,{onClick:vi,children:"Export Excel"})]})]},"step-qa-boq"),o===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:ke,onChange:x=>it(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:tt,onChange:x=>Jt(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:Qt,onChange:x=>ss(x.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:Vt,onChange:x=>vs(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:ns,onChange:x=>js(x.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:dt,onChange:x=>qt(x.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Rt,onChange:x=>us(x.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]}),Rt&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:gt[Rt]||"",onChange:x=>Dt(j=>({...j,[Rt]:x.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:k0,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",ke]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:ln})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",tt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Qt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",dt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Vt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(x=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:x},x))})}),e.jsx("tbody",{children:tn.map((x,j)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.id&&gt[x.id]||x.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(x.quantity||0)*Number(x.rate||0)||0).toFixed(2)})]},x.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:ks.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:qs.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Js.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:ms.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",$n.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",$n.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:$r,children:"Export PDF"})]})]}),o===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"destructive",onClick:Jn,disabled:dn.length===0,children:"Delete Selected"}),e.jsx(Ie,{type:"button",onClick:Ui,disabled:tn.length===0,children:"Save"}),e.jsx(Ie,{onClick:async()=>{const x=ye(Ze,At),j=dn.length>0?x.filter(R=>dn.includes(R.rowId||`${R.batchId}-${R.id}`)):x,u=j.map(R=>{const B=R.rowId||`${R.batchId||""}-${R.id}`;return{id:R.id,rowId:B,batchId:R.batchId,name:R.name,unit:R.unit,quantity:At[B]?.quantity??At[R.id]?.quantity??R.quantity,supplyRate:At[B]?.supplyRate??At[R.id]?.supplyRate??R.rate,installRate:At[B]?.installRate??At[R.id]?.installRate??R.installRate??0,shopId:R.shopId,shopName:R.shopName,description:gt[B]||gt[R.id]||"",location:xt[B]||xt[R.id]||"",doorType:R.doorType,panelType:R.panelType,subOption:R.subOption,glazingType:R.glazingType}});if(u.length===0)return;const b=j[0],S={id:`local-${Date.now()}`,estimator:"blinds",bill_no:ke,door_type:b?.doorType||xe?.doorType||xe?.door_type||w,panel_type:b?.panelType||xe?.panelType||xe?.panel_type||m,sub_option:b?.subOption||xe?.subOption||xe?.sub_option||F,glazing_type:b?.glazingType||xe?.glazingType||xe?.glazing_type||G,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,materials:u,subtotal:u.reduce((R,B)=>R+Number(B.quantity||0)*(Number(B.supplyRate||0)+Number(B.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};Ls(S);try{await fs()}catch{}vn([]),c(11)},disabled:tn.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-semibold",children:"Saved BOQs"}),Zr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Zr.map(x=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.bill_no||`${x.estimator} - ${x.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{onClick:()=>Oi(x),size:"sm",children:"Load"}),e.jsx(Ie,{variant:"destructive",onClick:()=>wn(x.id),size:"sm",children:"Delete"})]})]},x.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all",checked:(()=>{const x=(o===9?ye(Ze,At):ye()).map(j=>j.rowId||j.id);return dn.length===x.length&&x.length>0})(),onCheckedChange:jn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const x=new Map,j=new Map;tn.forEach(S=>{const R=S.doorType||S.door_type||xe?.doorType||xe?.door_type||w||"door",B=S.panelType||S.panel_type||xe?.panelType||xe?.panel_type||m||"",D=S.subOption||S.sub_option||xe?.subOption||xe?.sub_option||"",Q=`${R}||${B}||${D}`;if(x.has(Q)||x.set(Q,[]),x.get(Q).push(S),!j.has(Q)){const te=(x.get(Q)||[])[0]?.productLabel||`${B==="panel"?"With Panel":"Without Panel"}  ${R}${D?" ("+D+")":""}`;j.set(Q,{label:te})}});const u=[];let b=0;for(const[S,R]of x.entries()){const B=R.map(Ue=>Ue.rowId||`${Ue.batchId||""}-${Ue.id}`),D=B.every(Ue=>dn.includes(Ue)),Q=`group_${S}`,$=gt[Q]||"",te=Number(ls[Q]??xe?.count??xe?.qty??V??1);u.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{id:`group-${S}`,checked:D,onCheckedChange:()=>{vn(D?Ue=>Ue.filter(He=>!B.includes(He)):Ue=>Array.from(new Set([...Ue,...B])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:j.get(S)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Ve,{placeholder:"Group description",value:$?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ue=>Dt(He=>({...He,[Q]:Ue.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:ls[Q]??te,onChange:Ue=>{const He=Ue.target.value?parseFloat(Ue.target.value):0;be(st=>({...st,[Q]:He})),Dt(st=>{const Bt=(st[Q]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...st,[Q]:Bt?Bt+`
Qty: `+He:"Qty: "+He}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${S}`));for(const Ue of R){b+=1;const He=Ue.rowId||`${Ue.batchId}-${Ue.id}`,st=Number(sn[He]?.supplyRate??sn[Ue.id]?.supplyRate??Ue.rate??0),Bt=Number(sn[He]?.installRate??sn[Ue.id]?.installRate??Ue.installRate??0),Lt=st+Bt,$t=Number(sn[He]?.quantity??sn[Ue.id]?.quantity??Ue.quantity??0),gs=$t*Lt,nn=gt[He]??gt[Ue.id]??Ue.description??"",z=String(nn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();u.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:b}),e.jsx("td",{className:"border px-2 py-1",children:Ue.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:gt[He]??gt[Ue.id]??z,onChange:me=>Dt(Qe=>({...Qe,[He]:me.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:is[He]??is[Ue.id]??Ue.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:$t,onChange:me=>ka(He,me.target.value?parseFloat(me.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:Lt,onChange:me=>{const Qe=parseFloat(me.target.value||"0"),We=Number(sn[He]?.supplyRate??sn[Ue.id]?.supplyRate??st),ut=Math.max(0,Qe-We);Rr(He,We),Ha(He,ut)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",gs.toFixed(2)]})]},He))}}return u})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ie,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ie,{onClick:Na,children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const H0="/image.png",zK=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),gr=t=>(t||"").toString().toUpperCase(),cF={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},zg={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},GK=(t,s)=>{const n=gr(t.product),r=gr(t.name),o=gr(t.category),c=gr(t.subCategory),f=(cF[s]||[s.toUpperCase()]).some(l=>n.includes(l)||r.includes(l)||o.includes(l)||c.includes(l)),A=zg[s],h=A&&gr(n).includes(gr(A));return f||h},wp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function VK(){const{shops:t,materials:s,products:n}=ci(),{toast:r}=Ai(),[o,c]=C.useState(1),p=typeof window<"u"&&window.location.search.includes("step=11"),[f,A]=C.useState(""),[h,l]=C.useState(""),[g,v]=C.useState(null),[m,N]=C.useState(null),[w,E]=C.useState(null),[F,M]=C.useState(null),[k,K]=C.useState(null),[G,ee]=C.useState(null),[V,X]=C.useState(1),[J,he]=C.useState(7),[q,ie]=C.useState(3),[Ae,ce]=C.useState(6),[oe,ne]=C.useState(2),[re,se]=C.useState([]),[je,De]=C.useState([]);C.useEffect(()=>{nt("/api/accumulated-products/electrical",{headers:{}}).then(x=>x.json()).then(x=>{De(x.data||[])}).catch(x=>console.error("Failed to load accumulated products",x))},[]),C.useEffect(()=>{if(typeof window<"u"){const j=new URLSearchParams(window.location.search).get("step");if(j){const u=parseInt(j,10);u>=1&&u<=12&&c(u)}}},[]),C.useEffect(()=>{o===12&&nt("/api/accumulated-products/electrical",{headers:{}}).then(x=>x.json()).then(x=>{const j=x.data||[];De(j),console.debug("Restored electrical_accumulated_products for Step 12:",j.length)}).catch(x=>console.error("Failed to load accumulated products for Step 12",x))},[o]);const ge=x=>{const j=x?.doorType??w,u=x?.panelType??m,b=x?.subOption??F;if(!j)return null;const S=Ce.find(Q=>Q.value===j);let R=S?S.label:zg[j]||j;/door/i.test(R)||(R=`${R} Door`);const B=u==="panel"?"With Panel":"Without Panel",D=b?` - ${b}`:"";return`${B}  ${R}${D}`},Z=()=>{const x=(h||"").toString();if(!w&&!x)return null;const j=x||ge(),u=x||zg[w]||w,b=w?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(w):gr(j).includes("GLASS")||gr(j).includes("STILE");return{label:j,productName:u,requiresGlazing:b}},fe=()=>{const x=(h||"").toString();if(!w&&!x||!s.length)return[];const j=x||(w?zg[w]:"");let u=[];if(j&&(u=s.filter(S=>{const R=(S.product||"").toString();if(!R||!j)return!1;const B=gr(R),D=gr(j);return B.includes(D)||D.includes(B)})),(!u||u.length===0)&&!x&&(u=w?s.filter(S=>GK(S,w)):s.filter(S=>{const R=(S.product||"").toString();if(!j)return!1;const B=gr(R),D=gr(j);return B.includes(D)||D.includes(B)})),u.length===0)return[];const b=new Map;for(const S of u){const R=`${gr(S.product)}__${gr(S.name)}__${zK(S.code)}`,B=b.get(R);(!B||(S.rate||0)<(B.rate||0))&&b.set(R,S)}return Array.from(b.values())},ue={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],Ce=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],Ne=(x,j)=>{const u=V||1,b=J||7,S=q||3,R=Ae||6,B=oe||2,D=jf(b,S),Q=x.toLowerCase();let $=0;return Q.includes("frame")||Q.includes("door frame")?$=D*u:Q.includes("door")&&(Q.includes("panel")||Q.includes("shutter")||Q.includes("flush")||Q.includes("wooden"))?$=u:Q.includes("hinge")?$=u*3:Q.includes("lock")||Q.includes("handle")||Q.includes("stopper")||Q.includes("bolt")?$=u:Q.includes("glass")?$=wf(R,B)*u:$=u,Math.max(1,Math.ceil($))},ye=(x,j)=>{const u=x||re,b=j||ht;return u.map(S=>{let R=Te.find(Lt=>Lt.id===S.materialId);if(R||(R=s.find(Lt=>Lt.id===S.materialId)||null),!R)return null;const B=s.find(Lt=>{const $t=gr(Lt.product)===gr(R.product),gs=gr(Lt.name)===gr(R.name),nn=Lt.shopId===S.selectedShopId,z=wp(Lt)===(S.selectedBrand||"Generic");return $t&&gs&&nn&&z})||R,D=t.find(Lt=>Lt.id===S.selectedShopId),Q=S.rowId||(S.batchId?`${S.batchId}-${B.id}`:B.id),$=b[Q]||b[B.id]||b[R.id],te=Ne(B.name,B.unit),Ue=$?.quantity??te,He=$?.supplyRate??B.rate??0,st=$?.installRate??0,Bt=(ts||[]).find(Lt=>Lt.rowId===Q||`${Lt.batchId||""}-${Lt.id}`===Q);return{id:B.id,batchId:S.batchId,rowId:Q,name:B.name,quantity:Ue,unit:B.unit,rate:He,shopId:S.selectedShopId,shopName:D?.name||"Unknown",installRate:st,doorType:Bt?.doorType||Bt?.door_type||void 0,panelType:Bt?.panelType||Bt?.panel_type||void 0,subOption:Bt?.subOption||Bt?.sub_option||void 0,glazingType:Bt?.glazingType||Bt?.glazing_type||void 0,productLabel:Bt?.productLabel||void 0}}).filter(S=>S!==null)},we=()=>ye().reduce((x,j)=>x+j.quantity*j.rate,0),Te=fe(),qe=x=>(x?.name||x?.title||x?.label||x?.productName||x?.product||"").toString(),ve=x=>(x?.category||x?.type||x?.group||x?.section||"").toString(),Ge=x=>{const j=gr(qe(x)),u=gr(ve(x)),b=gr((x?.subCategory?.name||x?.subCategoryName||x?.subcategory||x?.sub_category||x?.subCategory||"").toString()),S=j.includes("ELECTR")||u.includes("ELECTR")||b.includes("ELECTR")||j.includes("SWITCH")||j.includes("SOCKET")||j.includes("MCB")||j.includes("CONDUIT")||j.includes("WIRE")||j.includes("CABLE")||j.includes("LIGHT")||b.includes("SWITCH")||b.includes("SOCKET")||b.includes("MCB")||b.includes("CONDUIT")||b.includes("WIRE")||b.includes("CABLE")||b.includes("LIGHT"),R=j.includes("DOOR")||j.includes("PIPE")||j.includes("PLUMB")||j.includes("CEILING")||j.includes("CEILING")||j.includes("GYPSUM")||j.includes("POP")||j.includes("GRID CEIL")||j.includes("FLOORING")||j.includes("BLIND")||j.includes("PAINT")||u.includes("DOOR")||u.includes("PIPE")||u.includes("PLUMB")||u.includes("CEILING")||u.includes("FLOORING")||u.includes("BLIND")||b.includes("DOOR")||b.includes("PIPE")||b.includes("PLUMB")||b.includes("CEILING")||b.includes("FLOORING")||b.includes("BLIND");return S&&!R},at=x=>{const j=gr(x);return j.includes("FLUSH")?"flush":j.includes("WPC")?"wpc":j.includes("STILE")||j.includes("ALUMIN")?"stile":j.includes("GLASS PANEL")?"glasspanel":j.includes("GLASS")?"glassdoor":j.includes("WOOD")||j.includes("TEAK")?"wooden":null},Se=(n||[]).filter(Ge).slice().sort((x,j)=>{const u=qe(x),b=qe(j);return u.localeCompare(b)}),vt=x=>{const j=qe(x);A(x.id||j),l(j);const u=at(j);E(u||w),M(null),K(null),ee(null),se([]),pt({}),Dt({}),rs({}),c(6)},[ht,pt]=C.useState({}),[Ze,Ht]=C.useState([]),[At,Ct]=C.useState({}),[It,Wt]=C.useState("Concept Trunk Interiors"),[Es,Ss]=C.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[_s,$e]=C.useState("33ASOPS5560M1Z1"),[ke,it]=C.useState(""),[tt,Jt]=C.useState(new Date().toISOString().slice(0,10)),[Qt,ss]=C.useState(""),[dt,qt]=C.useState("50% Advance and 50% on Completion"),[Vt,vs]=C.useState(""),[ns,js]=C.useState(""),[ln,ys]=C.useState(""),[gt,Dt]=C.useState({}),[xt,rs]=C.useState({}),[ps,yn]=C.useState({}),[is,Fs]=C.useState({}),[Ns,Nn]=C.useState({}),[Cs,zt]=C.useState({}),[os,Ps]=C.useState([]),[Ye,St]=C.useState([]),[Rt,us]=C.useState(""),[As,as]=C.useState([]),[bs,cs]=C.useState([]),[Us,an]=C.useState([]),[Mr,Un]=C.useState(!1);C.useEffect(()=>{(async()=>{if(ke)try{const j=await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=electrical`,{headers:{}});if(j.ok){const S=await j.json();as(S.items||[])}const u=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=electrical`,{headers:{}});if(u.ok){const S=await u.json();cs(S.items||[])}const b=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=electrical`,{headers:{}});if(b.ok){const S=await b.json();an(S.items||[])}}catch(j){console.warn("Failed to load data from DB:",j)}})()},[ke]),C.useEffect(()=>{if(o===7){const x=ye(),j={};x.forEach(u=>{j[u.id]={quantity:u.quantity||0,supplyRate:u.rate||0,installRate:0}}),pt(j)}},[o,re]),C.useEffect(()=>{if(o===9){const x=ye(Ze,At);if(x.length>0){const j=x[0].shopId,u=t.find(b=>b.id===j);if(u){const b=[u.name||"",u.address||"",u.area||"",u.city||"",u.state||"",u.pincode||"",u.gstNo?`GSTIN: ${u.gstNo}`:"",u.phone||""].filter(Boolean);ys(b.join(`
`))}}}},[o,Ze,At,re,t]),C.useEffect(()=>{if(o===9){Je();const x=[],j={},u={},b={};if(ts&&ts.length>0)for(const S of ts){const R=S.rowId||`${S.batchId||""}-${S.id}`;x.findIndex(D=>D.materialId===S.id&&D.rowId===R&&(D.batchId||"")===(S.batchId||""))===-1&&(x.push({materialId:S.id,selectedShopId:S.shopId||"",selectedBrand:S.brand||void 0,batchId:S.batchId,rowId:R}),j[R]={quantity:Number(S.quantity||0),supplyRate:Number(S.supplyRate??S.rate??0),installRate:Number(S.installRate||0)},S.description&&(u[R]=S.description),S.location&&(b[R]=S.location))}if(As&&As.length>0)for(const S of As){if(!s.find(Ue=>Ue.id===S.material_id))continue;const B=S.material_id,D=S.row_id||(S.batch_id?`${S.batch_id}-${B}`:B),Q=S.shop_id||"",$=S.brand||void 0;x.findIndex(Ue=>Ue.materialId===B&&(Ue.batchId||"")===(S.batch_id||"")&&(Ue.rowId||"")===D)===-1&&(x.push({materialId:B,selectedShopId:Q,selectedBrand:$,batchId:S.batch_id||(S.row_id?D.replace(`-${B}`,""):void 0)}),j[D]={quantity:Number(S.quantity||0),supplyRate:Number(S.supply_rate||S.rate||0),installRate:Number(S.install_rate||0)},S.description&&(u[D]=S.description),S.location&&(b[D]=S.location))}re&&re.length>0&&re.forEach(S=>{if(x.findIndex(B=>B.materialId===S.materialId&&B.batchId===S.batchId)===-1){x.push(S);const B=s.find(D=>D.id===S.materialId);if(B){const D=S.batchId?`${S.batchId}-${S.materialId}`:S.materialId;j[D]={quantity:ht[S.materialId]?.quantity??B.quantity??1,supplyRate:ht[S.materialId]?.supplyRate??B.rate??0,installRate:ht[S.materialId]?.installRate??0}}}}),x.length>0&&Ht(x),Object.keys(j).length>0&&Ct(j),Object.keys(u).length>0&&Dt(S=>({...S,...u})),Object.keys(b).length>0&&rs(S=>({...S,...b}))}},[o,re,As]),C.useEffect(()=>{o===11&&(async()=>{if(ke)try{const j=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=electrical`,{headers:{}});if(j.ok){const b=(await j.json()).items||[],S={},R={},B={},D={};b.forEach(Q=>{const $=s.find(te=>te.name===Q.item);$&&(S[$.id]=Number(Q.supply_rate||0),R[$.id]=Number(Q.install_rate||0),B[$.id]=Number(Q.qty||0),D[$.id]=Q.unit||"")}),zt(Q=>({...Q,...S})),Nn(Q=>({...Q,...R})),yn(Q=>({...Q,...B})),Fs(Q=>({...Q,...D}))}}catch(j){console.warn("Failed to load step 11 data:",j)}})()},[o,ke,bs]);const Ks=C.useRef(null);C.useEffect(()=>{Je().catch(()=>{})},[]),C.useEffect(()=>{(async()=>{if(ke)try{const j=await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=electrical`,{headers:{}});if(j.ok){const u=await j.json(),b=u.items.map(S=>({id:S.material_id,rowId:S.row_id,batchId:S.batch_id,name:S.name,unit:S.unit,quantity:S.quantity,supplyRate:S.supply_rate,installRate:S.install_rate,shopId:S.shop_id,shopName:S.shop_name,description:S.description,location:S.location,doorType:S.door_type,panelType:S.panel_type,subOption:S.sub_option,glazingType:S.glazing_type}));if(Qs(b),u.items.length>0){const S=u.items[0];lt({doorType:S.door_type,panelType:S.panel_type,subOption:S.sub_option,glazingType:S.glazing_type,count:S.qty,height:S.height,width:S.width,glassHeight:S.glass_height,glassWidth:S.glass_width,subtotal:S.subtotal,sgst:S.sgst,cgst:S.cgst,round_off:S.round_off,grand_total:S.grand_total})}}}catch(j){console.warn("Failed to load step 9 from DB",j)}})()},[ke]),C.useEffect(()=>(Ks.current&&clearTimeout(Ks.current),Ks.current=setTimeout(async()=>{new Date().toISOString();try{if(!ke)return;const x=ye().map((j,u)=>{const b=j.rowId||(j.batchId?`${j.batchId}-${j.id}`:j.id);return{estimator:"electrical",session_id:ke,s_no:u+1,row_id:String(b),batch_id:j.batchId||null,material_id:j.id,name:j.name,unit:j.unit,quantity:Number(ht[j.id]?.quantity??j.quantity??0),supply_rate:Number(ht[j.id]?.supplyRate??j.rate??0),install_rate:Number(ht[j.id]?.installRate??0),shop_id:j.shopId||"",shop_name:j.shopName||"",description:gt[j.id]||"",location:xt[j.id]||"",door_type:w,panel_type:m,sub_option:F,glazing_type:G,qty:V,height:J,width:q,glass_height:Ae,glass_width:oe}});await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:ke,items:x})})}catch{}},800),()=>{Ks.current&&clearTimeout(Ks.current)}),[re,ht,gt,xt,w,m,F,G,V,J,q,Ae,oe,ke]);const Pn=x=>{const j=Te.find(Q=>Q.id===x);if(!j)return;if(re.find(Q=>Q.materialId===x)){se(Q=>Q.filter($=>$.materialId!==x));return}const b=s.filter(Q=>gr(Q.product)===gr(j.product)&&gr(Q.name)===gr(j.name)).map(Q=>({brand:wp(Q),shopId:Q.shopId,rate:Q.rate||0})),R=Array.from(new Set(b.map(Q=>Q.brand))).sort()[0]||"Generic",D=b.filter(Q=>Q.brand===R).sort((Q,$)=>Q.rate-$.rate)[0];D?.shopId&&se(Q=>[...Q,{materialId:x,selectedShopId:D.shopId,selectedBrand:R}])},nr=(x,j)=>{se(u=>u.map(b=>b.materialId===x?{...b,selectedShopId:j}:b))},Yn=(x,j)=>{const u=Te.find(R=>R.id===x);if(!u)return;const S=s.filter(R=>gr(R.product)===gr(u.product)&&gr(R.name)===gr(u.name)).map(R=>({brand:wp(R),shopId:R.shopId,rate:R.rate||0})).filter(R=>R.brand===j).sort((R,B)=>R.rate-B.rate)[0]?.shopId||"";se(R=>R.map(B=>B.materialId===x?{...B,selectedBrand:j,selectedShopId:S||B.selectedShopId}:B))},[dn,vn]=C.useState([]),jn=()=>{const x=(o===9?ye(Ze,At):ye()).map(j=>j.rowId||j.id);vn(j=>j.length===x.length?[]:x)},Jn=async()=>{if(dn.length!==0){try{const x=[],j=[];for(const u of dn){const b=ts?.find(S=>`${S.batchId||""}-${S.id}`===u);if(b&&b.id){const S=As.find(R=>R.id===b.id);S&&x.push(S)}else{const S=Ze.find(R=>`${R.batchId||""}-${R.materialId}`===u);S&&j.push(S)}}if(x.length>0&&ke&&(await nt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:ke,estimator:"electrical",items:x})}),Qs(u=>u?u.filter(b=>!x.some(S=>S.id===b.id)):null)),j.length>0&&Ht(u=>u.filter(b=>!j.some(S=>`${S.batchId||""}-${S.materialId}`==`${b.batchId||""}-${b.materialId}`))),Ht(u=>u.filter(b=>!dn.includes(`${b.batchId||""}-${b.materialId}`))),Ct(u=>{const b={...u};return dn.forEach(S=>delete b[S]),b}),ke){const b=await(await nt(`/api/estimator-step9-items?session_id=${ke}&estimator=electrical`,{headers:{}})).json();as(b.items||[])}r({title:"Success",description:`${dn.length} item(s) deleted successfully!`})}catch(x){console.warn("Failed to delete items",x),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}vn([])}},[Zr,Ir]=C.useState([]),Vn=C.useRef(""),[Ts,Ls]=C.useState(null),[ts,Qs]=C.useState(null),[ls,be]=C.useState({}),[xe,lt]=C.useState(null),Je=async()=>{try{const x=await nt("/api/boq");if(x.status===401){Ir([]),Vn.current!=="401"&&(Vn.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!x.ok){const b=await x.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${b||x.status}`)}if(!(x.headers.get("content-type")||"").includes("application/json")){const b=await x.text().catch(()=>"");console.warn("/api/boq returned non-json:",b),Ir([]);return}const u=await x.json();Ir(u.boqs||[]),Vn.current=""}catch(x){console.error("fetchSavedBoqs",x);const j=String(x?.message||x||"");if(!j)return;Vn.current!==j&&(Vn.current=j,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},fs=async()=>{try{if(!ke)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const x={estimator:"electrical",billNo:ke,doorType:w,panelType:m,subOption:F,glazingType:G,qty:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,materials:ts&&ts.length>0?ts:ye(),subtotal:ks,sgst:qs,cgst:Js,roundOff:ms,grandTotal:$n},j=await nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!j.ok){const S=await j.text().catch(()=>"");throw new Error(S||"save failed")}const u=j.headers.get("content-type")||"";let b=null;if(u.includes("application/json"))b=await j.json();else{const S=await j.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",S),b={boq:null}}return await Je(),Ls(b?.boq||b?.boqs?.[0]||null),!0}catch(x){return console.error("handleSaveBOQ",x),!1}},wn=async x=>{try{if(!(await nt(`/api/boq/${x}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await Je()}catch(j){console.error("handleDeleteSavedBoq",j)}},zn=()=>{c(1),E(null),N(null),M(null),K(null),X(1),he(7),ie(3),ce(0),ne(0),Ps([]),yn({}),Dt({}),rs({}),Fs({}),zt({}),Nn({}),be({}),Ls(null)},di=async()=>{Un(!0);try{let x=bs||[];if(ke)try{const R=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=electrical`);R.ok&&(x=(await R.json()).items||[],cs(x))}catch(R){console.warn("Failed to refresh step11 items before save",R)}const j=on.map(R=>({estimator:"electrical",session_id:ke,group_key:(R.groupKey||`${R.doorType||"door"}||${R.panelType||""}||${R.subOption||""}`)+"::"+(R.name||""),group_id:R.groupId||`group_${R.groupKey||""}`,item_name:R.name,unit:R.unit,quantity:R.quantity,location:R.location||"",description:R.description||"",supply_rate:Cs[R.id]||R.supplyRate||0,install_rate:Ns[R.id]||R.installRate||0,supply_amount:(R.quantity||0)*(Cs[R.id]||R.supplyRate||0),install_amount:(R.quantity||0)*(Ns[R.id]||R.installRate||0),supply_subtotal:on.reduce((B,D)=>B+(D.quantity||0)*(Cs[D.id]||D.supplyRate||0),0),install_subtotal:on.reduce((B,D)=>B+(D.quantity||0)*(Ns[D.id]||D.installRate||0),0),sgst:qs,cgst:Js,round_off:ms,grand_total:on.reduce((B,D)=>B+(D.quantity||0)*((Cs[D.id]||D.supplyRate||0)+(Ns[D.id]||D.installRate||0)),0)+qs+Js+ms})),u=new Set((x||[]).map(R=>R.group_key||R.groupKey)),b=j.filter(R=>!u.has(R.group_key));if(b.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),Un(!1),!0;const S=await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:b})});if(!S.ok){const R=await S.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${R||S.statusText}`,variant:"destructive"}),Un(!1),!1}try{const R=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=electrical`);if(R.ok){const B=await R.json();cs(B.items||[])}}catch(R){console.warn("Failed to reload step11 items after save",R)}return De([]),r({title:"Success",description:"Step 11 saved to database."}),Un(!1),!0}catch(x){return console.error("handleSaveAccumulatedBOQ",x),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Un(!1),!1}},Oi=x=>{if(it(x.bill_no||""),E(x.door_type||null),N(x.panel_type||null),M(x.sub_option||null),ee(x.glazing_type||null),X(x.qty||1),he(x.height||7),ie(x.width||3),ce(x.glass_height||6),ne(x.glass_width||2),Array.isArray(x.materials)){const j=x.materials.map(u=>({materialId:u.id,selectedShopId:u.shopId||u.shop_id||u.shopId||"",selectedBrand:u.shopName||u.brand||u.selectedBrand||void 0}));se(j.filter(Boolean))}Ls(x)},ka=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(j))}}));return}pt(u=>({...u,[x]:{...u[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(j))}}))},Rr=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(j)),installRate:u[x]?.installRate||0}}));return}pt(u=>({...u,[x]:{...u[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(j)),installRate:u[x]?.installRate||0}}))},Ha=(x,j)=>{if(o===9){Ct(u=>({...u,[x]:{...u[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(j)),supplyRate:u[x]?.supplyRate||0}}));return}pt(u=>({...u,[x]:{...u[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(j)),supplyRate:u[x]?.supplyRate||0}}))},Na=()=>{const x=document.getElementById("boq-pdf");if(!x){alert("BOQ content not found");return}setTimeout(()=>{vA().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:j=>j.className?.toString().includes("bg-")||j.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save().catch(j=>{console.error("PDF Export Error:",j),alert("PDF export failed. Check console.")})},100)},$r=async()=>{const x=document.getElementById("boq-final-pdf");if(!x){alert("Final BOQ content not found");return}const j=(await Uc(async()=>{const{default:u}=await Promise.resolve().then(()=>ru);return{default:u}},void 0)).default;j().set({margin:10,filename:`BOQ-${ke||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save()},Oa=()=>{const x=ye(),j=Z(),u=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${m==="panel"?"With Panel":"Without Panel"} - ${j?.label}`,`Dimensions: ${J}ft  ${q}ft (Count: ${V})`,...G?[`Glazing: ${G}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];x.forEach((D,Q)=>{const $=D.quantity*D.rate;u.push(`${Q+1},"${D.name}","${D.unit}",${D.quantity},${D.rate},"${D.shopName}",${$}`)}),u.push("",`TOTAL COST,,,${we().toFixed(2)}`);const b=u.join(`
`),S=new Blob([b],{type:"text/csv"}),R=window.URL.createObjectURL(S),B=document.createElement("a");B.href=R,B.download=`BOQ-Doors-${new Date().getTime()}.csv`,B.click(),URL.revokeObjectURL(R)},vi=()=>{const x=on||[],j=[];j.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),x.forEach((B,D)=>{const Q=Number(B.supplyRate??B.rate??0),$=Number(B.installRate??0),te=Number(B.quantity||0),Ue=te*Q,He=te*$,st=(B.location||xt[B.id]||"").toString().replace(/"/g,'""'),Bt=(B.description||gt[B.id]||B.name||"").toString().replace(/"/g,'""'),gs=(ge({doorType:B.doorType||B.door_type,panelType:B.panelType||B.panel_type,subOption:B.subOption||B.sub_option,glazingType:B.glazingType||B.glazing_type})||B.name||"").replace(/"/g,'""');j.push(`${D+1},"${gs}","${st}","${Bt}",${B.unit},${te},${Q.toFixed(2)},${$.toFixed(2)},${Ue.toFixed(2)},${He.toFixed(2)}`)});const u=j.join(`
`),b=new Blob([u],{type:"text/csv"}),S=window.URL.createObjectURL(b),R=document.createElement("a");R.href=S,R.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,R.click(),URL.revokeObjectURL(S)},Ui=async()=>{const x=ye(Ze,At).map(B=>{const D=B.rowId||`${B.batchId}-${B.id}`;return{id:B.id,rowId:D,batchId:B.batchId||null,name:B.name,productLabel:B.productLabel||null,product_label:B.productLabel||null,unit:B.unit,quantity:At[D]?.quantity??At[B.id]?.quantity??B.quantity,supplyRate:At[D]?.supplyRate??At[B.id]?.supplyRate??B.rate,installRate:At[D]?.installRate??At[B.id]?.installRate??B.installRate??0,shopId:B.shopId,shopName:B.shopName,description:gt[D]||gt[B.id]||"",location:xt[D]||xt[B.id]||"",doorType:B.doorType,panelType:B.panelType,subOption:B.subOption,glazingType:B.glazingType,isSaved:B.isSaved||!1}}),j=x.filter(B=>!B.isSaved);if(j.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let u=ke;(!u||u.trim()==="")&&(u=`DOOR-${Date.now()}`,it(u));const b=xe||(()=>{const B=x.reduce((Ue,He)=>Ue+Number(He.quantity||0)*(Number(He.supplyRate||0)+Number(He.installRate||0)),0),D=B*.09,Q=B*.09,$=Math.round(B+D+Q)-(B+D+Q),te=B+D+Q+$;return{subtotal:B,sgst:D,cgst:Q,round_off:$,grand_total:te}})(),S={id:`local-${Date.now()}`,estimator:"electrical",bill_no:u,door_type:xe?.doorType||xe?.door_type||w,panel_type:xe?.panelType||xe?.panel_type||m,sub_option:xe?.subOption||xe?.sub_option||F,glazing_type:xe?.glazingType||xe?.glazing_type||G,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,materials:x,subtotal:b.subtotal,sgst:b.sgst,cgst:b.cgst,round_off:b.round_off,grand_total:b.grand_total,created_at:new Date().toISOString()};Ls(S),Qs(x);try{lt(B=>({...B||{},...b}))}catch{}const R=j.map((B,D)=>({estimator:"electrical",session_id:u,s_no:D+1,row_id:String(B.rowId||`${B.batchId||""}-${B.id}`),batch_id:B.batchId||null,material_id:B.id,name:B.name,unit:B.unit,quantity:Number(B.quantity||0),supply_rate:Number(B.supplyRate||0),install_rate:Number(B.installRate||0),shop_id:B.shopId||"",shop_name:B.shopName||"",description:B.description||"",location:B.location||"",door_type:B.doorType||xe?.doorType||xe?.door_type||w||null,panel_type:B.panelType||xe?.panelType||xe?.panel_type||m||null,sub_option:B.subOption||xe?.subOption||xe?.sub_option||F||null,glazing_type:B.glazingType||xe?.glazingType||xe?.glazing_type||G||null,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,subtotal:b.subtotal,sgst:b.sgst,cgst:b.cgst,round_off:b.round_off,grand_total:b.grand_total}));try{await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:u,items:R})});const D=await(await nt(`/api/estimator-step9-items?session_id=${u}&estimator=electrical`,{headers:{}})).json();as(D.items||[]);const Q=(ts||[]).map($=>j.some(Ue=>$.rowId===Ue.rowId||`${$.batchId||""}-${$.id}`==`${Ue.batchId||""}-${Ue.id}`)?{...$,isSaved:!0}:$);Qs(Q),r({title:"Success",description:`${j.length} new material(s) saved successfully to database!`})}catch(B){console.warn("Failed to save step 9 to DB",B),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},bi=x=>{let j=5381;for(let u=0;u<x.length;u+=1)j=(j<<5)+j^x.charCodeAt(u);return Math.abs(j>>>0).toString(36)},ui=()=>{const x=JSON.stringify({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,selectedMaterials:(re||[]).map(j=>({materialId:j.materialId,selectedShopId:j.selectedShopId,selectedBrand:j.selectedBrand})),editable:Object.keys(ht||{}).sort().map(j=>({id:j,...ht[j]}))});return`batch-${bi(x)}`},hi=()=>{const x=ui(),j=Array.from(new Map((re||[]).map($=>[$.materialId,$])).values()),u=ye(j,ht).map($=>({id:$.id,rowId:`${x}-${$.id}`,batchId:x,name:$.name,unit:$.unit,quantity:ht[$.id]?.quantity??$.quantity,supplyRate:ht[$.id]?.supplyRate??$.rate,installRate:ht[$.id]?.installRate??0,shopId:$.shopId,shopName:$.shopName,description:gt[$.id]||"",location:xt[$.id]||"",doorType:w,productLabel:h||ge(),panelType:m,subOption:F,glazingType:G,isSaved:!1})),b=Array.from(new Map(u.map($=>[$.id,$])).values());if(b.length===0){c(9);return}const B=[...(ts||[]||[]).filter($=>$.batchId!==x),...b],D=Array.from(new Map(B.map($=>[$.rowId||`${$.batchId}-${$.id}`,$])).values());Qs(D),Ht(j.map($=>({materialId:$.materialId,selectedShopId:$.selectedShopId,selectedBrand:$.selectedBrand,batchId:x})));const Q={};D.forEach($=>{const te=$.rowId||`${$.batchId}-${$.id}`;Q[te]={quantity:Number($.quantity||0),supplyRate:Number($.supplyRate||$.rate||0),installRate:Number($.installRate||0)}}),Ct(Q);try{const $=we(),te=$*.09,Ue=$*.09,He=Math.round($+te+Ue)-($+te+Ue),st=$+te+Ue+He;lt({doorType:w,panelType:m,subOption:F,glazingType:G,count:V,height:J,width:q,glassHeight:Ae,glassWidth:oe,subtotal:$,sgst:te,cgst:Ue,round_off:He,grand_total:st})}catch{}c(9)},tn=o===9||o===11?ts||[]:ye(),sn=o===9?At:ht,ks=tn.reduce((x,j)=>x+j.quantity*((sn[j.id]?.supplyRate??j.rate)+(sn[j.id]?.installRate??j.installRate??0)),0),qs=ks*.09,Js=ks*.09,ms=Math.round(ks+qs+Js)-(ks+qs+Js),$n=ks+qs+Js+ms,qr=je.length>0?je.flatMap(x=>x.materials||[]):ts&&ts.length>0?ts:tn&&tn.length>0?tn:Ts&&Ts.materials&&Ts.materials.length>0?Array.isArray(Ts.materials)?Ts.materials:JSON.parse(Ts.materials||"[]"):tn,Ka=(()=>{const x=new Map;for(const u of qr||[]){const b=u.productLabel||u.doorType||u.door_type||xe?.doorType||xe?.door_type||w||"door",S=u.panelType||u.panel_type||xe?.panelType||xe?.panel_type||m||"",R=u.subOption||u.sub_option||xe?.subOption||xe?.sub_option||"",B=`${b}||${S}||${R}`;x.has(B)||x.set(B,[]),x.get(B).push(u)}const j=[];for(const[u,b]of x.entries()){const[S,R,B]=u.split("||"),D=`group_${u}`,Q=gt[D]||"",$=xt[D]||"";let te=Number(ls[D]??xe?.count??xe?.qty??V??1);const Ue=String(Q).match(/Qty:\s*(\d+(?:\.\d+)?)/);Ue&&(ls[D]===void 0||ls[D]===null)&&(te=Number(Ue[1]));const He=b.reduce((nn,z)=>nn+Number(z.quantity||0)*Number(z.supplyRate??z.rate??0),0),st=te>0?He/te:He,Bt=b.reduce((nn,z)=>nn+Number(z.quantity||0)*Number(z.installRate??0),0),Lt=te>0?Bt/te:Bt,$t=b[0]&&b[0].productLabel||ge({doorType:S,panelType:R,subOption:B})||S,gs=String(Q).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();j.push({id:D,groupKey:u,name:$t,location:$||"",description:gs||"",unit:"pcs",quantity:te,supplyRate:Number(st||0),installRate:Number(Ns[D]??Lt??0),supplyAmount:Number(st*te||0),installAmount:Number((Ns[D]??Lt)*te||0)})}return j})();(bs||[]).filter(x=>x.item||x.item_name).map((x,j)=>{const u=x.group_key||x.groupKey||`${x.door_type||x.doorType||"door"}||${x.panel_type||x.panelType||""}||${x.sub_option||x.subOption||""}`;return{id:x.id,groupKey:u,name:x.productLabel||x.item_name||x.item||x.name||x.door_label||x.doorType||x.door_type||"Door",location:x.location||"",description:x.description||"",unit:x.unit||"pcs",quantity:Number(x.quantity??x.qty??1),supplyRate:Number(x.supply_rate??x.supplyRate??0),installRate:Number(x.install_rate??x.installRate??0),supplyAmount:Number(x.supply_amount??0),installAmount:Number(x.install_amount??0),doorType:x.door_type||x.doorType,panelType:x.panel_type||x.panelType,subOption:x.sub_option||x.subOption}});const on=(je.length===0?Ka.filter(x=>!(bs||[]).some(u=>(u.group_key||u.groupKey||`${u.door_type||""}||${u.panel_type||""}||${u.sub_option||""}`)===x.groupKey)):je.map((x,j)=>({id:`accumulated_${j}`,groupKey:`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,name:x.productLabel||x.materials?.[0]?.productLabel||x.doorLabel||ge({doorType:x.doorType,panelType:x.panelType,subOption:x.subOption})||x.doorType,location:x.location||"",description:x.description||"",unit:"pcs",quantity:x.count||1,supplyRate:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.supplyRate??b.rate??0),0)||0,installRate:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.installRate??0),0)||0,supplyAmount:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.supplyRate??b.rate??0),0)||0,installAmount:x.materials?.reduce((u,b)=>u+Number(b.quantity||0)*Number(b.installRate??0),0)||0})))||[],Bn=on.filter(x=>Ye.includes(x.id)),Fn=on.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0)),b=Number(Cs[j.id]??j.supplyRate??j.rate??0);return x+u*b},0);on.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0));return x+u*Number(j.installRate||0)},0);const Zn=Bn.reduce((x,j)=>{const u=Number(ps[j.id]??(j.quantity||0)),b=Number(Cs[j.id]??j.supplyRate??j.rate??0);return x+u*b},0);Ts&&Ts.bill_no;const pa=Ts&&Ts.created_at?new Date(Ts.created_at).toISOString().slice(0,10):tt,ma=x=>{if(!x)return!1;const j=(x.name||"").toString().trim(),u=Number(x.quantity||0),b=Number(x.supplyRate??x.rate??0),S=Number(x.installRate??0),R=(x.description||"").toString().trim(),B=(x.location||"").toString().trim();return!!j||u>0||b>0||S>0||!!R||!!B};return(je||[]).map(x=>{const j=(x.materials||[]).filter(ma),u=j.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.supplyRate??R.rate??0),0),b=j.reduce((S,R)=>S+Number(R.quantity||0)*Number(R.installRate??0),0);return{...x,materials:j,supplySubtotal:u,installSubtotal:b,subtotal:u+b}}).filter(x=>(x.materials||[]).length>0),e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Electrical Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Vs,{className:"border-border/50",children:e.jsx(fn,{className:"pt-8 min-h-96",children:e.jsxs(gl,{mode:"wait",children:[o===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Electrical Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:Se.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No door products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:Se.map(x=>{const j=qe(x),u=(x?.id||j).toString(),b=f===u;return e.jsx(Ie,{variant:b?"default":"outline",onClick:()=>vt(x),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:j||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ve(x)})]})},u)})})})]},"step-select-product"),o===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:H0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:pa})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all-groups",checked:(()=>{const x=(on||[]).map(j=>j.id);return x.length>0&&x.every(j=>os.includes(j))})(),onCheckedChange:x=>{Ps(x?(on||[]).map(j=>j.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(on||[]).map((x,j)=>{const u=Number(Cs[x.id]??x.supplyRate??x.rate??0),b=Number(Ns[x.id]??x.installRate??0);let S=Number(ps[x.id]??(x.quantity||0));const R=S*u,B=S*b;return xt[x.id]??x.location,gt[x.id]??x.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{checked:os.includes(x.id),onCheckedChange:()=>{Ps(D=>D.includes(x.id)?D.filter(Q=>Q!==x.id):[...D,x.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:j+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{value:xt[x.id]??x.location??"",onChange:D=>rs(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:gt[x.id]??x.description??"",onChange:D=>Dt(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{value:is[x.id]??x.unit??"",onChange:D=>Fs(Q=>({...Q,[x.id]:D.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",value:S,onChange:D=>yn(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:u,onChange:D=>zt(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:b,onChange:D=>Nn(Q=>({...Q,[x.id]:Number(D.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Fn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!p&&e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",disabled:os.length===0,onClick:async()=>{if(console.log("Delete selected:",os),bs.length>0&&ke)try{await nt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:os,estimator:"electrical"})});const x=await nt(`/api/estimator-step11-groups?session_id=${ke}&estimator=electrical`,{headers:{}});if(x.ok){const j=await x.json();cs(j.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(x){console.warn("Failed to delete step 11 from DB",x),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(je.length===0)if(Ts){console.log("Deleting from saved BOQ");const x=os.map(S=>S.replace("group_","")),j=Array.isArray(Ts.materials)?Ts.materials:JSON.parse(Ts.materials||"[]");console.log("Current materials:",j.length);const u=j.filter(S=>{const R=S.doorType||S.door_type||xe?.doorType||xe?.door_type||w||"door",B=S.panelType||S.panel_type||xe?.panelType||xe?.panel_type||m||"",D=S.subOption||S.sub_option||xe?.subOption||xe?.sub_option||F||"",Q=`${R}||${B}||${D}`,$=x.includes(Q);return console.log("Checking material:",S.id||S.name,Q,"match:",$),!$});console.log("Filtered materials:",u.length);const b={...Ts,materials:u};Ls(b),nt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(()=>console.log("Saved updated BOQ")).catch(S=>console.error("Error saving BOQ:",S))}else{console.log("Deleting from Step 11 saved materials");const x=os.map(b=>b.replace("group_","")),u=((ts&&ts.length>0?ts:tn)||[]).filter(b=>{const S=b.doorType||b.door_type||xe?.doorType||xe?.door_type||w||"door",R=b.panelType||b.panel_type||xe?.panelType||xe?.panel_type||m||"",B=b.subOption||b.sub_option||xe?.subOption||xe?.sub_option||F||"",D=`${S}||${R}||${B}`;return!x.includes(D)});Qs(u)}else if(je.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",je.length);let x;if(os.some(j=>j.startsWith("accumulated_"))){const j=os.filter(u=>u.startsWith("accumulated_")).map(u=>parseInt(u.replace("accumulated_",""))).sort((u,b)=>b-u);x=[...je],j.forEach(u=>{u>=0&&u<x.length&&x.splice(u,1)})}else{const j=os.map(u=>u.replace("group_",""));x=je.filter(u=>{const b=`${u.doorType||"door"}||${u.panelType||""}||${u.subOption||""}`,S=j.includes(b);return console.log("Checking product:",u.id,b,"match:",S),!S})}console.log("Accumulated products after:",x.length),De(x),nt("/api/accumulated-products/electrical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:x})}).catch(j=>console.error("Failed to save accumulated products after delete",j))}Ps([])},children:"Delete Selected"}),e.jsx(Ie,{onClick:zn,children:"Add Product"}),e.jsx(Ie,{onClick:di,disabled:Mr,children:"Save"}),e.jsx(Ie,{onClick:async()=>{St(os);const x=(Bn||[]).map((j,u)=>{const b=Number(Cs[j.id]??j.supplyRate??j.rate??0),S=Number(Ns[j.id]??j.installRate??0);let R=Number(ps[j.id]??(j.quantity||0));return{s_no:u+1,item:j.name,location:xt[j.id]??j.location??"",description:gt[j.id]??j.description??"",unit:is[j.id]??j.unit??"",qty:R,supply_rate:b,install_rate:S,supply_amount:R*b,install_amount:R*S}});try{const j=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=electrical`,{headers:{}});let u=[];j.ok&&(u=(await j.json()).items||[]);const b=x.filter(B=>!u.some(D=>D.item===B.item&&D.description===B.description&&D.unit===B.unit));if(b.length===0){c(12);return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:ke,items:b})});const R=await(await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=electrical`,{headers:{}})).json();an(R.items||[]),r({title:"Success",description:`${b.length} new material(s) saved successfully to database!`}),c(12)}catch(j){console.warn("Failed to save step 12 to DB",j),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),o===4&&w&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(ue[w]||[]).map(x=>e.jsx(Ie,{onClick:()=>{M(x),K(null)},className:`w-full text-black ${F===x?"bg-cyan-500":"bg-white"}`,children:x},x))}),w==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(x=>e.jsx(Ie,{onClick:()=>K(x),className:`w-full text-black ${k===x?"bg-cyan-500":"bg-white"}`,children:x},x))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(5),disabled:!F||w==="flush"&&F==="With Vision Panel"&&!k,children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),o===5&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"count",children:"Count"}),e.jsx(Ve,{id:"count",type:"number",placeholder:"1",value:V||"",onChange:x=>X(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"height",children:"Height"}),e.jsx(Ve,{id:"height",type:"number",placeholder:"7",value:J||"",onChange:x=>he(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"width",children:"Width"}),e.jsx(Ve,{id:"width",type:"number",placeholder:"3",value:q||"",onChange:x=>ie(x.target.value?parseFloat(x.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Xe,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Ve,{id:"glassHeight",type:"number",placeholder:"72",value:Ae||"",onChange:x=>ce(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Ve,{id:"glassWidth",type:"number",placeholder:"24",value:oe||"",onChange:x=>ne(x.target.value?parseFloat(x.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:!V||!J||!q||Z()?.requiresGlazing&&(!Ae||!oe),onClick:()=>c(6),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),o===6&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gn,{id:"select-all-materials",checked:re.length===Te.length&&Te.length>0,onCheckedChange:x=>{if(x){const j=Te.map(u=>{const b=s.filter(D=>gr(D.product)===gr(u.product)&&gr(D.name)===gr(u.name)).map(D=>({id:D.id,brand:wp(D),shopId:D.shopId,rate:D.rate,unit:D.unit,shopName:t.find(Q=>Q.id===D.shopId)?.name||"Unknown"})),R=Array.from(new Set(b.map(D=>D.brand))).sort()[0]||"Generic",B=b.filter(D=>D.brand===R).sort((D,Q)=>(D.rate||0)-(Q.rate||0));return{materialId:u.id,selectedBrand:R,selectedShopId:B[0]?.shopId||""}});se(j)}else se([])}}),e.jsx(Xe,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Te.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",w||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(w?cF[w]||[w]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(x=>x.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Te.map(x=>{const j=re.some(Q=>Q.materialId===x.id),u=re.find(Q=>Q.materialId===x.id),b=s.filter(Q=>gr(Q.product)===gr(x.product)&&gr(Q.name)===gr(x.name)).map(Q=>({id:Q.id,brand:wp(Q),shopId:Q.shopId,rate:Q.rate,unit:Q.unit,shopName:t.find($=>$.id===Q.shopId)?.name||"Unknown"})),S=Array.from(new Set(b.map(Q=>Q.brand))).sort(),B=re.find(Q=>Q.materialId===x.id)?.selectedBrand||S[0]||"Generic",D=b.filter(Q=>Q.brand===B).sort((Q,$)=>(Q.rate||0)-($.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:x.id,checked:j,onCheckedChange:()=>Pn(x.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:x.id,className:"font-medium cursor-pointer",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.code}),j&&S.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Lr,{value:B,onValueChange:Q=>Yn(x.id,Q),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:S.map(Q=>e.jsx(wr,{value:Q,children:Q},Q))})]})]}),j&&D.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Lr,{value:u?.selectedShopId||D[0].shopId,onValueChange:Q=>nr(x.id,Q),children:[e.jsx(Er,{className:"h-8 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:D.map(Q=>e.jsxs(wr,{value:Q.shopId||"",children:[Q.shopName," - ",Q.rate,"/",x.unit,Q.rate===D[0].rate&&" (Best)"]},Q.shopId))})]})]})]})]})},x.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),o===7&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Xe,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-9 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(x=>{const j=re.find(b=>b.materialId===x.id),u=s.find(b=>b.id===x.id);return e.jsxs("div",{className:Xs("p-3 border rounded grid grid-cols-9 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:x.name}),e.jsx("span",{className:"text-sm",children:gt[x.id]||x.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:j?.selectedBrand||u?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:ht[x.id]?.quantity??x.quantity,onChange:b=>ka(x.id,parseInt(b.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:x.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:x.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Ve,{type:"number",value:ht[x.id]?.supplyRate??x.rate,onChange:b=>Rr(x.id,parseFloat(b.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((ht[x.id]?.quantity??x.quantity)*((ht[x.id]?.supplyRate??x.rate)+(ht[x.id]?.installRate??0))).toFixed(2)]})]},x.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ie,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),o===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||ge()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[J," ft  ",q," ft (Qty: ",V,")"]})]}),G&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:G})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[Ae,'"  ',oe,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(x=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:x==="Qty"||x.includes("Rate")||x.includes("Amount")?"right":"left"},children:x},x))})}),e.jsx("tbody",{children:ye().map((x,j)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:j+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:x.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:x.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(x.quantity*x.rate).toFixed(2)})]},x.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((x,j)=>x+j.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ie,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(si,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:Na,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(si,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>hi(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),A(""),l(""),N(null),E(null),ee(null),X(1),he(7),ie(3),ce(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Qn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),o===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:H0,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:pa})})]}),!Bn||Bn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Bn||[]).map((x,j)=>{const u=Number(Cs[x.id]??x.supplyRate??x.rate??0),b=Number(Ns[x.id]??x.installRate??0);let S=Number(ps[x.id]??(x.quantity||0));const R=S*u,B=S*b,D=xt[x.id]??x.location??"",Q=gt[x.id]??x.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:j+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:D||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Q||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:is[x.id]??x.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:S}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",u.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",b.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",R.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",B.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Zn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ie,{onClick:async()=>{if(Us.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const x=await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=electrical`,{headers:{}});let j=[];x.ok&&(j=(await x.json()).items||[]);const b=(Bn||[]).map((B,D)=>{const Q=Number(Cs[B.id]??B.supplyRate??B.rate??0),$=Number(Ns[B.id]??B.installRate??0),te=Number(ps[B.id]??(B.quantity||0));return{s_no:D+1,item:B.name,location:xt[B.id]??B.location??"",description:gt[B.id]??B.description??"",unit:is[B.id]??B.unit??"",qty:te,supply_rate:Q,install_rate:$,supply_amount:te*Q,install_amount:te*$}}).filter(B=>!j.some(D=>D.item===B.item&&D.description===B.description&&D.unit===B.unit));if(b.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await nt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:ke,items:b})});const R=await(await nt(`/api/estimator-step12-qa-selection?session_id=${ke}&estimator=electrical`,{headers:{}})).json();an(R.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(x){console.warn("Failed to save step 12 to DB",x),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ie,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ie,{onClick:vi,children:"Export Excel"})]})]},"step-qa-boq"),o===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:ke,onChange:x=>it(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:tt,onChange:x=>Jt(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:Qt,onChange:x=>ss(x.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:Vt,onChange:x=>vs(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:ns,onChange:x=>js(x.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:dt,onChange:x=>qt(x.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Rt,onChange:x=>us(x.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]}),Rt&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:gt[Rt]||"",onChange:x=>Dt(j=>({...j,[Rt]:x.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:H0,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",ke]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:ln})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",tt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Qt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",dt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Vt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(x=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:x},x))})}),e.jsx("tbody",{children:tn.map((x,j)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:j+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.id&&gt[x.id]||x.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(x.quantity||0)*Number(x.rate||0)||0).toFixed(2)})]},x.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:ks.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:qs.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Js.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:ms.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",$n.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",$n.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:$r,children:"Export PDF"})]})]}),o===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"destructive",onClick:Jn,disabled:dn.length===0,children:"Delete Selected"}),e.jsx(Ie,{type:"button",onClick:Ui,disabled:tn.length===0,children:"Save"}),e.jsx(Ie,{onClick:async()=>{const x=ye(Ze,At),j=dn.length>0?x.filter(R=>dn.includes(R.rowId||`${R.batchId}-${R.id}`)):x,u=j.map(R=>{const B=R.rowId||`${R.batchId||""}-${R.id}`;return{id:R.id,rowId:B,batchId:R.batchId,name:R.name,unit:R.unit,quantity:At[B]?.quantity??At[R.id]?.quantity??R.quantity,supplyRate:At[B]?.supplyRate??At[R.id]?.supplyRate??R.rate,installRate:At[B]?.installRate??At[R.id]?.installRate??R.installRate??0,shopId:R.shopId,shopName:R.shopName,description:gt[B]||gt[R.id]||"",location:xt[B]||xt[R.id]||"",doorType:R.doorType,panelType:R.panelType,subOption:R.subOption,glazingType:R.glazingType}});if(u.length===0)return;const b=j[0],S={id:`local-${Date.now()}`,estimator:"electrical",bill_no:ke,door_type:b?.doorType||xe?.doorType||xe?.door_type||w,panel_type:b?.panelType||xe?.panelType||xe?.panel_type||m,sub_option:b?.subOption||xe?.subOption||xe?.sub_option||F,glazing_type:b?.glazingType||xe?.glazingType||xe?.glazing_type||G,qty:xe?.count||xe?.qty||V,height:xe?.height||J,width:xe?.width||q,glass_height:xe?.glassHeight||xe?.glass_height||Ae,glass_width:xe?.glassWidth||xe?.glass_width||oe,materials:u,subtotal:u.reduce((R,B)=>R+Number(B.quantity||0)*(Number(B.supplyRate||0)+Number(B.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};Ls(S);try{await fs()}catch{}vn([]),c(11)},disabled:tn.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{className:"text-sm font-semibold",children:"Saved BOQs"}),Zr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Zr.map(x=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.bill_no||`${x.estimator} - ${x.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{onClick:()=>Oi(x),size:"sm",children:"Load"}),e.jsx(Ie,{variant:"destructive",onClick:()=>wn(x.id),size:"sm",children:"Delete"})]})]},x.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all",checked:(()=>{const x=(o===9?ye(Ze,At):ye()).map(j=>j.rowId||j.id);return dn.length===x.length&&x.length>0})(),onCheckedChange:jn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const x=new Map,j=new Map;tn.forEach(S=>{const R=S.doorType||S.door_type||xe?.doorType||xe?.door_type||w||"door",B=S.panelType||S.panel_type||xe?.panelType||xe?.panel_type||m||"",D=S.subOption||S.sub_option||xe?.subOption||xe?.sub_option||"",Q=`${R}||${B}||${D}`;if(x.has(Q)||x.set(Q,[]),x.get(Q).push(S),!j.has(Q)){const te=(x.get(Q)||[])[0]?.productLabel||`${B==="panel"?"With Panel":"Without Panel"}  ${R}${D?" ("+D+")":""}`;j.set(Q,{label:te})}});const u=[];let b=0;for(const[S,R]of x.entries()){const B=R.map(Ue=>Ue.rowId||`${Ue.batchId||""}-${Ue.id}`),D=B.every(Ue=>dn.includes(Ue)),Q=`group_${S}`,$=gt[Q]||"",te=Number(ls[Q]??xe?.count??xe?.qty??V??1);u.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(gn,{id:`group-${S}`,checked:D,onCheckedChange:()=>{vn(D?Ue=>Ue.filter(He=>!B.includes(He)):Ue=>Array.from(new Set([...Ue,...B])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:j.get(S)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Ve,{placeholder:"Group description",value:$?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ue=>Dt(He=>({...He,[Q]:Ue.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:ls[Q]??te,onChange:Ue=>{const He=Ue.target.value?parseFloat(Ue.target.value):0;be(st=>({...st,[Q]:He})),Dt(st=>{const Bt=(st[Q]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...st,[Q]:Bt?Bt+`
Qty: `+He:"Qty: "+He}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${S}`));for(const Ue of R){b+=1;const He=Ue.rowId||`${Ue.batchId}-${Ue.id}`,st=Number(sn[He]?.supplyRate??sn[Ue.id]?.supplyRate??Ue.rate??0),Bt=Number(sn[He]?.installRate??sn[Ue.id]?.installRate??Ue.installRate??0),Lt=st+Bt,$t=Number(sn[He]?.quantity??sn[Ue.id]?.quantity??Ue.quantity??0),gs=$t*Lt,nn=gt[He]??gt[Ue.id]??Ue.description??"",z=String(nn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();u.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:b}),e.jsx("td",{className:"border px-2 py-1",children:Ue.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:gt[He]??gt[Ue.id]??z,onChange:me=>Dt(Qe=>({...Qe,[He]:me.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:is[He]??is[Ue.id]??Ue.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ve,{type:"number",className:"h-8 text-center",value:$t,onChange:me=>ka(He,me.target.value?parseFloat(me.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Ve,{type:"number",value:Lt,onChange:me=>{const Qe=parseFloat(me.target.value||"0"),We=Number(sn[He]?.supplyRate??sn[Ue.id]?.supplyRate??st),ut=Math.max(0,Qe-We);Rr(He,We),Ha(He,ut)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",gs.toFixed(2)]})]},He))}}return u})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ie,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ie,{onClick:Na,children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}function $K(){const{shops:t,materials:s,products:n}=ci(),{toast:r}=Ai(),[o,c]=C.useState(1),[p,f]=C.useState(""),[A,h]=C.useState(null),[l,g]=C.useState(`PLB-${Math.floor(1e3+Math.random()*9e3)}`),[v,m]=C.useState(new Date().toISOString().slice(0,10)),[N,w]=C.useState([]),[E,F]=C.useState({}),[M,k]=C.useState({}),[K,G]=C.useState({}),[ee,V]=C.useState({}),[X,J]=C.useState({}),[he,q]=C.useState([]),[ie,Ae]=C.useState([]),[ce,oe]=C.useState(!1);C.useEffect(()=>{(async()=>{if(l)try{const Ge=await nt(`/api/estimator-step9-items?session_id=${l}&estimator=plumbing`);if(Ge.ok){const Se=await Ge.json();q(Se.items||[])}const at=await nt(`/api/estimator-step11-groups?session_id=${l}&estimator=plumbing`);if(at.ok){const Se=await at.json();Ae(Se.items||[])}}catch(Ge){console.warn("Failed to load DB data:",Ge)}})()},[l]);const ne=ve=>String(ve||"").toUpperCase(),re=C.useMemo(()=>(n||[]).filter(ve=>{const Ge=ne(ve.subcategory||ve.subcategory_name||""),at=ne(ve.category||ve.category_name||"");return Ge.includes("PLUMB")||at.includes("PLUMB")||Ge.includes("PIPE")||at.includes("PIPE")||Ge.includes("WATER")||at.includes("WATER")}).sort((ve,Ge)=>{const at=(ve.name||"").toString(),Se=(Ge.name||"").toString();return at.localeCompare(Se)}),[n]),se=ve=>{const Ge=typeof ve=="string"?ve:ve?.name||"";return Ge?s.filter(at=>{const Se=ne(at.product||""),vt=ne(at.subCategory||""),ht=ne(Ge);return!!(Se&&ht&&(Se.includes(ht)||ht.includes(Se))||vt&&ht&&(vt.includes(ht)||ht.includes(vt)))}):[]},je=ve=>{const Ge=s.find(Se=>Se.id===ve);if(!Ge)return[];const at=s.filter(Se=>Se.name===Ge.name&&Se.code===Ge.code);return Array.from(new Set(at.map(Se=>Se.brandName||"Generic"))).sort()},De=(ve,Ge)=>{const at=s.find(vt=>vt.id===ve);return at?s.filter(vt=>vt.name===at.name&&(Ge?(vt.brandName||"Generic")===Ge:!0)).filter((vt,ht,pt)=>pt.findIndex(Ze=>Ze.shopId===vt.shopId)===ht):[]},Z=N.map(ve=>{const Ge=s.find(pt=>pt.id===ve.materialId),at=t.find(pt=>pt.id===ve.selectedShopId),Se=E[Ge?.id||""]?.quantity??1,vt=E[Ge?.id||""]?.supplyRate??Ge?.rate??0,ht=E[Ge?.id||""]?.installRate??0;return{...Ge,quantity:Se,supplyRate:vt,installRate:ht,shopName:at?.name||"Market",supplyAmount:Se*vt,installAmount:Se*ht}}),fe=Z.reduce((ve,Ge)=>ve+(Ge.quantity||0)*((Ge.supplyRate||0)+(Ge.installRate||0)),0),ue=fe*.09,pe=fe*.09,Ce=Math.round(fe+ue+pe)-(fe+ue+pe),Ne=fe+ue+pe+Ce,ye=ve=>{if(N.find(at=>at.materialId===ve))w(at=>at.filter(Se=>Se.materialId!==ve)),F(at=>{const Se={...at};return delete Se[ve],Se});else{const at=se(p).find(Se=>Se.id===ve);if(at){const vt=je(ve)[0]||"Generic",pt=De(ve,vt).sort((Ze,Ht)=>(Ze.rate||0)-(Ht.rate||0))[0];w(Ze=>[...Ze,{materialId:ve,selectedShopId:pt?.shopId||"",selectedBrand:vt}]),F(Ze=>({...Ze,[ve]:{quantity:1,supplyRate:pt?.rate||at.rate||0,installRate:0}}))}}},we=async()=>{try{if(!l.trim()){r({title:"Error",description:"Please enter a Bill No.",variant:"destructive"});return}const ve=Z.map((Se,vt)=>({session_id:l,estimator:"plumbing",s_no:vt+1,material_id:Se.id,name:Se.name,productLabel:Se.productLabel||null,product_label:Se.productLabel||null,unit:Se.unit||"pcs",quantity:Se.quantity,supply_rate:Se.supplyRate,install_rate:Se.installRate,shop_id:N.find(ht=>ht.materialId===Se.id)?.selectedShopId||"",shop_name:Se.shopName,description:M[Se.id||""]||"",location:K[Se.id||""]||""})),Ge=await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"plumbing",session_id:l,items:ve})});if(!Ge.ok)throw new Error("Save failed");const at=await Ge.json();q(at.items||[]),r({title:"Success",description:"Step 9 saved to database."}),c(11)}catch(ve){console.error("Failed to save step 9",ve),r({title:"Error",description:"Failed to save step 9.",variant:"destructive"})}},Te=()=>{if(Z.length===0){r({title:"Error",description:"Please select materials first.",variant:"destructive"});return}c(12)},qe=async()=>{oe(!0);try{let ve=ie||[];if(l)try{const pt=await nt(`/api/estimator-step11-groups?session_id=${l}&estimator=plumbing`);pt.ok&&(ve=(await pt.json()).items||[],Ae(ve))}catch(pt){console.warn("Failed to refresh step11 items",pt)}const Ge=Z.map((pt,Ze)=>({estimator:"plumbing",session_id:l,s_no:Ze+1,group_key:`plumbing_${pt.id}`,group_id:`group_${pt.id}`,item_name:pt.name,unit:pt.unit||"pcs",quantity:pt.quantity,location:K[pt.id||""]||"",description:M[pt.id||""]||"",supply_rate:ee[pt.id||""]||pt.supplyRate||0,install_rate:X[pt.id||""]||pt.installRate||0,supply_amount:pt.quantity*(ee[pt.id||""]||pt.supplyRate||0),install_amount:pt.quantity*(X[pt.id||""]||pt.installRate||0),supply_subtotal:Z.reduce((Ht,At)=>Ht+At.quantity*(ee[At.id||""]||At.supplyRate||0),0),install_subtotal:Z.reduce((Ht,At)=>Ht+At.quantity*(X[At.id||""]||At.installRate||0),0),sgst:ue,cgst:pe,round_off:Ce,grand_total:Ne})),at=new Set((ve||[]).map(pt=>pt.group_key)),Se=Ge.filter(pt=>!at.has(pt.group_key));if(Se.length===0){r({title:"No changes",description:"No new items to save."}),oe(!1);return}if(!(await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:Se})})).ok)throw new Error("Save failed");const ht=await nt(`/api/estimator-step11-groups?session_id=${l}&estimator=plumbing`);if(ht.ok){const pt=await ht.json();Ae(pt.items||[])}r({title:"Success",description:"Step 11 saved to database."}),oe(!1)}catch(ve){console.error("handleSaveStep11",ve),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),oe(!1)}};return e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Plumbing Estimator"}),e.jsxs(gl,{mode:"wait",children:[o===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Products"}),re.length===0?e.jsx(Vs,{className:"p-6 bg-yellow-50 border-yellow-200",children:e.jsx("p",{className:"text-center text-yellow-800",children:"No plumbing materials available in database"})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:re.map(ve=>{const Ge=ve.name||ve.subcategory||ve.subcategory_name||"",at=se(Ge).length;return e.jsx(Vs,{className:"cursor-pointer border-2 hover:border-primary transition-all hover:shadow-lg",onClick:()=>{f(Ge),h(ve),w([]),F({}),c(2)},children:e.jsxs(fn,{className:"p-6 text-center",children:[e.jsx("p",{className:"font-bold text-lg",children:Ge}),e.jsxs("p",{className:"text-sm text-slate-500",children:[at," items available"]})]})},ve.id||Ge)})})})]},"s1"),o===2&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Available materials for ",p,". Best price shop is pre-selected."]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[600px] overflow-y-auto p-3 border rounded bg-slate-50",children:se(p).map(ve=>{const Ge=N.some(pt=>pt.materialId===ve.id),at=N.find(pt=>pt.materialId===ve.id),Se=je(ve.id),vt=at?.selectedBrand||Se[0]||"Generic",ht=De(ve.id,vt);return e.jsxs("div",{className:Xs("p-4 border-2 rounded-lg transition-all",Ge?"border-primary bg-white":"border-slate-200 bg-white"),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(gn,{checked:Ge,onCheckedChange:()=>ye(ve.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:ve.name}),e.jsx("p",{className:"text-xs text-slate-500",children:ve.code})]})]}),Ge&&e.jsxs("div",{className:"mt-4 ml-8 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand"}),e.jsxs(Lr,{value:vt,onValueChange:pt=>{w(At=>At.map(Ct=>Ct.materialId===ve.id?{...Ct,selectedBrand:pt}:Ct));const Ht=De(ve.id,pt).sort((At,Ct)=>(At.rate||0)-(Ct.rate||0))[0];Ht&&w(At=>At.map(Ct=>Ct.materialId===ve.id?{...Ct,selectedShopId:Ht.shopId||""}:Ct))},children:[e.jsx(Er,{className:"h-8",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:Se.map(pt=>e.jsx(wr,{value:pt,children:pt},pt))})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop"}),e.jsxs(Lr,{value:at?.selectedShopId||"",onValueChange:pt=>w(Ze=>Ze.map(Ht=>Ht.materialId===ve.id?{...Ht,selectedShopId:pt}:Ht)),children:[e.jsx(Er,{className:"h-8",children:e.jsx(Dr,{placeholder:"Choose shop"})}),e.jsx(Tr,{children:ht.map(pt=>{const Ze=t.find(Ht=>Ht.id===pt.shopId);return e.jsxs(wr,{value:pt.shopId||"",children:[Ze?.name||"Unknown","  ",pt.rate]},pt.id)})})]})]})]})]},ve.id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(1),className:"flex-1",children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ie,{disabled:N.length===0,onClick:()=>c(3),className:"flex-1",children:["Review Materials ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"s2"),o===3&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-900 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-3 text-left",children:"Item"}),e.jsx("th",{className:"border p-3",children:"Description"}),e.jsx("th",{className:"border p-3",children:"Brand"}),e.jsx("th",{className:"border p-3",children:"Qty"}),e.jsx("th",{className:"border p-3",children:"Unit"}),e.jsx("th",{className:"border p-3",children:"Shop"}),e.jsx("th",{className:"border p-3 text-right",children:"Rate ()"}),e.jsx("th",{className:"border p-3 text-right",children:"Amount ()"})]})}),e.jsx("tbody",{children:Z.map(ve=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"border p-3 font-bold",children:ve.name}),e.jsx("td",{className:"border p-3 text-xs",children:ve.code}),e.jsx("td",{className:"border p-3 text-center",children:N.find(Ge=>Ge.materialId===ve.id)?.selectedBrand||"Generic"}),e.jsx("td",{className:"border p-3",children:e.jsx(Ve,{type:"number",min:"1",value:E[ve.id||""]?.quantity??ve.quantity,onChange:Ge=>F(at=>({...at,[ve.id]:{...at[ve.id]||{supplyRate:ve.supplyRate,installRate:0},quantity:Number(Ge.target.value)}})),className:"h-8 w-20 text-center"})}),e.jsx("td",{className:"border p-3 text-center",children:ve.unit}),e.jsx("td",{className:"border p-3 text-sm",children:ve.shopName}),e.jsx("td",{className:"border p-3",children:e.jsx(Ve,{type:"number",value:E[ve.id||""]?.supplyRate??ve.supplyRate,onChange:Ge=>F(at=>({...at,[ve.id]:{...at[ve.id]||{quantity:1,installRate:0},supplyRate:Number(Ge.target.value)}})),className:"h-8 w-24 text-right"})}),e.jsxs("td",{className:"border p-3 text-right font-bold",children:["",(Number(E[ve.id||""]?.quantity??ve.quantity)*Number(E[ve.id||""]?.supplyRate??ve.supplyRate??0)).toFixed(2)]})]},ve.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded font-bold text-lg",children:[e.jsx("span",{children:"Total Cost"}),e.jsxs("span",{children:["",Z.reduce((ve,Ge)=>ve+Number(E[Ge.id||""]?.quantity??Ge.quantity)*Number(E[Ge.id||""]?.supplyRate??Ge.supplyRate??0),0).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(2),className:"flex-1",children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ie,{onClick:()=>c(8),className:"flex-1",children:["Review BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"s3"),o===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-green-600 text-3xl",children:""})}),e.jsx("h2",{className:"text-4xl font-bold",children:"Bill of Materials (BOM)"}),e.jsxs("p",{className:"text-slate-600 mt-2",children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsx(Vs,{className:"p-6 border-slate-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wide",children:"Product Type"}),e.jsx("p",{className:"text-xl font-bold text-slate-900 mt-1",children:p})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wide",children:"Quantities"}),e.jsxs("p",{className:"text-xl font-bold text-slate-900 mt-1",children:[Z.length," Items"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Materials Schedule"}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsx("thead",{className:"bg-slate-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"S.No"}),e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"Description"}),e.jsx("th",{className:"p-3 text-center font-semibold text-slate-700",children:"Unit"}),e.jsx("th",{className:"p-3 text-center font-semibold text-slate-700",children:"Qty"}),e.jsx("th",{className:"p-3 text-right font-semibold text-slate-700",children:"Rate (#)"}),e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"Supplier"}),e.jsx("th",{className:"p-3 text-right font-semibold text-slate-700",children:"Amount ()"})]})}),e.jsx("tbody",{children:Z.map((ve,Ge)=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:Ge+1}),e.jsx("td",{className:"p-3 font-medium",children:ve.name}),e.jsx("td",{className:"p-3 text-center",children:ve.unit}),e.jsx("td",{className:"p-3 text-center",children:E[ve.id||""]?.quantity??ve.quantity}),e.jsx("td",{className:"p-3 text-right",children:Number(E[ve.id||""]?.supplyRate??ve.supplyRate??0).toFixed(2)}),e.jsx("td",{className:"p-3",children:ve.shopName||"Market"}),e.jsx("td",{className:"p-3 text-right font-bold",children:(Number(E[ve.id||""]?.quantity??ve.quantity)*Number(E[ve.id||""]?.supplyRate??ve.supplyRate??0)).toFixed(2)})]},ve.id))})]})})]}),e.jsx(Vs,{className:"p-6 bg-slate-50 border-slate-200",children:e.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Total Materials"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:Z.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Total Quantity"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:Z.reduce((ve,Ge)=>ve+(E[Ge.id||""]?.quantity??Ge.quantity),0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Grand Total"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:["",fe.toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(3),children:"Back"}),e.jsx(Ie,{className:"bg-green-600 hover:bg-green-700",children:"Export Excel"}),e.jsx(Ie,{className:"bg-blue-600 hover:bg-blue-700",children:"Export PDF"}),e.jsxs(Ie,{onClick:()=>c(9),className:"bg-blue-600 hover:bg-blue-700",children:["Add to BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsx(Ie,{variant:"outline",onClick:()=>{c(1),w([]),F({}),k({}),G({}),V({}),J({})},children:"New Estimate"})]})]},"s8"),o===9&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Add to BOQ"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Plumbing Estimator"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(Ie,{variant:"destructive",children:"Delete Selected"}),e.jsx(Ie,{onClick:we,className:"bg-slate-600 hover:bg-slate-700",children:"Save"}),e.jsx(Ie,{onClick:()=>c(11),className:"bg-blue-600 hover:bg-blue-700",children:"Add to BOQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Saved BOQs"}),he.length===0?e.jsx("p",{className:"text-slate-500",children:"No saved BOQs"}):null,e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsx("thead",{className:"bg-slate-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:e.jsx(gn,{})}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"S.No"}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"Item"}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"Description"}),e.jsx("th",{className:"p-3 font-semibold",children:"Unit"}),e.jsx("th",{className:"p-3 font-semibold",children:"Qty"}),e.jsx("th",{className:"p-3 font-semibold",children:"Rate"}),e.jsx("th",{className:"p-3 font-semibold",children:"Amount"})]})}),e.jsx("tbody",{children:Z.map((ve,Ge)=>e.jsxs(Mo.Fragment,{children:[e.jsxs("tr",{className:"border-b bg-slate-50",children:[e.jsx("td",{className:"p-3",children:e.jsx(gn,{})}),e.jsxs("td",{colSpan:7,className:"p-3",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[Ge+1,". ",ve.name]}),M[ve.id||""]&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Group description"})]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{}),e.jsx("td",{className:"p-3 text-center",children:Ge+1}),e.jsx("td",{className:"p-3 font-medium",children:ve.name}),e.jsx("td",{className:"p-3",children:e.jsx("textarea",{value:M[ve.id||""]||"",onChange:at=>k(Se=>({...Se,[ve.id]:at.target.value})),placeholder:"Description",className:"w-full h-12 p-2 rounded border text-xs"})}),e.jsx("td",{className:"p-3 text-center",children:ve.unit}),e.jsx("td",{className:"p-3",children:e.jsx(Ve,{type:"number",value:E[ve.id||""]?.quantity??ve.quantity,onChange:at=>F(Se=>({...Se,[ve.id]:{...Se[ve.id]||{supplyRate:ve.supplyRate,installRate:0},quantity:Number(at.target.value)}})),className:"h-8 w-20 text-center"})}),e.jsx("td",{className:"p-3",children:e.jsx(Ve,{type:"number",value:E[ve.id||""]?.supplyRate??ve.supplyRate,onChange:at=>F(Se=>({...Se,[ve.id]:{...Se[ve.id]||{quantity:1,installRate:0},supplyRate:Number(at.target.value)}})),className:"h-8 w-24 text-right"})}),e.jsxs("td",{className:"p-3 text-right font-bold",children:["",(Number(E[ve.id||""]?.quantity??ve.quantity)*Number(E[ve.id||""]?.supplyRate??ve.supplyRate??0)).toFixed(2)]})]})]},ve.id))})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx(Ie,{onClick:()=>c(10),className:"bg-blue-600 hover:bg-blue-700",children:"Finalize PO"}),e.jsxs(Ie,{className:"bg-blue-600 hover:bg-blue-700",children:["Export PDF ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"s9"),o===10&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Finalize Bill"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-slate-50 rounded border",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:l,onChange:ve=>g(ve.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:v,onChange:ve=>m(ve.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",placeholder:"mm/dd/yyyy"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{placeholder:"Enter customer address"})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{defaultValue:"50% Advance and 50% on Completion"})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Material Description Entry"}),e.jsxs(Lr,{children:[e.jsx(Er,{children:e.jsx(Dr,{placeholder:"Select Material"})}),e.jsx(Tr,{children:Z.map(ve=>e.jsx(wr,{value:ve.id||"",children:ve.name},ve.id))})]})]}),e.jsxs("div",{className:"border-t-2 pt-6 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"w-32 h-20 bg-black rounded flex items-center justify-center text-white font-bold text-xs text-center",children:"PLUMBING"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-bold text-sm",children:"PLUMBING ESTIMATOR"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-600",children:"BILL"}),e.jsx("p",{className:"font-bold",children:l})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm mb-2",children:"Concept Trunk Interiors"}),e.jsx("p",{className:"text-xs",children:"12/36A, Indira Nagar"}),e.jsx("p",{className:"text-xs",children:"Medavakkam"}),e.jsx("p",{className:"text-xs",children:"Chennai  600100"}),e.jsx("p",{className:"text-xs",children:"GSTIN: 33ASOPS5560M1Z1"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-slate-600",children:["Bill Date: ",v]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Due Date"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Terms: 50% Advance and 50% on Completion"}),e.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Customer Name"})]})]}),e.jsxs("div",{className:"border-t pt-4 mb-6 text-sm",children:[e.jsx("p",{className:"font-bold mb-2",children:"Bill From"}),e.jsx("p",{className:"font-bold",children:"New TamilNadu Steel"}),e.jsx("p",{className:"text-xs",children:"Chennai"}),e.jsx("p",{className:"text-xs",children:"Tamil Nadu"}),e.jsx("p",{className:"text-xs",children:"600100"})]}),e.jsx("div",{className:"overflow-x-auto border rounded mb-6",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-slate-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"S.No"}),e.jsx("th",{className:"p-2 text-left",children:"Item"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2",children:"HSN"}),e.jsx("th",{className:"p-2",children:"Qty"}),e.jsx("th",{className:"p-2 text-right",children:"Rate"}),e.jsx("th",{className:"p-2 text-left",children:"Supplier"}),e.jsx("th",{className:"p-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:Z.map((ve,Ge)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:Ge+1}),e.jsx("td",{className:"p-2",children:ve.name}),e.jsx("td",{className:"p-2",children:M[ve.id||""]||ve.name}),e.jsx("td",{className:"p-2",children:"7308"}),e.jsx("td",{className:"p-2",children:E[ve.id||""]?.quantity??ve.quantity}),e.jsx("td",{className:"p-2 text-right",children:Number(E[ve.id||""]?.supplyRate??ve.supplyRate??0).toFixed(2)}),e.jsx("td",{className:"p-2",children:ve.shopName||"Market"}),e.jsx("td",{className:"p-2 text-right",children:(Number(E[ve.id||""]?.quantity??ve.quantity)*Number(E[ve.id||""]?.supplyRate??ve.supplyRate??0)).toFixed(2)})]},ve.id))})]})}),e.jsxs("div",{className:"flex justify-end gap-32 text-sm mb-6 font-bold",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Sub Total"}),e.jsx("p",{children:"SGST 9%"}),e.jsx("p",{children:"CGST 9%"}),e.jsx("p",{children:"Round Off"}),e.jsx("p",{className:"border-t pt-1",children:"Total"}),e.jsx("p",{children:"Balance Due"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["",fe.toFixed(2)]}),e.jsxs("p",{children:["",ue.toFixed(2)]}),e.jsxs("p",{children:["",pe.toFixed(2)]}),e.jsxs("p",{children:["",Ce.toFixed(2)]}),e.jsxs("p",{className:"border-t pt-1",children:["",Ne.toFixed(2)]}),e.jsxs("p",{children:["",Ne.toFixed(2)]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-xs",children:"Authorized Signature"}),e.jsx("div",{className:"h-20"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsxs(Ie,{onClick:()=>c(11),className:"bg-blue-600 hover:bg-blue-700",children:["Continue ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs(Ie,{className:"bg-blue-600 hover:bg-blue-700",children:["Export PDF ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"s10"),o===11&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-24 h-24 bg-black rounded flex items-center justify-center text-white font-bold text-xs text-center",children:"PLUMBING"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-wide",children:"PLUMBING ESTIMATOR"}),e.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:new Date().toISOString().slice(0,10)})})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-xs bg-white",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-slate-100 border-b",children:[e.jsx("th",{className:"p-2 text-left",children:"S.No"}),e.jsx("th",{className:"p-2 text-left",children:"Item"}),e.jsx("th",{className:"p-2 text-left",children:"Location"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2",children:"Unit"}),e.jsx("th",{className:"p-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"p-2 text-center border-l",children:"Rate"}),e.jsx("th",{colSpan:2,className:"p-2 text-center border-l",children:"Amount"})]}),e.jsxs("tr",{className:"bg-slate-50 border-b",children:[e.jsx("th",{colSpan:6}),e.jsx("th",{className:"p-2 border-l text-center text-xs font-semibold",children:"Supply"}),e.jsx("th",{className:"p-2 text-center text-xs font-semibold",children:"Installation"}),e.jsx("th",{className:"p-2 border-l text-center text-xs font-semibold",children:"Supply"}),e.jsx("th",{className:"p-2 text-center text-xs font-semibold",children:"Installation"})]})]}),e.jsx("tbody",{children:Z.map((ve,Ge)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-bold",children:Ge+1}),e.jsx("td",{className:"p-2 font-bold",children:ve.name}),e.jsx("td",{className:"p-2",children:e.jsx(Ve,{value:K[ve.id||""]||"",onChange:at=>G(Se=>({...Se,[ve.id]:at.target.value})),placeholder:"Location",className:"h-7 text-xs p-1"})}),e.jsx("td",{className:"p-2",children:e.jsx("textarea",{value:M[ve.id||""]||"",onChange:at=>k(Se=>({...Se,[ve.id]:at.target.value})),placeholder:"Description",className:"w-full h-12 p-1 rounded border text-xs"})}),e.jsx("td",{className:"p-2 text-center",children:ve.unit}),e.jsx("td",{className:"p-2 text-center",children:E[ve.id||""]?.quantity??ve.quantity}),e.jsx("td",{className:"p-2 border-l",children:e.jsx(Ve,{type:"number",value:ee[ve.id||""]||(E[ve.id||""]?.supplyRate??ve.supplyRate??0),onChange:at=>V(Se=>({...Se,[ve.id]:Number(at.target.value)})),className:"h-7 text-xs p-1 text-right w-20"})}),e.jsx("td",{className:"p-2",children:e.jsx(Ve,{type:"number",value:X[ve.id||""]||0,onChange:at=>J(Se=>({...Se,[ve.id]:Number(at.target.value)})),className:"h-7 text-xs p-1 text-right w-20"})}),e.jsxs("td",{className:"p-2 border-l text-right font-bold",children:["",(Number(E[ve.id||""]?.quantity??ve.quantity)*Number(ee[ve.id||""]||(E[ve.id||""]?.supplyRate??ve.supplyRate??0))).toFixed(2)]}),e.jsxs("td",{className:"p-2 text-right font-bold",children:["",(Number(E[ve.id||""]?.quantity??ve.quantity)*Number(X[ve.id||""]||0)).toFixed(2)]})]},ve.id))})]})}),e.jsx("div",{className:"text-right p-4 bg-slate-50 rounded border",children:e.jsxs("p",{className:"font-bold text-slate-900",children:["Subtotal ",e.jsxs("span",{className:"ml-8",children:["",fe.toFixed(2)]})]})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ie,{variant:"destructive",children:"Delete Selected"}),e.jsx(Ie,{className:"bg-blue-600 hover:bg-blue-700",children:"Add Product"}),e.jsx(Ie,{onClick:qe,disabled:ce,className:"bg-slate-600 hover:bg-slate-700",children:"Save"}),e.jsx(Ie,{onClick:Te,className:"bg-blue-600 hover:bg-blue-700",children:"Create BOQ"})]})]},"s11"),o===12&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:24},children:[e.jsx("div",{style:{fontSize:20,fontWeight:700,width:56,height:56,backgroundColor:"#000",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:"PLB"}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:24,fontWeight:700},children:"PLUMBING ESTIMATOR"}),e.jsx("div",{style:{fontSize:13,color:"#666",marginTop:4},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:14,fontWeight:600},children:v})})]}),Z.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No materials selected. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:Z.map((ve,Ge)=>{const at=Number(ee[ve.id||""]||(E[ve.id||""]?.supplyRate??ve.supplyRate??0)),Se=Number(X[ve.id||""]||0),vt=Number(E[ve.id||""]?.quantity??ve.quantity??0),ht=vt*at,pt=vt*Se,Ze=K[ve.id||""]||"",Ht=M[ve.id||""]||"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:Ge+1}),e.jsx("td",{className:"border px-2 py-1",children:ve.productLabel||ve.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:Ze||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Ht||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ve.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:vt}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",at.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",Se.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",ht.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",pt.toFixed(2)]})]},ve.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Z.reduce((ve,Ge)=>{const at=Number(E[Ge.id||""]?.quantity??Ge.quantity??0),Se=Number(X[Ge.id||""]||0);return ve+at*Se},0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(Ie,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ie,{onClick:qe,disabled:ce,className:"bg-blue-600 hover:bg-blue-700",children:"Save to DB"}),e.jsx(Ie,{onClick:()=>{c(1),w([]),F({}),k({}),G({}),V({}),J({})},className:"bg-blue-600 hover:bg-blue-700",children:"Add More Products"}),e.jsx(Ie,{className:"bg-blue-600 hover:bg-blue-700",children:"Export Excel"})]})]},"s12")]})]})})}const qK="/image.png";function g1({materials:t,estimatorTitle:s,onBack:n,storeShops:r=[],selectedMaterials:o=[],materialDescriptions:c={},onMaterialDescriptionsChange:p}){const[f,A]=C.useState(""),[h,l]=C.useState(new Date().toISOString().slice(0,10)),[g,v]=C.useState(""),[m,N]=C.useState("50% Advance and 50% on Completion"),[w,E]=C.useState(""),[F,M]=C.useState(""),[k,K]=C.useState(""),[G,ee]=C.useState(""),[V,X]=C.useState(c);C.useEffect(()=>{if(t.length>0&&r.length>0&&o.length>0){const oe=o[0]?.selectedShopId,ne=r.find(re=>re.id===oe);if(ne){const re=[ne.name||"",ne.address||"",ne.area||"",ne.city||"",ne.state||"",ne.pincode||"",ne.gstin?`GSTIN: ${ne.gstin}`:"",ne.phone?`Ph: ${ne.phone}`:""].filter(Boolean);K(re.join(`
`))}}},[t,r,o]);const J=t.reduce((oe,ne)=>oe+ne.quantity*ne.rate,0),he=J*.09,q=J*.09,ie=Math.round((J+he+q)*100)/100-(J+he+q),Ae=J+he+q+ie,ce=async()=>{const oe=document.getElementById("boq-final-pdf");if(!oe){alert("Final BOQ content not found");return}const ne=(await Uc(async()=>{const{default:re}=await Promise.resolve().then(()=>ru);return{default:re}},void 0)).default;ne().set({margin:10,filename:`BOQ-${f||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(oe).save()};return e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:f,onChange:oe=>A(oe.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:h,onChange:oe=>l(oe.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:g,onChange:oe=>v(oe.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:w,onChange:oe=>E(oe.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:F,onChange:oe=>M(oe.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:m,onChange:oe=>N(oe.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:G,onChange:oe=>ee(oe.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),t.map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),G&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:V[G]||"",onChange:oe=>{const ne={...V,[G]:oe.target.value};X(ne),p?.(ne)}})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{width:"55%",display:"flex",gap:12},children:[e.jsx("img",{src:qK,alt:"Concept Trunk Interiors",style:{height:60,flexShrink:0}}),e.jsxs("div",{style:{lineHeight:1.4},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap",fontSize:11},children:k})]})]}),e.jsxs("div",{style:{textAlign:"right",width:"40%"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:16},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",f||"-"]}),e.jsxs("div",{children:["Bill Date: ",h&&new Date(h).toLocaleDateString("en-GB")]}),e.jsxs("div",{children:["Due Date: ",g&&new Date(g).toLocaleDateString("en-GB")]}),e.jsxs("div",{style:{marginTop:6},children:["Terms: ",m]}),e.jsxs("div",{style:{marginTop:6},children:["Customer: ",w]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{marginBottom:12,lineHeight:1.5},children:[e.jsx("strong",{style:{fontSize:12},children:"Bill To:"}),e.jsxs("div",{style:{fontSize:11,marginTop:4},children:[w,e.jsx("br",{}),F]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","Unit","Qty","Rate","Amount"].map(oe=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11,textAlign:oe==="Qty"||oe==="Rate"||oe==="Amount"?"right":"left"},children:oe},oe))})}),e.jsx("tbody",{children:t.map((oe,ne)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"center"},children:ne+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:oe.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:V[oe.id]||oe.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"center"},children:oe.unit}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:Number(oe.quantity||0).toFixed(0)}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:Number(oe.rate||0).toFixed(2)}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right",fontWeight:600},children:(Number(oe.quantity||0)*Number(oe.rate||0)).toFixed(2)})]},oe.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300,borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"Sub Total"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(J||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"SGST 9%"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(he||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"CGST 9%"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(q||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"Round Off"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(ie||0).toFixed(2)})]}),e.jsxs("tr",{style:{borderTop:"2px solid #000",borderBottom:"2px solid #000"},children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11,fontWeight:"bold"},children:"Total"}),e.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:12,fontWeight:"bold"},children:["",Number(Ae||0).toFixed(2)]})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ie,{onClick:n,variant:"outline",children:"Back"}),e.jsx(Ie,{onClick:ce,children:"Export PDF"})]})]})}function WK(){const[t,s]=C.useState(1),[n,r]=C.useState(""),[o,c]=C.useState([]),{shops:p}=ci(),[f,A]=C.useState({}),[h,l]=C.useState(""),g=()=>{const v=parseFloat(n)||0;let m=[];m.push({item:"MS Pipe/Tube",description:"Railing / Structural",quantity:v,unit:"rft"}),m.push({item:"Base Plates",description:"Mounting",quantity:Math.ceil(v/4),unit:"nos"}),m.push({item:"Fasteners / Bolts",description:"Fixing",quantity:Math.ceil(v/4)*4,unit:"nos"}),m.push({item:"Paint",description:"Protective coating",quantity:Math.ceil(v/20),unit:"liters"}),c(m),s(2)};return e.jsx(ni,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"MS Work Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate Mild Steel work requirements."})]}),e.jsx(Vs,{className:"border-border/50 shadow-lg",children:e.jsx(fn,{className:"p-6",children:e.jsxs(gl,{mode:"wait",children:[t===1&&e.jsxs(hs.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Dimensions"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Total Running Feet"}),e.jsx(Ve,{type:"number",value:n,onChange:v=>r(v.target.value),placeholder:"e.g. 50"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Ie,{onClick:g,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(rf,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(hs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(rf,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),o.map((v,m)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:v.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:v.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[v.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:v.unit})]})]},m))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Ie,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ra,{href:"/item-master",children:e.jsxs(Ie,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Ie,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(g1,{materials:o.map((v,m)=>({id:String(m),name:v.item,quantity:v.quantity,unit:v.unit,rate:0,shopName:"Computed"})),estimatorTitle:"MS Work Estimator",onBack:()=>s(2),storeShops:p,selectedMaterials:[],materialDescriptions:f,onMaterialDescriptionsChange:A})]})})})]})})}function YK(){const[t,s]=C.useState(1),[n,r]=C.useState(""),[o,c]=C.useState([]),{shops:p}=ci(),[f,A]=C.useState({}),[h,l]=C.useState(""),g=()=>{const v=parseFloat(n)||0;let m=[];m.push({item:"SS 304 Pipe / Tube",description:"Railing / Balustrade",quantity:v,unit:"rft"}),m.push({item:"SS Base Plates",description:"Mounting",quantity:Math.ceil(v/4),unit:"nos"}),m.push({item:"SS Fasteners",description:"Fixing",quantity:Math.ceil(v/4)*4,unit:"nos"}),m.push({item:"Polishing",description:"Finishing",quantity:Math.ceil(v/20),unit:"set"}),c(m),s(2)};return e.jsx(ni,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"SS Work Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate Stainless Steel work requirements."})]}),e.jsx(Vs,{className:"border-border/50 shadow-lg",children:e.jsx(fn,{className:"p-6",children:e.jsxs(gl,{mode:"wait",children:[t===1&&e.jsxs(hs.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Dimensions"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Total Running Feet of Railing"}),e.jsx(Ve,{type:"number",value:n,onChange:v=>r(v.target.value),placeholder:"e.g. 50"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Ie,{onClick:g,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(rf,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(hs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(rf,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),o.map((v,m)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:v.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:v.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[v.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:v.unit})]})]},m))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Ie,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ra,{href:"/item-master",children:e.jsxs(Ie,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Ie,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(g1,{materials:o.map((v,m)=>({id:String(m),name:v.item,quantity:v.quantity,unit:v.unit,rate:0,shopName:"Computed"})),estimatorTitle:"SS Work Estimator",onBack:()=>s(2),storeShops:p,selectedMaterials:[],materialDescriptions:f,onMaterialDescriptionsChange:A})]})})})]})})}function XK(){const[t,s]=C.useState(1),[n,r]=C.useState(""),[o,c]=C.useState([]),{shops:p}=ci(),[f,A]=C.useState({}),[h,l]=C.useState(""),g=()=>{const v=parseFloat(n)||0;let m=[];m.push({item:"Sprinkler Points",description:"1 per 100 sq.ft",quantity:Math.ceil(v/100),unit:"nos"}),m.push({item:"MS Pipe 25mm",description:"Distribution line",quantity:Math.ceil(v/100)*10,unit:"rft"}),m.push({item:"Fire Extinguishers",description:"1 per 1000 sq.ft",quantity:Math.ceil(v/1e3),unit:"nos"}),m.push({item:"Smoke Detectors",description:"1 per 400 sq.ft",quantity:Math.ceil(v/400),unit:"nos"}),c(m),s(2)};return e.jsx(ni,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"Fire-Fighting Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate fire safety system requirements."})]}),e.jsx(Vs,{className:"border-border/50 shadow-lg",children:e.jsx(fn,{className:"p-6",children:e.jsxs(gl,{mode:"wait",children:[t===1&&e.jsxs(hs.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Floor Area"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Total Floor Area (sq.ft)"}),e.jsx(Ve,{type:"number",value:n,onChange:v=>r(v.target.value),placeholder:"e.g. 2000"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Ie,{onClick:g,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(rf,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(hs.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(rf,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),o.map((v,m)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:v.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:v.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[v.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:v.unit})]})]},m))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Ie,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ra,{href:"/item-master",children:e.jsxs(Ie,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Ie,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(g1,{materials:o.map((v,m)=>({id:String(m),name:v.item,quantity:v.quantity,unit:v.unit,rate:0,shopName:"Computed"})),estimatorTitle:"Fire Fighting Estimator",onBack:()=>s(2),storeShops:p,selectedMaterials:[],materialDescriptions:f,onMaterialDescriptionsChange:A})]})})})]})})}const JK="/image.png";function ZK(){const[,t]=VI("/estimators/:subcategory"),[,s]=el(),n=t?.subcategory?decodeURIComponent(t.subcategory):"",{shops:r,materials:o,products:c}=ci(),{toast:p}=Ai(),[f,A]=C.useState(1),[h,l]=C.useState(""),[g,v]=C.useState(null),[m,N]=C.useState(`${n.toUpperCase().slice(0,3)}-${Math.floor(1e3+Math.random()*9e3)}`),[w,E]=C.useState(new Date().toISOString().slice(0,10)),[F,M]=C.useState(new Date(Date.now()+720*60*60*1e3).toISOString().slice(0,10)),[k,K]=C.useState(""),[G,ee]=C.useState(""),[V,X]=C.useState("1. Payment Terms: 50% advance, 50% on completion"),[J,he]=C.useState([]),[q,ie]=C.useState({}),[Ae,ce]=C.useState({}),[oe,ne]=C.useState({}),[re,se]=C.useState([]),[je,De]=C.useState(""),[ge,Z]=C.useState([]),fe=C.useRef(""),[ue,pe]=C.useState([]),[Ce,Ne]=C.useState(!1),ye=n.toLowerCase(),we=ye.replace(/[-\s]/g,""),Te=C.useMemo(()=>{const $e=g?.id||g?.name||h||"product";return`group_${String($e).replace(/\s+/g,"_").toLowerCase()}`},[h,g]),qe=C.useMemo(()=>{const $e=Jt=>String(Jt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),ke=Jt=>String(Jt||"").toUpperCase().replace(/[^A-Z0-9]+/g,"").trim(),it=$e(n),tt=ke(n);return(c||[]).filter(Jt=>{const Qt=$e(Jt.subcategory||Jt.subcategory_name||""),ss=ke(Jt.subcategory||Jt.subcategory_name||"");return Qt===it||Qt.includes(it)||it.includes(Qt)||ss===tt||ss.includes(tt)||tt.includes(ss)})},[c,n]),ve=$e=>{if(!$e)return[];const ke=Qt=>String(Qt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),it=Qt=>String(Qt||"").toUpperCase().replace(/[^A-Z0-9]+/g,"").trim(),tt=ke($e),Jt=it($e);return(o||[]).filter(Qt=>{const ss=ke(Qt.product||""),dt=it(Qt.product||""),qt=ke(Qt.subCategory||""),Vt=it(Qt.subCategory||"");return ss===tt||ss.includes(tt)||dt===Jt||dt.includes(Jt)||qt===tt||qt.includes(tt)||Vt===Jt||Vt.includes(Jt)})},Ge=C.useMemo(()=>h?ve(h).filter($e=>J.some(ke=>ke.materialId===$e.id)).map($e=>{const ke=J.find(Qt=>Qt.materialId===$e.id),it=(r||[]).find(Qt=>Qt.id===ke?.selectedShopId),tt=q[$e.id]?.quantity??1,Jt=q[$e.id]?.supplyRate??$e.rate??0;return{...$e,quantity:tt,supplyRate:Jt,installRate:q[$e.id]?.installRate??0,shopName:it?.name||"Market",shopId:ke?.selectedShopId||"",brandName:ke?.selectedBrand||$e.brandName||"Generic"}}):[],[q,J,h,o,r]),at=C.useMemo(()=>Ge.reduce(($e,ke)=>{const it=Number(q[ke.id]?.quantity??ke.quantity??0),tt=Number(q[ke.id]?.supplyRate??ke.supplyRate??0);return $e+it*tt},0),[q,Ge]),Se=C.useMemo(()=>Ge.reduce(($e,ke)=>{const it=Number(q[ke.id]?.quantity??ke.quantity??0),tt=Number(q[ke.id]?.installRate??ke.installRate??0);return $e+it*tt},0),[q,Ge]),vt=at+Se,ht=C.useMemo(()=>{const $e=q[Te]?.quantity;return Number.isFinite($e)?Number($e):1},[q,Te]),pt=C.useMemo(()=>{const $e=Math.max(1,ht||1);return at/$e},[ht,at]),Ze=C.useMemo(()=>{const $e=Math.max(1,ht||1);return Se/$e},[ht,Se]),Ht=async()=>{try{const $e=await nt("/api/boq");if($e.status===401){Z([]),fe.current!=="401"&&(fe.current="401",p({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!$e.ok){const tt=await $e.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${tt||$e.status}`)}if(!($e.headers.get("content-type")||"").includes("application/json")){Z([]);return}const it=await $e.json();Z(it.boqs||[]),fe.current=""}catch($e){const ke=String($e?.message||$e||"");ke&&fe.current!==ke&&(fe.current=ke,console.warn("fetchSavedBoqs",$e)),Z([])}};C.useEffect(()=>{f===9&&Ht()},[f]),C.useEffect(()=>{m&&f>=11&&At()},[m,f]);const At=async()=>{try{Ne(!0);const $e=await nt(`/api/estimator-step11-groups?session_id=${m}&estimator=${we}`,{headers:{}});if($e.ok){const ke=await $e.json();pe(ke.items||[])}}catch($e){console.warn("load step11 failed",$e)}finally{Ne(!1)}},Ct=$e=>{if(!$e){se([]);return}const ke=[Te,...Ge.map(it=>it.id)];se(ke)},It=()=>{if(re.length!==0){if(re.includes(Te)){he([]),ie($e=>{const ke={...$e};return Object.keys(ke).forEach(it=>delete ke[it]),ke}),ce({}),ne({}),se([]);return}he($e=>$e.filter(ke=>!re.includes(ke.materialId))),ie($e=>{const ke={...$e};return re.forEach(it=>delete ke[it]),ke}),ce($e=>{const ke={...$e};return re.forEach(it=>delete ke[it]),ke}),ne($e=>{const ke={...$e};return re.forEach(it=>delete ke[it]),ke}),se([])}},Wt=async()=>{try{if(!m.trim()){p({title:"Error",description:"Please enter a Bill No.",variant:"destructive"});return}const $e=Ge.map((it,tt)=>({session_id:m,estimator:ye,s_no:tt+1,material_id:it.id,name:it.name,unit:it.unit||"pcs",quantity:Number(q[it.id]?.quantity??it.quantity??0),supply_rate:Number(q[it.id]?.supplyRate??it.supplyRate??0),install_rate:Number(q[it.id]?.installRate??it.installRate??0),shop_id:it.shopId||"",shop_name:it.shopName||"",description:Ae[it.id]||"",location:oe[it.id]||"",group_id:Te,group_name:h||g?.name||"",group_qty:ht,group_description:Ae[Te]||""}));if(!(await nt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:ye,session_id:m,items:$e})})).ok)throw new Error("Save failed");p({title:"Success",description:"Saved."})}catch($e){p({title:"Error",description:$e?.message||"Failed to save.",variant:"destructive"})}},Es=async($e,ke)=>{const it=document.getElementById($e);if(!it){p({title:"Error",description:"PDF content not found",variant:"destructive"});return}try{const tt=(await Uc(async()=>{const{default:Jt}=await Promise.resolve().then(()=>ru);return{default:Jt}},void 0)).default;tt().set({margin:[10,10,10,10],filename:ke,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:Jt=>Jt.className?.toString().includes("bg-")||Jt.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(it).save()}catch(tt){console.error("PDF Export Error:",tt),p({title:"Error",description:"PDF export failed. Check console.",variant:"destructive"})}},Ss=async()=>{try{Ne(!0);const $e={estimator:we,session_id:m,s_no:1,group_key:`${ye}_${Te}`,group_id:Te,item_name:h||g?.name||"Product",unit:"pcs",quantity:ht,location:oe[Te]||"",description:Ae[Te]||"",supply_rate:pt,install_rate:Ze,supply_amount:ht*pt,install_amount:ht*Ze,supply_subtotal:at,install_subtotal:Se,sgst:vt*.09,cgst:vt*.09,round_off:0,grand_total:vt};if(!(await nt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:[$e]})})).ok)throw new Error("Save failed");await At(),p({title:"Success",description:"Saved."})}catch($e){p({title:"Error",description:$e?.message||"Failed to save.",variant:"destructive"})}finally{Ne(!1)}},_s=()=>{A(1),l(""),v(null),he([]),ie({}),ce({}),ne({}),se([]),De(""),pe([]),N(`${n.toUpperCase().slice(0,3)}-${Math.floor(1e3+Math.random()*9e3)}`),E(new Date().toISOString().slice(0,10))};return n?e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold capitalize",children:[n," Estimator"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Complete workflow: Steps 1-11"})]}),e.jsxs(gl,{mode:"wait",children:[f===1&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Step 1: Select Product"}),qe.length===0?e.jsx(Vs,{className:"p-6 bg-yellow-50 border-yellow-200",children:e.jsx("p",{className:"text-center text-yellow-800",children:"No products found for this sub-category in the database."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:qe.map($e=>e.jsx(Vs,{className:Xs("cursor-pointer border-2 hover:border-primary transition-all",h===$e.name?"border-primary bg-blue-50":"border-gray-200"),onClick:()=>{l($e.name),v($e),he([]),ie({}),ce({}),ne({}),se([]),De("")},children:e.jsxs(fn,{className:"p-4",children:[e.jsx("p",{className:"font-semibold text-lg",children:$e.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[ve($e.name).length," materials available"]})]})},$e.id))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(Ie,{onClick:()=>s("/estimators"),variant:"outline",children:"Cancel"}),e.jsxs(Ie,{disabled:!h,onClick:()=>A(2),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step1"),f===2&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available materials for ",h,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded bg-blue-50",children:[e.jsx(gn,{checked:J.length===ve(h).length&&J.length>0,indeterminate:J.length>0&&J.length<ve(h).length,onCheckedChange:$e=>{if($e){const ke=Jt=>String(Jt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),tt=ve(h).map(Jt=>{const ss=(o||[]).filter(dt=>ke(dt.product||"")===ke(Jt.product||"")&&ke(dt.name||"")===ke(Jt.name||"")).sort((dt,qt)=>(dt.rate||0)-(qt.rate||0))[0];return{materialId:Jt.id,selectedShopId:ss?.shopId||"",selectedBrand:Jt.brandName||"Generic"}});he(tt)}else he([])}}),e.jsx(Xe,{className:"text-sm font-medium",children:"Select All Materials"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[600px] overflow-y-auto p-3 border rounded bg-gray-50",children:ve(h).map($e=>{const ke=J.some(it=>it.materialId===$e.id);return e.jsx("div",{className:Xs("p-4 border-2 rounded-lg transition-all",ke?"border-blue-500 bg-white":"border-gray-200 bg-white"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(gn,{checked:ke,onCheckedChange:()=>{if(ke)he(it=>it.filter(tt=>tt.materialId!==$e.id));else{const it=Qt=>String(Qt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),Jt=(o||[]).filter(Qt=>it(Qt.product||"")===it($e.product||"")&&it(Qt.name||"")===it($e.name||"")).sort((Qt,ss)=>(Qt.rate||0)-(ss.rate||0))[0];he(Qt=>[...Qt,{materialId:$e.id,selectedShopId:Jt?.shopId||"",selectedBrand:$e.brandName||"Generic"}]),ie(Qt=>({...Qt,[$e.id]:{quantity:1,supplyRate:$e.rate||0,installRate:0},[Te]:Qt[Te]||{quantity:1,supplyRate:0,installRate:0}}))}}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:$e.name}),e.jsx("p",{className:"text-xs text-gray-600",children:$e.code}),ke&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx(Xe,{className:"text-xs",children:"Select Brand"}),e.jsxs(Lr,{value:J.find(it=>it.materialId===$e.id)?.selectedBrand||"Generic",onValueChange:it=>{he(tt=>tt.map(Jt=>Jt.materialId===$e.id?{...Jt,selectedBrand:it}:Jt))},children:[e.jsx(Er,{className:"h-9 text-xs",children:e.jsx(Dr,{})}),e.jsxs(Tr,{children:[e.jsx(wr,{value:"Generic",children:"Generic"}),e.jsx(wr,{value:"Premium",children:"Premium"})]})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{className:"text-xs",children:"Select Shop"}),e.jsxs(Lr,{value:J.find(it=>it.materialId===$e.id)?.selectedShopId||"",onValueChange:it=>{he(tt=>tt.map(Jt=>Jt.materialId===$e.id?{...Jt,selectedShopId:it}:Jt))},children:[e.jsx(Er,{className:"h-9 text-xs",children:e.jsx(Dr,{})}),e.jsx(Tr,{children:(()=>{const it=dt=>String(dt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),tt=(o||[]).filter(dt=>it(dt.product||"")===it($e.product||"")&&it(dt.name||"")===it($e.name||"")),Jt=J.find(dt=>dt.materialId===$e.id)?.selectedBrand||"Generic",Qt=tt.filter(dt=>(dt.brandName||"Generic")===Jt).map(dt=>({shopId:dt.shopId,rate:dt.rate,shopName:(r||[]).find(qt=>qt.id===dt.shopId)?.name||"Unknown"})).filter(dt=>dt.shopId);return Array.from(new Map(Qt.map(dt=>[dt.shopId,dt])).values()).map(dt=>e.jsxs(wr,{value:dt.shopId,children:[dt.shopName,"  ",dt.rate]},dt.shopId))})()})]})]})]})]})]})},$e.id)})}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>A(1),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ie,{disabled:J.length===0,onClick:()=>A(7),children:["Next ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]},"step2"),f===7&&e.jsx(hs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-8",children:"Edit quantities or rates before generating BOQ."}),e.jsxs("div",{className:"grid grid-cols-9 gap-4 text-sm text-muted-foreground mb-3",children:[e.jsx("div",{className:"col-span-2",children:"Item"}),e.jsx("div",{children:"Description"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),e.jsx("div",{className:"space-y-4",children:Ge.map($e=>{const ke=Number(q[$e.id]?.quantity??$e.quantity??0),it=Number(q[$e.id]?.supplyRate??$e.supplyRate??0),tt=ke*it;return e.jsxs("div",{className:"grid grid-cols-9 gap-4 items-center border rounded-xl p-4",children:[e.jsx("div",{className:"col-span-2 font-medium",children:$e.name}),e.jsx("div",{className:"text-sm",children:Ae[$e.id]||$e.name}),e.jsx("div",{className:"text-center font-semibold",children:$e.brandName||"Generic"}),e.jsx("div",{className:"text-center",children:e.jsx(Ve,{type:"number",value:ke,onChange:Jt=>ie(Qt=>({...Qt,[$e.id]:{...Qt[$e.id],quantity:Number(Jt.target.value||0)}})),className:"w-24 mx-auto"})}),e.jsx("div",{className:"text-center text-muted-foreground",children:$e.unit||"pcs"}),e.jsx("div",{className:"text-center font-semibold",children:$e.shopName||"-"}),e.jsx("div",{className:"text-center",children:e.jsx(Ve,{type:"number",value:it,onChange:Jt=>ie(Qt=>({...Qt,[$e.id]:{...Qt[$e.id],supplyRate:Number(Jt.target.value||0)}})),className:"w-28 mx-auto"})}),e.jsxs("div",{className:"text-right font-semibold",children:["",tt.toFixed(2)]})]},$e.id)})}),e.jsxs("div",{className:"flex justify-between mt-10",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>A(2),children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ie,{onClick:()=>A(8),disabled:Ge.length===0,className:"bg-blue-600 hover:bg-blue-700",children:["Next: Generate BOM ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]})},"step7"),f===8&&e.jsxs(hs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:64,height:64,backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(_l,{style:{width:32,height:32}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:16},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:8,marginBottom:16},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16,padding:16,fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||"Product"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"TOTAL ITEMS"}),e.jsxs("p",{style:{fontWeight:600},children:[Ge.length," Materials"]})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:8,marginBottom:16,overflow:"hidden"},children:e.jsxs("div",{style:{padding:16},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:8},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map($e=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:8,textAlign:$e==="Qty"||$e.includes("Rate")||$e.includes("Amount")?"right":"left"},children:$e},$e))})}),e.jsx("tbody",{children:Ge.map(($e,ke)=>{const it=Number(q[$e.id]?.quantity??$e.quantity??0),tt=Number(q[$e.id]?.supplyRate??$e.supplyRate??0);return e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:ke+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:$e.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"center"},children:$e.unit||"pcs"}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right"},children:it}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right"},children:tt.toFixed(2)}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:$e.shopName||"Market"}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right",fontWeight:600},children:(it*tt).toFixed(2)})]},$e.id)})})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:8,padding:16,display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:Ge.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ge.reduce(($e,ke)=>$e+Number(q[ke.id]?.quantity??ke.quantity??0),0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",vt.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center pt-4",children:[e.jsx(Ie,{onClick:()=>A(7),variant:"outline",className:"px-8",children:"Back"}),e.jsxs("button",{onClick:()=>Es("boq-pdf",`BOM-${m}.pdf`),className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-6 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(si,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ie,{onClick:()=>A(9),className:"bg-blue-600 hover:bg-blue-700 px-8",children:["Add to BOQ ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]}),e.jsxs(Ie,{variant:"secondary",className:"px-8",onClick:_s,children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"New Estimate"]})]})]},"step8"),f===9&&e.jsx(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ie,{variant:"destructive",onClick:It,disabled:re.length===0,className:"bg-red-300 hover:bg-red-400 text-white",children:"Delete Selected"}),e.jsx(Ie,{onClick:Wt,className:"bg-blue-600 hover:bg-blue-700",disabled:Ge.length===0,children:"Save"}),e.jsx(Ie,{onClick:()=>A(11),className:"bg-blue-600 hover:bg-blue-700",disabled:Ge.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Saved BOQs"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:ge.length===0?"No saved BOQs":""})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all",checked:(()=>{const $e=[Te,...Ge.map(ke=>ke.id)];return $e.length>0&&re.length===$e.length})(),onCheckedChange:$e=>Ct(!!$e)})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(gn,{checked:re.includes(Te),onCheckedChange:$e=>{const ke=!!$e;se(it=>ke?Array.from(new Set([...it,Te])):it.filter(tt=>tt!==Te))}})}),e.jsx("td",{className:"border px-2 py-2 text-center"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx("strong",{children:h||g?.name||"Product"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ve,{placeholder:"Group description",value:Ae[Te]||"",onChange:$e=>ce(ke=>({...ke,[Te]:$e.target.value}))})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ve,{className:"w-20",value:"pcs",readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ve,{type:"number",className:"w-28",value:ht,onChange:$e=>ie(ke=>({...ke,[Te]:{...ke[Te]||{quantity:1,supplyRate:0,installRate:0},quantity:Math.max(0,Number($e.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-right"}),e.jsx("td",{className:"border px-2 py-2 text-right"})]}),Ge.map(($e,ke)=>{const it=$e.id,tt=Number(q[it]?.quantity??$e.quantity??0),Jt=Number(q[it]?.supplyRate??$e.supplyRate??0),Qt=tt*Jt;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(gn,{checked:re.includes(it),onCheckedChange:ss=>{const dt=!!ss;se(qt=>dt?Array.from(new Set([...qt,it])):qt.filter(Vt=>Vt!==it))}})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:ke+1}),e.jsx("td",{className:"border px-2 py-2 font-medium",children:$e.name}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ml,{className:"min-h-[44px]",value:Ae[it]||"",onChange:ss=>ce(dt=>({...dt,[it]:ss.target.value})),placeholder:"Description"})}),e.jsx("td",{className:"border px-2 py-2",children:$e.unit||"pcs"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ve,{type:"number",value:tt,onChange:ss=>ie(dt=>({...dt,[it]:{...dt[it],quantity:Math.max(0,Number(ss.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-right",children:e.jsx(Ve,{type:"number",className:"text-right",value:Jt,onChange:ss=>ie(dt=>({...dt,[it]:{...dt[it],supplyRate:Math.max(0,Number(ss.target.value||0))}}))})}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",Qt.toFixed(2)]})]},it)})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>A(8),className:"px-8",children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx(Ie,{onClick:()=>A(10),className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Finalize PO"}),e.jsxs(Ie,{onClick:()=>Es("boq-pdf",`BOQ-${m}.pdf`),className:"bg-blue-600 hover:bg-blue-700 px-8",children:["Export PDF ",e.jsx(si,{className:"ml-2 h-4 w-4"})]})]})]})},"step-add-to-boq"),f===10&&e.jsx(hs.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill No"}),e.jsx(Ve,{value:m,onChange:$e=>N($e.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Bill Date"}),e.jsx(Ve,{type:"date",value:w,onChange:$e=>E($e.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Due Date"}),e.jsx(Ve,{type:"date",value:F,onChange:$e=>M($e.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Name"}),e.jsx(Ve,{value:k,onChange:$e=>K($e.target.value)})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Customer Address"}),e.jsx(Ve,{value:G,onChange:$e=>ee($e.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Xe,{children:"Terms & Conditions"}),e.jsx(Ve,{value:V,onChange:$e=>X($e.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Xe,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:je,onChange:$e=>De($e.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ge.map($e=>e.jsx("option",{value:$e.id,children:$e.name},$e.id))]}),je&&e.jsx(Ve,{placeholder:"Enter description for selected material",value:Ae[je]||"",onChange:$e=>ce(ke=>({...ke,[je]:$e.target.value}))})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs(Ie,{variant:"outline",onClick:()=>A(9),className:"px-8",children:[e.jsx(Qn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ie,{onClick:()=>A(11),className:"bg-blue-600 hover:bg-blue-700 px-8",children:["Create BOQ ",e.jsx(Mn,{className:"ml-2 h-4 w-4"})]})]})]})},"step-finalize-po"),f===11&&e.jsx(hs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 space-y-6",children:[e.jsxs("div",{id:"boq-final-pdf",style:{width:"100%",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("img",{src:JK,alt:"Concept Trunk Interiors",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right",fontSize:12},children:w})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(gn,{id:"select-all-groups",checked:re.includes(Te),onCheckedChange:$e=>{se($e?[Te]:[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(gn,{checked:re.includes(Te),onCheckedChange:$e=>{se($e?[Te]:[])}})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:"1"}),e.jsx("td",{className:"border px-2 py-2 font-semibold",children:h||g?.name||"Product"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ve,{value:oe[Te]||"",onChange:$e=>ne(ke=>({...ke,[Te]:$e.target.value})),placeholder:"Location"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ml,{value:Ae[Te]||"",onChange:$e=>ce(ke=>({...ke,[Te]:$e.target.value})),placeholder:"Group description",className:"min-h-[44px]"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ve,{value:"pcs",readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Ve,{type:"number",value:ht,onChange:$e=>ie(ke=>({...ke,[Te]:{...ke[Te]||{quantity:1,supplyRate:0,installRate:0},quantity:Math.max(0,Number($e.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:e.jsx(Ve,{type:"number",value:Number(pt||0).toFixed(2),readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:e.jsx(Ve,{type:"number",value:Number(Ze||0).toFixed(2),readOnly:!0})}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(ht*pt).toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(ht*Ze).toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",colSpan:9}),e.jsx("td",{className:"border px-2 py-2 text-right font-semibold",children:"Subtotal"}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",at.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",Se.toFixed(2)]})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(Ie,{variant:"outline",onClick:()=>A(10),className:"px-8",children:"Back"}),e.jsx(Ie,{variant:"destructive",onClick:()=>{se([Te]),It()},className:"bg-red-300 hover:bg-red-400 text-white px-8",children:"Delete Selected"}),e.jsx(Ie,{onClick:()=>A(1),className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Add Product"}),e.jsx(Ie,{onClick:Ss,disabled:Ce||Ge.length===0,className:"bg-blue-600 hover:bg-blue-700 px-8",children:Ce?"Saving...":"Save"}),e.jsx(Ie,{onClick:async()=>{await Ss(),await Es("boq-final-pdf",`BOQ-${m}.pdf`)},disabled:Ce||Ge.length===0,className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Create BOQ"})]}),ue.length>0&&e.jsx(Vs,{className:"p-4 bg-green-50 border-green-200",children:e.jsxs("p",{className:"text-green-800 font-semibold",children:[" Success! ",ue.length," item(s) saved to database"]})})]})},"step11")]})]})}):e.jsx(ni,{children:e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-red-600",children:"Subcategory not found"})})})}function ez(){const[,t]=el(),{shops:s}=ci();return e.jsx(ni,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"Select Supplier"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a supplier to source your materials from."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(n=>e.jsxs(Vs,{className:"group cursor-pointer hover:border-primary/50 transition-all hover:shadow-lg",onClick:()=>t(`/item-master/${n.id}`),children:[e.jsxs("div",{className:"aspect-video w-full overflow-hidden rounded-t-lg relative bg-muted",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:e.jsx(tw,{className:"h-12 w-12 text-primary/30"})}),n.rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white px-2 py-1 rounded flex items-center gap-1 text-xs",children:[e.jsx(yO,{className:"h-3 w-3 text-yellow-500 fill-yellow-500"})," ",n.rating]})]}),e.jsxs(ta,{className:"pb-3",children:[e.jsx(sa,{className:"flex justify-between items-start",children:e.jsx("span",{children:n.name})}),e.jsxs(ei,{className:"flex items-center gap-1",children:[e.jsx(aO,{className:"h-3 w-3"})," ",n.location]})]}),e.jsxs(fn,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.categories?.map(r=>e.jsx(qA,{variant:"secondary",className:"text-xs",children:r},r))}),e.jsxs(Ie,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground",children:[e.jsx(tw,{className:"mr-2 h-4 w-4"})," Visit Store"]})]})]},n.id))})]})})}function tz(){const t=[{name:"Free",price:"$0",description:"For personal use",features:["Access to all estimators","Save up to 3 projects","Basic support"]},{name:"Pro",price:"$29/mo",description:"For contractors & professionals",features:["Unlimited projects","Export to PDF/Excel","Priority support","Client management"],popular:!0},{name:"Enterprise",price:"Custom",description:"For large construction firms",features:["Custom integrations","Dedicated account manager","White-label reports","API access"]}];return e.jsx(ni,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold font-heading",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Choose the plan that fits your needs"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map(s=>e.jsxs(Vs,{className:`flex flex-col ${s.popular?"border-primary shadow-lg scale-105":""}`,children:[e.jsxs(ta,{children:[e.jsx(sa,{children:s.name}),e.jsx(ei,{children:s.description})]}),e.jsxs(fn,{className:"flex-1",children:[e.jsx("div",{className:"text-3xl font-bold mb-4",children:s.price}),e.jsx("ul",{className:"space-y-2",children:s.features.map(n=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ob,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:n})]},n))})]}),e.jsx(mf,{children:e.jsx(Ie,{className:"w-full",variant:s.popular?"default":"outline",children:s.price==="Custom"?"Contact Sales":"Subscribe"})})]},s.name))})]})})}function sz(){const{toast:t}=Ai(),[s,n]=C.useState([]),[r,o]=C.useState(new Set),[c,p]=C.useState(!0),[f,A]=C.useState("doors");C.useEffect(()=>{h()},[]);const h=async()=>{p(!0);try{const k=await nt(`/api/estimator-step9-items?estimator=${f}`);if(!k.ok)throw new Error("Failed to load data");const K=await k.json();n(K.items||[]),o(new Set),!K.items||K.items.length===0?t({title:"Info",description:"No Step 9 data found."}):t({title:"Success",description:`Loaded ${K.items.length} materials from database.`})}catch(k){console.error("Load error:",k),t({title:"Error",description:"Failed to load Step 9 data.",variant:"destructive"})}finally{p(!1)}},l=()=>{const k=s.reduce((V,X)=>V+(X.quantity*X.rate||0),0),K=k*.09,G=k*.09,ee=k+K+G;return{subTotal:k,sgst:K,cgst:G,grandTotal:ee}},{subTotal:g,sgst:v,cgst:m,grandTotal:N}=l(),w=k=>{const K=new Set(r);K.has(k)?K.delete(k):K.add(k),o(K)},E=()=>{r.size===s.length?o(new Set):o(new Set(s.map((k,K)=>K)))},F=()=>{const k=s.filter((K,G)=>!r.has(G));n(k),o(new Set),t({title:"Success",description:`${r.size} item(s) deleted.`})},M=()=>{const k=document.getElementById("boq-review-pdf");if(!k)return;const K=s[0]?.session_id||"BOQ";vA().set({margin:10,filename:`BOQ_Review_${K}.pdf`,html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(k).save()};return e.jsx(ni,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"BOQ Review - Step 9"}),e.jsx(Vs,{children:e.jsxs(fn,{className:"pt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filter by Estimator Type"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Xe,{children:"Estimator Type"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:f,onChange:k=>{A(k.target.value),n([])},children:[e.jsx("option",{value:"doors",children:"Doors"}),e.jsx("option",{value:"flooring",children:"Flooring"})]})]}),e.jsx(Ie,{onClick:h,disabled:c,children:c?"Loading...":"Refresh Data"})]})]}),s.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add to BOQ"}),r.size>0&&e.jsx(e.Fragment,{children:e.jsxs(Ie,{variant:"destructive",size:"sm",onClick:F,children:[e.jsx(uA,{className:"mr-2 h-4 w-4"}),"Delete Selected (",r.size,")"]})})]}),e.jsxs("div",{id:"boq-review-pdf",className:"space-y-4",children:[e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2 text-center w-12",children:e.jsx("input",{type:"checkbox",checked:r.size===s.length&&s.length>0,onChange:E,className:"cursor-pointer"})}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"S.No"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Item"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Description"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Unit"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Qty"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:s.map((k,K)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"border px-4 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:r.has(K),onChange:()=>w(K),className:"cursor-pointer"})}),e.jsx("td",{className:"border px-4 py-2",children:K+1}),e.jsx("td",{className:"border px-4 py-2 font-medium",children:k.material_name||"N/A"}),e.jsx("td",{className:"border px-4 py-2 text-xs",children:k.description||"-"}),e.jsx("td",{className:"border px-4 py-2 text-center",children:"pcs"}),e.jsx("td",{className:"border px-4 py-2 text-right",children:k.quantity}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["",(k.rate||0).toFixed(2)]}),e.jsxs("td",{className:"border px-4 py-2 text-right font-semibold",children:["",((k.quantity||0)*(k.rate||0)).toFixed(2)]})]},k.id||K))})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2 ml-auto w-96",children:[e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",g.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"SGST (9%):"}),e.jsxs("span",{children:["",v.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"CGST (9%):"}),e.jsxs("span",{children:["",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2 font-bold px-4",children:[e.jsx("span",{children:"Grand Total:"}),e.jsxs("span",{children:["",N.toFixed(2)]})]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs(Ie,{onClick:M,className:"flex-1",children:[e.jsx(si,{className:"mr-2 h-4 w-4"})," Export as PDF"]})})]}),s.length===0&&!c&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No materials found. Loading data..."})]})})]})})}function nz({onSelectProduct:t,selectedProjectId:s,open:n,onOpenChange:r}){const[o,c]=C.useState([]),[p,f]=C.useState([]),[A,h]=C.useState(""),[l,g]=C.useState(!0),{toast:v}=Ai();C.useEffect(()=>{(async()=>{try{const w=await nt("/api/products",{headers:{}});if(w.ok){const F=(await w.json()).products||[];c(F),f(F)}else v({title:"Error",description:"Failed to load products",variant:"destructive"})}catch(w){console.error("Failed to load products:",w),v({title:"Error",description:"Failed to load products",variant:"destructive"})}finally{g(!1)}})()},[v]),C.useEffect(()=>{if(!A.trim()){f(o);return}const N=A.toLowerCase(),w=o.filter(E=>{const F=E.name?.toLowerCase()||"",M=E.category?.toLowerCase()||"",k=E.subcategory?.toLowerCase()||"",K=E.category_name?.toLowerCase()||"",G=E.subcategory_name?.toLowerCase()||"",ee=E.description?.toLowerCase()||"";return F.includes(N)||M.includes(N)||k.includes(N)||K.includes(N)||G.includes(N)||ee.includes(N)});f(w)},[A,o]);const m=N=>{t(N),r(!1)};return e.jsx(Jh,{open:n,onOpenChange:r,children:e.jsxs(Hu,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Ku,{children:e.jsx(zu,{children:"Select Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Xe,{htmlFor:"product-search",children:"Search Products"}),e.jsx(Ve,{id:"product-search",placeholder:"Search by product name, category, or description...",value:A,onChange:N=>h(N.target.value),className:"mt-2"})]}),l?e.jsx("div",{className:"text-center py-8",children:"Loading products..."}):p.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:o.length===0?"No products available":"No products match your search"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.map(N=>e.jsx(Ie,{variant:"outline",onClick:()=>m(N),className:"w-full justify-start h-auto py-3 px-4",children:e.jsxs("div",{className:"text-left space-y-1",children:[e.jsx("div",{className:"font-semibold",children:N.name}),e.jsx("div",{className:"text-xs text-gray-500",children:N.category_name&&N.subcategory_name?`${N.category_name}  ${N.subcategory_name}`:N.category?N.category:"No category"}),N.description&&e.jsx("div",{className:"text-xs text-gray-600",children:N.description})]})},N.id))}),p.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing ",p.length," of ",o.length," products"]})]})]})})}function rz({product:t,onClose:s,onAddToBoq:n,open:r}){const[o,c]=C.useState([]),[p,f]=C.useState(new Set),[A,h]=C.useState(!0),[l,g]=C.useState(!1),{toast:v}=Ai();C.useEffect(()=>{(async()=>{try{h(!0);const M=m(t);if(!M){v({title:"Error",description:"Could not determine estimator type for this product",variant:"destructive"});return}const k=await nt(`/api/step11-by-product?product_id=${encodeURIComponent(t.id)}&estimator=${encodeURIComponent(M)}`,{headers:{}});if(k.ok){const G=(await k.json()).items||[];c(G),G.length===0&&v({title:"Info",description:`No Step 11 data found for ${t.name}`})}else throw new Error("Failed to load step 11 data")}catch(M){console.error("Failed to load Step 11 data:",M),v({title:"Error",description:"Failed to load product Step 11 data",variant:"destructive"})}finally{h(!1)}})()},[t,v]);const m=F=>{const M=(F.subcategory||F.subcategory_name||"").toLowerCase(),k=(F.category||F.category_name||"").toLowerCase(),K=(F.name||"").toLowerCase();if(M){if(M.includes("door"))return"doors";if(M.includes("electrical"))return"electrical";if(M.includes("plumb"))return"plumbing";if(M.includes("floor"))return"flooring";if(M.includes("paint"))return"painting";if(M.includes("ceiling"))return"falseceiling";if(M.includes("blind"))return"blinds";if(M.includes("civil")||M.includes("wall"))return"civilwall";if(M.includes("ms"))return"mswork";if(M.includes("ss"))return"sswork";if(M.includes("fire"))return"firefighting"}if(k){if(k.includes("door"))return"doors";if(k.includes("electrical"))return"electrical";if(k.includes("plumb"))return"plumbing";if(k.includes("floor"))return"flooring";if(k.includes("paint"))return"painting";if(k.includes("ceiling"))return"falseceiling";if(k.includes("blind"))return"blinds";if(k.includes("civil")||k.includes("wall"))return"civilwall"}const G=(M||k||K).trim();if(G){const ee=G.replace(/[-\s]/g,"");if(/\w+/.test(ee))return ee}return null},N=F=>{const M=new Set(p);M.has(F)?M.delete(F):M.add(F),f(M)},w=()=>{if(p.size===o.length)f(new Set);else{const F=o.map((M,k)=>String(k));f(new Set(F))}},E=async()=>{if(p.size===0){v({title:"Error",description:"Please select at least one item",variant:"destructive"});return}g(!0);try{const F=o.filter((M,k)=>p.has(String(k)));console.log("Step11Preview calling onAddToBoq with items:",F),await Promise.resolve(n(F)),console.log("Step11Preview: onAddToBoq completed successfully")}catch(F){console.error("Step11Preview: Error in onAddToBoq:",F),v({title:"Error",description:"Failed to add items to BOQ",variant:"destructive"})}finally{g(!1)}};return e.jsx(Jh,{open:r,onOpenChange:s,children:e.jsxs(Hu,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Ku,{children:e.jsxs(zu,{children:[t.name," - Step 11 Configuration"]})}),e.jsxs("div",{className:"space-y-4",children:[t.category&&t.subcategory&&e.jsxs("p",{className:"text-sm text-gray-500",children:[t.category,"  ",t.subcategory]}),A?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading Step 11 data..."}):o.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No Step 11 data available for this product"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center pb-3 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gn,{id:"select-all",checked:p.size===o.length&&o.length>0,onCheckedChange:w}),e.jsxs("label",{htmlFor:"select-all",className:"cursor-pointer text-sm font-medium",children:["Select All (",p.size,"/",o.length,")"]})]})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map((F,M)=>{const k=String(M),K=p.has(k);return e.jsx("div",{onClick:()=>N(k),className:`p-3 border rounded-lg transition-colors cursor-pointer ${K?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gn,{id:`item-${k}`,checked:K,onCheckedChange:()=>N(k),className:"mt-1",onClick:G=>G.stopPropagation()}),e.jsxs("div",{className:"flex-1 pointer-events-none",children:[e.jsx("div",{className:"font-semibold",children:F.title||F.description||`Item ${F.s_no||M+1}`}),F.description&&F.title&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:F.description}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-2 gap-2",children:[F.qty&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Qty:"})," ",F.qty," ",F.unit||"pcs"]}),F.supply_rate&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Supply:"})," ",F.supply_rate]}),F.install_rate&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Install:"})," ",F.install_rate]}),F.group_id&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Group:"})," ",F.group_id]})]})]})]})},k)})}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(Ie,{variant:"outline",onClick:s,className:"flex-1",disabled:l,children:"Cancel"}),e.jsx(Ie,{onClick:E,disabled:p.size===0||l,className:"flex-1",children:l?"Adding...":`Add Selected (${p.size}) to BOQ`})]})]})]})]})})}function AF(t,s,n,r,o){r=r||{};var c=1.15,p=o.internal.scaleFactor,f=o.internal.getFontSize()/p,A=o.getLineHeightFactor?o.getLineHeightFactor():c,h=f*A,l=/\r\n|\r|\n/g,g="",v=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(g=typeof t=="string"?t.split(l):t,v=g.length||1),n+=f*(2-c),r.valign==="middle"?n-=v/2*h:r.valign==="bottom"&&(n-=v*h),r.halign==="center"||r.halign==="right"){var m=f;if(r.halign==="center"&&(m*=.5),g&&v>=1){for(var N=0;N<g.length;N++)o.text(g[N],s-o.getStringUnitWidth(g[N])*m,n),n+=h;return o}s-=o.getStringUnitWidth(t)*m}return r.halign==="justify"?o.text(t,s,n,{maxWidth:r.maxWidth||100,align:"justify"}):o.text(t,s,n),o}var hB={},nf=(function(){function t(s){this.jsPDFDocument=s,this.userStyles={textColor:s.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:s.internal.getFontSize(),fontStyle:s.internal.getFont().fontStyle,font:s.internal.getFont().fontName,lineWidth:s.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:s.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(s,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=s:hB=s},t.unifyColor=function(s){return Array.isArray(s)?s:typeof s=="number"?[s,s,s]:typeof s=="string"?[s]:null},t.prototype.applyStyles=function(s,n){var r,o,c;n===void 0&&(n=!1),s.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(s.fontStyle);var p=this.jsPDFDocument.internal.getFont(),f=p.fontStyle,A=p.fontName;if(s.font&&(A=s.font),s.fontStyle){f=s.fontStyle;var h=this.getFontList()[A];h&&h.indexOf(f)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),f=h[0])}if(this.jsPDFDocument.setFont(A,f),s.fontSize&&this.jsPDFDocument.setFontSize(s.fontSize),!n){var l=t.unifyColor(s.fillColor);l&&(r=this.jsPDFDocument).setFillColor.apply(r,l),l=t.unifyColor(s.textColor),l&&(o=this.jsPDFDocument).setTextColor.apply(o,l),l=t.unifyColor(s.lineColor),l&&(c=this.jsPDFDocument).setDrawColor.apply(c,l),typeof s.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(s.lineWidth)}},t.prototype.splitTextToSize=function(s,n,r){return this.jsPDFDocument.splitTextToSize(s,n,r)},t.prototype.rect=function(s,n,r,o,c){return this.jsPDFDocument.rect(s,n,r,o,c)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(s){return this.jsPDFDocument.getTextWidth(s)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(s){this.jsPDFDocument.setPage(s)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return hB||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var s=this.jsPDFDocument.internal.pageSize;return s.width==null&&(s={width:s.getWidth(),height:s.getHeight()}),s},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var s=this.jsPDFDocument;return s.getLineHeightFactor?s.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(s){return s/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var s=this.jsPDFDocument.internal.getCurrentPageInfo();return s?s.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),qv=function(t,s){return qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},qv(t,s)};function dF(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");qv(t,s);function n(){this.constructor=t}t.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}var uF=(function(t){dF(s,t);function s(n){var r=t.call(this)||this;return r._element=n,r}return s})(Array);function az(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function iz(t){var s={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return s[t]}function dy(t,s,n){n.applyStyles(s,!0);var r=Array.isArray(t)?t:[t],o=r.map(function(c){return n.getTextWidth(c)}).reduce(function(c,p){return Math.max(c,p)},0);return o}function hF(t,s,n,r){var o=s.settings.tableLineWidth,c=s.settings.tableLineColor;t.applyStyles({lineWidth:o,lineColor:c});var p=fF(o,!1);p&&t.rect(n.x,n.y,s.getWidth(t.pageSize().width),r.y-n.y,p)}function fF(t,s){var n=t>0,r=s||s===0;return n&&r?"DF":n?"S":r?"F":null}function Gy(t,s){var n,r,o,c;if(t=t||s,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=s}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:s,top:(r=t.top)!==null&&r!==void 0?r:s,right:(o=t.right)!==null&&o!==void 0?o:s,bottom:(c=t.bottom)!==null&&c!==void 0?c:s}):(typeof t!="number"&&(t=s),{top:t,right:t,bottom:t,left:t})}function pF(t,s){var n=Gy(s.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function oz(t,s,n,r,o){var c={},p=1.3333333333333333,f=K0(s,function(k){return o.getComputedStyle(k).backgroundColor});f!=null&&(c.fillColor=f);var A=K0(s,function(k){return o.getComputedStyle(k).color});A!=null&&(c.textColor=A);var h=cz(r,n);h&&(c.cellPadding=h);var l="borderTopColor",g=p*n,v=r.borderTopWidth;if(r.borderBottomWidth===v&&r.borderRightWidth===v&&r.borderLeftWidth===v){var m=(parseFloat(v)||0)/g;m&&(c.lineWidth=m)}else c.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/g,right:(parseFloat(r.borderRightWidth)||0)/g,bottom:(parseFloat(r.borderBottomWidth)||0)/g,left:(parseFloat(r.borderLeftWidth)||0)/g},c.lineWidth.top||(c.lineWidth.right?l="borderRightColor":c.lineWidth.bottom?l="borderBottomColor":c.lineWidth.left&&(l="borderLeftColor"));var N=K0(s,function(k){return o.getComputedStyle(k)[l]});N!=null&&(c.lineColor=N);var w=["left","right","center","justify"];w.indexOf(r.textAlign)!==-1&&(c.halign=r.textAlign),w=["middle","bottom","top"],w.indexOf(r.verticalAlign)!==-1&&(c.valign=r.verticalAlign);var E=parseInt(r.fontSize||"");isNaN(E)||(c.fontSize=E/p);var F=lz(r);F&&(c.fontStyle=F);var M=(r.fontFamily||"").toLowerCase();return t.indexOf(M)!==-1&&(c.font=M),c}function lz(t){var s="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(s="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(s+="italic"),s}function K0(t,s){var n=mF(t,s);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var o=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],c=parseInt(r[4]);return c===0||isNaN(o[0])||isNaN(o[1])||isNaN(o[2])?null:o}function mF(t,s){var n=s(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:mF(t.parentElement,s):n}function cz(t,s){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/s),o=(parseInt(t.lineHeight)-parseInt(t.fontSize))/s/2,c=n.map(function(f){return parseInt(f||"0")/r}),p=Gy(c,0);return o>p.top&&(p.top=o),o>p.bottom&&(p.bottom=o),p}function gF(t,s,n,r,o){var c,p;r===void 0&&(r=!1),o===void 0&&(o=!1);var f;typeof s=="string"?f=n.document.querySelector(s):f=s;var A=Object.keys(t.getFontList()),h=t.scaleFactor(),l=[],g=[],v=[];if(!f)return console.error("Html table could not be found with input: ",s),{head:l,body:g,foot:v};for(var m=0;m<f.rows.length;m++){var N=f.rows[m],w=(p=(c=N?.parentElement)===null||c===void 0?void 0:c.tagName)===null||p===void 0?void 0:p.toLowerCase(),E=Az(A,h,n,N,r,o);E&&(w==="thead"?l.push(E):w==="tfoot"?v.push(E):g.push(E))}return{head:l,body:g,foot:v}}function Az(t,s,n,r,o,c){for(var p=new uF(r),f=0;f<r.cells.length;f++){var A=r.cells[f],h=n.getComputedStyle(A);if(o||h.display!=="none"){var l=void 0;c&&(l=oz(t,A,s,h,n)),p.push({rowSpan:A.rowSpan,colSpan:A.colSpan,styles:l,_element:A,content:dz(A)})}}var g=n.getComputedStyle(r);if(p.length>0&&(o||g.display!=="none"))return p}function dz(t){var s=t.cloneNode(!0);return s.innerHTML=s.innerHTML.replace(/\n/g,"").replace(/ +/g," "),s.innerHTML=s.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),s.innerText||s.textContent||""}function uz(t,s,n){for(var r=0,o=[t,s,n];r<o.length;r++){var c=o[r];c&&typeof c!="object"&&console.error("The options parameter should be of type object, is: "+typeof c),c.startY&&typeof c.startY!="number"&&(console.error("Invalid value for startY option",c.startY),delete c.startY)}}function WA(t,s,n,r,o){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(t),p=1;p<arguments.length;p++){var f=arguments[p];if(f!=null)for(var A in f)Object.prototype.hasOwnProperty.call(f,A)&&(c[A]=f[A])}return c}function yF(t,s){var n=new nf(t),r=n.getDocumentOptions(),o=n.getGlobalOptions();uz(o,r,s);var c=WA({},o,r,s),p;typeof window<"u"&&(p=window);var f=hz(o,r,s),A=fz(o,r,s),h=pz(n,c),l=gz(n,c,p);return{id:s.tableId,content:l,hooks:A,styles:f,settings:h}}function hz(t,s,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},o=function(A){if(A==="columnStyles"){var h=t[A],l=s[A],g=n[A];r.columnStyles=WA({},h,l,g)}else{var v=[t,s,n],m=v.map(function(N){return N[A]||{}});r[A]=WA({},m[0],m[1],m[2])}},c=0,p=Object.keys(r);c<p.length;c++){var f=p[c];o(f)}return r}function fz(t,s,n){for(var r=[t,s,n],o={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},c=0,p=r;c<p.length;c++){var f=p[c];f.didParseCell&&o.didParseCell.push(f.didParseCell),f.willDrawCell&&o.willDrawCell.push(f.willDrawCell),f.didDrawCell&&o.didDrawCell.push(f.didDrawCell),f.willDrawPage&&o.willDrawPage.push(f.willDrawPage),f.didDrawPage&&o.didDrawPage.push(f.didDrawPage)}return o}function pz(t,s){var n,r,o,c,p,f,A,h,l,g,v,m,N=Gy(s.margin,40/t.scaleFactor()),w=(n=mz(t,s.startY))!==null&&n!==void 0?n:N.top,E;s.showFoot===!0?E="everyPage":s.showFoot===!1?E="never":E=(r=s.showFoot)!==null&&r!==void 0?r:"everyPage";var F;s.showHead===!0?F="everyPage":s.showHead===!1?F="never":F=(o=s.showHead)!==null&&o!==void 0?o:"everyPage";var M=(c=s.useCss)!==null&&c!==void 0?c:!1,k=s.theme||(M?"plain":"striped"),K=!!s.horizontalPageBreak,G=(p=s.horizontalPageBreakRepeat)!==null&&p!==void 0?p:null;return{includeHiddenHtml:(f=s.includeHiddenHtml)!==null&&f!==void 0?f:!1,useCss:M,theme:k,startY:w,margin:N,pageBreak:(A=s.pageBreak)!==null&&A!==void 0?A:"auto",rowPageBreak:(h=s.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(l=s.tableWidth)!==null&&l!==void 0?l:"auto",showHead:F,showFoot:E,tableLineWidth:(g=s.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(v=s.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:K,horizontalPageBreakRepeat:G,horizontalPageBreakBehaviour:(m=s.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function mz(t,s){var n=t.getLastAutoTable(),r=t.scaleFactor(),o=t.pageNumber(),c=!1;if(n&&n.startPageNumber){var p=n.startPageNumber+n.pageNumber-1;c=p===o}return typeof s=="number"?s:(s==null||s===!1)&&c&&n?.finalY!=null?n.finalY+20/r:null}function gz(t,s,n){var r=s.head||[],o=s.body||[],c=s.foot||[];if(s.html){var p=s.includeHiddenHtml;if(n){var f=gF(t,s.html,n,p,s.useCss)||{};r=f.head||r,o=f.body||r,c=f.foot||r}else console.error("Cannot parse html in non browser environment")}var A=s.columns||yz(r,o,c);return{columns:A,head:r,body:o,foot:c}}function yz(t,s,n){var r=t[0]||s[0]||n[0]||[],o=[];return Object.keys(r).filter(function(c){return c!=="_element"}).forEach(function(c){var p=1,f;Array.isArray(r)?f=r[parseInt(c)]:f=r[c],typeof f=="object"&&!Array.isArray(f)&&(p=f?.colSpan||1);for(var A=0;A<p;A++){var h=void 0;Array.isArray(r)?h=o.length:h=c+(A>0?"_".concat(A):"");var l={dataKey:h};o.push(l)}}),o}var Wv=(function(){function t(s,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=s.getDocument()}return t})(),xz=(function(t){dF(s,t);function s(n,r,o,c,p,f){var A=t.call(this,n,r,f)||this;return A.cell=o,A.row=c,A.column=p,A.section=c.section,A}return s})(Wv),vz=(function(){function t(s,n){this.pageNumber=1,this.id=s.id,this.settings=s.settings,this.styles=s.styles,this.hooks=s.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(s){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(s)},0)},t.prototype.getFootHeight=function(s){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(s)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(s,n,r,o,c,p){for(var f=0,A=n;f<A.length;f++){var h=A[f],l=new xz(s,this,r,o,c,p),g=h(l)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(s,n){s.applyStyles(s.userStyles);for(var r=0,o=this.hooks.didDrawPage;r<o.length;r++){var c=o[r];c(new Wv(s,this,n))}},t.prototype.callWillDrawPageHooks=function(s,n){for(var r=0,o=this.hooks.willDrawPage;r<o.length;r++){var c=o[r];c(new Wv(s,this,n))}},t.prototype.getWidth=function(s){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(o,c){return o+c.wrappedWidth},0);return n}else{var r=this.settings.margin;return s-r.left-r.right}},t})(),xF=(function(){function t(s,n,r,o,c){c===void 0&&(c=!1),this.height=0,this.raw=s,s instanceof uF&&(this.raw=s._element,this.element=s._element),this.index=n,this.section=r,this.cells=o,this.spansMultiplePages=c}return t.prototype.getMaxCellHeight=function(s){var n=this;return s.reduce(function(r,o){var c;return Math.max(r,((c=n.cells[o.index])===null||c===void 0?void 0:c.height)||0)},0)},t.prototype.hasRowSpan=function(s){var n=this;return s.filter(function(r){var o=n.cells[r.index];return o?o.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(s,n){return this.getMaxCellHeight(n)<=s},t.prototype.getMinimumRowHeight=function(s,n){var r=this;return s.reduce(function(o,c){var p=r.cells[c.index];if(!p)return 0;var f=n.getLineHeight(p.styles.fontSize),A=p.padding("vertical"),h=A+f;return h>o?h:o},0)},t})(),vF=(function(){function t(s,n,r){var o;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=s;var c=s;s!=null&&typeof s=="object"&&!Array.isArray(s)?(this.rowSpan=s.rowSpan||1,this.colSpan=s.colSpan||1,c=(o=s.content)!==null&&o!==void 0?o:s,s._element&&(this.raw=s._element)):(this.rowSpan=1,this.colSpan=1);var p=c!=null?""+c:"",f=/\r\n|\r|\n/g;this.text=p.split(f)}return t.prototype.getTextPos=function(){var s;if(this.styles.valign==="top")s=this.y+this.padding("top");else if(this.styles.valign==="bottom")s=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");s=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var o=this.width-this.padding("horizontal");r=this.x+o/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:s}},t.prototype.getContentHeight=function(s,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,o=this.styles.fontSize/s*n,c=r*o+this.padding("vertical");return Math.max(c,this.styles.minCellHeight)},t.prototype.padding=function(s){var n=Gy(this.styles.cellPadding,0);return s==="vertical"?n.top+n.bottom:s==="horizontal"?n.left+n.right:n[s]},t})(),bz=(function(){function t(s,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=s,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(s){for(var n=0,r=0,o=s.allRows();r<o.length;r++){var c=o[r],p=c.cells[this.index];p&&typeof p.styles.cellWidth=="number"&&(n=Math.max(n,p.styles.cellWidth))}return n},t})();function jz(t,s){wz(t,s);var n=[],r=0;s.columns.forEach(function(c){var p=c.getMaxCustomCellWidth(s);p?c.width=p:(c.width=c.wrappedWidth,n.push(c)),r+=c.width});var o=s.getWidth(t.pageSize().width)-r;o&&(o=Yv(n,o,function(c){return Math.max(c.minReadableWidth,c.minWidth)})),o&&(o=Yv(n,o,function(c){return c.minWidth})),o=Math.abs(o),!s.settings.horizontalPageBreak&&o>.1/t.scaleFactor()&&(o=o<1?o:Math.round(o),console.warn("Of the table content, ".concat(o," units width could not fit page"))),Bz(s),Nz(s,t),Sz(s)}function wz(t,s){var n=t.scaleFactor(),r=s.settings.horizontalPageBreak,o=pF(t,s);s.allRows().forEach(function(c){for(var p=0,f=s.columns;p<f.length;p++){var A=f[p],h=c.cells[A.index];if(h){var l=s.hooks.didParseCell;s.callCellHooks(t,l,h,c,A,null);var g=h.padding("horizontal");h.contentWidth=dy(h.text,h.styles,t)+g;var v=dy(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,t);if(h.minReadableWidth=v+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||r===!0)h.contentWidth>o?(h.minWidth=o,h.wrappedWidth=o):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var m=10/n;h.minWidth=h.styles.minCellWidth||m,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),s.allRows().forEach(function(c){for(var p=0,f=s.columns;p<f.length;p++){var A=f[p],h=c.cells[A.index];if(h&&h.colSpan===1)A.wrappedWidth=Math.max(A.wrappedWidth,h.wrappedWidth),A.minWidth=Math.max(A.minWidth,h.minWidth),A.minReadableWidth=Math.max(A.minReadableWidth,h.minReadableWidth);else{var l=s.styles.columnStyles[A.dataKey]||s.styles.columnStyles[A.index]||{},g=l.cellWidth||l.minCellWidth;g&&typeof g=="number"&&(A.minWidth=g,A.wrappedWidth=g)}h&&(h.colSpan>1&&!A.minWidth&&(A.minWidth=h.minWidth),h.colSpan>1&&!A.wrappedWidth&&(A.wrappedWidth=h.minWidth))}})}function Yv(t,s,n){for(var r=s,o=t.reduce(function(m,N){return m+N.wrappedWidth},0),c=0;c<t.length;c++){var p=t[c],f=p.wrappedWidth/o,A=r*f,h=p.width+A,l=n(p),g=h<l?l:h;s-=g-p.width,p.width=g}if(s=Math.round(s*1e10)/1e10,s){var v=t.filter(function(m){return s<0?m.width>n(m):!0});v.length&&(s=Yv(v,s,n))}return s}function Sz(t){for(var s={},n=1,r=t.allRows(),o=0;o<r.length;o++)for(var c=r[o],p=0,f=t.columns;p<f.length;p++){var A=f[p],h=s[A.index];if(n>1)n--,delete c.cells[A.index];else if(h)h.cell.height+=c.height,n=h.cell.colSpan,delete c.cells[A.index],h.left--,h.left<=1&&delete s[A.index];else{var l=c.cells[A.index];if(!l)continue;if(l.height=c.height,l.rowSpan>1){var g=r.length-o,v=l.rowSpan>g?g:l.rowSpan;s[A.index]={cell:l,left:v,row:c}}}}}function Bz(t){for(var s=t.allRows(),n=0;n<s.length;n++)for(var r=s[n],o=null,c=0,p=0,f=0;f<t.columns.length;f++){var A=t.columns[f];if(p-=1,p>1&&t.columns[f+1])c+=A.width,delete r.cells[A.index];else if(o){var h=o;delete r.cells[A.index],o=null,h.width=A.width+c}else{var h=r.cells[A.index];if(!h)continue;if(p=h.colSpan,c=0,h.colSpan>1){o=h,c+=A.width;continue}h.width=A.width+c}}}function Nz(t,s){for(var n={count:0,height:0},r=0,o=t.allRows();r<o.length;r++){for(var c=o[r],p=0,f=t.columns;p<f.length;p++){var A=f[p],h=c.cells[A.index];if(h){s.applyStyles(h.styles,!0);var l=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=s.splitTextToSize(h.text,l+1/s.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=fB(h.text,l,h.styles,s,"...");else if(h.styles.overflow==="hidden")h.text=fB(h.text,l,h.styles,s,"");else if(typeof h.styles.overflow=="function"){var g=h.styles.overflow(h.text,l);typeof g=="string"?h.text=[g]:h.text=g}h.contentHeight=h.getContentHeight(s.scaleFactor(),s.getLineHeightFactor());var v=h.contentHeight/h.rowSpan;h.rowSpan>1&&n.count*n.height<v*h.rowSpan?n={height:v,count:h.rowSpan}:n&&n.count>0&&n.height>v&&(v=n.height),v>c.height&&(c.height=v)}}n.count--}}function fB(t,s,n,r,o){return t.map(function(c){return Cz(c,s,n,r,o)})}function Cz(t,s,n,r,o){var c=1e4*r.scaleFactor();if(s=Math.ceil(s*c)/c,s>=dy(t,n,r))return t;for(;s<dy(t+o,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+o}function bF(t,s){var n=new nf(t),r=Ez(s,n.scaleFactor()),o=new vz(s,r);return jz(n,o),n.applyStyles(n.userStyles),o}function Ez(t,s){var n=t.content,r=Fz(n.columns);if(n.head.length===0){var o=pB(r,"head");o&&n.head.push(o)}if(n.foot.length===0){var o=pB(r,"foot");o&&n.foot.push(o)}var c=t.settings.theme,p=t.styles;return{columns:r,head:z0("head",n.head,r,p,c,s),body:z0("body",n.body,r,p,c,s),foot:z0("foot",n.foot,r,p,c,s)}}function z0(t,s,n,r,o,c){var p={},f=s.map(function(A,h){for(var l=0,g={},v=0,m=0,N=0,w=n;N<w.length;N++){var E=w[N];if(p[E.index]==null||p[E.index].left===0)if(m===0){var F=void 0;Array.isArray(A)?F=A[E.index-v-l]:F=A[E.dataKey];var M={};typeof F=="object"&&!Array.isArray(F)&&(M=F?.styles||{});var k=Iz(t,E,h,o,r,c,M),K=new vF(F,k,t);g[E.dataKey]=K,g[E.index]=K,m=K.colSpan-1,p[E.index]={left:K.rowSpan-1,times:m}}else m--,v++;else p[E.index].left--,m=p[E.index].times,l++}return new xF(A,h,t,g)});return f}function pB(t,s){var n={};return t.forEach(function(r){if(r.raw!=null){var o=Tz(s,r.raw);o!=null&&(n[r.dataKey]=o)}}),Object.keys(n).length>0?n:null}function Tz(t,s){if(t==="head"){if(typeof s=="object")return s.header||null;if(typeof s=="string"||typeof s=="number")return s}else if(t==="foot"&&typeof s=="object")return s.footer;return null}function Fz(t){return t.map(function(s,n){var r,o;return typeof s=="object"?o=(r=s.dataKey)!==null&&r!==void 0?r:n:o=n,new bz(o,s,n)})}function Iz(t,s,n,r,o,c,p){var f=iz(r),A;t==="head"?A=o.headStyles:t==="body"?A=o.bodyStyles:t==="foot"&&(A=o.footStyles);var h=WA({},f.table,f[t],o.styles,A),l=o.columnStyles[s.dataKey]||o.columnStyles[s.index]||{},g=t==="body"?l:{},v=t==="body"&&n%2===0?WA({},f.alternateRow,o.alternateRowStyles):{},m=az(c),N=WA({},m,h,v,g);return WA(N,p)}function Rz(t,s,n){var r;n===void 0&&(n={});var o=pF(t,s),c=new Map,p=[],f=[],A=[];Array.isArray(s.settings.horizontalPageBreakRepeat)?A=s.settings.horizontalPageBreakRepeat:(typeof s.settings.horizontalPageBreakRepeat=="string"||typeof s.settings.horizontalPageBreakRepeat=="number")&&(A=[s.settings.horizontalPageBreakRepeat]),A.forEach(function(v){var m=s.columns.find(function(N){return N.dataKey===v||N.index===v});m&&!c.has(m.index)&&(c.set(m.index,!0),p.push(m.index),f.push(s.columns[m.index]),o-=m.wrappedWidth)});for(var h=!0,l=(r=n?.start)!==null&&r!==void 0?r:0;l<s.columns.length;){if(c.has(l)){l++;continue}var g=s.columns[l].wrappedWidth;if(h||o>=g)h=!1,p.push(l),f.push(s.columns[l]),o-=g;else break;l++}return{colIndexes:p,columns:f,lastIndex:l-1}}function Oz(t,s){for(var n=[],r=0;r<s.columns.length;r++){var o=Rz(t,s,{start:r});o.columns.length&&(n.push(o),r=o.lastIndex)}return n}function jF(t,s){var n=s.settings,r=n.startY,o=n.margin,c={x:o.left,y:r},p=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns),f=r+o.bottom+p;if(n.pageBreak==="avoid"){var A=s.body,h=A.reduce(function(v,m){return v+m.height},0);f+=h}var l=new nf(t);(n.pageBreak==="always"||n.startY!=null&&f>l.pageSize().height)&&(SF(l),c.y=o.top),s.callWillDrawPageHooks(l,c);var g=WA({},c);s.startPageNumber=l.pageNumber(),n.horizontalPageBreak?Uz(l,s,g,c):(l.applyStyles(l.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&s.head.forEach(function(v){return ed(l,s,v,c,s.columns)}),l.applyStyles(l.userStyles),s.body.forEach(function(v,m){var N=m===s.body.length-1;uy(l,s,v,N,g,c,s.columns)}),l.applyStyles(l.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&s.foot.forEach(function(v){return ed(l,s,v,c,s.columns)})),hF(l,s,g,c),s.callEndPageHooks(l,c),s.finalY=c.y,t.lastAutoTable=s,l.applyStyles(l.userStyles)}function Uz(t,s,n,r){var o=Oz(t,s),c=s.settings;if(c.horizontalPageBreakBehaviour==="afterAllRows")o.forEach(function(h,l){t.applyStyles(t.userStyles),l>0?_p(t,s,n,r,h.columns,!0):mB(t,s,r,h.columns),Lz(t,s,n,r,h.columns),G0(t,s,r,h.columns)});else for(var p=-1,f=o[0],A=function(){var h=p;if(f){t.applyStyles(t.userStyles);var l=f.columns;p>=0?_p(t,s,n,r,l,!0):mB(t,s,r,l),h=gB(t,s,p+1,r,l),G0(t,s,r,l)}var g=h-p;o.slice(1).forEach(function(v){t.applyStyles(t.userStyles),_p(t,s,n,r,v.columns,!0),gB(t,s,p+1,r,v.columns,g),G0(t,s,r,v.columns)}),p=h};p<s.body.length-1;)A()}function mB(t,s,n,r){var o=s.settings;t.applyStyles(t.userStyles),(o.showHead==="firstPage"||o.showHead==="everyPage")&&s.head.forEach(function(c){return ed(t,s,c,n,r)})}function Lz(t,s,n,r,o){t.applyStyles(t.userStyles),s.body.forEach(function(c,p){var f=p===s.body.length-1;uy(t,s,c,f,n,r,o)})}function gB(t,s,n,r,o,c){t.applyStyles(t.userStyles),c=c??s.body.length;var p=Math.min(n+c,s.body.length),f=-1;return s.body.slice(n,p).forEach(function(A,h){var l=n+h===s.body.length-1,g=wF(t,s,l,r);A.canEntireRowFit(g,o)&&(ed(t,s,A,r,o),f=n+h)}),f}function G0(t,s,n,r){var o=s.settings;t.applyStyles(t.userStyles),(o.showFoot==="lastPage"||o.showFoot==="everyPage")&&s.foot.forEach(function(c){return ed(t,s,c,n,r)})}function Dz(t,s,n){var r=n.getLineHeight(t.styles.fontSize),o=t.padding("vertical"),c=Math.floor((s-o)/r);return Math.max(0,c)}function Qz(t,s,n,r){var o={};t.spansMultiplePages=!0,t.height=0;for(var c=0,p=0,f=n.columns;p<f.length;p++){var A=f[p],h=t.cells[A.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var l=new vF(h.raw,h.styles,h.section);l=WA(l,h),l.text=[];var g=Dz(h,s,r);h.text.length>g&&(l.text=h.text.splice(g,h.text.length));var v=r.scaleFactor(),m=r.getLineHeightFactor();h.contentHeight=h.getContentHeight(v,m),h.contentHeight>=s&&(h.contentHeight=s,l.styles.minCellHeight-=s),h.contentHeight>t.height&&(t.height=h.contentHeight),l.contentHeight=l.getContentHeight(v,m),l.contentHeight>c&&(c=l.contentHeight),o[A.index]=l}}var N=new xF(t.raw,-1,t.section,o,!0);N.height=c;for(var w=0,E=n.columns;w<E.length;w++){var A=E[w],l=N.cells[A.index];l&&(l.height=N.height);var h=t.cells[A.index];h&&(h.height=t.height)}return N}function Mz(t,s,n,r){var o=t.pageSize().height,c=r.settings.margin,p=c.top+c.bottom,f=o-p;s.section==="body"&&(f-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var A=s.getMinimumRowHeight(r.columns,t),h=A<n;if(A>f)return console.error("Will not be able to print row ".concat(s.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var l=s.hasRowSpan(r.columns),g=s.getMaxCellHeight(r.columns)>f;return g?(l&&console.error("The content of row ".concat(s.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(l||r.settings.rowPageBreak==="avoid")}function uy(t,s,n,r,o,c,p){var f=wF(t,s,r,c);if(n.canEntireRowFit(f,p))ed(t,s,n,c,p);else if(Mz(t,n,f,s)){var A=Qz(n,f,s,t);ed(t,s,n,c,p),_p(t,s,o,c,p),uy(t,s,A,r,o,c,p)}else _p(t,s,o,c,p),uy(t,s,n,r,o,c,p)}function ed(t,s,n,r,o){r.x=s.settings.margin.left;for(var c=0,p=o;c<p.length;c++){var f=p[c],A=n.cells[f.index];if(!A){r.x+=f.width;continue}t.applyStyles(A.styles),A.x=r.x,A.y=r.y;var h=s.callCellHooks(t,s.hooks.willDrawCell,A,n,f,r);if(h===!1){r.x+=f.width;continue}_z(t,A,r);var l=A.getTextPos();AF(A.text,l.x,l.y,{halign:A.styles.halign,valign:A.styles.valign,maxWidth:Math.ceil(A.width-A.padding("left")-A.padding("right"))},t.getDocument()),s.callCellHooks(t,s.hooks.didDrawCell,A,n,f,r),r.x+=f.width}r.y+=n.height}function _z(t,s,n){var r=s.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var o=fF(r.lineWidth,r.fillColor);o&&t.rect(s.x,n.y,s.width,s.height,o)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(s.x,n.y,s.width,s.height,"F"),Pz(t,s,n,r.lineWidth))}function Pz(t,s,n,r){var o,c,p,f;r.top&&(o=n.x,c=n.y,p=n.x+s.width,f=n.y,r.right&&(p+=.5*r.right),r.left&&(o-=.5*r.left),A(r.top,o,c,p,f)),r.bottom&&(o=n.x,c=n.y+s.height,p=n.x+s.width,f=n.y+s.height,r.right&&(p+=.5*r.right),r.left&&(o-=.5*r.left),A(r.bottom,o,c,p,f)),r.left&&(o=n.x,c=n.y,p=n.x,f=n.y+s.height,r.top&&(c-=.5*r.top),r.bottom&&(f+=.5*r.bottom),A(r.left,o,c,p,f)),r.right&&(o=n.x+s.width,c=n.y,p=n.x+s.width,f=n.y+s.height,r.top&&(c-=.5*r.top),r.bottom&&(f+=.5*r.bottom),A(r.right,o,c,p,f));function A(h,l,g,v,m){t.getDocument().setLineWidth(h),t.getDocument().line(l,g,v,m,"S")}}function wF(t,s,n,r){var o=s.settings.margin.bottom,c=s.settings.showFoot;return(c==="everyPage"||c==="lastPage"&&n)&&(o+=s.getFootHeight(s.columns)),t.pageSize().height-r.y-o}function _p(t,s,n,r,o,c){o===void 0&&(o=[]),c===void 0&&(c=!1),t.applyStyles(t.userStyles),s.settings.showFoot==="everyPage"&&!c&&s.foot.forEach(function(f){return ed(t,s,f,r,o)}),s.callEndPageHooks(t,r);var p=s.settings.margin;hF(t,s,n,r),SF(t),s.pageNumber++,r.x=p.left,r.y=p.top,n.y=p.top,s.callWillDrawPageHooks(t,r),s.settings.showHead==="everyPage"&&(s.head.forEach(function(f){return ed(t,s,f,r,o)}),t.applyStyles(t.userStyles))}function SF(t){var s=t.pageNumber();t.setPage(s+1);var n=t.pageNumber();return n===s?(t.addPage(),!0):!1}function kz(t){t.API.autoTable=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];var r=s[0],o=yF(this,r),c=bF(this,o);return jF(this,c),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(s,n,r,o){AF(s,n,r,o,this)},t.API.autoTableSetDefaults=function(s){return nf.setDefaults(s,this),this},t.autoTableSetDefaults=function(s,n){nf.setDefaults(s,n)},t.API.autoTableHtmlToJson=function(s,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var o=new nf(this),c=gF(o,s,window,n,!1),p=c.head,f=c.body,A=((r=p[0])===null||r===void 0?void 0:r.map(function(h){return h.content}))||[];return{columns:A,rows:f,data:f}}}var V0;function Hz(t,s){var n=yF(t,s),r=bF(t,n);jF(t,r)}try{if(typeof window<"u"&&window){var yB=window,xB=yB.jsPDF||((V0=yB.jspdf)===null||V0===void 0?void 0:V0.jsPDF);xB&&kz(xB)}}catch(t){console.error("Could not apply autoTable plugin",t)}function Kz(){const[t,s]=C.useState([]),[n,r]=C.useState([]),[o,c]=C.useState([]),[p,f]=C.useState(""),[A,h]=C.useState(""),[l,g]=C.useState(""),[v,m]=C.useState(""),[N,w]=C.useState(null),[E,F]=C.useState(null),[M,k]=C.useState(!1),[K,G]=C.useState(null),[ee,V]=C.useState(!1),[X,J]=C.useState(!0),[he]=el(),{toast:q}=Ai(),[ie,Ae]=C.useState({});C.useEffect(()=>{(async()=>{try{const we=await nt("/api/boq-projects",{headers:{}});if(we.ok){const Te=await we.json();s(Te.projects||[])}}catch(we){console.error("Failed to load projects:",we)}finally{J(!1)}})()},[]),C.useEffect(()=>{if(!N){c([]),F(null),r([]);return}(async()=>{try{const we=await nt(`/api/boq-versions/${encodeURIComponent(N)}`,{headers:{}});if(we.ok){const qe=(await we.json()).versions||[];if(c(qe),!(E&&qe.some(ve=>ve.id===E))){const ve=qe.find(Ge=>Ge.status==="draft");ve?F(ve.id):qe.length>0?F(qe[0].id):F(null)}}}catch(we){console.error("Failed to load versions:",we)}})()},[N]),C.useEffect(()=>{if(!E){r([]),Ae({});return}(async()=>{try{const we=async ve=>{const Ge=(ve.headers.get("content-type")||"").toLowerCase(),at=await ve.text();if(ve.status===204||at.trim()==="")return{};if(Ge.includes("application/json"))try{return JSON.parse(at)}catch(pt){throw console.error("safeParseJson: JSON parse failed",{url:ve.url,status:ve.status,bodySnippet:at.slice(0,300),error:pt}),new Error("Invalid JSON response from server")}const Se=at.trim();if(Se.startsWith("{")||Se.startsWith("["))try{return JSON.parse(Se)}catch(pt){throw console.error("safeParseJson: body looks like JSON but parse failed",{url:ve.url,status:ve.status,bodySnippet:Se.slice(0,300),error:pt}),new Error("Invalid JSON response from server")}console.error("safeParseJson: server returned non-JSON response",{url:ve.url,status:ve.status,contentType:Ge,bodySnippet:at.slice(0,200)});const vt=Se.startsWith("<!DOCTYPE html")?"Looks like the request hit the frontend dev server (index.html) instead of the backend API. Check VITE_API_BASE_URL and dev server ports.":void 0,ht=`Server returned non-JSON response (status=${ve.status})${vt?" - "+vt:""}`;throw new Error(ht)},Te=await nt(`/api/boq-items/version/${encodeURIComponent(E)}`,{headers:{}});if(Te.ok)try{const ve=await we(Te);r(ve.items||[])}catch(ve){q({title:"Error",description:"Failed to parse BOQ items response",variant:"destructive"}),console.error("BOQ items parse error:",ve)}else{const ve=await Te.text();console.error("Failed to fetch BOQ items:",Te.status,ve),q({title:"Error",description:`Failed to load BOQ items (${Te.status})`,variant:"destructive"})}const qe=await nt(`/api/boq-versions/${encodeURIComponent(E)}/edits`,{headers:{}});if(qe.ok)try{const ve=await we(qe);Ae(ve.editedFields||{})}catch(ve){console.warn("Edits parse warning (non-fatal):",ve)}else{const ve=await qe.text();console.error("Failed to fetch edits:",qe.status,ve)}}catch(we){console.error("Failed to load BOQ items or edits:",we),q({title:"Error",description:"Failed to load BOQ items or edits",variant:"destructive"})}})()},[E]),C.useEffect(()=>{try{const ye=typeof he=="string"&&he.split("?")[1]||"",Te=new URLSearchParams(ye).get("project");Te&&Te!==N&&t.find(ve=>ve.id===Te)&&w(Te)}catch{}},[he,t]);const ce=()=>{N&&k(!0)},oe=ye=>{G(ye),k(!1),V(!0)},ne=async ye=>{if(console.log("handleAddToBoq called with items:",ye),console.log("Selected project:",N),console.log("Selected product:",K),console.log("Selected version:",E),!N||!K||!E){console.error("Missing required data for adding to BOQ"),q({title:"Error",description:"Please select a project, version, and product",variant:"destructive"});return}try{const we=re(K);if(console.log("Estimator type:",we),!we){q({title:"Error",description:"Could not determine estimator type",variant:"destructive"});return}const Te={product_name:K.name,product_id:K.id,category:K.category,subcategory:K.subcategory,step11_items:ye,created_at:new Date().toISOString()},qe={project_id:N,version_id:E,estimator:we,table_data:Te};console.log("Sending request to /api/boq-items:",qe);const ve=await nt("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(qe)});if(console.log("Response status:",ve.status),console.log("Response ok:",ve.ok),ve.ok){const Ge=await ve.text(),at=ve.headers.get("content-type")||"";if(!at.toLowerCase().includes("application/json"))throw console.error("Add-to-BOQ: server returned non-JSON response",{url:ve.url,status:ve.status,contentType:at,bodySnippet:Ge.slice(0,500)}),new Error("Server returned non-JSON response when adding BOQ item");let Se;try{Se=JSON.parse(Ge)}catch(ht){throw console.error("Add-to-BOQ: JSON parse failed",{url:ve.url,status:ve.status,bodySnippet:Ge.slice(0,500),error:ht}),new Error("Invalid JSON response from server when adding BOQ item")}console.log("Item added successfully:",Se),r(ht=>[...ht,Se]),q({title:"Success",description:`Added ${ye.length} items to BOQ`}),V(!1),G(null);const vt=await nt(`/api/boq-items/version/${encodeURIComponent(E)}`,{headers:{}});if(vt.ok){const ht=await vt.text();if(!(vt.headers.get("content-type")||"").toLowerCase().includes("application/json"))console.error("Reload BOQ items: non-JSON response",{url:vt.url,status:vt.status,bodySnippet:ht.slice(0,300)});else try{const Ze=JSON.parse(ht);console.log("Reloaded BOQ items:",Ze),r(Ze.items||[])}catch(Ze){console.error("Reload BOQ items: JSON parse failed",{url:vt.url,status:vt.status,error:Ze,bodySnippet:ht.slice(0,300)})}}}else{const Ge=await ve.text();throw console.error("API response error:",ve.status,Ge),new Error(`Failed to add items to BOQ: ${ve.status} ${Ge}`)}}catch(we){console.error("Failed to add to BOQ:",we),q({title:"Error",description:we instanceof Error?we.message:"Failed to add items to BOQ",variant:"destructive"})}},re=ye=>{const we=(ye.subcategory||ye.subcategory_name||"").toLowerCase(),Te=(ye.category||ye.category_name||"").toLowerCase(),qe=(ye.name||"").toLowerCase();if(we){if(we.includes("door"))return"doors";if(we.includes("electrical"))return"electrical";if(we.includes("plumb"))return"plumbing";if(we.includes("floor"))return"flooring";if(we.includes("paint"))return"painting";if(we.includes("ceiling"))return"falseceiling";if(we.includes("blind"))return"blinds";if(we.includes("civil")||we.includes("wall"))return"civilwall";if(we.includes("ms"))return"mswork";if(we.includes("ss"))return"sswork";if(we.includes("fire"))return"firefighting"}if(Te){if(Te.includes("door"))return"doors";if(Te.includes("electrical"))return"electrical";if(Te.includes("plumb"))return"plumbing";if(Te.includes("floor"))return"flooring";if(Te.includes("paint"))return"painting";if(Te.includes("ceiling"))return"falseceiling";if(Te.includes("blind"))return"blinds";if(Te.includes("civil")||Te.includes("wall"))return"civilwall"}const ve=(we||Te||qe).trim();if(ve){const Ge=ve.replace(/[-\s]/g,"");if(/\w+/.test(Ge))return Ge}return null},se=(ye,we,Te)=>{Ae(qe=>({...qe,[ye]:{...qe[ye],[we]:Te}}))},je=(ye,we,Te)=>ie[ye]?.[we]??Te,De=async()=>{if(E)try{if((await nt(`/api/boq-versions/${encodeURIComponent(E)}/save-edits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({editedFields:ie})})).ok)q({title:"Success",description:"BOQ version saved permanently with all edits"});else throw new Error("Failed to save edits")}catch(ye){console.error("Failed to save project:",ye),q({title:"Error",description:"Failed to save BOQ version",variant:"destructive"})}},ge=async()=>{if(E)try{await nt(`/api/boq-versions/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"submitted"})});const ye=await nt(`/api/boq-versions/${encodeURIComponent(N)}`,{headers:{}});if(ye.ok){const we=await ye.json();c(we.versions||[])}q({title:"Success",description:"BOQ version submitted and locked"})}catch(ye){console.error("Failed to submit version:",ye),q({title:"Error",description:"Failed to submit version",variant:"destructive"})}},Z=async ye=>{if(N)try{const we=o.length>0?o[0].id:null,Te=await nt("/api/boq-versions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:N,copy_from_version:ye?we:null})});if(Te.ok){const qe=await Te.json();c(ve=>[qe,...ve]),F(qe.id),q({title:"Success",description:`Created Version ${qe.version_number}`})}}catch(we){console.error("Failed to create version:",we),q({title:"Error",description:"Failed to create version",variant:"destructive"})}},fe=()=>{if(!N||n.length===0){q({title:"Info",description:"No BOQ items to download",variant:"default"});return}try{const ye=["S.No","Item","Description","Unit","Qty","Supply Rate","Install Rate","Supply Amount","Install Amount"],we=[];let Te=1,qe=0,ve=0,Ge=1;n.forEach(At=>{const Ct=At.table_data||{},It=Ct.step11_items||[],Wt=Ct.product_name||At.estimator;It.forEach((Es,Ss)=>{const _s=`${At.id}-${Ss}`,$e=je(_s,"qty",Es.qty||0),ke=je(_s,"supply_rate",Es.supply_rate||0),it=je(_s,"install_rate",Es.install_rate||0),tt=je(_s,"description",Es.description||""),Jt=je(_s,"unit",Es.unit||"pcs"),Qt=je(_s,"location",Es.location||""),ss=$e*ke,dt=$e*it;qe+=ss,ve+=dt,we.push([Ge.toString(),Es.title||Wt,tt,Jt,$e.toString(),ke.toString(),it.toString(),ss.toFixed(2),dt.toFixed(2)]),Ge++})}),we.push(["","","","","","","Total",qe.toFixed(2),ve.toFixed(2)]);const at=[ye.join(","),...we.map(At=>At.map(Ct=>Ct.includes(",")||Ct.includes('"')||Ct.includes(`
`)?`"${Ct.replace(/"/g,'""')}"`:Ct).join(","))].join(`
`),Se=new Blob([at],{type:"text/csv;charset=utf-8;"}),vt=document.createElement("a"),ht=URL.createObjectURL(Se),pt=pe?.name||"BOQ",Ze=Ce?`V${Ce.version_number}`:"draft",Ht=`${pt}_${Ze}_BOQ.csv`;vt.setAttribute("href",ht),vt.setAttribute("download",Ht),vt.style.visibility="hidden",document.body.appendChild(vt),vt.click(),document.body.removeChild(vt),q({title:"Success",description:`Downloaded ${Ht}`})}catch(ye){console.error("Download failed:",ye),q({title:"Error",description:"Failed to download BOQ",variant:"destructive"})}},ue=async()=>{if(!N||n.length===0){q({title:"Info",description:"No BOQ items to download",variant:"default"});return}try{const ye=[];let we=1;n.forEach(Ct=>{const It=Ct.table_data||{},Wt=It.step11_items||[],Es=It.product_name||Ct.estimator;Wt.forEach((Ss,_s)=>{const $e=`${Ct.id}-${_s}`,ke=je($e,"qty",Ss.qty||0),it=je($e,"supply_rate",Ss.supply_rate||0),tt=je($e,"install_rate",Ss.install_rate||0),Jt=je($e,"description",Ss.description||""),Qt=je($e,"unit",Ss.unit||"pcs"),ss=je($e,"location",Ss.location||""),dt=ke*it,qt=ke*tt;ye.push({sno:we,item:Ss.title||Es,description:Jt,unit:Qt,qty:ke,supply_rate:it,install_rate:tt,supply_amount:dt,install_amount:qt}),we++})});const Te="/image.png";let qe=null;try{const It=await(await fetch(Te)).blob(),Wt=new FileReader;qe=await new Promise(Es=>{Wt.onloadend=()=>Es(Wt.result),Wt.onerror=()=>Es(null),Wt.readAsDataURL(It)})}catch(Ct){console.warn("Could not load logo for PDF header",Ct)}const ve=new hn({orientation:"landscape"}),Ge=ve.internal.pageSize.getWidth(),at=10;if(qe){const Ct=ve.getImageProperties(qe),It=24,Wt=Ct.width/Ct.height*It;ve.addImage(qe,"PNG",10,at,Wt,It)}const Se=Ge-10;ve.setFontSize(10),ve.setFont(void 0,"bold");const vt=pe?.name||"BOQ",ht=pe?.client||"-",pt=pe?.budget||"-";ve.text(vt,Se,at+6,{align:"right"}),ve.setFontSize(9),ve.setFont(void 0,"normal"),ve.text(`Client: ${ht}`,Se,at+12,{align:"right"}),ve.text(`Budget: ${pt}`,Se,at+18,{align:"right"});const Ze=[{header:"S.No",dataKey:"sno"},{header:"Item",dataKey:"item"},{header:"Description",dataKey:"description"},{header:"Unit",dataKey:"unit"},{header:"Qty",dataKey:"qty"},{header:"Supply Rate",dataKey:"supply_rate"},{header:"Install Rate",dataKey:"install_rate"},{header:"Supply Amount",dataKey:"supply_amount"},{header:"Install Amount",dataKey:"install_amount"}];Hz(ve,{head:[Ze.map(Ct=>Ct.header)],body:ye.map(Ct=>Ze.map(It=>Ct[It.dataKey])),startY:at+30,styles:{fontSize:8},headStyles:{fillColor:[64,64,64],textColor:[255,255,255],fontStyle:"bold"},theme:"grid",didDrawPage:Ct=>{}});const Ht=Ce?`V${Ce.version_number}`:"draft",At=`${vt}_${Ht}_BOQ.pdf`;ve.save(At),q({title:"Success",description:`Downloaded ${At}`})}catch(ye){console.error("Failed to generate PDF",ye),q({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},pe=t.find(ye=>ye.id===N),Ce=o.find(ye=>ye.id===E),Ne=Ce?.status==="submitted";return X?e.jsx(ni,{children:e.jsx("div",{className:"text-center py-8",children:"Loading projects..."})}):e.jsx(ni,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Create BOQ"}),e.jsx(Vs,{children:e.jsxs(fn,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Select Project"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Xe,{children:"Projects"}),e.jsxs(Lr,{onValueChange:ye=>w(ye||null),children:[e.jsx(Er,{className:"w-full",children:e.jsx(Dr,{placeholder:t.length===0?"No projects":"Select project"})}),e.jsx(Tr,{children:t.map(ye=>e.jsxs(wr,{value:ye.id,children:[ye.name,"  ",ye.client||"(No client)","  ",ye.location||"(No location)"]},ye.id))})]})]}),pe&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",pe.budget||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",pe.status||"draft"]})]}),N&&e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"BOQ Versions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Lr,{value:E||"",onValueChange:F,children:[e.jsx(Er,{className:"flex-1",children:e.jsx(Dr,{placeholder:"Select version"})}),e.jsx(Tr,{children:o.map(ye=>e.jsxs(wr,{value:ye.id,children:[ye.project_name?`[${ye.project_name}] `:"","V",ye.version_number," (",ye.status==="submitted"?"Locked":"Draft",")"]},ye.id))})]}),E&&e.jsx(Ie,{onClick:async()=>{if(E&&confirm("Delete this version and all its BOQ items? This cannot be undone."))try{const ye=await nt(`/api/boq-versions/${encodeURIComponent(E)}`,{method:"DELETE"});if(ye.ok){const we=await nt(`/api/boq-versions/${encodeURIComponent(N)}`,{headers:{}});if(we.ok){const Te=await we.json();c(Te.versions||[]);const qe=(Te.versions||[]).find(ve=>ve.status==="draft");qe?F(qe.id):(Te.versions||[]).length>0?F(Te.versions[0].id):F(null),r([]),q({title:"Deleted",description:"Version removed"})}}else{const we=await ye.text();throw new Error(we||"Failed to delete version")}}catch(ye){console.error("Failed to delete version",ye),q({title:"Error",description:"Failed to delete version",variant:"destructive"})}},variant:"destructive",children:"Delete Version"}),o.length>0&&e.jsx(Ie,{onClick:()=>{const ye=o[0];confirm(`Copy items from V${ye.version_number}?`)?Z(!0):Z(!1)},variant:"outline",children:"+ New Version"}),o.length===0&&N&&e.jsx(Ie,{onClick:()=>Z(!1),variant:"outline",children:"Create V1"})]}),Ce&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 bg-blue-50 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",Ce.project_name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Version:"})," V",Ce.version_number]}),Ce.project_client&&e.jsxs("div",{children:[e.jsx("strong",{children:"Client:"})," ",Ce.project_client]}),Ce.project_location&&e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",Ce.project_location]}),Ne&&e.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold",children:"Submitted (Locked)"}),!Ne&&e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold",children:"Draft (Editable)"})]})]}),e.jsx(Ie,{onClick:ce,className:"w-full",disabled:Ne,children:"Add Product +"}),e.jsx(nz,{open:M,onOpenChange:k,onSelectProduct:oe,selectedProjectId:N}),K&&e.jsx(rz,{product:K,open:ee,onClose:()=>{V(!1),setTimeout(()=>{G(null)},300)},onAddToBoq:ne})]})]})}),N&&e.jsx(Vs,{children:e.jsxs(fn,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"BOQ Items"}),n.length===0?e.jsx("div",{className:"text-gray-500 text-center py-4",children:"No products added yet. Click Add Product +"}):e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"border-collapse text-xs min-w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100 border-b-2 border-gray-300",children:[e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-10",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-24",children:"Item"}),e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-24",children:"Description"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-16",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-18",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-1 py-2 text-center font-semibold",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-1 py-2 text-center font-semibold",children:"Amount"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-16",children:"Action"})]}),e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{colSpan:5}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-14",children:"Supply"}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-14",children:"Install"}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-16",children:"Supply"}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-16",children:"Install"}),e.jsx("th",{})]})]}),e.jsx("tbody",{children:(()=>{let ye=0;return n.flatMap((we,Te)=>{const qe=we.table_data||{},ve=qe.step11_items||[],Ge=qe.product_name||we.estimator;return ve.map((at,Se)=>{ye+=1;const vt=`${we.id}-${Se}`,ht=je(vt,"qty",at.qty||0),pt=je(vt,"supply_rate",at.supply_rate||0),Ze=je(vt,"install_rate",at.install_rate||0),Ht=je(vt,"description",at.description||""),At=je(vt,"unit",at.unit||"pcs");je(vt,"location",at.location||"");const Ct=ht*pt,It=ht*Ze;return e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-blue-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center text-xs",children:ye}),e.jsx("td",{className:"border px-2 py-1 font-medium text-xs",children:at.title||Ge}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:Ht,onChange:Wt=>se(vt,"description",Wt.target.value),disabled:Ne,className:"w-full border rounded px-1 py-0.5 text-xs min-h-8 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter description"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:At,onChange:Wt=>se(vt,"unit",Wt.target.value),disabled:Ne,className:"w-full border rounded px-1 py-0.5 text-xs text-center disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"pcs"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",value:ht,onChange:Wt=>se(vt,"qty",parseFloat(Wt.target.value)||0),disabled:Ne,className:"w-full border rounded px-1 py-0.5 text-xs text-center disabled:bg-gray-100 disabled:cursor-not-allowed font-semibold"})}),e.jsx("td",{className:"border px-1 py-1",children:e.jsx("input",{type:"number",value:pt,onChange:Wt=>se(vt,"supply_rate",parseFloat(Wt.target.value)||0),disabled:Ne,className:"w-full border rounded px-0.5 py-0.5 text-xs text-right disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0"})}),e.jsx("td",{className:"border px-1 py-1",children:e.jsx("input",{type:"number",value:Ze,onChange:Wt=>se(vt,"install_rate",parseFloat(Wt.target.value)||0),disabled:Ne,className:"w-full border rounded px-0.5 py-0.5 text-xs text-right disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0"})}),e.jsxs("td",{className:"border px-1 py-1 text-right font-medium text-xs",children:["",Ct.toFixed(2)]}),e.jsxs("td",{className:"border px-1 py-1 text-right font-medium text-xs",children:["",It.toFixed(2)]}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ie,{variant:"outline",size:"xs",disabled:Ne,onClick:async()=>{try{await nt(`/api/boq-items/${we.id}`,{method:"DELETE"}),r(Wt=>Wt.filter(Es=>Es.id!==we.id)),q({title:"Deleted",description:"BOQ item removed"})}catch{q({title:"Error",description:"Failed to delete item",variant:"destructive"})}},children:"Delete"})})]},vt)})})})()}),n.length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 border-t-2 border-gray-300 font-semibold text-xs",children:[e.jsx("td",{colSpan:7,className:"border px-1 py-1 text-right",children:"Subtotal"}),e.jsxs("td",{className:"border px-1 py-1 text-right",children:["",n.flatMap((ye,we)=>(ye.table_data?.step11_items||[]).map((Te,qe)=>{const ve=`${ye.id}-${qe}`,Ge=je(ve,"qty",Te.qty||0),at=je(ve,"supply_rate",Te.supply_rate||0);return Ge*at})).reduce((ye,we)=>ye+we,0).toFixed(2)]}),e.jsxs("td",{className:"border px-1 py-1 text-right",children:["",n.flatMap((ye,we)=>(ye.table_data?.step11_items||[]).map((Te,qe)=>{const ve=`${ye.id}-${qe}`,Ge=je(ve,"qty",Te.qty||0),at=je(ve,"install_rate",Te.install_rate||0);return Ge*at})).reduce((ye,we)=>ye+we,0).toFixed(2)]}),e.jsx("td",{})]})})]})})]})}),N&&E&&e.jsx(Vs,{children:e.jsxs(fn,{className:"space-y-3 pt-6",children:[Ne?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4 text-sm text-yellow-800",children:[e.jsx("strong",{children:"This version is locked."})," Submit a new version to make edits."]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(Ie,{onClick:De,variant:"outline",disabled:Ne,children:"Save Draft"}),e.jsx(Ie,{onClick:ge,variant:"default",disabled:Ne||n.length===0,children:"Submit & Lock Version"}),e.jsx(Ie,{onClick:fe,variant:"outline",disabled:n.length===0,children:"Download as Excel"}),e.jsx(Ie,{onClick:ue,variant:"outline",disabled:n.length===0,children:"Download as PDF"})]})]})})]})})}function zz(){const[t,s]=C.useState(""),[n,r]=C.useState(""),[o,c]=C.useState(""),[p,f]=C.useState(""),{toast:A}=Ai(),[h,l]=C.useState([]),[g,v]=C.useState({}),[m,N]=C.useState({}),[w,E]=C.useState({}),[F,M]=C.useState(new Set);C.useEffect(()=>{(async()=>{try{const X=await nt("/api/boq-projects",{headers:{}});if(X.ok){const J=await X.json();l(J.projects||[])}}catch(X){console.warn("Failed to load projects",X)}})()},[]);const k=async()=>{if(!t.trim()){A({title:"Error",description:"Project name is required",variant:"destructive"});return}try{const V=await nt("/api/boq-projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.trim(),client:n.trim(),budget:o.trim(),location:p.trim()})});if(V.ok){const X=await V.json();s(""),r(""),c(""),f(""),l(J=>[X,...J]),A({title:"Success",description:"Project created"})}else A({title:"Error",description:"Failed to create project",variant:"destructive"})}catch(V){console.error("Failed to create project:",V),A({title:"Error",description:"Failed to create project",variant:"destructive"})}},K=async V=>{if(v(X=>({...X,[V]:!X[V]})),!g[V]&&!m[V])try{const X=await nt(`/api/boq-versions/${encodeURIComponent(V)}`,{headers:{}});if(X.ok){const J=await X.json();N(he=>({...he,[V]:J.versions||[]})),(J.versions||[]).forEach(async he=>{try{const q=await nt(`/api/boq-items/version/${encodeURIComponent(he.id)}`,{headers:{}});if(q.ok){const ie=await q.json();E(Ae=>({...Ae,[he.id]:ie.items||[]}))}}catch(q){console.warn("Failed to load items for version",he.id,q)}})}}catch(X){console.warn("Failed to load versions",X)}},G=async V=>{if(confirm("Are you sure you want to delete this project? This cannot be undone."))try{(await nt(`/api/boq-projects/${V}`,{method:"DELETE"})).ok?(l(J=>J.filter(he=>he.id!==V)),A({title:"Success",description:"Project deleted"})):A({title:"Error",description:"Failed to delete project",variant:"destructive"})}catch(X){console.error("Failed to delete project:",X),A({title:"Error",description:"Failed to delete project",variant:"destructive"})}},ee=V=>{const X=V.flatMap(J=>(J.table_data?.step11_items||[]).map((he,q)=>({...he,_sourceId:J.id,_idx:q})));return X.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No Step 11 items"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 border-b",children:[e.jsx("th",{className:"border px-2 py-1",children:"S.No"}),e.jsx("th",{className:"border px-2 py-1",children:"Item"}),e.jsx("th",{className:"border px-2 py-1",children:"Description"}),e.jsx("th",{className:"border px-2 py-1",children:"Unit"}),e.jsx("th",{className:"border px-2 py-1",children:"Qty"}),e.jsx("th",{className:"border px-2 py-1",children:"Supply Rate"}),e.jsx("th",{className:"border px-2 py-1",children:"Install Rate"})]})}),e.jsx("tbody",{children:X.map((J,he)=>e.jsxs("tr",{className:"border-b hover:bg-blue-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:he+1}),e.jsx("td",{className:"border px-2 py-1",children:J.title||J.bill_no||""}),e.jsx("td",{className:"border px-2 py-1",children:J.description||""}),e.jsx("td",{className:"border px-2 py-1 text-center",children:J.unit||"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:J.qty??"0"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:J.supply_rate??"0"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:J.install_rate??"0"})]},`${J._sourceId}-${J._idx}`))})]})})};return e.jsx(ni,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Create Project"}),e.jsx(Vs,{children:e.jsxs(fn,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Create New Project"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Project Name"}),e.jsx(Ve,{value:t,onChange:V=>s(V.target.value),placeholder:"Project name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Client Name"}),e.jsx(Ve,{value:n,onChange:V=>r(V.target.value),placeholder:"Client"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Location"}),e.jsx(Ve,{value:p,onChange:V=>f(V.target.value),placeholder:"Location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Budget"}),e.jsx(Ve,{value:o,onChange:V=>c(V.target.value),placeholder:"Budget"})]})]}),e.jsx(Ie,{onClick:k,children:"Create Project"})]})}),e.jsx(Vs,{children:e.jsxs(fn,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Existing Projects"}),h.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No projects yet."}):e.jsx("ul",{className:"space-y-2",children:h.map(V=>e.jsxs("li",{className:"border rounded",children:[e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"text-sm px-2",onClick:()=>K(V.id),"aria-expanded":!!g[V.id],children:g[V.id]?"":""}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:V.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[V.client||"","  ",V.location||"","  ",V.budget||""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["V",V.current_version||""]}),e.jsx(Ie,{variant:"destructive",size:"sm",onClick:()=>G(V.id),children:"Delete"})]})]}),g[V.id]&&e.jsx("div",{className:"p-3 border-t",children:m[V.id]?m[V.id].length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No versions for this project."}):e.jsx("div",{className:"space-y-4",children:m[V.id].map(X=>e.jsxs("div",{className:"border rounded p-3 bg-gray-50 flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:F.has(X.id),onChange:J=>{const he=new Set(F);J.target.checked?he.add(X.id):he.delete(X.id),M(he)},className:"mt-1 w-4 h-4 cursor-pointer"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"font-medium",children:["V",X.version_number]}),e.jsx("div",{className:`text-xs px-2 py-0.5 rounded ${X.status==="submitted"?"bg-green-100 text-green-800":"bg-gray-100 text-muted-foreground"}`,children:X.status})]}),X.status==="submitted"?e.jsx("div",{className:"mb-2",children:w[X.id]?w[X.id].length>0?ee(w[X.id]):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No items in this version"}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading items..."})}):e.jsx("div",{className:"mb-2",children:w[X.id]?w[X.id].length>0?ee(w[X.id]):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No items added yet"}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading items..."})})]})]},X.id))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading versions..."})})]},V.id))})]})})]})})}const Gz=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}],Ng=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function Vz(){const{toast:t}=Ai(),[s,n]=C.useState([]),[r,o]=C.useState(!0),[c,p]=C.useState(!1),[f,A]=C.useState(!1),[h,l]=C.useState({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""});C.useEffect(()=>{g()},[]);const g=async()=>{try{const m=localStorage.getItem("authToken"),N=await fetch("/api/supplier/my-shops",{headers:m?{Authorization:`Bearer ${m}`}:{}});if(!N.ok){console.error("load shops failed",N.status),n([]);return}const w=await N.json();n(w.shops||[])}catch(m){console.error("Error loading shops:",m),n([])}finally{o(!1)}},v=async m=>{if(m.preventDefault(),!h.name.trim()){t({title:"Error",description:"Shop name is required",variant:"destructive"});return}if(!h.location.trim()||!h.city.trim()){t({title:"Error",description:"Location and city are required",variant:"destructive"});return}if(!h.contactNumber.trim()){t({title:"Error",description:"Contact number is required",variant:"destructive"});return}p(!0);try{const N=localStorage.getItem("authToken"),w=await fetch("/api/shops",{method:"POST",headers:{"Content-Type":"application/json",Authorization:N?`Bearer ${N}`:void 0},body:JSON.stringify(h)});if(!w.ok){const F=await w.text();throw console.error("submit shop failed",w.status,F),new Error(`Failed to submit shop (${w.status})`)}const E=await w.json();t({title:"Success",description:"Shop submitted for approval. Admin will review and approve it."}),l({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""}),A(!1),g()}catch(N){console.error("Error submitting shop:",N),t({title:"Error",description:"Failed to submit shop",variant:"destructive"})}finally{p(!1)}};return e.jsx(ni,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Shops"}),e.jsx("p",{className:"text-gray-600",children:"Add and manage your shops. Submit for approval to appear in the system."})]}),e.jsxs("div",{className:"grid gap-8",children:[!f&&e.jsxs(Ie,{onClick:()=>A(!0),className:"w-fit bg-blue-600 hover:bg-blue-700",children:[e.jsx(VA,{className:"mr-2 h-4 w-4"})," Add New Shop"]}),f&&e.jsxs(Vs,{className:"border-blue-200 bg-blue-50",children:[e.jsxs(ta,{children:[e.jsxs(sa,{className:"text-blue-900 flex items-center gap-2",children:[e.jsx(lc,{className:"h-5 w-5"})," Add New Shop"]}),e.jsx(ei,{className:"text-blue-800",children:"Fill in your shop details and submit for approval"})]}),e.jsx(fn,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Shop Name ",e.jsx(Ng,{})]}),e.jsx(Ve,{placeholder:"Enter shop name",value:h.name,onChange:m=>l({...h,name:m.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Location ",e.jsx(Ng,{})]}),e.jsx(Ve,{placeholder:"Enter location",value:h.location,onChange:m=>l({...h,location:m.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["City ",e.jsx(Ng,{})]}),e.jsx(Ve,{placeholder:"Enter city",value:h.city,onChange:m=>l({...h,city:m.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"State"}),e.jsx(Ve,{placeholder:"Enter state",value:h.state,onChange:m=>l({...h,state:m.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Country"}),e.jsx(Ve,{placeholder:"Enter country",value:h.country,onChange:m=>l({...h,country:m.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"Pincode"}),e.jsx(Ve,{placeholder:"Enter pincode",value:h.pincode,onChange:m=>l({...h,pincode:m.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Xe,{children:["Phone Number ",e.jsx(Ng,{})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Lr,{value:h.phoneCountryCode,onValueChange:m=>l({...h,phoneCountryCode:m}),children:[e.jsx(Er,{className:"w-28",children:e.jsx(Dr,{placeholder:"+91"})}),e.jsx(Tr,{children:Gz.map(m=>e.jsx(wr,{value:m.code,children:m.code},m.code))})]}),e.jsx(Ve,{placeholder:"Enter phone number",value:h.contactNumber,onChange:m=>l({...h,contactNumber:m.target.value}),type:"tel",className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Xe,{children:"GST Number"}),e.jsx(Ve,{placeholder:"Enter GST number",value:h.gstNo,onChange:m=>l({...h,gstNo:m.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ie,{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700",children:c?"Submitting...":"Submit for Approval"}),e.jsx(Ie,{type:"button",variant:"outline",onClick:()=>A(!1),disabled:c,children:"Cancel"})]})]})})]}),!r&&s.length>0&&e.jsxs(Vs,{children:[e.jsxs(ta,{children:[e.jsxs(sa,{children:["My Shops (",s.length,")"]}),e.jsx(ei,{children:"List of your submitted and approved shops"})]}),e.jsx(fn,{children:e.jsx("div",{className:"space-y-3",children:s.map(m=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:m.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.location,", ",m.city,m.state&&`, ${m.state}`]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m.phoneCountryCode," ",m.contactNumber]}),m.gstNo&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["GST: ",m.gstNo]})]}),e.jsx(qA,{variant:m.approved?"default":"secondary",children:m.approved?"Approved":"Pending"})]},m.id))})})]}),!r&&s.length===0&&!f&&e.jsx(Vs,{children:e.jsx(fn,{className:"pt-6",children:e.jsx("div",{className:"text-center text-gray-500",children:'No shops submitted yet. Click "Add New Shop" to get started.'})})})]})]})})}function $z(){return e.jsxs(WI,{children:[e.jsx(zr,{path:"/",component:fP}),e.jsx(zr,{path:"/signup",component:n8}),e.jsx(zr,{path:"/forgot-password",component:r8}),e.jsx(zr,{path:"/pending-approval",component:L2}),e.jsx(zr,{path:"/supplier-pending",component:L2}),e.jsx(zr,{path:"/dashboard",component:SH}),e.jsx(zr,{path:"/software/dashboard",component:BH}),e.jsx(zr,{path:"/purchase/dashboard",component:NH}),e.jsx(zr,{path:"/supplier/dashboard",component:CH}),e.jsx(zr,{path:"/subscription",component:tz}),e.jsx(zr,{path:"/create-project",component:zz}),e.jsx(zr,{path:"/create-boq",component:Kz}),e.jsx(zr,{path:"/item-master",component:ez}),e.jsx(zr,{path:"/boq-review",component:sz}),e.jsx(zr,{path:"/estimators/civil-wall",component:TK}),e.jsx(zr,{path:"/estimators/flooring",component:RK}),e.jsx(zr,{path:"/estimators/false-ceiling",component:LK}),e.jsx(zr,{path:"/estimators/painting",component:DK}),e.jsx(zr,{path:"/estimators/doors",component:PK}),e.jsx(zr,{path:"/estimators/blinds",component:KK}),e.jsx(zr,{path:"/estimators/electrical",component:VK}),e.jsx(zr,{path:"/estimators/plumbing",component:$K}),e.jsx(zr,{path:"/estimators/ms-work",component:WK}),e.jsx(zr,{path:"/estimators/ss-work",component:YK}),e.jsx(zr,{path:"/estimators/fire-fighting",component:XK}),e.jsx(zr,{path:"/estimators/:subcategory",component:ZK}),e.jsx(zr,{path:"/admin/dashboard",component:Dv}),e.jsx(zr,{path:"/admin/supplier-approval",component:W2}),e.jsx(zr,{path:"/admin/suppliers",component:W2}),e.jsx(zr,{path:"/admin/material-submissions",component:TH}),e.jsx(zr,{path:"/supplier/shops",component:Vz}),e.jsx(zr,{path:"/supplier/materials",component:uT}),e.jsx(zr,{component:vD})]})}function qz(){return e.jsx(xR,{client:jR,children:e.jsx(NR,{children:e.jsx(CR,{children:e.jsxs(yD,{children:[e.jsx(cU,{}),e.jsx($z,{})]})})})})}BI.createRoot(document.getElementById("root")).render(e.jsx(qz,{}));export{Aa as _,yj as c,Xv as g};
